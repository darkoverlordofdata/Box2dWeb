!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Box2D=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2ContactID = Box2D.Collision.b2ContactID;

Box2D.Collision.ClipVertex = (function() {
  ClipVertex.prototype.v = null;

  ClipVertex.prototype.id = null;

  function ClipVertex() {
    this.v = new b2Vec2();
    this.id = new b2ContactID();
    return;
  }

  ClipVertex.prototype.Set = function(other) {
    this.v.SetV(other.v);
    this.id.Set(other.id);
  };

  return ClipVertex;

})();

//# sourceMappingURL=ClipVertex.js.map

},{"../index":103}],2:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.Features = (function() {
  function Features() {}

  Object.defineProperties(Features.prototype, {
    referenceEdge: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._referenceEdge;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._referenceEdge = value;
        this._m_id._key = (this._m_id._key & 0xffffff00) | (this._referenceEdge & 0x000000ff);
      }
    },
    incidentEdge: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._incidentEdge;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._incidentEdge = value;
        this._m_id._key = (this._m_id._key & 0xffff00ff) | ((this._incidentEdge << 8) & 0x0000ff00);
      }
    },
    incidentVertex: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._incidentVertex;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._incidentVertex = value;
        this._m_id._key = (this._m_id._key & 0xff00ffff) | ((this._incidentVertex << 16) & 0x00ff0000);
      }
    },
    flip: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._flip;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._flip = value;
        this._m_id._key = (this._m_id._key & 0x00ffffff) | ((this._flip << 24) & 0xff000000);
      }
    }
  });

  return Features;

})();

//# sourceMappingURL=Features.js.map

},{"../index":103}],3:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2AABB = (function() {
  b2AABB.prototype.lowerBound = null;

  b2AABB.prototype.upperBound = null;

  function b2AABB() {
    this.lowerBound = new b2Vec2();
    this.upperBound = new b2Vec2();
    return;
  }

  b2AABB.prototype.IsValid = function() {
    var dX, dY, valid;
    dX = this.upperBound.x - this.lowerBound.x;
    dY = this.upperBound.y - this.lowerBound.y;
    valid = dX >= 0.0 && dY >= 0.0;
    valid = valid && this.lowerBound.IsValid() && this.upperBound.IsValid();
    return valid;
  };

  b2AABB.prototype.GetCenter = function() {
    return new b2Vec2((this.lowerBound.x + this.upperBound.x) / 2, (this.lowerBound.y + this.upperBound.y) / 2);
  };

  b2AABB.prototype.GetExtents = function() {
    return new b2Vec2((this.upperBound.x - this.lowerBound.x) / 2, (this.upperBound.y - this.lowerBound.y) / 2);
  };

  b2AABB.prototype.Contains = function(aabb) {
    var result;
    result = true;
    result = result && this.lowerBound.x <= aabb.lowerBound.x;
    result = result && this.lowerBound.y <= aabb.lowerBound.y;
    result = result && aabb.upperBound.x <= this.upperBound.x;
    result = result && aabb.upperBound.y <= this.upperBound.y;
    return result;
  };

  b2AABB.prototype.RayCast = function(output, input) {
    var absDX, absDY, dX, dY, inv_d, normal, pX, pY, s, t1, t2, t3, tmax, tmin;
    tmin = -Number.MAX_VALUE;
    tmax = Number.MAX_VALUE;
    pX = input.p1.x;
    pY = input.p1.y;
    dX = input.p2.x - input.p1.x;
    dY = input.p2.y - input.p1.y;
    absDX = Math.abs(dX);
    absDY = Math.abs(dY);
    normal = output.normal;
    inv_d = 0;
    t1 = 0;
    t2 = 0;
    t3 = 0;
    s = 0;
    if (absDX < Number.MIN_VALUE) {
      if (pX < this.lowerBound.x || this.upperBound.x < pX) {
        return false;
      }
    } else {
      inv_d = 1.0 / dX;
      t1 = (this.lowerBound.x - pX) * inv_d;
      t2 = (this.upperBound.x - pX) * inv_d;
      s = -1.0;
      if (t1 > t2) {
        t3 = t1;
        t1 = t2;
        t2 = t3;
        s = 1.0;
      }
      if (t1 > tmin) {
        normal.x = s;
        normal.y = 0;
        tmin = t1;
      }
      tmax = Math.min(tmax, t2);
      if (tmin > tmax) {
        return false;
      }
    }
    if (absDY < Number.MIN_VALUE) {
      if (pY < this.lowerBound.y || this.upperBound.y < pY) {
        return false;
      }
    } else {
      inv_d = 1.0 / dY;
      t1 = (this.lowerBound.y - pY) * inv_d;
      t2 = (this.upperBound.y - pY) * inv_d;
      s = -1.0;
      if (t1 > t2) {
        t3 = t1;
        t1 = t2;
        t2 = t3;
        s = 1.0;
      }
      if (t1 > tmin) {
        normal.y = s;
        normal.x = 0;
        tmin = t1;
      }
      tmax = Math.min(tmax, t2);
      if (tmin > tmax) {
        return false;
      }
    }
    output.fraction = tmin;
    return true;
  };

  b2AABB.prototype.TestOverlap = function(other) {
    var d1X, d1Y, d2X, d2Y;
    d1X = other.lowerBound.x - this.upperBound.x;
    d1Y = other.lowerBound.y - this.upperBound.y;
    d2X = this.lowerBound.x - other.upperBound.x;
    d2Y = this.lowerBound.y - other.upperBound.y;
    if (d1X > 0.0 || d1Y > 0.0) {
      return false;
    }
    if (d2X > 0.0 || d2Y > 0.0) {
      return false;
    }
    return true;
  };

  b2AABB.Combine = function(aabb1, aabb2) {
    var aabb;
    aabb = new b2AABB();
    aabb.Combine(aabb1, aabb2);
    return aabb;
  };

  b2AABB.prototype.Combine = function(aabb1, aabb2) {
    this.lowerBound.x = Math.min(aabb1.lowerBound.x, aabb2.lowerBound.x);
    this.lowerBound.y = Math.min(aabb1.lowerBound.y, aabb2.lowerBound.y);
    this.upperBound.x = Math.max(aabb1.upperBound.x, aabb2.upperBound.x);
    this.upperBound.y = Math.max(aabb1.upperBound.y, aabb2.upperBound.y);
  };

  return b2AABB;

})();

//# sourceMappingURL=b2AABB.js.map

},{"../index":103}],4:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2Bound = (function() {
  function b2Bound() {}

  b2Bound.prototype.value = 0;

  b2Bound.prototype.proxy = null;

  b2Bound.prototype.stabbingCount = 0;

  b2Bound.prototype.IsLower = function() {
    return (this.value & 1) === 0;
  };

  b2Bound.prototype.IsUpper = function() {
    return (this.value & 1) === 1;
  };

  b2Bound.prototype.Swap = function(b) {
    var tempProxy, tempStabbingCount, tempValue;
    tempValue = this.value;
    tempProxy = this.proxy;
    tempStabbingCount = this.stabbingCount;
    this.value = b.value;
    this.proxy = b.proxy;
    this.stabbingCount = b.stabbingCount;
    b.value = tempValue;
    b.proxy = tempProxy;
    b.stabbingCount = tempStabbingCount;
  };

  return b2Bound;

})();

//# sourceMappingURL=b2Bound.js.map

},{"../index":103}],5:[function(require,module,exports){
var Box2D, Vector;

Box2D = require('../index');

Vector = Box2D.Vector;

Box2D.Collision.b2BoundValues = (function() {
  b2BoundValues.prototype.lowerValues = null;

  b2BoundValues.prototype.upperValues = null;

  function b2BoundValues() {
    this.lowerValues = new Vector();
    this.lowerValues[0] = 0.0;
    this.lowerValues[1] = 0.0;
    this.upperValues = new Vector();
    this.upperValues[0] = 0.0;
    this.upperValues[1] = 0.0;
    return;
  }

  return b2BoundValues;

})();

//# sourceMappingURL=b2BoundValues.js.map

},{"../index":103}],6:[function(require,module,exports){
var Box2D, ClipVertex, Vector, b2Manifold, b2Settings, b2Vec2;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Settings = Box2D.Common.b2Settings;

ClipVertex = Box2D.Collision.ClipVertex;

b2Manifold = Box2D.Collision.b2Manifold;

Box2D.Collision.b2Collision = (function() {
  function b2Collision() {}

  b2Collision.b2_nullFeature = 0x000000ff;

  b2Collision.s_edgeAO = new Vector(1);

  b2Collision.s_edgeBO = new Vector(1);

  b2Collision.s_localTangent = new b2Vec2();

  b2Collision.s_localNormal = new b2Vec2();

  b2Collision.s_planePoint = new b2Vec2();

  b2Collision.s_normal = new b2Vec2();

  b2Collision.s_tangent = new b2Vec2();

  b2Collision.s_tangent2 = new b2Vec2();

  b2Collision.s_v11 = new b2Vec2();

  b2Collision.s_v12 = new b2Vec2();

  b2Collision.b2CollidePolyTempVec = new b2Vec2();

  b2Collision.ClipSegmentToLine = function(vOut, vIn, normal, offset) {
    var cv, cv2, distance0, distance1, interp, numOut, tVec, vIn0, vIn1;
    if (offset === void 0) {
      offset = 0;
    }
    cv = void 0;
    numOut = 0;
    cv = vIn[0];
    vIn0 = cv.v;
    cv = vIn[1];
    vIn1 = cv.v;
    distance0 = normal.x * vIn0.x + normal.y * vIn0.y - offset;
    distance1 = normal.x * vIn1.x + normal.y * vIn1.y - offset;
    if (distance0 <= 0.0) {
      vOut[numOut++].Set(vIn[0]);
    }
    if (distance1 <= 0.0) {
      vOut[numOut++].Set(vIn[1]);
    }
    if (distance0 * distance1 < 0.0) {
      interp = distance0 / (distance0 - distance1);
      cv = vOut[numOut];
      tVec = cv.v;
      tVec.x = vIn0.x + interp * (vIn1.x - vIn0.x);
      tVec.y = vIn0.y + interp * (vIn1.y - vIn0.y);
      cv = vOut[numOut];
      cv2 = void 0;
      if (distance0 > 0.0) {
        cv2 = vIn[0];
        cv.id = cv2.id;
      } else {
        cv2 = vIn[1];
        cv.id = cv2.id;
      }
      ++numOut;
    }
    return numOut;
  };

  b2Collision.EdgeSeparation = function(poly1, xf1, edge1, poly2, xf2) {
    var count1, count2, dot, i, index, minDot, normal1WorldX, normal1WorldY, normal1X, normal1Y, normals1, separation, tMat, tVec, v1X, v1Y, v2X, v2Y, vertices1, vertices2;
    if (edge1 === void 0) {
      edge1 = 0;
    }
    count1 = parseInt(poly1.m_vertexCount);
    vertices1 = poly1.m_vertices;
    normals1 = poly1.m_normals;
    count2 = parseInt(poly2.m_vertexCount);
    vertices2 = poly2.m_vertices;
    tMat = void 0;
    tVec = void 0;
    tMat = xf1.R;
    tVec = normals1[edge1];
    normal1WorldX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    normal1WorldY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    tMat = xf2.R;
    normal1X = tMat.col1.x * normal1WorldX + tMat.col1.y * normal1WorldY;
    normal1Y = tMat.col2.x * normal1WorldX + tMat.col2.y * normal1WorldY;
    index = 0;
    minDot = Number.MAX_VALUE;
    i = 0;
    while (i < count2) {
      tVec = vertices2[i];
      dot = tVec.x * normal1X + tVec.y * normal1Y;
      if (dot < minDot) {
        minDot = dot;
        index = i;
      }
      ++i;
    }
    tVec = vertices1[edge1];
    tMat = xf1.R;
    v1X = xf1.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    v1Y = xf1.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tVec = vertices2[index];
    tMat = xf2.R;
    v2X = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    v2Y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    v2X -= v1X;
    v2Y -= v1Y;
    separation = v2X * normal1WorldX + v2Y * normal1WorldY;
    return separation;
  };

  b2Collision.FindMaxSeparation = function(edgeIndex, poly1, xf1, poly2, xf2) {
    var bestEdge, bestSeparation, count1, dLocal1X, dLocal1Y, dX, dY, dot, edge, i, increment, maxDot, nextEdge, normals1, prevEdge, s, sNext, sPrev, tMat, tVec;
    count1 = parseInt(poly1.m_vertexCount);
    normals1 = poly1.m_normals;
    tVec = void 0;
    tMat = void 0;
    tMat = xf2.R;
    tVec = poly2.m_centroid;
    dX = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    dY = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tMat = xf1.R;
    tVec = poly1.m_centroid;
    dX -= xf1.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    dY -= xf1.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    dLocal1X = dX * xf1.R.col1.x + dY * xf1.R.col1.y;
    dLocal1Y = dX * xf1.R.col2.x + dY * xf1.R.col2.y;
    edge = 0;
    maxDot = -Number.MAX_VALUE;
    i = 0;
    while (i < count1) {
      tVec = normals1[i];
      dot = tVec.x * dLocal1X + tVec.y * dLocal1Y;
      if (dot > maxDot) {
        maxDot = dot;
        edge = i;
      }
      ++i;
    }
    s = b2Collision.EdgeSeparation(poly1, xf1, edge, poly2, xf2);
    prevEdge = parseInt((edge - 1 >= 0 ? edge - 1 : count1 - 1));
    sPrev = b2Collision.EdgeSeparation(poly1, xf1, prevEdge, poly2, xf2);
    nextEdge = parseInt((edge + 1 < count1 ? edge + 1 : 0));
    sNext = b2Collision.EdgeSeparation(poly1, xf1, nextEdge, poly2, xf2);
    bestEdge = 0;
    bestSeparation = 0;
    increment = 0;
    if (sPrev > s && sPrev > sNext) {
      increment = -1.;
      bestEdge = prevEdge;
      bestSeparation = sPrev;
    } else if (sNext > s) {
      increment = 1;
      bestEdge = nextEdge;
      bestSeparation = sNext;
    } else {
      edgeIndex[0] = edge;
      return s;
    }
    while (true) {
      if (increment === (-1)) {
        edge = (bestEdge - 1 >= 0 ? bestEdge - 1 : count1 - 1);
      } else {
        edge = (bestEdge + 1 < count1 ? bestEdge + 1 : 0);
      }
      s = b2Collision.EdgeSeparation(poly1, xf1, edge, poly2, xf2);
      if (s > bestSeparation) {
        bestEdge = edge;
        bestSeparation = s;
      } else {
        break;
      }
    }
    edgeIndex[0] = bestEdge;
    return bestSeparation;
  };

  b2Collision.FindIncidentEdge = function(c, poly1, xf1, edge1, poly2, xf2) {
    var count1, count2, dot, i, i1, i2, index, minDot, normal1X, normal1Y, normals1, normals2, tClip, tMat, tVec, tX, vertices2;
    if (edge1 === void 0) {
      edge1 = 0;
    }
    count1 = parseInt(poly1.m_vertexCount);
    normals1 = poly1.m_normals;
    count2 = parseInt(poly2.m_vertexCount);
    vertices2 = poly2.m_vertices;
    normals2 = poly2.m_normals;
    tMat = void 0;
    tVec = void 0;
    tMat = xf1.R;
    tVec = normals1[edge1];
    normal1X = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    normal1Y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    tMat = xf2.R;
    tX = tMat.col1.x * normal1X + tMat.col1.y * normal1Y;
    normal1Y = tMat.col2.x * normal1X + tMat.col2.y * normal1Y;
    normal1X = tX;
    index = 0;
    minDot = Number.MAX_VALUE;
    i = 0;
    while (i < count2) {
      tVec = normals2[i];
      dot = normal1X * tVec.x + normal1Y * tVec.y;
      if (dot < minDot) {
        minDot = dot;
        index = i;
      }
      ++i;
    }
    tClip = void 0;
    i1 = parseInt(index);
    i2 = parseInt((i1 + 1 < count2 ? i1 + 1 : 0));
    tClip = c[0];
    tVec = vertices2[i1];
    tMat = xf2.R;
    tClip.v.x = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    tClip.v.y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tClip.id.features.referenceEdge = edge1;
    tClip.id.features.incidentEdge = i1;
    tClip.id.features.incidentVertex = 0;
    tClip = c[1];
    tVec = vertices2[i2];
    tMat = xf2.R;
    tClip.v.x = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    tClip.v.y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tClip.id.features.referenceEdge = edge1;
    tClip.id.features.incidentEdge = i2;
    tClip.id.features.incidentVertex = 1;
  };

  b2Collision.MakeClipPointVector = function() {
    var r;
    r = new Array(2);
    r[0] = new ClipVertex();
    r[1] = new ClipVertex();
    return r;
  };

  b2Collision.CollidePolygons = function(manifold, polyA, xfA, polyB, xfB) {
    var clipPoints1, clipPoints2, count1, cp, cv, edge1, edgeA, edgeB, flip, frontOffset, i, incidentEdge, k_absoluteTol, k_relativeTol, localNormal, localTangent, local_v11, local_v12, normal, np, planePoint, pointCount, poly1, poly2, separation, separationA, separationB, sideOffset1, sideOffset2, tMat, tX, tY, tangent, tangent2, totalRadius, v11, v12, vertices1, xf1, xf2;
    cv = void 0;
    manifold.m_pointCount = 0;
    totalRadius = polyA.m_radius + polyB.m_radius;
    edgeA = 0;
    b2Collision.s_edgeAO[0] = edgeA;
    separationA = b2Collision.FindMaxSeparation(b2Collision.s_edgeAO, polyA, xfA, polyB, xfB);
    edgeA = b2Collision.s_edgeAO[0];
    if (separationA > totalRadius) {
      return;
    }
    edgeB = 0;
    b2Collision.s_edgeBO[0] = edgeB;
    separationB = b2Collision.FindMaxSeparation(b2Collision.s_edgeBO, polyB, xfB, polyA, xfA);
    edgeB = b2Collision.s_edgeBO[0];
    if (separationB > totalRadius) {
      return;
    }
    poly1 = void 0;
    poly2 = void 0;
    xf1 = void 0;
    xf2 = void 0;
    edge1 = 0;
    flip = 0;
    k_relativeTol = 0.98;
    k_absoluteTol = 0.001;
    tMat = void 0;
    if (separationB > k_relativeTol * separationA + k_absoluteTol) {
      poly1 = polyB;
      poly2 = polyA;
      xf1 = xfB;
      xf2 = xfA;
      edge1 = edgeB;
      manifold.m_type = b2Manifold.e_faceB;
      flip = 1;
    } else {
      poly1 = polyA;
      poly2 = polyB;
      xf1 = xfA;
      xf2 = xfB;
      edge1 = edgeA;
      manifold.m_type = b2Manifold.e_faceA;
      flip = 0;
    }
    incidentEdge = b2Collision.s_incidentEdge;
    b2Collision.FindIncidentEdge(incidentEdge, poly1, xf1, edge1, poly2, xf2);
    count1 = parseInt(poly1.m_vertexCount);
    vertices1 = poly1.m_vertices;
    local_v11 = vertices1[edge1];
    local_v12 = void 0;
    if (edge1 + 1 < count1) {
      local_v12 = vertices1[parseInt(edge1 + 1)];
    } else {
      local_v12 = vertices1[0];
    }
    localTangent = b2Collision.s_localTangent;
    localTangent.Set(local_v12.x - local_v11.x, local_v12.y - local_v11.y);
    localTangent.Normalize();
    localNormal = b2Collision.s_localNormal;
    localNormal.x = localTangent.y;
    localNormal.y = -localTangent.x;
    planePoint = b2Collision.s_planePoint;
    planePoint.Set(0.5 * (local_v11.x + local_v12.x), 0.5 * (local_v11.y + local_v12.y));
    tangent = b2Collision.s_tangent;
    tMat = xf1.R;
    tangent.x = tMat.col1.x * localTangent.x + tMat.col2.x * localTangent.y;
    tangent.y = tMat.col1.y * localTangent.x + tMat.col2.y * localTangent.y;
    tangent2 = b2Collision.s_tangent2;
    tangent2.x = -tangent.x;
    tangent2.y = -tangent.y;
    normal = b2Collision.s_normal;
    normal.x = tangent.y;
    normal.y = -tangent.x;
    v11 = b2Collision.s_v11;
    v12 = b2Collision.s_v12;
    v11.x = xf1.position.x + (tMat.col1.x * local_v11.x + tMat.col2.x * local_v11.y);
    v11.y = xf1.position.y + (tMat.col1.y * local_v11.x + tMat.col2.y * local_v11.y);
    v12.x = xf1.position.x + (tMat.col1.x * local_v12.x + tMat.col2.x * local_v12.y);
    v12.y = xf1.position.y + (tMat.col1.y * local_v12.x + tMat.col2.y * local_v12.y);
    frontOffset = normal.x * v11.x + normal.y * v11.y;
    sideOffset1 = (-tangent.x * v11.x) - tangent.y * v11.y + totalRadius;
    sideOffset2 = tangent.x * v12.x + tangent.y * v12.y + totalRadius;
    clipPoints1 = b2Collision.s_clipPoints1;
    clipPoints2 = b2Collision.s_clipPoints2;
    np = 0;
    np = b2Collision.ClipSegmentToLine(clipPoints1, incidentEdge, tangent2, sideOffset1);
    if (np < 2) {
      return;
    }
    np = b2Collision.ClipSegmentToLine(clipPoints2, clipPoints1, tangent, sideOffset2);
    if (np < 2) {
      return;
    }
    manifold.m_localPlaneNormal.SetV(localNormal);
    manifold.m_localPoint.SetV(planePoint);
    pointCount = 0;
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      cv = clipPoints2[i];
      separation = normal.x * cv.v.x + normal.y * cv.v.y - frontOffset;
      if (separation <= totalRadius) {
        cp = manifold.m_points[pointCount];
        tMat = xf2.R;
        tX = cv.v.x - xf2.position.x;
        tY = cv.v.y - xf2.position.y;
        cp.m_localPoint.x = tX * tMat.col1.x + tY * tMat.col1.y;
        cp.m_localPoint.y = tX * tMat.col2.x + tY * tMat.col2.y;
        cp.m_id.Set(cv.id);
        cp.m_id.features.flip = flip;
        ++pointCount;
      }
      ++i;
    }
    manifold.m_pointCount = pointCount;
  };

  b2Collision.CollideCircles = function(manifold, circle1, xf1, circle2, xf2) {
    var dX, dY, distSqr, p1X, p1Y, p2X, p2Y, radius, tMat, tVec;
    manifold.m_pointCount = 0;
    tMat = void 0;
    tVec = void 0;
    tMat = xf1.R;
    tVec = circle1.m_p;
    p1X = xf1.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    p1Y = xf1.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tMat = xf2.R;
    tVec = circle2.m_p;
    p2X = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    p2Y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    distSqr = dX * dX + dY * dY;
    radius = circle1.m_radius + circle2.m_radius;
    if (distSqr > radius * radius) {
      return;
    }
    manifold.m_type = b2Manifold.e_circles;
    manifold.m_localPoint.SetV(circle1.m_p);
    manifold.m_localPlaneNormal.SetZero();
    manifold.m_pointCount = 1;
    manifold.m_points[0].m_localPoint.SetV(circle2.m_p);
    manifold.m_points[0].m_id.key = 0;
  };

  b2Collision.CollidePolygonAndCircle = function(manifold, polygon, xf1, circle, xf2) {
    var cLocalX, cLocalY, cX, cY, dX, dY, dist, faceCenterX, faceCenterY, i, normalIndex, normals, positionX, positionY, radius, s, separation, tMat, tPoint, tVec, u1, u2, v1, v2, vertIndex1, vertIndex2, vertexCount, vertices;
    manifold.m_pointCount = 0;
    tPoint = void 0;
    dX = 0;
    dY = 0;
    positionX = 0;
    positionY = 0;
    tVec = void 0;
    tMat = void 0;
    tMat = xf2.R;
    tVec = circle.m_p;
    cX = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    cY = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    dX = cX - xf1.position.x;
    dY = cY - xf1.position.y;
    tMat = xf1.R;
    cLocalX = dX * tMat.col1.x + dY * tMat.col1.y;
    cLocalY = dX * tMat.col2.x + dY * tMat.col2.y;
    dist = 0;
    normalIndex = 0;
    separation = -Number.MAX_VALUE;
    radius = polygon.m_radius + circle.m_radius;
    vertexCount = parseInt(polygon.m_vertexCount);
    vertices = polygon.m_vertices;
    normals = polygon.m_normals;
    i = 0;
    while (i < vertexCount) {
      tVec = vertices[i];
      dX = cLocalX - tVec.x;
      dY = cLocalY - tVec.y;
      tVec = normals[i];
      s = tVec.x * dX + tVec.y * dY;
      if (s > radius) {
        return;
      }
      if (s > separation) {
        separation = s;
        normalIndex = i;
      }
      ++i;
    }
    vertIndex1 = parseInt(normalIndex);
    vertIndex2 = parseInt((vertIndex1 + 1 < vertexCount ? vertIndex1 + 1 : 0));
    v1 = vertices[vertIndex1];
    v2 = vertices[vertIndex2];
    if (separation < Number.MIN_VALUE) {
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.SetV(normals[normalIndex]);
      manifold.m_localPoint.x = 0.5 * (v1.x + v2.x);
      manifold.m_localPoint.y = 0.5 * (v1.y + v2.y);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
      return;
    }
    u1 = (cLocalX - v1.x) * (v2.x - v1.x) + (cLocalY - v1.y) * (v2.y - v1.y);
    u2 = (cLocalX - v2.x) * (v1.x - v2.x) + (cLocalY - v2.y) * (v1.y - v2.y);
    if (u1 <= 0.0) {
      if ((cLocalX - v1.x) * (cLocalX - v1.x) + (cLocalY - v1.y) * (cLocalY - v1.y) > radius * radius) {
        return;
      }
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.x = cLocalX - v1.x;
      manifold.m_localPlaneNormal.y = cLocalY - v1.y;
      manifold.m_localPlaneNormal.Normalize();
      manifold.m_localPoint.SetV(v1);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
    } else if (u2 <= 0) {
      if ((cLocalX - v2.x) * (cLocalX - v2.x) + (cLocalY - v2.y) * (cLocalY - v2.y) > radius * radius) {
        return;
      }
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.x = cLocalX - v2.x;
      manifold.m_localPlaneNormal.y = cLocalY - v2.y;
      manifold.m_localPlaneNormal.Normalize();
      manifold.m_localPoint.SetV(v2);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
    } else {
      faceCenterX = 0.5 * (v1.x + v2.x);
      faceCenterY = 0.5 * (v1.y + v2.y);
      separation = (cLocalX - faceCenterX) * normals[vertIndex1].x + (cLocalY - faceCenterY) * normals[vertIndex1].y;
      if (separation > radius) {
        return;
      }
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.x = normals[vertIndex1].x;
      manifold.m_localPlaneNormal.y = normals[vertIndex1].y;
      manifold.m_localPlaneNormal.Normalize();
      manifold.m_localPoint.Set(faceCenterX, faceCenterY);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
    }
  };

  b2Collision.TestOverlap = function(a, b) {
    var d1X, d1Y, d2X, d2Y, t1, t2;
    t1 = b.lowerBound;
    t2 = a.upperBound;
    d1X = t1.x - t2.x;
    d1Y = t1.y - t2.y;
    t1 = a.lowerBound;
    t2 = b.upperBound;
    d2X = t1.x - t2.x;
    d2Y = t1.y - t2.y;
    if (d1X > 0.0 || d1Y > 0.0) {
      return false;
    }
    if (d2X > 0.0 || d2Y > 0.0) {
      return false;
    }
    return true;
  };

  b2Collision.s_incidentEdge = b2Collision.MakeClipPointVector();

  b2Collision.s_clipPoints1 = b2Collision.MakeClipPointVector();

  b2Collision.s_clipPoints2 = b2Collision.MakeClipPointVector();

  return b2Collision;

})();

//# sourceMappingURL=b2Collision.js.map

},{"../index":103}],7:[function(require,module,exports){
var Box2D, Features;

Box2D = require('../index');

Features = Box2D.Collision.Features;

Box2D.Collision.b2ContactID = (function() {
  b2ContactID.prototype.key = null;

  b2ContactID.prototype.features = null;

  function b2ContactID() {
    this.features = new Features();
    this.features._m_id = this;
    return;
  }

  b2ContactID.prototype.Set = function(id) {
    this.key = id._key;
  };

  b2ContactID.prototype.Copy = function() {
    var id;
    id = new b2ContactID();
    id.key = this.key;
    return id;
  };

  Object.defineProperties(b2ContactID.prototype, {
    key: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._key;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._key = value;
        this.features._referenceEdge = this._key & 0x000000ff;
        this.features._incidentEdge = ((this._key & 0x0000ff00) >> 8) & 0x000000ff;
        this.features._incidentVertex = ((this._key & 0x00ff0000) >> 16) & 0x000000ff;
        this.features._flip = ((this._key & 0xff000000) >> 24) & 0x000000ff;
      }
    }
  });

  return b2ContactID;

})();

//# sourceMappingURL=b2ContactID.js.map

},{"../index":103}],8:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2ContactID = Box2D.Collision.b2ContactID;

Box2D.Collision.b2ContactPoint = (function() {
  b2ContactPoint.prototype.position = null;

  b2ContactPoint.prototype.velocity = null;

  b2ContactPoint.prototype.normal = null;

  b2ContactPoint.prototype.id = null;

  function b2ContactPoint() {
    this.position = new b2Vec2();
    this.velocity = new b2Vec2();
    this.normal = new b2Vec2();
    this.id = new b2ContactID();
    return;
  }

  return b2ContactPoint;

})();

//# sourceMappingURL=b2ContactPoint.js.map

},{"../index":103}],9:[function(require,module,exports){
var Box2D, Vector, b2Math, b2Settings, b2Simplex;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Math = Box2D.Common.Math.b2Math;

b2Simplex = Box2D.Collision.b2Simplex;

b2Settings = Box2D.Common.b2Settings;

Box2D.Collision.b2Distance = (function() {
  function b2Distance() {}

  b2Distance.Distance = function(output, cache, input) {
    var closestPoint, d, distanceSqr1, distanceSqr2, duplicate, i, iter, k_maxIters, normal, p, proxyA, proxyB, rA, rB, saveA, saveB, saveCount, simplex, transformA, transformB, vertex, vertices;
    proxyA = input.proxyA;
    proxyB = input.proxyB;
    transformA = input.transformA;
    transformB = input.transformB;
    simplex = b2Distance.s_simplex;
    simplex.ReadCache(cache, proxyA, transformA, proxyB, transformB);
    vertices = simplex.m_vertices;
    k_maxIters = 20;
    saveA = b2Distance.s_saveA;
    saveB = b2Distance.s_saveB;
    saveCount = 0;
    closestPoint = simplex.GetClosestPoint();
    distanceSqr1 = closestPoint.LengthSquared();
    distanceSqr2 = distanceSqr1;
    i = 0;
    p = void 0;
    iter = 0;
    while (iter < k_maxIters) {
      saveCount = simplex.m_count;
      i = 0;
      while (i < saveCount) {
        saveA[i] = vertices[i].indexA;
        saveB[i] = vertices[i].indexB;
        i++;
      }
      switch (simplex.m_count) {
        case 1:
          i = i;
          break;
        case 2:
          simplex.Solve2();
          break;
        case 3:
          simplex.Solve3();
          break;
        default:
          b2Settings.b2Assert(false);
      }
      if (simplex.m_count === 3) {
        break;
      }
      p = simplex.GetClosestPoint();
      distanceSqr2 = p.LengthSquared();

      /**
      todo: this looks like a bug
       */
      distanceSqr1 = distanceSqr2;
      d = simplex.GetSearchDirection();
      if (d.LengthSquared() < Number.MIN_VALUE * Number.MIN_VALUE) {
        break;
      }
      vertex = vertices[simplex.m_count];
      vertex.indexA = proxyA.GetSupport(b2Math.MulTMV(transformA.R, d.GetNegative()));
      vertex.wA = b2Math.MulX(transformA, proxyA.GetVertex(vertex.indexA));
      vertex.indexB = proxyB.GetSupport(b2Math.MulTMV(transformB.R, d));
      vertex.wB = b2Math.MulX(transformB, proxyB.GetVertex(vertex.indexB));
      vertex.w = b2Math.SubtractVV(vertex.wB, vertex.wA);
      ++iter;
      ++b2Distance.b2_gjkIters;
      duplicate = false;
      i = 0;
      while (i < saveCount) {
        if (vertex.indexA === saveA[i] && vertex.indexB === saveB[i]) {
          duplicate = true;
          break;
        }
        i++;
      }
      if (duplicate) {
        break;
      }
      ++simplex.m_count;
    }
    b2Distance.b2_gjkMaxIters = b2Math.Max(b2Distance.b2_gjkMaxIters, iter);
    simplex.GetWitnessPoints(output.pointA, output.pointB);
    output.distance = b2Math.SubtractVV(output.pointA, output.pointB).Length();
    output.iterations = iter;
    simplex.WriteCache(cache);
    if (input.useRadii) {
      rA = proxyA.m_radius;
      rB = proxyB.m_radius;
      if (output.distance > rA + rB && output.distance > Number.MIN_VALUE) {
        output.distance -= rA + rB;
        normal = b2Math.SubtractVV(output.pointB, output.pointA);
        normal.Normalize();
        output.pointA.x += rA * normal.x;
        output.pointA.y += rA * normal.y;
        output.pointB.x -= rB * normal.x;
        output.pointB.y -= rB * normal.y;
      } else {
        p = new b2Vec2();
        p.x = .5 * (output.pointA.x + output.pointB.x);
        p.y = .5 * (output.pointA.y + output.pointB.y);
        output.pointA.x = output.pointB.x = p.x;
        output.pointA.y = output.pointB.y = p.y;
        output.distance = 0.0;
      }
    }
  };

  b2Distance.s_simplex = new b2Simplex();

  b2Distance.s_saveA = new Vector(3);

  b2Distance.s_saveB = new Vector(3);

  return b2Distance;

})();

//# sourceMappingURL=b2Distance.js.map

},{"../index":103}],10:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2DistanceInput = (function() {
  function b2DistanceInput() {}

  return b2DistanceInput;

})();

//# sourceMappingURL=b2DistanceInput.js.map

},{"../index":103}],11:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2DistanceOutput = (function() {
  b2DistanceOutput.prototype.pointA = null;

  b2DistanceOutput.prototype.pointB = null;

  function b2DistanceOutput() {
    this.pointA = new b2Vec2();
    this.pointB = new b2Vec2();
    return;
  }

  return b2DistanceOutput;

})();

//# sourceMappingURL=b2DistanceOutput.js.map

},{"../index":103}],12:[function(require,module,exports){
var Box2D, b2CircleShape, b2PolygonShape, b2Settings, b2Shape;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Shape = Box2D.Collision.Shapes.b2Shape;

b2CircleShape = Box2D.Collision.Shapes.b2CircleShape;

b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape;

Box2D.Collision.b2DistanceProxy = (function() {
  function b2DistanceProxy() {}

  b2DistanceProxy.prototype.m_vertices = null;

  b2DistanceProxy.prototype.m_count = 0;

  b2DistanceProxy.prototype.m_radius = 0;

  b2DistanceProxy.prototype.Set = function(shape) {
    var circle, polygon;
    switch (shape.GetType()) {
      case b2Shape.e_circleShape:
        circle = (shape instanceof b2CircleShape ? shape : null);
        this.m_vertices = new Array(1, true);
        this.m_vertices[0] = circle.m_p;
        this.m_count = 1;
        this.m_radius = circle.m_radius;
        break;
      case b2Shape.e_polygonShape:
        polygon = (shape instanceof b2PolygonShape ? shape : null);
        this.m_vertices = polygon.m_vertices;
        this.m_count = polygon.m_vertexCount;
        this.m_radius = polygon.m_radius;
        break;
      default:
        b2Settings.b2Assert(false);
    }
  };

  b2DistanceProxy.prototype.GetSupport = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_count) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return bestIndex;
  };

  b2DistanceProxy.prototype.GetSupportVertex = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_count) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return this.m_vertices[bestIndex];
  };

  b2DistanceProxy.prototype.GetVertexCount = function() {
    return this.m_count;
  };

  b2DistanceProxy.prototype.GetVertex = function(index) {
    if (index === void 0) {
      index = 0;
    }
    b2Settings.b2Assert(0 <= index && index < this.m_count);
    return this.m_vertices[index];
  };

  return b2DistanceProxy;

})();

//# sourceMappingURL=b2DistanceProxy.js.map

},{"../index":103}],13:[function(require,module,exports){
var Box2D, b2AABB, b2DynamicTreeNode, b2Math, b2RayCastInput, b2Settings;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2AABB = Box2D.Collision.b2AABB;

b2RayCastInput = Box2D.Collision.b2RayCastInput;

b2DynamicTreeNode = Box2D.Collision.b2DynamicTreeNode;

Box2D.Collision.b2DynamicTree = (function() {
  function b2DynamicTree() {
    this.m_root = null;
    this.m_freeList = null;
    this.m_path = 0;
    this.m_insertionCount = 0;
    return;
  }

  b2DynamicTree.prototype.CreateProxy = function(aabb, userData) {
    var extendX, extendY, node;
    node = this.AllocateNode();
    extendX = b2Settings.b2_aabbExtension;
    extendY = b2Settings.b2_aabbExtension;
    node.aabb.lowerBound.x = aabb.lowerBound.x - extendX;
    node.aabb.lowerBound.y = aabb.lowerBound.y - extendY;
    node.aabb.upperBound.x = aabb.upperBound.x + extendX;
    node.aabb.upperBound.y = aabb.upperBound.y + extendY;
    node.userData = userData;
    this.InsertLeaf(node);
    return node;
  };

  b2DynamicTree.prototype.DestroyProxy = function(proxy) {
    this.RemoveLeaf(proxy);
    this.FreeNode(proxy);
  };

  b2DynamicTree.prototype.MoveProxy = function(proxy, aabb, displacement) {
    var extendX, extendY;
    b2Settings.b2Assert(proxy.IsLeaf());
    if (proxy.aabb.Contains(aabb)) {
      return false;
    }
    this.RemoveLeaf(proxy);
    extendX = b2Settings.b2_aabbExtension + b2Settings.b2_aabbMultiplier * (displacement.x > 0 ? displacement.x : -displacement.x);
    extendY = b2Settings.b2_aabbExtension + b2Settings.b2_aabbMultiplier * (displacement.y > 0 ? displacement.y : -displacement.y);
    proxy.aabb.lowerBound.x = aabb.lowerBound.x - extendX;
    proxy.aabb.lowerBound.y = aabb.lowerBound.y - extendY;
    proxy.aabb.upperBound.x = aabb.upperBound.x + extendX;
    proxy.aabb.upperBound.y = aabb.upperBound.y + extendY;
    this.InsertLeaf(proxy);
    return true;
  };

  b2DynamicTree.prototype.Rebalance = function(iterations) {
    var bit, i, node;
    if (iterations === void 0) {
      iterations = 0;
    }
    if (this.m_root == null) {
      return;
    }
    i = 0;
    while (i < iterations) {
      node = this.m_root;
      bit = 0;
      while (node.IsLeaf() === false) {
        node = ((this.m_path >> bit) & 1 ? node.child2 : node.child1);
        bit = (bit + 1) & 31;
      }
      ++this.m_path;
      this.RemoveLeaf(node);
      this.InsertLeaf(node);
      i++;
    }
  };

  b2DynamicTree.prototype.GetFatAABB = function(proxy) {
    return proxy.aabb;
  };

  b2DynamicTree.prototype.GetUserData = function(proxy) {
    return proxy.userData;
  };

  b2DynamicTree.prototype.Query = function(callback, aabb) {
    var count, node, proceed, stack;
    if (this.m_root == null) {
      return;
    }
    stack = new Array();
    count = 0;
    stack[count++] = this.m_root;
    while (count > 0) {
      node = stack[--count];
      if (node.aabb.TestOverlap(aabb)) {
        if (node.IsLeaf()) {
          proceed = callback(node);
          if (!proceed) {
            return;
          }
        } else {
          stack[count++] = node.child1;
          stack[count++] = node.child2;
        }
      }
    }
  };

  b2DynamicTree.prototype.RayCast = function(callback, input) {
    var abs_v, c, count, h, maxFraction, node, p1, p2, r, segmentAABB, separation, stack, subInput, tX, tY, v;
    if (this.m_root == null) {
      return;
    }
    p1 = input.p1;
    p2 = input.p2;
    r = b2Math.SubtractVV(p1, p2);
    r.Normalize();
    v = b2Math.CrossFV(1.0, r);
    abs_v = b2Math.AbsV(v);
    maxFraction = input.maxFraction;
    segmentAABB = new b2AABB();
    tX = 0;
    tY = 0;
    tX = p1.x + maxFraction * (p2.x - p1.x);
    tY = p1.y + maxFraction * (p2.y - p1.y);
    segmentAABB.lowerBound.x = Math.min(p1.x, tX);
    segmentAABB.lowerBound.y = Math.min(p1.y, tY);
    segmentAABB.upperBound.x = Math.max(p1.x, tX);
    segmentAABB.upperBound.y = Math.max(p1.y, tY);
    stack = new Array();
    count = 0;
    stack[count++] = this.m_root;
    while (count > 0) {
      node = stack[--count];
      if (node.aabb.TestOverlap(segmentAABB) === false) {
        continue;
      }
      c = node.aabb.GetCenter();
      h = node.aabb.GetExtents();
      separation = Math.abs(v.x * (p1.x - c.x) + v.y * (p1.y - c.y)) - abs_v.x * h.x - abs_v.y * h.y;
      if (separation > 0.0) {
        continue;
      }
      if (node.IsLeaf()) {
        subInput = new b2RayCastInput();
        subInput.p1 = input.p1;
        subInput.p2 = input.p2;
        subInput.maxFraction = input.maxFraction;
        maxFraction = callback(subInput, node);
        if (maxFraction === 0.0) {
          return;
        }
        if (maxFraction > 0.0) {
          tX = p1.x + maxFraction * (p2.x - p1.x);
          tY = p1.y + maxFraction * (p2.y - p1.y);
          segmentAABB.lowerBound.x = Math.min(p1.x, tX);
          segmentAABB.lowerBound.y = Math.min(p1.y, tY);
          segmentAABB.upperBound.x = Math.max(p1.x, tX);
          segmentAABB.upperBound.y = Math.max(p1.y, tY);
        }
      } else {
        stack[count++] = node.child1;
        stack[count++] = node.child2;
      }
    }
  };

  b2DynamicTree.prototype.AllocateNode = function() {
    var node;
    if (this.m_freeList) {
      node = this.m_freeList;
      this.m_freeList = node.parent;
      node.parent = null;
      node.child1 = null;
      node.child2 = null;
      return node;
    }
    return new b2DynamicTreeNode();
  };

  b2DynamicTree.prototype.FreeNode = function(node) {
    node.parent = this.m_freeList;
    this.m_freeList = node;
  };

  b2DynamicTree.prototype.InsertLeaf = function(leaf) {
    var center, child1, child2, node1, node2, norm1, norm2, sibling;
    ++this.m_insertionCount;
    if (this.m_root == null) {
      this.m_root = leaf;
      this.m_root.parent = null;
      return;
    }
    center = leaf.aabb.GetCenter();
    sibling = this.m_root;
    if (sibling.IsLeaf() === false) {
      while (true) {
        child1 = sibling.child1;
        child2 = sibling.child2;
        norm1 = Math.abs((child1.aabb.lowerBound.x + child1.aabb.upperBound.x) / 2 - center.x) + Math.abs((child1.aabb.lowerBound.y + child1.aabb.upperBound.y) / 2 - center.y);
        norm2 = Math.abs((child2.aabb.lowerBound.x + child2.aabb.upperBound.x) / 2 - center.x) + Math.abs((child2.aabb.lowerBound.y + child2.aabb.upperBound.y) / 2 - center.y);
        if (norm1 < norm2) {
          sibling = child1;
        } else {
          sibling = child2;
        }
        if (sibling.IsLeaf() !== false) {
          break;
        }
      }
    }
    node1 = sibling.parent;
    node2 = this.AllocateNode();
    node2.parent = node1;
    node2.userData = null;
    node2.aabb.Combine(leaf.aabb, sibling.aabb);
    if (node1) {
      if (sibling.parent.child1 === sibling) {
        node1.child1 = node2;
      } else {
        node1.child2 = node2;
      }
      node2.child1 = sibling;
      node2.child2 = leaf;
      sibling.parent = node2;
      leaf.parent = node2;
      while (true) {
        if (node1.aabb.Contains(node2.aabb)) {
          break;
        }
        node1.aabb.Combine(node1.child1.aabb, node1.child2.aabb);
        node2 = node1;
        node1 = node1.parent;
        if (!node1) {
          break;
        }
      }
    } else {
      node2.child1 = sibling;
      node2.child2 = leaf;
      sibling.parent = node2;
      leaf.parent = node2;
      this.m_root = node2;
    }
  };

  b2DynamicTree.prototype.RemoveLeaf = function(leaf) {
    var node1, node2, oldAABB, sibling;
    if (leaf === this.m_root) {
      this.m_root = null;
      return;
    }
    node2 = leaf.parent;
    node1 = node2.parent;
    sibling = void 0;
    if (node2.child1 === leaf) {
      sibling = node2.child2;
    } else {
      sibling = node2.child1;
    }
    if (node1) {
      if (node1.child1 === node2) {
        node1.child1 = sibling;
      } else {
        node1.child2 = sibling;
      }
      sibling.parent = node1;
      this.FreeNode(node2);
      while (node1) {
        oldAABB = node1.aabb;
        node1.aabb = b2AABB.Combine(node1.child1.aabb, node1.child2.aabb);
        if (oldAABB.Contains(node1.aabb)) {
          break;
        }
        node1 = node1.parent;
      }
    } else {
      this.m_root = sibling;
      sibling.parent = null;
      this.FreeNode(node2);
    }
  };

  return b2DynamicTree;

})();

//# sourceMappingURL=b2DynamicTree.js.map

},{"../index":103}],14:[function(require,module,exports){
var Box2D, b2DynamicTree, b2DynamicTreePair;

Box2D = require('../index');

b2DynamicTree = Box2D.Collision.b2DynamicTree;

b2DynamicTreePair = Box2D.Collision.b2DynamicTreePair;

Box2D.Collision.b2DynamicTreeBroadPhase = (function() {
  b2DynamicTreeBroadPhase.prototype.m_tree = null;

  b2DynamicTreeBroadPhase.prototype.m_moveBuffer = null;

  b2DynamicTreeBroadPhase.prototype.m_pairBuffer = null;

  b2DynamicTreeBroadPhase.prototype.m_pairCount = 0;

  b2DynamicTreeBroadPhase.m_proxyCount = 0;

  function b2DynamicTreeBroadPhase() {
    this.m_tree = new b2DynamicTree();
    this.m_moveBuffer = new Array();
    this.m_pairBuffer = new Array();
    return;
  }

  b2DynamicTreeBroadPhase.prototype.CreateProxy = function(aabb, userData) {
    var proxy;
    proxy = this.m_tree.CreateProxy(aabb, userData);
    ++this.m_proxyCount;
    this.BufferMove(proxy);
    return proxy;
  };

  b2DynamicTreeBroadPhase.prototype.DestroyProxy = function(proxy) {
    this.UnBufferMove(proxy);
    --this.m_proxyCount;
    this.m_tree.DestroyProxy(proxy);
  };

  b2DynamicTreeBroadPhase.prototype.MoveProxy = function(proxy, aabb, displacement) {
    var buffer;
    buffer = this.m_tree.MoveProxy(proxy, aabb, displacement);
    if (buffer) {
      this.BufferMove(proxy);
    }
  };

  b2DynamicTreeBroadPhase.prototype.TestOverlap = function(proxyA, proxyB) {
    var aabbA, aabbB;
    aabbA = this.m_tree.GetFatAABB(proxyA);
    aabbB = this.m_tree.GetFatAABB(proxyB);
    return aabbA.TestOverlap(aabbB);
  };

  b2DynamicTreeBroadPhase.prototype.GetUserData = function(proxy) {
    return this.m_tree.GetUserData(proxy);
  };

  b2DynamicTreeBroadPhase.prototype.GetFatAABB = function(proxy) {
    return this.m_tree.GetFatAABB(proxy);
  };

  b2DynamicTreeBroadPhase.prototype.GetProxyCount = function() {
    return this.m_proxyCount;
  };

  b2DynamicTreeBroadPhase.prototype.UpdatePairs = function(callback) {
    var QueryCallback, fatAABB, i, pair, primaryPair, queryProxy, userDataA, userDataB;
    this.m_pairCount = 0;
    i = 0;
    queryProxy = void 0;
    i = 0;
    while (i < this.m_moveBuffer.length) {
      QueryCallback = (function(_this) {
        return function(proxy) {
          var pair;
          if (proxy === queryProxy) {
            return true;
          }
          if (_this.m_pairCount === _this.m_pairBuffer.length) {
            _this.m_pairBuffer[_this.m_pairCount] = new b2DynamicTreePair();
          }
          pair = _this.m_pairBuffer[_this.m_pairCount];
          pair.proxyA = (proxy < queryProxy ? proxy : queryProxy);
          pair.proxyB = (proxy >= queryProxy ? proxy : queryProxy);
          ++_this.m_pairCount;
          return true;
        };
      })(this);
      queryProxy = this.m_moveBuffer[i];
      fatAABB = this.m_tree.GetFatAABB(queryProxy);
      this.m_tree.Query(QueryCallback, fatAABB);
      ++i;
    }
    this.m_moveBuffer.length = 0;
    i = 0;
    while (i < this.m_pairCount) {
      primaryPair = this.m_pairBuffer[i];
      userDataA = this.m_tree.GetUserData(primaryPair.proxyA);
      userDataB = this.m_tree.GetUserData(primaryPair.proxyB);
      callback(userDataA, userDataB);
      ++i;
      while (i < this.m_pairCount) {
        pair = this.m_pairBuffer[i];
        if (pair.proxyA !== primaryPair.proxyA || pair.proxyB !== primaryPair.proxyB) {
          break;
        }
        ++i;
      }
    }
  };

  b2DynamicTreeBroadPhase.prototype.Query = function(callback, aabb) {
    this.m_tree.Query(callback, aabb);
  };

  b2DynamicTreeBroadPhase.prototype.RayCast = function(callback, input) {
    this.m_tree.RayCast(callback, input);
  };

  b2DynamicTreeBroadPhase.prototype.Validate = function() {};

  b2DynamicTreeBroadPhase.prototype.Rebalance = function(iterations) {
    if (iterations === void 0) {
      iterations = 0;
    }
    this.m_tree.Rebalance(iterations);
  };

  b2DynamicTreeBroadPhase.prototype.BufferMove = function(proxy) {
    this.m_moveBuffer[this.m_moveBuffer.length] = proxy;
  };

  b2DynamicTreeBroadPhase.prototype.UnBufferMove = function(proxy) {
    var i;
    i = parseInt(this.m_moveBuffer.indexOf(proxy));
    this.m_moveBuffer.splice(i, 1);
  };

  b2DynamicTreeBroadPhase.prototype.ComparePairs = function(pair1, pair2) {
    return 0;
  };

  b2DynamicTreeBroadPhase.__implements = {
    IBroadPhase: true
  };

  return b2DynamicTreeBroadPhase;

})();

//# sourceMappingURL=b2DynamicTreeBroadPhase.js.map

},{"../index":103}],15:[function(require,module,exports){
var Box2D, b2AABB;

Box2D = require('../index');

b2AABB = Box2D.Collision.b2AABB;

Box2D.Collision.b2DynamicTreeNode = (function() {
  b2DynamicTreeNode.prototype.aabb = null;

  b2DynamicTreeNode.prototype.child1 = null;

  function b2DynamicTreeNode() {
    this.aabb = new b2AABB();
    return;
  }

  b2DynamicTreeNode.prototype.IsLeaf = function() {
    return this.child1 == null;
  };

  return b2DynamicTreeNode;

})();

//# sourceMappingURL=b2DynamicTreeNode.js.map

},{"../index":103}],16:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2DynamicTreePair = (function() {
  function b2DynamicTreePair() {}

  return b2DynamicTreePair;

})();

//# sourceMappingURL=b2DynamicTreePair.js.map

},{"../index":103}],17:[function(require,module,exports){
var Box2D, b2ManifoldPoint, b2Settings, b2Vec2;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2ManifoldPoint = Box2D.Collision.b2ManifoldPoint;

Box2D.Collision.b2Manifold = (function() {
  b2Manifold.e_circles = 0x0001;

  b2Manifold.e_faceA = 0x0002;

  b2Manifold.e_faceB = 0x0004;

  b2Manifold.prototype.m_type = 0;

  b2Manifold.prototype.m_pointCount = 0;

  b2Manifold.prototype.m_points = null;

  b2Manifold.prototype.m_localPlaneNormal = null;

  b2Manifold.prototype.m_localPoint = null;

  function b2Manifold() {
    var i;
    this.m_pointCount = 0;
    this.m_points = new Array(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.m_points[i] = new b2ManifoldPoint();
      i++;
    }
    this.m_localPlaneNormal = new b2Vec2();
    this.m_localPoint = new b2Vec2();
    return;
  }

  b2Manifold.prototype.Reset = function() {
    var i;
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      (this.m_points[i] instanceof b2ManifoldPoint ? this.m_points[i] : null).Reset();
      i++;
    }
    this.m_localPlaneNormal.SetZero();
    this.m_localPoint.SetZero();
    this.m_type = 0;
    this.m_pointCount = 0;
  };

  b2Manifold.prototype.Set = function(m) {
    var i;
    this.m_pointCount = m.m_pointCount;
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      (this.m_points[i] instanceof b2ManifoldPoint ? this.m_points[i] : null).Set(m.m_points[i]);
      i++;
    }
    this.m_localPlaneNormal.SetV(m.m_localPlaneNormal);
    this.m_localPoint.SetV(m.m_localPoint);
    this.m_type = m.m_type;
  };

  b2Manifold.prototype.Copy = function() {
    var copy;
    copy = new b2Manifold();
    copy.Set(this);
    return copy;
  };

  return b2Manifold;

})();

//# sourceMappingURL=b2Manifold.js.map

},{"../index":103}],18:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2ContactID = Box2D.Collision.b2ContactID;

Box2D.Collision.b2ManifoldPoint = (function() {
  b2ManifoldPoint.prototype.m_localPoint = null;

  b2ManifoldPoint.prototype.m_id = null;

  b2ManifoldPoint.prototype.m_localPoint = null;

  b2ManifoldPoint.prototype.m_normalImpulse = 0.0;

  b2ManifoldPoint.prototype.m_tangentImpulse = 0.0;

  function b2ManifoldPoint() {
    this.m_localPoint = new b2Vec2();
    this.m_id = new b2ContactID();
    this.Reset();
    return;
  }

  b2ManifoldPoint.prototype.Reset = function() {
    this.m_localPoint.SetZero();
    this.m_normalImpulse = 0.0;
    this.m_tangentImpulse = 0.0;
    this.m_id.key = 0;
  };

  b2ManifoldPoint.prototype.Set = function(m) {
    this.m_localPoint.SetV(m.m_localPoint);
    this.m_normalImpulse = m.m_normalImpulse;
    this.m_tangentImpulse = m.m_tangentImpulse;
    this.m_id.Set(m.m_id);
  };

  return b2ManifoldPoint;

})();

//# sourceMappingURL=b2ManifoldPoint.js.map

},{"../index":103}],19:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2Point = (function() {
  b2Point.prototype.p = null;

  function b2Point() {
    this.p = new b2Vec2();
    return;
  }

  b2Point.prototype.Support = function(xf, vX, vY) {
    if (vX === void 0) {
      vX = 0;
    }
    if (vY === void 0) {
      vY = 0;
    }
    return this.p;
  };

  b2Point.prototype.GetFirstVertex = function(xf) {
    return this.p;
  };

  return b2Point;

})();

//# sourceMappingURL=b2Point.js.map

},{"../index":103}],20:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2RayCastInput = (function() {
  b2RayCastInput.prototype.p1 = null;

  b2RayCastInput.prototype.p2 = null;

  b2RayCastInput.prototype.maxFraction = 1;

  function b2RayCastInput(p1, p2, maxFraction) {
    this.p1 = new b2Vec2();
    this.p2 = new b2Vec2();
    if (p1 === void 0) {
      p1 = null;
    }
    if (p2 === void 0) {
      p2 = null;
    }
    if (maxFraction === void 0) {
      maxFraction = 1;
    }
    if (p1) {
      this.p1.SetV(p1);
    }
    if (p2) {
      this.p2.SetV(p2);
    }
    this.maxFraction = maxFraction;
    return;
  }

  return b2RayCastInput;

})();

//# sourceMappingURL=b2RayCastInput.js.map

},{"../index":103}],21:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2RayCastOutput = (function() {
  b2RayCastOutput.prototype.normal = null;

  function b2RayCastOutput() {
    this.normal = new b2Vec2();
    return;
  }

  return b2RayCastOutput;

})();

//# sourceMappingURL=b2RayCastOutput.js.map

},{"../index":103}],22:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2Segment = (function() {
  b2Segment.prototype.p1 = null;

  b2Segment.prototype.p2 = null;

  function b2Segment() {
    this.p1 = new b2Vec2();
    this.p2 = new b2Vec2();
    return;
  }

  b2Segment.prototype.TestSegment = function(lambda, normal, segment, maxLambda) {
    var a, bX, bY, dX, dY, denom, k_slop, mu2, nLen, nX, nY, rX, rY, s;
    if (maxLambda === void 0) {
      maxLambda = 0;
    }
    s = segment.p1;
    rX = segment.p2.x - s.x;
    rY = segment.p2.y - s.y;
    dX = this.p2.x - this.p1.x;
    dY = this.p2.y - this.p1.y;
    nX = dY;
    nY = -dX;
    k_slop = 100.0 * Number.MIN_VALUE;
    denom = -(rX * nX + rY * nY);
    if (denom > k_slop) {
      bX = s.x - this.p1.x;
      bY = s.y - this.p1.y;
      a = bX * nX + bY * nY;
      if (0.0 <= a && a <= maxLambda * denom) {
        mu2 = (-rX * bY) + rY * bX;
        if ((-k_slop * denom) <= mu2 && mu2 <= denom * (1.0 + k_slop)) {
          a /= denom;
          nLen = Math.sqrt(nX * nX + nY * nY);
          nX /= nLen;
          nY /= nLen;
          lambda[0] = a;
          normal.Set(nX, nY);
          return true;
        }
      }
    }
    return false;
  };

  b2Segment.prototype.Extend = function(aabb) {
    this.ExtendForward(aabb);
    this.ExtendBackward(aabb);
  };

  b2Segment.prototype.ExtendForward = function(aabb) {
    var dX, dY, lambda;
    dX = this.p2.x - this.p1.x;
    dY = this.p2.y - this.p1.y;
    lambda = Math.min((dX > 0 ? (aabb.upperBound.x - this.p1.x) / dX : (dX < 0 ? (aabb.lowerBound.x - this.p1.x) / dX : Number.POSITIVE_INFINITY)), (dY > 0 ? (aabb.upperBound.y - this.p1.y) / dY : (dY < 0 ? (aabb.lowerBound.y - this.p1.y) / dY : Number.POSITIVE_INFINITY)));
    this.p2.x = this.p1.x + dX * lambda;
    this.p2.y = this.p1.y + dY * lambda;
  };

  b2Segment.prototype.ExtendBackward = function(aabb) {
    var dX, dY, lambda;
    dX = (-this.p2.x) + this.p1.x;
    dY = (-this.p2.y) + this.p1.y;
    lambda = Math.min((dX > 0 ? (aabb.upperBound.x - this.p2.x) / dX : (dX < 0 ? (aabb.lowerBound.x - this.p2.x) / dX : Number.POSITIVE_INFINITY)), (dY > 0 ? (aabb.upperBound.y - this.p2.y) / dY : (dY < 0 ? (aabb.lowerBound.y - this.p2.y) / dY : Number.POSITIVE_INFINITY)));
    this.p1.x = this.p2.x + dX * lambda;
    this.p1.y = this.p2.y + dY * lambda;
  };

  return b2Segment;

})();

//# sourceMappingURL=b2Segment.js.map

},{"../index":103}],23:[function(require,module,exports){
var Box2D, b2Math, b2Settings, b2Vec2;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2SeparationFunction = (function() {
  b2SeparationFunction.prototype.m_localPoint = null;

  b2SeparationFunction.prototype.m_axis = null;

  b2SeparationFunction.prototype.m_proxyA = null;

  b2SeparationFunction.prototype.m_proxyB = null;

  function b2SeparationFunction() {
    this.m_localPoint = new b2Vec2();
    this.m_axis = new b2Vec2();
    return;
  }

  b2SeparationFunction.prototype.Initialize = function(cache, proxyA, transformA, proxyB, transformB) {
    var a, b, c, count, dA, dB, denom, e, f, localPointA, localPointA1, localPointA2, localPointB, localPointB1, localPointB2, normalX, normalY, pA, pB, pointAX, pointAY, pointBX, pointBY, r, s, sgn, t, tMat, tVec;
    this.m_proxyA = proxyA;
    this.m_proxyB = proxyB;
    count = parseInt(cache.count);
    b2Settings.b2Assert(0 < count && count < 3);
    localPointA = void 0;
    localPointA1 = void 0;
    localPointA2 = void 0;
    localPointB = void 0;
    localPointB1 = void 0;
    localPointB2 = void 0;
    pointAX = 0;
    pointAY = 0;
    pointBX = 0;
    pointBY = 0;
    normalX = 0;
    normalY = 0;
    tMat = void 0;
    tVec = void 0;
    s = 0;
    sgn = 0;
    if (count === 1) {
      this.m_type = b2SeparationFunction.e_points;
      localPointA = this.m_proxyA.GetVertex(cache.indexA[0]);
      localPointB = this.m_proxyB.GetVertex(cache.indexB[0]);
      tVec = localPointA;
      tMat = transformA.R;
      pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      tVec = localPointB;
      tMat = transformB.R;
      pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      this.m_axis.x = pointBX - pointAX;
      this.m_axis.y = pointBY - pointAY;
      this.m_axis.Normalize();
    } else if (cache.indexB[0] === cache.indexB[1]) {
      this.m_type = b2SeparationFunction.e_faceA;
      localPointA1 = this.m_proxyA.GetVertex(cache.indexA[0]);
      localPointA2 = this.m_proxyA.GetVertex(cache.indexA[1]);
      localPointB = this.m_proxyB.GetVertex(cache.indexB[0]);
      this.m_localPoint.x = 0.5 * (localPointA1.x + localPointA2.x);
      this.m_localPoint.y = 0.5 * (localPointA1.y + localPointA2.y);
      this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointA2, localPointA1), 1.0);
      this.m_axis.Normalize();
      tVec = this.m_axis;
      tMat = transformA.R;
      normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tVec = this.m_localPoint;
      tMat = transformA.R;
      pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      tVec = localPointB;
      tMat = transformB.R;
      pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      s = (pointBX - pointAX) * normalX + (pointBY - pointAY) * normalY;
      if (s < 0.0) {
        this.m_axis.NegativeSelf();
      }
    } else if (cache.indexA[0] === cache.indexA[0]) {
      this.m_type = b2SeparationFunction.e_faceB;
      localPointB1 = this.m_proxyB.GetVertex(cache.indexB[0]);
      localPointB2 = this.m_proxyB.GetVertex(cache.indexB[1]);
      localPointA = this.m_proxyA.GetVertex(cache.indexA[0]);
      this.m_localPoint.x = 0.5 * (localPointB1.x + localPointB2.x);
      this.m_localPoint.y = 0.5 * (localPointB1.y + localPointB2.y);
      this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointB2, localPointB1), 1.0);
      this.m_axis.Normalize();
      tVec = this.m_axis;
      tMat = transformB.R;
      normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tVec = this.m_localPoint;
      tMat = transformB.R;
      pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      tVec = localPointA;
      tMat = transformA.R;
      pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      s = (pointAX - pointBX) * normalX + (pointAY - pointBY) * normalY;
      if (s < 0.0) {
        this.m_axis.NegativeSelf();
      }
    } else {
      localPointA1 = this.m_proxyA.GetVertex(cache.indexA[0]);
      localPointA2 = this.m_proxyA.GetVertex(cache.indexA[1]);
      localPointB1 = this.m_proxyB.GetVertex(cache.indexB[0]);
      localPointB2 = this.m_proxyB.GetVertex(cache.indexB[1]);
      pA = b2Math.MulX(transformA, localPointA);
      dA = b2Math.MulMV(transformA.R, b2Math.SubtractVV(localPointA2, localPointA1));
      pB = b2Math.MulX(transformB, localPointB);
      dB = b2Math.MulMV(transformB.R, b2Math.SubtractVV(localPointB2, localPointB1));
      a = dA.x * dA.x + dA.y * dA.y;
      e = dB.x * dB.x + dB.y * dB.y;
      r = b2Math.SubtractVV(dB, dA);
      c = dA.x * r.x + dA.y * r.y;
      f = dB.x * r.x + dB.y * r.y;
      b = dA.x * dB.x + dA.y * dB.y;
      denom = a * e - b * b;
      s = 0.0;
      if (denom !== 0.0) {
        s = b2Math.Clamp((b * f - c * e) / denom, 0.0, 1.0);
      }
      t = (b * s + f) / e;
      if (t < 0.0) {
        t = 0.0;
        s = b2Math.Clamp((b - c) / a, 0.0, 1.0);
      }
      localPointA = new b2Vec2();
      localPointA.x = localPointA1.x + s * (localPointA2.x - localPointA1.x);
      localPointA.y = localPointA1.y + s * (localPointA2.y - localPointA1.y);
      localPointB = new b2Vec2();
      localPointB.x = localPointB1.x + s * (localPointB2.x - localPointB1.x);
      localPointB.y = localPointB1.y + s * (localPointB2.y - localPointB1.y);
      if (s === 0.0 || s === 1.0) {
        this.m_type = b2SeparationFunction.e_faceB;
        this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointB2, localPointB1), 1.0);
        this.m_axis.Normalize();
        this.m_localPoint = localPointB;
        tVec = this.m_axis;
        tMat = transformB.R;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tVec = this.m_localPoint;
        tMat = transformB.R;
        pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tVec = localPointA;
        tMat = transformA.R;
        pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        sgn = (pointAX - pointBX) * normalX + (pointAY - pointBY) * normalY;
        if (s < 0.0) {
          this.m_axis.NegativeSelf();
        }
      } else {
        this.m_type = b2SeparationFunction.e_faceA;
        this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointA2, localPointA1), 1.0);
        this.m_localPoint = localPointA;
        tVec = this.m_axis;
        tMat = transformA.R;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tVec = this.m_localPoint;
        tMat = transformA.R;
        pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tVec = localPointB;
        tMat = transformB.R;
        pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        sgn = (pointBX - pointAX) * normalX + (pointBY - pointAY) * normalY;
        if (s < 0.0) {
          this.m_axis.NegativeSelf();
        }
      }
    }
  };

  b2SeparationFunction.prototype.Evaluate = function(transformA, transformB) {
    var axisA, axisB, localPointA, localPointB, normal, pointA, pointB, seperation;
    axisA = void 0;
    axisB = void 0;
    localPointA = void 0;
    localPointB = void 0;
    pointA = void 0;
    pointB = void 0;
    seperation = 0;
    normal = void 0;
    switch (this.m_type) {
      case b2SeparationFunction.e_points:
        axisA = b2Math.MulTMV(transformA.R, this.m_axis);
        axisB = b2Math.MulTMV(transformB.R, this.m_axis.GetNegative());
        localPointA = this.m_proxyA.GetSupportVertex(axisA);
        localPointB = this.m_proxyB.GetSupportVertex(axisB);
        pointA = b2Math.MulX(transformA, localPointA);
        pointB = b2Math.MulX(transformB, localPointB);
        seperation = (pointB.x - pointA.x) * this.m_axis.x + (pointB.y - pointA.y) * this.m_axis.y;
        return seperation;
      case b2SeparationFunction.e_faceA:
        normal = b2Math.MulMV(transformA.R, this.m_axis);
        pointA = b2Math.MulX(transformA, this.m_localPoint);
        axisB = b2Math.MulTMV(transformB.R, normal.GetNegative());
        localPointB = this.m_proxyB.GetSupportVertex(axisB);
        pointB = b2Math.MulX(transformB, localPointB);
        seperation = (pointB.x - pointA.x) * normal.x + (pointB.y - pointA.y) * normal.y;
        return seperation;
      case b2SeparationFunction.e_faceB:
        normal = b2Math.MulMV(transformB.R, this.m_axis);
        pointB = b2Math.MulX(transformB, this.m_localPoint);
        axisA = b2Math.MulTMV(transformA.R, normal.GetNegative());
        localPointA = this.m_proxyA.GetSupportVertex(axisA);
        pointA = b2Math.MulX(transformA, localPointA);
        seperation = (pointA.x - pointB.x) * normal.x + (pointA.y - pointB.y) * normal.y;
        return seperation;
      default:
        b2Settings.b2Assert(false);
        return 0.0;
    }
  };

  b2SeparationFunction.e_points = 0x01;

  b2SeparationFunction.e_faceA = 0x02;

  b2SeparationFunction.e_faceB = 0x04;

  return b2SeparationFunction;

})();

//# sourceMappingURL=b2SeparationFunction.js.map

},{"../index":103}],24:[function(require,module,exports){
var Box2D, b2Math, b2Settings, b2SimplexVertex, b2Vec2;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2SimplexVertex = Box2D.Collision.b2SimplexVertex;

Box2D.Collision.b2Simplex = (function() {
  b2Simplex.prototype.m_v1 = null;

  b2Simplex.prototype.m_v2 = null;

  b2Simplex.prototype.m_v3 = null;

  b2Simplex.prototype.m_vertices = null;

  b2Simplex.prototype.m_count = 0;

  function b2Simplex() {
    this.m_v1 = new b2SimplexVertex();
    this.m_v2 = new b2SimplexVertex();
    this.m_v3 = new b2SimplexVertex();
    this.m_vertices = new Array(3);
    this.m_vertices[0] = this.m_v1;
    this.m_vertices[1] = this.m_v2;
    this.m_vertices[2] = this.m_v3;
    return;
  }

  b2Simplex.prototype.ReadCache = function(cache, proxyA, transformA, proxyB, transformB) {
    var i, metric1, metric2, v, vertices, wALocal, wBLocal;
    b2Settings.b2Assert(0 <= cache.count && cache.count <= 3);
    wALocal = void 0;
    wBLocal = void 0;
    this.m_count = cache.count;
    vertices = this.m_vertices;
    i = 0;
    while (i < this.m_count) {
      v = vertices[i];
      v.indexA = cache.indexA[i];
      v.indexB = cache.indexB[i];
      wALocal = proxyA.GetVertex(v.indexA);
      wBLocal = proxyB.GetVertex(v.indexB);
      v.wA = b2Math.MulX(transformA, wALocal);
      v.wB = b2Math.MulX(transformB, wBLocal);
      v.w = b2Math.SubtractVV(v.wB, v.wA);
      v.a = 0;
      i++;
    }
    if (this.m_count > 1) {
      metric1 = cache.metric;
      metric2 = this.GetMetric();
      if (metric2 < .5 * metric1 || 2.0 * metric1 < metric2 || metric2 < Number.MIN_VALUE) {
        this.m_count = 0;
      }
    }
    if (this.m_count === 0) {
      v = vertices[0];
      v.indexA = 0;
      v.indexB = 0;
      wALocal = proxyA.GetVertex(0);
      wBLocal = proxyB.GetVertex(0);
      v.wA = b2Math.MulX(transformA, wALocal);
      v.wB = b2Math.MulX(transformB, wBLocal);
      v.w = b2Math.SubtractVV(v.wB, v.wA);
      this.m_count = 1;
    }
  };

  b2Simplex.prototype.WriteCache = function(cache) {
    var i, vertices;
    cache.metric = this.GetMetric();
    cache.count = Box2D.parseUInt(this.m_count);
    vertices = this.m_vertices;
    i = 0;
    while (i < this.m_count) {
      cache.indexA[i] = Box2D.parseUInt(vertices[i].indexA);
      cache.indexB[i] = Box2D.parseUInt(vertices[i].indexB);
      i++;
    }
  };

  b2Simplex.prototype.GetSearchDirection = function() {
    var e12, sgn;
    switch (this.m_count) {
      case 1:
        return this.m_v1.w.GetNegative();
      case 2:
        e12 = b2Math.SubtractVV(this.m_v2.w, this.m_v1.w);
        sgn = b2Math.CrossVV(e12, this.m_v1.w.GetNegative());
        if (sgn > 0.0) {
          return b2Math.CrossFV(1.0, e12);
        } else {
          return b2Math.CrossVF(e12, 1.0);
        }
        break;
      default:
        b2Settings.b2Assert(false);
        return new b2Vec2();
    }
  };

  b2Simplex.prototype.GetClosestPoint = function() {
    switch (this.m_count) {
      case 0:
        b2Settings.b2Assert(false);
        return new b2Vec2();
      case 1:
        return this.m_v1.w;
      case 2:
        return new b2Vec2(this.m_v1.a * this.m_v1.w.x + this.m_v2.a * this.m_v2.w.x, this.m_v1.a * this.m_v1.w.y + this.m_v2.a * this.m_v2.w.y);
      default:
        b2Settings.b2Assert(false);
        return new b2Vec2();
    }
  };

  b2Simplex.prototype.GetWitnessPoints = function(pA, pB) {
    switch (this.m_count) {
      case 0:
        return b2Settings.b2Assert(false);
      case 1:
        pA.SetV(this.m_v1.wA);
        return pB.SetV(this.m_v1.wB);
      case 2:
        pA.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x;
        pA.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y;
        pB.x = this.m_v1.a * this.m_v1.wB.x + this.m_v2.a * this.m_v2.wB.x;
        return pB.y = this.m_v1.a * this.m_v1.wB.y + this.m_v2.a * this.m_v2.wB.y;
      case 3:
        pB.x = pA.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x + this.m_v3.a * this.m_v3.wA.x;
        return pB.y = pA.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y + this.m_v3.a * this.m_v3.wA.y;
      default:
        return b2Settings.b2Assert(false);
    }
  };

  b2Simplex.prototype.GetMetric = function() {
    switch (this.m_count) {
      case 0:
        b2Settings.b2Assert(false);
        return 0.0;
      case 1:
        return 0.0;
      case 2:
        return b2Math.SubtractVV(this.m_v1.w, this.m_v2.w).Length();
      case 3:
        return b2Math.CrossVV(b2Math.SubtractVV(this.m_v2.w, this.m_v1.w), b2Math.SubtractVV(this.m_v3.w, this.m_v1.w));
      default:
        b2Settings.b2Assert(false);
        return 0.0;
    }
  };

  b2Simplex.prototype.Solve2 = function() {
    var d12_1, d12_2, e12, inv_d12, w1, w2;
    w1 = this.m_v1.w;
    w2 = this.m_v2.w;
    e12 = b2Math.SubtractVV(w2, w1);
    d12_2 = -(w1.x * e12.x + w1.y * e12.y);
    if (d12_2 <= 0.0) {
      this.m_v1.a = 1.0;
      this.m_count = 1;
      return;
    }
    d12_1 = w2.x * e12.x + w2.y * e12.y;
    if (d12_1 <= 0.0) {
      this.m_v2.a = 1.0;
      this.m_count = 1;
      this.m_v1.Set(this.m_v2);
      return;
    }
    inv_d12 = 1.0 / (d12_1 + d12_2);
    this.m_v1.a = d12_1 * inv_d12;
    this.m_v2.a = d12_2 * inv_d12;
    this.m_count = 2;
  };

  b2Simplex.prototype.Solve3 = function() {
    var d123_1, d123_2, d123_3, d12_1, d12_2, d13_1, d13_2, d23_1, d23_2, e12, e13, e23, inv_d12, inv_d123, inv_d13, inv_d23, n123, w1, w1e12, w1e13, w2, w2e12, w2e23, w3, w3e13, w3e23;
    w1 = this.m_v1.w;
    w2 = this.m_v2.w;
    w3 = this.m_v3.w;
    e12 = b2Math.SubtractVV(w2, w1);
    w1e12 = b2Math.Dot(w1, e12);
    w2e12 = b2Math.Dot(w2, e12);
    d12_1 = w2e12;
    d12_2 = -w1e12;
    e13 = b2Math.SubtractVV(w3, w1);
    w1e13 = b2Math.Dot(w1, e13);
    w3e13 = b2Math.Dot(w3, e13);
    d13_1 = w3e13;
    d13_2 = -w1e13;
    e23 = b2Math.SubtractVV(w3, w2);
    w2e23 = b2Math.Dot(w2, e23);
    w3e23 = b2Math.Dot(w3, e23);
    d23_1 = w3e23;
    d23_2 = -w2e23;
    n123 = b2Math.CrossVV(e12, e13);
    d123_1 = n123 * b2Math.CrossVV(w2, w3);
    d123_2 = n123 * b2Math.CrossVV(w3, w1);
    d123_3 = n123 * b2Math.CrossVV(w1, w2);
    if (d12_2 <= 0.0 && d13_2 <= 0.0) {
      this.m_v1.a = 1.0;
      this.m_count = 1;
      return;
    }
    if (d12_1 > 0.0 && d12_2 > 0.0 && d123_3 <= 0.0) {
      inv_d12 = 1.0 / (d12_1 + d12_2);
      this.m_v1.a = d12_1 * inv_d12;
      this.m_v2.a = d12_2 * inv_d12;
      this.m_count = 2;
      return;
    }
    if (d13_1 > 0.0 && d13_2 > 0.0 && d123_2 <= 0.0) {
      inv_d13 = 1.0 / (d13_1 + d13_2);
      this.m_v1.a = d13_1 * inv_d13;
      this.m_v3.a = d13_2 * inv_d13;
      this.m_count = 2;
      this.m_v2.Set(this.m_v3);
      return;
    }
    if (d12_1 <= 0.0 && d23_2 <= 0.0) {
      this.m_v2.a = 1.0;
      this.m_count = 1;
      this.m_v1.Set(this.m_v2);
      return;
    }
    if (d13_1 <= 0.0 && d23_1 <= 0.0) {
      this.m_v3.a = 1.0;
      this.m_count = 1;
      this.m_v1.Set(this.m_v3);
      return;
    }
    if (d23_1 > 0.0 && d23_2 > 0.0 && d123_1 <= 0.0) {
      inv_d23 = 1.0 / (d23_1 + d23_2);
      this.m_v2.a = d23_1 * inv_d23;
      this.m_v3.a = d23_2 * inv_d23;
      this.m_count = 2;
      this.m_v1.Set(this.m_v3);
      return;
    }
    inv_d123 = 1.0 / (d123_1 + d123_2 + d123_3);
    this.m_v1.a = d123_1 * inv_d123;
    this.m_v2.a = d123_2 * inv_d123;
    this.m_v3.a = d123_3 * inv_d123;
    this.m_count = 3;
  };

  return b2Simplex;

})();

//# sourceMappingURL=b2Simplex.js.map

},{"../index":103}],25:[function(require,module,exports){
var Box2D, Vector;

Box2D = require('../index');

Vector = Box2D.Vector;

Box2D.Collision.b2SimplexCache = (function() {
  b2SimplexCache.prototype.indexA = null;

  b2SimplexCache.prototype.indexB = null;

  function b2SimplexCache() {
    this.indexA = new Vector(3);
    this.indexB = new Vector(3);
    return;
  }

  return b2SimplexCache;

})();

//# sourceMappingURL=b2SimplexCache.js.map

},{"../index":103}],26:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2SimplexVertex = (function() {
  function b2SimplexVertex() {}

  b2SimplexVertex.prototype.Set = function(other) {
    this.wA.SetV(other.wA);
    this.wB.SetV(other.wB);
    this.w.SetV(other.w);
    this.a = other.a;
    this.indexA = other.indexA;
    this.indexB = other.indexB;
  };

  return b2SimplexVertex;

})();

//# sourceMappingURL=b2SimplexVertex.js.map

},{"../index":103}],27:[function(require,module,exports){
var Box2D, b2DistanceProxy, b2Sweep;

Box2D = require('../index');

b2Sweep = Box2D.Common.Math.b2Sweep;

b2DistanceProxy = Box2D.Collision.b2DistanceProxy;

Box2D.Collision.b2TOIInput = (function() {
  b2TOIInput.prototype.proxyA = null;

  b2TOIInput.prototype.proxyB = null;

  b2TOIInput.prototype.sweepA = null;

  b2TOIInput.prototype.sweepB = null;

  function b2TOIInput() {
    this.proxyA = new b2DistanceProxy();
    this.proxyB = new b2DistanceProxy();
    this.sweepA = new b2Sweep();
    this.sweepB = new b2Sweep();
    return;
  }

  return b2TOIInput;

})();

//# sourceMappingURL=b2TOIInput.js.map

},{"../index":103}],28:[function(require,module,exports){
var Box2D, b2Distance, b2DistanceInput, b2DistanceOutput, b2Math, b2SeparationFunction, b2Settings, b2SimplexCache, b2Transform;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Transform = Box2D.Common.Math.b2Transform;

b2Distance = Box2D.Collision.b2Distance;

b2SimplexCache = Box2D.Collision.b2SimplexCache;

b2SeparationFunction = Box2D.Collision.b2SeparationFunction;

b2DistanceOutput = Box2D.Collision.b2DistanceOutput;

b2DistanceInput = Box2D.Collision.b2DistanceInput;

Box2D.Collision.b2TimeOfImpact = (function() {
  function b2TimeOfImpact() {}

  b2TimeOfImpact.b2_toiCalls = 0;

  b2TimeOfImpact.b2_toiIters = 0;

  b2TimeOfImpact.b2_toiMaxIters = 0;

  b2TimeOfImpact.b2_toiRootIters = 0;

  b2TimeOfImpact.b2_toiMaxRootIters = 0;

  b2TimeOfImpact.s_cache = new b2SimplexCache();

  b2TimeOfImpact.s_distanceInput = new b2DistanceInput();

  b2TimeOfImpact.s_xfA = new b2Transform();

  b2TimeOfImpact.s_xfB = new b2Transform();

  b2TimeOfImpact.s_fcn = new b2SeparationFunction();

  b2TimeOfImpact.s_distanceOutput = new b2DistanceOutput();

  b2TimeOfImpact.TimeOfImpact = function(input) {
    var alpha, f, f1, f2, iter, k_maxIterations, newAlpha, proxyA, proxyB, radius, rootIterCount, separation, sweepA, sweepB, target, tolerance, x, x1, x2;
    ++b2TimeOfImpact.b2_toiCalls;
    proxyA = input.proxyA;
    proxyB = input.proxyB;
    sweepA = input.sweepA;
    sweepB = input.sweepB;
    b2Settings.b2Assert(sweepA.t0 === sweepB.t0);
    b2Settings.b2Assert(1.0 - sweepA.t0 > Number.MIN_VALUE);
    radius = proxyA.m_radius + proxyB.m_radius;
    tolerance = input.tolerance;
    alpha = 0.0;
    k_maxIterations = 1000;
    iter = 0;
    target = 0.0;
    b2TimeOfImpact.s_cache.count = 0;
    b2TimeOfImpact.s_distanceInput.useRadii = false;
    while (true) {
      sweepA.GetTransform(b2TimeOfImpact.s_xfA, alpha);
      sweepB.GetTransform(b2TimeOfImpact.s_xfB, alpha);
      b2TimeOfImpact.s_distanceInput.proxyA = proxyA;
      b2TimeOfImpact.s_distanceInput.proxyB = proxyB;
      b2TimeOfImpact.s_distanceInput.transformA = b2TimeOfImpact.s_xfA;
      b2TimeOfImpact.s_distanceInput.transformB = b2TimeOfImpact.s_xfB;
      b2Distance.Distance(b2TimeOfImpact.s_distanceOutput, b2TimeOfImpact.s_cache, b2TimeOfImpact.s_distanceInput);
      if (b2TimeOfImpact.s_distanceOutput.distance <= 0.0) {
        alpha = 1.0;
        break;
      }
      b2TimeOfImpact.s_fcn.Initialize(b2TimeOfImpact.s_cache, proxyA, b2TimeOfImpact.s_xfA, proxyB, b2TimeOfImpact.s_xfB);
      separation = b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA, b2TimeOfImpact.s_xfB);
      if (separation <= 0.0) {
        alpha = 1.0;
        break;
      }
      if (iter === 0) {
        if (separation > radius) {
          target = b2Math.Max(radius - tolerance, 0.75 * radius);
        } else {
          target = b2Math.Max(separation - tolerance, 0.02 * radius);
        }
      }
      if (separation - target < 0.5 * tolerance) {
        if (iter === 0) {
          alpha = 1.0;
          break;
        }
        break;
      }
      newAlpha = alpha;
      x1 = alpha;
      x2 = 1.0;
      f1 = separation;
      sweepA.GetTransform(b2TimeOfImpact.s_xfA, x2);
      sweepB.GetTransform(b2TimeOfImpact.s_xfB, x2);
      f2 = b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA, b2TimeOfImpact.s_xfB);
      if (f2 >= target) {
        alpha = 1.0;
        break;
      }
      rootIterCount = 0;
      while (true) {
        x = 0;
        if (rootIterCount & 1) {
          x = x1 + (target - f1) * (x2 - x1) / (f2 - f1);
        } else {
          x = 0.5 * (x1 + x2);
        }
        sweepA.GetTransform(b2TimeOfImpact.s_xfA, x);
        sweepB.GetTransform(b2TimeOfImpact.s_xfB, x);
        f = b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA, b2TimeOfImpact.s_xfB);
        if (b2Math.Abs(f - target) < 0.025 * tolerance) {
          newAlpha = x;
          break;
        }
        if (f > target) {
          x1 = x;
          f1 = f;
        } else {
          x2 = x;
          f2 = f;
        }
        ++rootIterCount;
        ++b2TimeOfImpact.b2_toiRootIters;
        if (rootIterCount === 50) {
          break;
        }
      }
      b2TimeOfImpact.b2_toiMaxRootIters = b2Math.Max(b2TimeOfImpact.b2_toiMaxRootIters, rootIterCount);
      if (newAlpha < (1.0 + 100.0 * Number.MIN_VALUE) * alpha) {
        break;
      }
      alpha = newAlpha;
      iter++;
      ++b2TimeOfImpact.b2_toiIters;
      if (iter === k_maxIterations) {
        break;
      }
    }
    b2TimeOfImpact.b2_toiMaxIters = b2Math.Max(b2TimeOfImpact.b2_toiMaxIters, iter);
    return alpha;
  };

  return b2TimeOfImpact;

})();

//# sourceMappingURL=b2TimeOfImpact.js.map

},{"../index":103}],29:[function(require,module,exports){
var Box2D, b2Manifold, b2Settings, b2Vec2;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Manifold = Box2D.Collision.b2Manifold;

Box2D.Collision.b2WorldManifold = (function() {
  b2WorldManifold.prototype.m_normal = null;

  b2WorldManifold.prototype.m_points = null;

  function b2WorldManifold() {
    var i;
    this.m_normal = new b2Vec2();
    this.m_points = new Array(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.m_points[i] = new b2Vec2();
      i++;
    }
    return;
  }

  b2WorldManifold.prototype.Initialize = function(manifold, xfA, radiusA, xfB, radiusB) {
    var cAX, cAY, cBX, cBY, clipPointX, clipPointY, d, d2, dX, dY, i, normalX, normalY, planePointX, planePointY, pointAX, pointAY, pointBX, pointBY, tMat, tVec, _results, _results1;
    if (radiusA === void 0) {
      radiusA = 0;
    }
    if (radiusB === void 0) {
      radiusB = 0;
    }
    if (manifold.m_pointCount === 0) {
      return;
    }
    i = 0;
    tVec = void 0;
    tMat = void 0;
    normalX = 0;
    normalY = 0;
    planePointX = 0;
    planePointY = 0;
    clipPointX = 0;
    clipPointY = 0;
    switch (manifold.m_type) {
      case b2Manifold.e_circles:
        tMat = xfA.R;
        tVec = manifold.m_localPoint;
        pointAX = xfA.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        pointAY = xfA.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = xfB.R;
        tVec = manifold.m_points[0].m_localPoint;
        pointBX = xfB.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        pointBY = xfB.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        dX = pointBX - pointAX;
        dY = pointBY - pointAY;
        d2 = dX * dX + dY * dY;
        if (d2 > Number.MIN_VALUE * Number.MIN_VALUE) {
          d = Math.sqrt(d2);
          this.m_normal.x = dX / d;
          this.m_normal.y = dY / d;
        } else {
          this.m_normal.x = 1;
          this.m_normal.y = 0;
        }
        cAX = pointAX + radiusA * this.m_normal.x;
        cAY = pointAY + radiusA * this.m_normal.y;
        cBX = pointBX - radiusB * this.m_normal.x;
        cBY = pointBY - radiusB * this.m_normal.y;
        this.m_points[0].x = 0.5 * (cAX + cBX);
        return this.m_points[0].y = 0.5 * (cAY + cBY);
      case b2Manifold.e_faceA:
        tMat = xfA.R;
        tVec = manifold.m_localPlaneNormal;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = xfA.R;
        tVec = manifold.m_localPoint;
        planePointX = xfA.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        planePointY = xfA.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        this.m_normal.x = normalX;
        this.m_normal.y = normalY;
        i = 0;
        _results = [];
        while (i < manifold.m_pointCount) {
          tMat = xfB.R;
          tVec = manifold.m_points[i].m_localPoint;
          clipPointX = xfB.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
          clipPointY = xfB.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
          this.m_points[i].x = clipPointX + 0.5 * (radiusA - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusB) * normalX;
          this.m_points[i].y = clipPointY + 0.5 * (radiusA - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusB) * normalY;
          _results.push(i++);
        }
        return _results;
        break;
      case b2Manifold.e_faceB:
        tMat = xfB.R;
        tVec = manifold.m_localPlaneNormal;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = xfB.R;
        tVec = manifold.m_localPoint;
        planePointX = xfB.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        planePointY = xfB.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        this.m_normal.x = -normalX;
        this.m_normal.y = -normalY;
        i = 0;
        _results1 = [];
        while (i < manifold.m_pointCount) {
          tMat = xfA.R;
          tVec = manifold.m_points[i].m_localPoint;
          clipPointX = xfA.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
          clipPointY = xfA.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
          this.m_points[i].x = clipPointX + 0.5 * (radiusB - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusA) * normalX;
          this.m_points[i].y = clipPointY + 0.5 * (radiusB - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusA) * normalY;
          _results1.push(i++);
        }
        return _results1;
    }
  };

  return b2WorldManifold;

})();

//# sourceMappingURL=b2WorldManifold.js.map

},{"../index":103}],30:[function(require,module,exports){
var Box2D, b2Math, b2Settings, b2Shape, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Shape = Box2D.Collision.Shapes.b2Shape;

Box2D.Collision.Shapes.b2CircleShape = (function(_super) {
  __extends(b2CircleShape, _super);

  b2CircleShape.prototype.m_type = b2Shape.e_circleShape;

  b2CircleShape.prototype.m_p = null;

  function b2CircleShape(radius) {
    if (radius === void 0) {
      radius = 0;
    }
    b2CircleShape.__super__.constructor.call(this, radius);
    this.m_p = new b2Vec2();
    this.m_type = b2Shape.e_circleShape;
    this.m_radius = radius;
    return;
  }

  b2CircleShape.prototype.Copy = function() {
    var s;
    s = new b2CircleShape();
    s.Set(this);
    return s;
  };

  b2CircleShape.prototype.Set = function(other) {
    var other2;
    b2CircleShape.__super__.Set.call(this, other);
    if (Box2D.equals(other, b2CircleShape)) {
      other2 = (other instanceof b2CircleShape ? other : null);
      this.m_p.SetV(other2.m_p);
    }
  };

  b2CircleShape.prototype.TestPoint = function(transform, p) {
    var dX, dY, tMat;
    tMat = transform.R;
    dX = transform.position.x + (tMat.col1.x * this.m_p.x + tMat.col2.x * this.m_p.y);
    dY = transform.position.y + (tMat.col1.y * this.m_p.x + tMat.col2.y * this.m_p.y);
    dX = p.x - dX;
    dY = p.y - dY;
    return (dX * dX + dY * dY) <= this.m_radius * this.m_radius;
  };

  b2CircleShape.prototype.RayCast = function(output, input, transform) {
    var a, b, c, positionX, positionY, rX, rY, rr, sX, sY, sigma, tMat;
    tMat = transform.R;
    positionX = transform.position.x + (tMat.col1.x * this.m_p.x + tMat.col2.x * this.m_p.y);
    positionY = transform.position.y + (tMat.col1.y * this.m_p.x + tMat.col2.y * this.m_p.y);
    sX = input.p1.x - positionX;
    sY = input.p1.y - positionY;
    b = (sX * sX + sY * sY) - this.m_radius * this.m_radius;
    rX = input.p2.x - input.p1.x;
    rY = input.p2.y - input.p1.y;
    c = sX * rX + sY * rY;
    rr = rX * rX + rY * rY;
    sigma = c * c - rr * b;
    if (sigma < 0.0 || rr < Number.MIN_VALUE) {
      return false;
    }
    a = -(c + Math.sqrt(sigma));
    if (0.0 <= a && a <= input.maxFraction * rr) {
      a /= rr;
      output.fraction = a;
      output.normal.x = sX + a * rX;
      output.normal.y = sY + a * rY;
      output.normal.Normalize();
      return true;
    }
    return false;
  };

  b2CircleShape.prototype.ComputeAABB = function(aabb, transform) {
    var pX, pY, tMat;
    tMat = transform.R;
    pX = transform.position.x + (tMat.col1.x * this.m_p.x + tMat.col2.x * this.m_p.y);
    pY = transform.position.y + (tMat.col1.y * this.m_p.x + tMat.col2.y * this.m_p.y);
    aabb.lowerBound.Set(pX - this.m_radius, pY - this.m_radius);
    aabb.upperBound.Set(pX + this.m_radius, pY + this.m_radius);
  };

  b2CircleShape.prototype.ComputeMass = function(massData, density) {
    if (density === void 0) {
      density = 0;
    }
    massData.mass = density * b2Settings.b2_pi * this.m_radius * this.m_radius;
    massData.center.SetV(this.m_p);
    massData.I = massData.mass * (0.5 * this.m_radius * this.m_radius + (this.m_p.x * this.m_p.x + this.m_p.y * this.m_p.y));
  };

  b2CircleShape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    var area, com, l, l2, p, r2;
    if (offset === void 0) {
      offset = 0;
    }
    p = b2Math.MulX(xf, this.m_p);
    l = -(b2Math.Dot(normal, p) - offset);
    if (l < (-this.m_radius) + Number.MIN_VALUE) {
      return 0;
    }
    if (l > this.m_radius) {
      c.SetV(p);
      return Math.PI * this.m_radius * this.m_radius;
    }
    r2 = this.m_radius * this.m_radius;
    l2 = l * l;
    area = r2 * (Math.asin(l / this.m_radius) + Math.PI / 2) + l * Math.sqrt(r2 - l2);
    com = -2 / 3 * Math.pow(r2 - l2, 1.5) / area;
    c.x = p.x + normal.x * com;
    c.y = p.y + normal.y * com;
    return area;
  };

  b2CircleShape.prototype.GetLocalPosition = function() {
    return this.m_p;
  };

  b2CircleShape.prototype.SetLocalPosition = function(position) {
    this.m_p.SetV(position);
  };

  b2CircleShape.prototype.GetRadius = function() {
    return this.m_radius;
  };

  b2CircleShape.prototype.SetRadius = function(radius) {
    if (radius === void 0) {
      radius = 0;
    }
    this.m_radius = radius;
  };

  return b2CircleShape;

})(b2Shape);

//# sourceMappingURL=b2CircleShape.js.map

},{"../../index":103}],31:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Collision.Shapes.b2EdgeChainDef = (function() {
  b2EdgeChainDef.prototype.vertexCount = 0;

  b2EdgeChainDef.prototype.isALoop = true;

  b2EdgeChainDef.prototype.vertices = null;

  function b2EdgeChainDef() {
    this.vertices = [];
    return;
  }

  return b2EdgeChainDef;

})();

//# sourceMappingURL=b2EdgeChainDef.js.map

},{"../../index":103}],32:[function(require,module,exports){
var Box2D, b2Shape,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Shape = Box2D.Collision.Shapes.b2Shape;

Box2D.Collision.Shapes.b2EdgeShape = (function(_super) {
  __extends(b2EdgeShape, _super);

  function b2EdgeShape() {
    b2EdgeShape.__super__.constructor.apply(this, arguments);
    this.s_supportVec = new b2Vec2();
    this.m_v1 = new b2Vec2();
    this.m_v2 = new b2Vec2();
    this.m_coreV1 = new b2Vec2();
    this.m_coreV2 = new b2Vec2();
    this.m_normal = new b2Vec2();
    this.m_direction = new b2Vec2();
    this.m_cornerDir1 = new b2Vec2();
    this.m_cornerDir2 = new b2Vec2();
    this.m_type = b2Shape.e_edgeShape;
    this.m_prevEdge = null;
    this.m_nextEdge = null;
    this.m_v1 = v1;
    this.m_v2 = v2;
    this.m_direction.Set(this.m_v2.x - this.m_v1.x, this.m_v2.y - this.m_v1.y);
    this.m_length = this.m_direction.Normalize();
    this.m_normal.Set(this.m_direction.y, -this.m_direction.x);
    this.m_coreV1.Set((-b2Settings.b2_toiSlop * (this.m_normal.x - this.m_direction.x)) + this.m_v1.x, (-b2Settings.b2_toiSlop * (this.m_normal.y - this.m_direction.y)) + this.m_v1.y);
    this.m_coreV2.Set((-b2Settings.b2_toiSlop * (this.m_normal.x + this.m_direction.x)) + this.m_v2.x, (-b2Settings.b2_toiSlop * (this.m_normal.y + this.m_direction.y)) + this.m_v2.y);
    this.m_cornerDir1 = this.m_normal;
    this.m_cornerDir2.Set(-this.m_normal.x, -this.m_normal.y);
    return;
  }

  b2EdgeShape.prototype.TestPoint = function(transform, p) {
    return false;
  };

  b2EdgeShape.prototype.RayCast = function(output, input, transform) {
    var a, bX, bY, denom, k_slop, mu2, nLen, nX, nY, rX, rY, tMat, v1X, v1Y;
    tMat = void 0;
    rX = input.p2.x - input.p1.x;
    rY = input.p2.y - input.p1.y;
    tMat = transform.R;
    v1X = transform.position.x + (tMat.col1.x * this.m_v1.x + tMat.col2.x * this.m_v1.y);
    v1Y = transform.position.y + (tMat.col1.y * this.m_v1.x + tMat.col2.y * this.m_v1.y);
    nX = transform.position.y + (tMat.col1.y * this.m_v2.x + tMat.col2.y * this.m_v2.y) - v1Y;
    nY = -(transform.position.x + (tMat.col1.x * this.m_v2.x + tMat.col2.x * this.m_v2.y) - v1X);
    k_slop = 100.0 * Number.MIN_VALUE;
    denom = -(rX * nX + rY * nY);
    if (denom > k_slop) {
      bX = input.p1.x - v1X;
      bY = input.p1.y - v1Y;
      a = bX * nX + bY * nY;
      if (0.0 <= a && a <= input.maxFraction * denom) {
        mu2 = (-rX * bY) + rY * bX;
        if ((-k_slop * denom) <= mu2 && mu2 <= denom * (1.0 + k_slop)) {
          a /= denom;
          output.fraction = a;
          nLen = Math.sqrt(nX * nX + nY * nY);
          output.normal.x = nX / nLen;
          output.normal.y = nY / nLen;
          return true;
        }
      }
    }
    return false;
  };

  b2EdgeShape.prototype.ComputeAABB = function(aabb, transform) {
    var tMat, v1X, v1Y, v2X, v2Y;
    tMat = transform.R;
    v1X = transform.position.x + (tMat.col1.x * this.m_v1.x + tMat.col2.x * this.m_v1.y);
    v1Y = transform.position.y + (tMat.col1.y * this.m_v1.x + tMat.col2.y * this.m_v1.y);
    v2X = transform.position.x + (tMat.col1.x * this.m_v2.x + tMat.col2.x * this.m_v2.y);
    v2Y = transform.position.y + (tMat.col1.y * this.m_v2.x + tMat.col2.y * this.m_v2.y);
    if (v1X < v2X) {
      aabb.lowerBound.x = v1X;
      aabb.upperBound.x = v2X;
    } else {
      aabb.lowerBound.x = v2X;
      aabb.upperBound.x = v1X;
    }
    if (v1Y < v2Y) {
      aabb.lowerBound.y = v1Y;
      aabb.upperBound.y = v2Y;
    } else {
      aabb.lowerBound.y = v2Y;
      aabb.upperBound.y = v1Y;
    }
  };

  b2EdgeShape.prototype.ComputeMass = function(massData, density) {
    if (density === void 0) {
      density = 0;
    }
    massData.mass = 0;
    massData.center.SetV(this.m_v1);
    massData.I = 0;
  };

  b2EdgeShape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    var d1, d2, v0, v1, v2;
    if (offset === void 0) {
      offset = 0;
    }
    v0 = new b2Vec2(normal.x * offset, normal.y * offset);
    v1 = b2Math.MulX(xf, this.m_v1);
    v2 = b2Math.MulX(xf, this.m_v2);
    d1 = b2Math.Dot(normal, v1) - offset;
    d2 = b2Math.Dot(normal, v2) - offset;
    if (d1 > 0) {
      if (d2 > 0) {
        return 0;
      } else {
        v1.x = (-d2 / (d1 - d2) * v1.x) + d1 / (d1 - d2) * v2.x;
        v1.y = (-d2 / (d1 - d2) * v1.y) + d1 / (d1 - d2) * v2.y;
      }
    } else {
      if (d2 > 0) {
        v2.x = (-d2 / (d1 - d2) * v1.x) + d1 / (d1 - d2) * v2.x;
        v2.y = (-d2 / (d1 - d2) * v1.y) + d1 / (d1 - d2) * v2.y;
      } else {

      }
    }
    c.x = (v0.x + v1.x + v2.x) / 3;
    c.y = (v0.y + v1.y + v2.y) / 3;
    return 0.5 * ((v1.x - v0.x) * (v2.y - v0.y) - (v1.y - v0.y) * (v2.x - v0.x));
  };

  b2EdgeShape.prototype.GetLength = function() {
    return this.m_length;
  };

  b2EdgeShape.prototype.GetVertex1 = function() {
    return this.m_v1;
  };

  b2EdgeShape.prototype.GetVertex2 = function() {
    return this.m_v2;
  };

  b2EdgeShape.prototype.GetCoreVertex1 = function() {
    return this.m_coreV1;
  };

  b2EdgeShape.prototype.GetCoreVertex2 = function() {
    return this.m_coreV2;
  };

  b2EdgeShape.prototype.GetNormalVector = function() {
    return this.m_normal;
  };

  b2EdgeShape.prototype.GetDirectionVector = function() {
    return this.m_direction;
  };

  b2EdgeShape.prototype.GetCorner1Vector = function() {
    return this.m_cornerDir1;
  };

  b2EdgeShape.prototype.GetCorner2Vector = function() {
    return this.m_cornerDir2;
  };

  b2EdgeShape.prototype.Corner1IsConvex = function() {
    return this.m_cornerConvex1;
  };

  b2EdgeShape.prototype.Corner2IsConvex = function() {
    return this.m_cornerConvex2;
  };

  b2EdgeShape.prototype.GetFirstVertex = function(xf) {
    var tMat;
    tMat = xf.R;
    return new b2Vec2(xf.position.x + (tMat.col1.x * this.m_coreV1.x + tMat.col2.x * this.m_coreV1.y), xf.position.y + (tMat.col1.y * this.m_coreV1.x + tMat.col2.y * this.m_coreV1.y));
  };

  b2EdgeShape.prototype.GetNextEdge = function() {
    return this.m_nextEdge;
  };

  b2EdgeShape.prototype.GetPrevEdge = function() {
    return this.m_prevEdge;
  };

  b2EdgeShape.prototype.Support = function(xf, dX, dY) {
    var tMat, v1X, v1Y, v2X, v2Y;
    if (dX === void 0) {
      dX = 0;
    }
    if (dY === void 0) {
      dY = 0;
    }
    tMat = xf.R;
    v1X = xf.position.x + (tMat.col1.x * this.m_coreV1.x + tMat.col2.x * this.m_coreV1.y);
    v1Y = xf.position.y + (tMat.col1.y * this.m_coreV1.x + tMat.col2.y * this.m_coreV1.y);
    v2X = xf.position.x + (tMat.col1.x * this.m_coreV2.x + tMat.col2.x * this.m_coreV2.y);
    v2Y = xf.position.y + (tMat.col1.y * this.m_coreV2.x + tMat.col2.y * this.m_coreV2.y);
    if ((v1X * dX + v1Y * dY) > (v2X * dX + v2Y * dY)) {
      this.s_supportVec.x = v1X;
      this.s_supportVec.y = v1Y;
    } else {
      this.s_supportVec.x = v2X;
      this.s_supportVec.y = v2Y;
    }
    return this.s_supportVec;
  };

  b2EdgeShape.prototype.SetPrevEdge = function(edge, core, cornerDir, convex) {
    this.m_prevEdge = edge;
    this.m_coreV1 = core;
    this.m_cornerDir1 = cornerDir;
    this.m_cornerConvex1 = convex;
  };

  b2EdgeShape.prototype.SetNextEdge = function(edge, core, cornerDir, convex) {
    this.m_nextEdge = edge;
    this.m_coreV2 = core;
    this.m_cornerDir2 = cornerDir;
    this.m_cornerConvex2 = convex;
  };

  return b2EdgeShape;

})(b2Shape);

//# sourceMappingURL=b2EdgeShape.js.map

},{"../../index":103}],33:[function(require,module,exports){
var Box2D, b2Shape, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Shape = Box2D.Collision.Shapes.b2Shape;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.Shapes.b2MassData = (function(_super) {
  __extends(b2MassData, _super);

  b2MassData.prototype.mass = 0.0;

  b2MassData.prototype.center = null;

  b2MassData.prototype.I = 0.0;

  function b2MassData() {
    this.center = new b2Vec2(0, 0);
    return;
  }

  return b2MassData;

})(b2Shape);

//# sourceMappingURL=b2MassData.js.map

},{"../../index":103}],34:[function(require,module,exports){
var Box2D, Vector, b2Mat22, b2Math, b2Settings, b2Shape, b2Transform, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Transform = Box2D.Common.Math.b2Transform;

b2Shape = Box2D.Collision.Shapes.b2Shape;

Box2D.Collision.Shapes.b2PolygonShape = (function(_super) {
  __extends(b2PolygonShape, _super);

  b2PolygonShape.s_mat = new b2Mat22();

  b2PolygonShape.prototype.m_type = b2Shape.e_polygonShape;

  b2PolygonShape.prototype.m_centroid = null;

  b2PolygonShape.prototype.m_vertices = null;

  b2PolygonShape.prototype.m_normals = null;

  b2PolygonShape.prototype.m_vertexCount = 0;

  function b2PolygonShape() {
    this.m_centroid = new b2Vec2();
    this.m_vertices = new Array();
    this.m_normals = new Array();
    return;
  }

  b2PolygonShape.prototype.Copy = function() {
    var s;
    s = new b2PolygonShape();
    s.Set(this);
    return s;
  };

  b2PolygonShape.prototype.Set = function(other) {
    var i, other2;
    b2PolygonShape.__super__.Set.call(this, other);
    if (Box2D.equals(other, b2PolygonShape)) {
      other2 = (other instanceof b2PolygonShape ? other : null);
      this.m_centroid.SetV(other2.m_centroid);
      this.m_vertexCount = other2.m_vertexCount;
      this.Reserve(this.m_vertexCount);
      i = 0;
      while (i < this.m_vertexCount) {
        this.m_vertices[i].SetV(other2.m_vertices[i]);
        this.m_normals[i].SetV(other2.m_normals[i]);
        i++;
      }
    }
  };

  b2PolygonShape.prototype.SetAsArray = function(vertices, vertexCount) {
    var i, tVec, v;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    v = new Array();
    i = 0;
    tVec = void 0;
    i = 0;
    while (i < vertices.length) {
      tVec = vertices[i];
      v.push(tVec);
      ++i;
    }
    this.SetAsVector(v, vertexCount);
  };

  b2PolygonShape.AsArray = function(vertices, vertexCount) {
    var polygonShape;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsArray(vertices, vertexCount);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsVector = function(vertices, vertexCount) {
    var edge, i, i1, i2;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    if (vertexCount === 0) {
      vertexCount = vertices.length;
    }
    b2Settings.b2Assert(2 <= vertexCount);
    this.m_vertexCount = vertexCount;
    this.Reserve(vertexCount);
    i = 0;
    i = 0;
    while (i < this.m_vertexCount) {
      this.m_vertices[i].SetV(vertices[i]);
      i++;
    }
    i = 0;
    while (i < this.m_vertexCount) {
      i1 = parseInt(i);
      i2 = parseInt((i + 1 < this.m_vertexCount ? i + 1 : 0));
      edge = b2Math.SubtractVV(this.m_vertices[i2], this.m_vertices[i1]);
      b2Settings.b2Assert(edge.LengthSquared() > Number.MIN_VALUE);
      this.m_normals[i].SetV(b2Math.CrossVF(edge, 1.0));
      this.m_normals[i].Normalize();
      ++i;
    }
    this.m_centroid = b2PolygonShape.ComputeCentroid(this.m_vertices, this.m_vertexCount);
  };

  b2PolygonShape.AsVector = function(vertices, vertexCount) {
    var polygonShape;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsVector(vertices, vertexCount);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsBox = function(hx, hy) {
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    this.m_vertexCount = 4;
    this.Reserve(4);
    this.m_vertices[0].Set(-hx, -hy);
    this.m_vertices[1].Set(hx, -hy);
    this.m_vertices[2].Set(hx, hy);
    this.m_vertices[3].Set(-hx, hy);
    this.m_normals[0].Set(0.0, -1.0);
    this.m_normals[1].Set(1.0, 0.0);
    this.m_normals[2].Set(0.0, 1.0);
    this.m_normals[3].Set(-1.0, 0.0);
    this.m_centroid.SetZero();
  };

  b2PolygonShape.AsBox = function(hx, hy) {
    var polygonShape;
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsBox(hx, hy);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsOrientedBox = function(hx, hy, center, angle) {
    var i, xf;
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    if (center === void 0) {
      center = null;
    }
    if (angle === void 0) {
      angle = 0.0;
    }
    this.m_vertexCount = 4;
    this.Reserve(4);
    this.m_vertices[0].Set(-hx, -hy);
    this.m_vertices[1].Set(hx, -hy);
    this.m_vertices[2].Set(hx, hy);
    this.m_vertices[3].Set(-hx, hy);
    this.m_normals[0].Set(0.0, -1.0);
    this.m_normals[1].Set(1.0, 0.0);
    this.m_normals[2].Set(0.0, 1.0);
    this.m_normals[3].Set(-1.0, 0.0);
    this.m_centroid = center;
    xf = new b2Transform();
    xf.position = center;
    xf.R.Set(angle);
    i = 0;
    while (i < this.m_vertexCount) {
      this.m_vertices[i] = b2Math.MulX(xf, this.m_vertices[i]);
      this.m_normals[i] = b2Math.MulMV(xf.R, this.m_normals[i]);
      ++i;
    }
  };

  b2PolygonShape.AsOrientedBox = function(hx, hy, center, angle) {
    var polygonShape;
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    if (center === void 0) {
      center = null;
    }
    if (angle === void 0) {
      angle = 0.0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsOrientedBox(hx, hy, center, angle);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsEdge = function(v1, v2) {
    this.m_vertexCount = 2;
    this.Reserve(2);
    this.m_vertices[0].SetV(v1);
    this.m_vertices[1].SetV(v2);
    this.m_centroid.x = 0.5 * (v1.x + v2.x);
    this.m_centroid.y = 0.5 * (v1.y + v2.y);
    this.m_normals[0] = b2Math.CrossVF(b2Math.SubtractVV(v2, v1), 1.0);
    this.m_normals[0].Normalize();
    this.m_normals[1].x = -this.m_normals[0].x;
    this.m_normals[1].y = -this.m_normals[0].y;
  };

  b2PolygonShape.AsEdge = function(v1, v2) {
    var polygonShape;
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsEdge(v1, v2);
    return polygonShape;
  };

  b2PolygonShape.prototype.TestPoint = function(xf, p) {
    var dot, i, pLocalX, pLocalY, tMat, tVec, tX, tY;
    tVec = void 0;
    tMat = xf.R;
    tX = p.x - xf.position.x;
    tY = p.y - xf.position.y;
    pLocalX = tX * tMat.col1.x + tY * tMat.col1.y;
    pLocalY = tX * tMat.col2.x + tY * tMat.col2.y;
    i = 0;
    while (i < this.m_vertexCount) {
      tVec = this.m_vertices[i];
      tX = pLocalX - tVec.x;
      tY = pLocalY - tVec.y;
      tVec = this.m_normals[i];
      dot = tVec.x * tX + tVec.y * tY;
      if (dot > 0.0) {
        return false;
      }
      ++i;
    }
    return true;
  };

  b2PolygonShape.prototype.RayCast = function(output, input, transform) {
    var dX, dY, denominator, i, index, lower, numerator, p1X, p1Y, p2X, p2Y, tMat, tVec, tX, tY, upper;
    lower = 0.0;
    upper = input.maxFraction;
    tX = 0;
    tY = 0;
    tMat = void 0;
    tVec = void 0;
    tX = input.p1.x - transform.position.x;
    tY = input.p1.y - transform.position.y;
    tMat = transform.R;
    p1X = tX * tMat.col1.x + tY * tMat.col1.y;
    p1Y = tX * tMat.col2.x + tY * tMat.col2.y;
    tX = input.p2.x - transform.position.x;
    tY = input.p2.y - transform.position.y;
    tMat = transform.R;
    p2X = tX * tMat.col1.x + tY * tMat.col1.y;
    p2Y = tX * tMat.col2.x + tY * tMat.col2.y;
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    index = parseInt(-1.);
    i = 0;
    while (i < this.m_vertexCount) {
      tVec = this.m_vertices[i];
      tX = tVec.x - p1X;
      tY = tVec.y - p1Y;
      tVec = this.m_normals[i];
      numerator = tVec.x * tX + tVec.y * tY;
      denominator = tVec.x * dX + tVec.y * dY;
      if (denominator === 0.0) {
        if (numerator < 0.0) {
          return false;
        }
      } else {
        if (denominator < 0.0 && numerator < lower * denominator) {
          lower = numerator / denominator;
          index = i;
        } else {
          if (denominator > 0.0 && numerator < upper * denominator) {
            upper = numerator / denominator;
          }
        }
      }
      if (upper < lower - Number.MIN_VALUE) {
        return false;
      }
      ++i;
    }
    if (index >= 0) {
      output.fraction = lower;
      tMat = transform.R;
      tVec = this.m_normals[index];
      output.normal.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      output.normal.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      return true;
    }
    return false;
  };

  b2PolygonShape.prototype.ComputeAABB = function(aabb, xf) {
    var i, lowerX, lowerY, tMat, tVec, upperX, upperY, vX, vY;
    tMat = xf.R;
    tVec = this.m_vertices[0];
    lowerX = xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    lowerY = xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    upperX = lowerX;
    upperY = lowerY;
    i = 1;
    while (i < this.m_vertexCount) {
      tVec = this.m_vertices[i];
      vX = xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      vY = xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      lowerX = (lowerX < vX ? lowerX : vX);
      lowerY = (lowerY < vY ? lowerY : vY);
      upperX = (upperX > vX ? upperX : vX);
      upperY = (upperY > vY ? upperY : vY);
      ++i;
    }
    aabb.lowerBound.x = lowerX - this.m_radius;
    aabb.lowerBound.y = lowerY - this.m_radius;
    aabb.upperBound.x = upperX + this.m_radius;
    aabb.upperBound.y = upperY + this.m_radius;
  };

  b2PolygonShape.prototype.ComputeMass = function(massData, density) {
    var D, I, area, centerX, centerY, e1X, e1Y, e2X, e2Y, ex1, ex2, ey1, ey2, i, intx2, inty2, k_inv3, p1X, p1Y, p2, p3, px, py, triangleArea;
    if (density === void 0) {
      density = 0;
    }
    if (this.m_vertexCount === 2) {
      massData.center.x = 0.5 * (this.m_vertices[0].x + this.m_vertices[1].x);
      massData.center.y = 0.5 * (this.m_vertices[0].y + this.m_vertices[1].y);
      massData.mass = 0.0;
      massData.I = 0.0;
      return;
    }
    centerX = 0.0;
    centerY = 0.0;
    area = 0.0;
    I = 0.0;
    p1X = 0.0;
    p1Y = 0.0;
    k_inv3 = 1.0 / 3.0;
    i = 0;
    while (i < this.m_vertexCount) {
      p2 = this.m_vertices[i];
      p3 = (i + 1 < this.m_vertexCount ? this.m_vertices[parseInt(i + 1)] : this.m_vertices[0]);
      e1X = p2.x - p1X;
      e1Y = p2.y - p1Y;
      e2X = p3.x - p1X;
      e2Y = p3.y - p1Y;
      D = e1X * e2Y - e1Y * e2X;
      triangleArea = 0.5 * D;
      area += triangleArea;
      centerX += triangleArea * k_inv3 * (p1X + p2.x + p3.x);
      centerY += triangleArea * k_inv3 * (p1Y + p2.y + p3.y);
      px = p1X;
      py = p1Y;
      ex1 = e1X;
      ey1 = e1Y;
      ex2 = e2X;
      ey2 = e2Y;
      intx2 = k_inv3 * (0.25 * (ex1 * ex1 + ex2 * ex1 + ex2 * ex2) + (px * ex1 + px * ex2)) + 0.5 * px * px;
      inty2 = k_inv3 * (0.25 * (ey1 * ey1 + ey2 * ey1 + ey2 * ey2) + (py * ey1 + py * ey2)) + 0.5 * py * py;
      I += D * (intx2 + inty2);
      ++i;
    }
    massData.mass = density * area;
    centerX *= 1.0 / area;
    centerY *= 1.0 / area;
    massData.center.Set(centerX, centerY);
    massData.I = density * I;
  };

  b2PolygonShape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    var area, center, depths, diveCount, i, intoIndex, intoIndex2, intoLamdda, intoVec, isSubmerged, lastSubmerged, md, normalL, offsetL, outoIndex, outoIndex2, outoLamdda, outoVec, p2, p3, triangleArea;
    if (offset === void 0) {
      offset = 0;
    }
    normalL = b2Math.MulTMV(xf.R, normal);
    offsetL = offset - b2Math.Dot(normal, xf.position);
    depths = new Vector();
    diveCount = 0;
    intoIndex = parseInt(-1.);
    outoIndex = parseInt(-1.);
    lastSubmerged = false;
    i = 0;
    i = 0;
    while (i < this.m_vertexCount) {
      depths[i] = b2Math.Dot(normalL, this.m_vertices[i]) - offsetL;
      isSubmerged = depths[i] < (-Number.MIN_VALUE);
      if (i > 0) {
        if (isSubmerged) {
          if (!lastSubmerged) {
            intoIndex = i - 1;
            diveCount++;
          }
        } else {
          if (lastSubmerged) {
            outoIndex = i - 1;
            diveCount++;
          }
        }
      }
      lastSubmerged = isSubmerged;
      ++i;
    }
    switch (diveCount) {
      case 0:
        if (lastSubmerged) {
          md = new b2MassData();
          this.ComputeMass(md, 1);
          c.SetV(b2Math.MulX(xf, md.center));
          return md.mass;
        } else {
          return 0;
        }
        break;
      case 1:
        if (intoIndex === (-1)) {
          intoIndex = this.m_vertexCount - 1;
        } else {
          outoIndex = this.m_vertexCount - 1;
        }
    }
    intoIndex2 = parseInt((intoIndex + 1) % this.m_vertexCount);
    outoIndex2 = parseInt((outoIndex + 1) % this.m_vertexCount);
    intoLamdda = (0 - depths[intoIndex]) / (depths[intoIndex2] - depths[intoIndex]);
    outoLamdda = (0 - depths[outoIndex]) / (depths[outoIndex2] - depths[outoIndex]);
    intoVec = new b2Vec2(this.m_vertices[intoIndex].x * (1 - intoLamdda) + this.m_vertices[intoIndex2].x * intoLamdda, this.m_vertices[intoIndex].y * (1 - intoLamdda) + this.m_vertices[intoIndex2].y * intoLamdda);
    outoVec = new b2Vec2(this.m_vertices[outoIndex].x * (1 - outoLamdda) + this.m_vertices[outoIndex2].x * outoLamdda, this.m_vertices[outoIndex].y * (1 - outoLamdda) + this.m_vertices[outoIndex2].y * outoLamdda);
    area = 0;
    center = new b2Vec2();
    p2 = this.m_vertices[intoIndex2];
    p3 = void 0;
    i = intoIndex2;
    while (i !== outoIndex2) {
      i = (i + 1) % this.m_vertexCount;
      if (i === outoIndex2) {
        p3 = outoVec;
      } else {
        p3 = this.m_vertices[i];
      }
      triangleArea = 0.5 * ((p2.x - intoVec.x) * (p3.y - intoVec.y) - (p2.y - intoVec.y) * (p3.x - intoVec.x));
      area += triangleArea;
      center.x += triangleArea * (intoVec.x + p2.x + p3.x) / 3;
      center.y += triangleArea * (intoVec.y + p2.y + p3.y) / 3;
      p2 = p3;
    }
    center.Multiply(1 / area);
    c.SetV(b2Math.MulX(xf, center));
    return area;
  };

  b2PolygonShape.prototype.GetVertexCount = function() {
    return this.m_vertexCount;
  };

  b2PolygonShape.prototype.GetVertices = function() {
    return this.m_vertices;
  };

  b2PolygonShape.prototype.GetNormals = function() {
    return this.m_normals;
  };

  b2PolygonShape.prototype.GetSupport = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_vertexCount) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return bestIndex;
  };

  b2PolygonShape.prototype.GetSupportVertex = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_vertexCount) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return this.m_vertices[bestIndex];
  };

  b2PolygonShape.prototype.Validate = function() {
    return false;
  };

  b2PolygonShape.prototype.Reserve = function(count) {
    var i;
    if (count === void 0) {
      count = 0;
    }
    i = parseInt(this.m_vertices.length);
    while (i < count) {
      this.m_vertices[i] = new b2Vec2();
      this.m_normals[i] = new b2Vec2();
      i++;
    }
  };

  b2PolygonShape.ComputeCentroid = function(vs, count) {
    var D, area, c, e1X, e1Y, e2X, e2Y, i, inv3, p1X, p1Y, p2, p3, triangleArea;
    if (count === void 0) {
      count = 0;
    }
    c = new b2Vec2();
    area = 0.0;
    p1X = 0.0;
    p1Y = 0.0;
    inv3 = 1.0 / 3.0;
    i = 0;
    while (i < count) {
      p2 = vs[i];
      p3 = (i + 1 < count ? vs[parseInt(i + 1)] : vs[0]);
      e1X = p2.x - p1X;
      e1Y = p2.y - p1Y;
      e2X = p3.x - p1X;
      e2Y = p3.y - p1Y;
      D = e1X * e2Y - e1Y * e2X;
      triangleArea = 0.5 * D;
      area += triangleArea;
      c.x += triangleArea * inv3 * (p1X + p2.x + p3.x);
      c.y += triangleArea * inv3 * (p1Y + p2.y + p3.y);
      ++i;
    }
    c.x *= 1.0 / area;
    c.y *= 1.0 / area;
    return c;
  };

  b2PolygonShape.ComputeOBB = function(obb, vs, count) {
    var area, centerX, centerY, dX, dY, i, j, length, lowerX, lowerY, minArea, p, rX, rY, root, tMat, upperX, upperY, uxX, uxY, uyX, uyY;
    if (count === void 0) {
      count = 0;
    }
    i = 0;
    p = new Array(count + 1);
    i = 0;
    while (i < count) {
      p[i] = vs[i];
      ++i;
    }
    p[count] = p[0];
    minArea = Number.MAX_VALUE;
    i = 1;
    while (i <= count) {
      root = p[parseInt(i - 1)];
      uxX = p[i].x - root.x;
      uxY = p[i].y - root.y;
      length = Math.sqrt(uxX * uxX + uxY * uxY);
      uxX /= length;
      uxY /= length;
      uyX = -uxY;
      uyY = uxX;
      lowerX = Number.MAX_VALUE;
      lowerY = Number.MAX_VALUE;
      upperX = -Number.MAX_VALUE;
      upperY = -Number.MAX_VALUE;
      j = 0;
      while (j < count) {
        dX = p[j].x - root.x;
        dY = p[j].y - root.y;
        rX = uxX * dX + uxY * dY;
        rY = uyX * dX + uyY * dY;
        if (rX < lowerX) {
          lowerX = rX;
        }
        if (rY < lowerY) {
          lowerY = rY;
        }
        if (rX > upperX) {
          upperX = rX;
        }
        if (rY > upperY) {
          upperY = rY;
        }
        ++j;
      }
      area = (upperX - lowerX) * (upperY - lowerY);
      if (area < 0.95 * minArea) {
        minArea = area;
        obb.R.col1.x = uxX;
        obb.R.col1.y = uxY;
        obb.R.col2.x = uyX;
        obb.R.col2.y = uyY;
        centerX = 0.5 * (lowerX + upperX);
        centerY = 0.5 * (lowerY + upperY);
        tMat = obb.R;
        obb.center.x = root.x + (tMat.col1.x * centerX + tMat.col2.x * centerY);
        obb.center.y = root.y + (tMat.col1.y * centerX + tMat.col2.y * centerY);
        obb.extents.x = 0.5 * (upperX - lowerX);
        obb.extents.y = 0.5 * (upperY - lowerY);
      }
      ++i;
    }
  };

  return b2PolygonShape;

})(b2Shape);

//# sourceMappingURL=b2PolygonShape.js.map

},{"../../index":103}],35:[function(require,module,exports){
var Box2D, b2Distance, b2DistanceInput, b2DistanceOutput, b2DistanceProxy, b2Settings, b2SimplexCache;

Box2D = require('../../index');

b2Settings = Box2D.Common.b2Settings;

b2SimplexCache = Box2D.Collision.b2SimplexCache;

b2Distance = Box2D.Collision.b2Distance;

b2DistanceOutput = Box2D.Collision.b2DistanceOutput;

b2DistanceInput = Box2D.Collision.b2DistanceInput;

b2DistanceProxy = Box2D.Collision.b2DistanceProxy;

Box2D.Collision.Shapes.b2Shape = (function() {
  function b2Shape() {}

  b2Shape.e_unknownShape = parseInt(-1.);

  b2Shape.e_circleShape = 0;

  b2Shape.e_polygonShape = 1;

  b2Shape.e_edgeShape = 2;

  b2Shape.e_shapeTypeCount = 3;

  b2Shape.e_hitCollide = 1;

  b2Shape.e_missCollide = 0;

  b2Shape.e_startsInsideCollide = parseInt(-1.);

  b2Shape.prototype.m_type = b2Shape.e_unknownShape;

  b2Shape.prototype.m_radius = b2Settings.b2_linearSlop;

  b2Shape.prototype.Copy = function() {
    return null;
  };

  b2Shape.prototype.Set = function(other) {
    this.m_radius = other.m_radius;
  };

  b2Shape.prototype.GetType = function() {
    return this.m_type;
  };

  b2Shape.prototype.TestPoint = function(xf, p) {
    return false;
  };

  b2Shape.prototype.RayCast = function(output, input, transform) {
    return false;
  };

  b2Shape.prototype.ComputeAABB = function(aabb, xf) {};

  b2Shape.prototype.ComputeMass = function(massData, density) {
    if (density === void 0) {
      density = 0;
    }
  };

  b2Shape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    if (offset === void 0) {
      offset = 0;
    }
    return 0;
  };

  b2Shape.TestOverlap = function(shape1, transform1, shape2, transform2) {
    var input, output, simplexCache;
    input = new b2DistanceInput();
    input.proxyA = new b2DistanceProxy();
    input.proxyA.Set(shape1);
    input.proxyB = new b2DistanceProxy();
    input.proxyB.Set(shape2);
    input.transformA = transform1;
    input.transformB = transform2;
    input.useRadii = true;
    simplexCache = new b2SimplexCache();
    simplexCache.count = 0;
    output = new b2DistanceOutput();
    b2Distance.Distance(output, simplexCache, input);
    return output.distance < 10.0 * Number.MIN_VALUE;
  };

  return b2Shape;

})();

//# sourceMappingURL=b2Shape.js.map

},{"../../index":103}],36:[function(require,module,exports){
var Box2D, b2Math, parseUInt;

Box2D = require('../index');

b2Math = Box2D.Common.Math.b2Math;

parseUInt = function(v) {
  return Math.abs(parseInt(v));
};

Box2D.Common.b2Color = (function() {
  b2Color.prototype._r = 0;

  b2Color.prototype._g = 0;

  b2Color.prototype._b = 0;

  function b2Color(rr, gg, bb) {
    if (rr === void 0) {
      rr = 0;
    }
    if (gg === void 0) {
      gg = 0;
    }
    if (bb === void 0) {
      bb = 0;
    }
    this._r = parseUInt(255 * b2Math.Clamp(rr, 0.0, 1.0));
    this._g = parseUInt(255 * b2Math.Clamp(gg, 0.0, 1.0));
    this._b = parseUInt(255 * b2Math.Clamp(bb, 0.0, 1.0));
  }

  b2Color.prototype.Set = function(rr, gg, bb) {
    if (rr === void 0) {
      rr = 0;
    }
    if (gg === void 0) {
      gg = 0;
    }
    if (bb === void 0) {
      bb = 0;
    }
    this._r = parseUInt(255 * b2Math.Clamp(rr, 0.0, 1.0));
    this._g = parseUInt(255 * b2Math.Clamp(gg, 0.0, 1.0));
    this._b = parseUInt(255 * b2Math.Clamp(bb, 0.0, 1.0));
  };

  Object.defineProperties(b2Color.prototype, {
    r: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._r;
      },
      set: function(rr) {
        if (rr == null) {
          rr = 0;
        }
        return this._r = parseUInt(255 * b2Math.Clamp(rr, 0.0, 1.0));
      }
    },
    g: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._g;
      },
      set: function(gg) {
        if (gg == null) {
          gg = 0;
        }
        return this._g = parseUInt(255 * b2Math.Clamp(gg, 0.0, 1.0));
      }
    },
    b: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._b;
      },
      set: function(bb) {
        if (bb == null) {
          bb = 0;
        }
        return this._b = parseUInt(255 * b2Math.Clamp(bb, 0.0, 1.0));
      }
    },
    color: {
      enumerable: false,
      configurable: true,
      get: function() {
        return (this._r << 16) | (this._g << 8) | this._b;
      }
    }
  });

  return b2Color;

})();

//# sourceMappingURL=b2Color.js.map

},{"../index":103}],37:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Common.b2Settings = (function() {
  function b2Settings() {}

  b2Settings.VERSION = "2.1alpha";

  b2Settings.USHRT_MAX = 0x0000ffff;

  b2Settings.b2_pi = Math.PI;

  b2Settings.b2_maxManifoldPoints = 2;

  b2Settings.b2_aabbExtension = 0.1;

  b2Settings.b2_aabbMultiplier = 2.0;

  b2Settings.b2_polygonRadius = 2.0 * b2Settings.b2_linearSlop;

  b2Settings.b2_linearSlop = 0.005;

  b2Settings.b2_angularSlop = 2.0 / 180.0 * b2Settings.b2_pi;

  b2Settings.b2_toiSlop = 8.0 * b2Settings.b2_linearSlop;

  b2Settings.b2_maxTOIContactsPerIsland = 32;

  b2Settings.b2_maxTOIJointsPerIsland = 32;

  b2Settings.b2_velocityThreshold = 1.0;

  b2Settings.b2_maxLinearCorrection = 0.2;

  b2Settings.b2_maxAngularCorrection = 8.0 / 180.0 * b2Settings.b2_pi;

  b2Settings.b2_maxTranslation = 2.0;

  b2Settings.b2_maxTranslationSquared = b2Settings.b2_maxTranslation * b2Settings.b2_maxTranslation;

  b2Settings.b2_maxRotation = 0.5 * b2Settings.b2_pi;

  b2Settings.b2_maxRotationSquared = b2Settings.b2_maxRotation * b2Settings.b2_maxRotation;

  b2Settings.b2_contactBaumgarte = 0.2;

  b2Settings.b2_timeToSleep = 0.5;

  b2Settings.b2_linearSleepTolerance = 0.01;

  b2Settings.b2_angularSleepTolerance = 2.0 / 180.0 * b2Settings.b2_pi;

  b2Settings.b2MixFriction = function(friction1, friction2) {
    if (friction1 === void 0) {
      friction1 = 0;
    }
    if (friction2 === void 0) {
      friction2 = 0;
    }
    return Math.sqrt(friction1 * friction2);
  };

  b2Settings.b2MixRestitution = function(restitution1, restitution2) {
    var _ref;
    if (restitution1 === void 0) {
      restitution1 = 0;
    }
    if (restitution2 === void 0) {
      restitution2 = 0;
    }
    return (_ref = restitution1 > restitution2) != null ? _ref : {
      restitution1: restitution2
    };
  };

  b2Settings.b2Assert = function(a) {
    if (!a) {
      throw "Assertion Failed";
    }
  };

  return b2Settings;

})();

//# sourceMappingURL=b2Settings.js.map

},{"../index":103}],38:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Mat22 = (function() {
  b2Mat22.prototype.col1 = null;

  b2Mat22.prototype.col2 = null;

  function b2Mat22() {
    this.col1 = new b2Vec2();
    this.col2 = new b2Vec2();
    this.SetIdentity();
  }

  b2Mat22.FromAngle = function(angle) {
    var mat;
    if (angle == null) {
      angle = 0;
    }
    mat = new b2Mat22();
    mat.Set(angle);
    return mat;
  };

  b2Mat22.FromVV = function(c1, c2) {
    var mat;
    mat = new b2Mat22();
    mat.SetVV(c1, c2);
    return mat;
  };

  b2Mat22.prototype.Set = function(angle) {
    var c, s;
    if (angle == null) {
      angle = 0;
    }
    c = Math.cos(angle);
    s = Math.sin(angle);
    this.col1.x = c;
    this.col2.x = -s;
    this.col1.y = s;
    this.col2.y = c;
  };

  b2Mat22.prototype.SetVV = function(c1, c2) {
    this.col1.SetV(c1);
    this.col2.SetV(c2);
  };

  b2Mat22.prototype.Copy = function() {
    var mat;
    mat = new b2Mat22();
    mat.SetM(this);
    return mat;
  };

  b2Mat22.prototype.SetM = function(m) {
    this.col1.SetV(m.col1);
    this.col2.SetV(m.col2);
  };

  b2Mat22.prototype.AddM = function(m) {
    this.col1.x += m.col1.x;
    this.col1.y += m.col1.y;
    this.col2.x += m.col2.x;
    this.col2.y += m.col2.y;
  };

  b2Mat22.prototype.SetIdentity = function() {
    this.col1.x = 1.0;
    this.col2.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 1.0;
  };

  b2Mat22.prototype.SetZero = function() {
    this.col1.x = 0.0;
    this.col2.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 0.0;
  };

  b2Mat22.prototype.GetAngle = function() {
    return Math.atan2(this.col1.y, this.col1.x);
  };

  b2Mat22.prototype.GetInverse = function(out) {
    var a, b, c, d, det;
    a = this.col1.x;
    b = this.col2.x;
    c = this.col1.y;
    d = this.col2.y;
    det = a * d - b * c;
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.col1.x = det * d;
    out.col2.x = -det * b;
    out.col1.y = -det * c;
    out.col2.y = det * a;
    return out;
  };

  b2Mat22.prototype.Solve = function(out, bX, bY) {
    var a11, a12, a21, a22, det;
    if (bX == null) {
      bX = 0;
    }
    if (bY == null) {
      bY = 0;
    }
    a11 = this.col1.x;
    a12 = this.col2.x;
    a21 = this.col1.y;
    a22 = this.col2.y;
    det = a11 * a22 - a12 * a21;
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.x = det * (a22 * bX - a12 * bY);
    out.y = det * (a11 * bY - a21 * bX);
    return out;
  };

  b2Mat22.prototype.Abs = function() {
    this.col1.Abs();
    this.col2.Abs();
  };

  return b2Mat22;

})();

//# sourceMappingURL=b2Mat22.js.map

},{"../../index":103}],39:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Mat33 = (function() {
  b2Mat33.prototype.col1 = null;

  b2Mat33.prototype.col2 = null;

  b2Mat33.prototype.col3 = null;

  function b2Mat33(c1, c2, c3) {
    if (c1 === void 0) {
      c1 = null;
    }
    if (c2 === void 0) {
      c2 = null;
    }
    if (c3 === void 0) {
      c3 = null;
    }
    this.col1 = new b2Vec3();
    this.col2 = new b2Vec3();
    this.col3 = new b2Vec3();
    if (!c1 && !c2 && !c3) {
      this.col1.SetZero();
      this.col2.SetZero();
      this.col3.SetZero();
    } else {
      this.col1.SetV(c1);
      this.col2.SetV(c2);
      this.col3.SetV(c3);
    }
    return;
  }

  b2Mat33.prototype.SetVVV = function(c1, c2, c3) {
    this.col1.SetV(c1);
    this.col2.SetV(c2);
    this.col3.SetV(c3);
  };

  b2Mat33.prototype.Copy = function() {
    new b2Mat33(this.col1, this.col2, this.col3);
  };

  b2Mat33.prototype.SetM = function(m) {
    this.col1.SetV(m.col1);
    this.col2.SetV(m.col2);
    this.col3.SetV(m.col3);
  };

  b2Mat33.prototype.AddM = function(m) {
    this.col1.x += m.col1.x;
    this.col1.y += m.col1.y;
    this.col1.z += m.col1.z;
    this.col2.x += m.col2.x;
    this.col2.y += m.col2.y;
    this.col2.z += m.col2.z;
    this.col3.x += m.col3.x;
    this.col3.y += m.col3.y;
    this.col3.z += m.col3.z;
  };

  b2Mat33.prototype.SetIdentity = function() {
    this.col1.x = 1.0;
    this.col2.x = 0.0;
    this.col3.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 1.0;
    this.col3.y = 0.0;
    this.col1.z = 0.0;
    this.col2.z = 0.0;
    this.col3.z = 1.0;
  };

  b2Mat33.prototype.SetZero = function() {
    this.col1.x = 0.0;
    this.col2.x = 0.0;
    this.col3.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 0.0;
    this.col3.y = 0.0;
    this.col1.z = 0.0;
    this.col2.z = 0.0;
    this.col3.z = 0.0;
  };

  b2Mat33.prototype.Solve22 = function(out, bX, bY) {
    var a11, a12, a21, a22, det;
    if (bX === void 0) {
      bX = 0;
    }
    if (bY === void 0) {
      bY = 0;
    }
    a11 = this.col1.x;
    a12 = this.col2.x;
    a21 = this.col1.y;
    a22 = this.col2.y;
    det = a11 * a22 - a12 * a21;
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.x = det * (a22 * bX - a12 * bY);
    out.y = det * (a11 * bY - a21 * bX);
    return out;
  };

  b2Mat33.prototype.Solve33 = function(out, bX, bY, bZ) {
    var a11, a12, a13, a21, a22, a23, a31, a32, a33, det;
    if (bX === void 0) {
      bX = 0;
    }
    if (bY === void 0) {
      bY = 0;
    }
    if (bZ === void 0) {
      bZ = 0;
    }
    a11 = this.col1.x;
    a21 = this.col1.y;
    a31 = this.col1.z;
    a12 = this.col2.x;
    a22 = this.col2.y;
    a32 = this.col2.z;
    a13 = this.col3.x;
    a23 = this.col3.y;
    a33 = this.col3.z;
    det = a11 * (a22 * a33 - a32 * a23) + a21 * (a32 * a13 - a12 * a33) + a31 * (a12 * a23 - a22 * a13);
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.x = det * (bX * (a22 * a33 - a32 * a23) + bY * (a32 * a13 - a12 * a33) + bZ * (a12 * a23 - a22 * a13));
    out.y = det * (a11 * (bY * a33 - bZ * a23) + a21 * (bZ * a13 - bX * a33) + a31 * (bX * a23 - bY * a13));
    out.z = det * (a11 * (a22 * bZ - a32 * bY) + a21 * (a32 * bX - a12 * bZ) + a31 * (a12 * bY - a22 * bX));
    return out;
  };

  return b2Mat33;

})();

//# sourceMappingURL=b2Mat33.js.map

},{"../../index":103}],40:[function(require,module,exports){
var Box2D, b2Mat22, b2Math, b2Transform, b2Vec2;

Box2D = require('../../index');

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Math = Box2D.Common.Math.b2Math;

b2Transform = Box2D.Common.Math.b2Transform;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Math = (function() {
  function b2Math() {}

  b2Math.IsValid = function(x) {
    if (x === void 0) {
      x = 0;
    }
    return isFinite(x);
  };

  b2Math.Dot = function(a, b) {
    return a.x * b.x + a.y * b.y;
  };

  b2Math.CrossVV = function(a, b) {
    return a.x * b.y - a.y * b.x;
  };

  b2Math.CrossVF = function(a, s) {
    var v;
    if (s === void 0) {
      s = 0;
    }
    v = new b2Vec2(s * a.y, -s * a.x);
    return v;
  };

  b2Math.CrossFV = function(s, a) {
    var v;
    if (s === void 0) {
      s = 0;
    }
    v = new b2Vec2(-s * a.y, s * a.x);
    return v;
  };

  b2Math.MulMV = function(A, v) {
    var u;
    u = new b2Vec2(A.col1.x * v.x + A.col2.x * v.y, A.col1.y * v.x + A.col2.y * v.y);
    return u;
  };

  b2Math.MulTMV = function(A, v) {
    var u;
    u = new b2Vec2(b2Math.Dot(v, A.col1), b2Math.Dot(v, A.col2));
    return u;
  };

  b2Math.MulX = function(T, v) {
    var a;
    a = b2Math.MulMV(T.R, v);
    a.x += T.position.x;
    a.y += T.position.y;
    return a;
  };

  b2Math.MulXT = function(T, v) {
    var a, tX;
    a = b2Math.SubtractVV(v, T.position);
    tX = a.x * T.R.col1.x + a.y * T.R.col1.y;
    a.y = a.x * T.R.col2.x + a.y * T.R.col2.y;
    a.x = tX;
    return a;
  };

  b2Math.AddVV = function(a, b) {
    var v;
    v = new b2Vec2(a.x + b.x, a.y + b.y);
    return v;
  };

  b2Math.SubtractVV = function(a, b) {
    var v;
    v = new b2Vec2(a.x - b.x, a.y - b.y);
    return v;
  };

  b2Math.Distance = function(a, b) {
    var cX, cY;
    cX = a.x - b.x;
    cY = a.y - b.y;
    return Math.sqrt(cX * cX + cY * cY);
  };

  b2Math.DistanceSquared = function(a, b) {
    var cX, cY;
    cX = a.x - b.x;
    cY = a.y - b.y;
    return cX * cX + cY * cY;
  };

  b2Math.MulFV = function(s, a) {
    var v;
    if (s === void 0) {
      s = 0;
    }
    v = new b2Vec2(s * a.x, s * a.y);
    return v;
  };

  b2Math.AddMM = function(A, B) {
    var C;
    C = b2Mat22.FromVV(b2Math.AddVV(A.col1, B.col1), b2Math.AddVV(A.col2, B.col2));
    return C;
  };

  b2Math.MulMM = function(A, B) {
    var C;
    C = b2Mat22.FromVV(b2Math.MulMV(A, B.col1), b2Math.MulMV(A, B.col2));
    return C;
  };

  b2Math.MulTMM = function(A, B) {
    var C, c1, c2;
    c1 = new b2Vec2(b2Math.Dot(A.col1, B.col1), b2Math.Dot(A.col2, B.col1));
    c2 = new b2Vec2(b2Math.Dot(A.col1, B.col2), b2Math.Dot(A.col2, B.col2));
    C = b2Mat22.FromVV(c1, c2);
    return C;
  };

  b2Math.Abs = function(a) {
    if (a === void 0) {
      a = 0;
    }
    return (a > 0.0 ? a : -a);
  };

  b2Math.AbsV = function(a) {
    var b;
    b = new b2Vec2(b2Math.Abs(a.x), b2Math.Abs(a.y));
    return b;
  };

  b2Math.AbsM = function(A) {
    var B;
    B = b2Mat22.FromVV(b2Math.AbsV(A.col1), b2Math.AbsV(A.col2));
    return B;
  };

  b2Math.Min = function(a, b) {
    if (a === void 0) {
      a = 0;
    }
    if (b === void 0) {
      b = 0;
    }
    return (a < b ? a : b);
  };

  b2Math.MinV = function(a, b) {
    var c;
    c = new b2Vec2(b2Math.Min(a.x, b.x), b2Math.Min(a.y, b.y));
    return c;
  };

  b2Math.Max = function(a, b) {
    if (a === void 0) {
      a = 0;
    }
    if (b === void 0) {
      b = 0;
    }
    return (a > b ? a : b);
  };

  b2Math.MaxV = function(a, b) {
    var c;
    c = new b2Vec2(b2Math.Max(a.x, b.x), b2Math.Max(a.y, b.y));
    return c;
  };

  b2Math.Clamp = function(a, low, high) {
    if (a === void 0) {
      a = 0;
    }
    if (low === void 0) {
      low = 0;
    }
    if (high === void 0) {
      high = 0;
    }
    return (a < low ? low : (a > high ? high : a));
  };

  b2Math.ClampV = function(a, low, high) {
    return b2Math.MaxV(low, b2Math.MinV(a, high));
  };

  b2Math.Swap = function(a, b) {
    var tmp;
    tmp = a[0];
    a[0] = b[0];
    b[0] = tmp;
  };

  b2Math.Random = function() {
    return Math.random() * 2 - 1;
  };

  b2Math.RandomRange = function(lo, hi) {
    var r;
    if (lo === void 0) {
      lo = 0;
    }
    if (hi === void 0) {
      hi = 0;
    }
    r = Math.random();
    r = (hi - lo) * r + lo;
    return r;
  };

  b2Math.NextPowerOfTwo = function(x) {
    if (x === void 0) {
      x = 0;
    }
    x |= (x >> 1) & 0x7FFFFFFF;
    x |= (x >> 2) & 0x3FFFFFFF;
    x |= (x >> 4) & 0x0FFFFFFF;
    x |= (x >> 8) & 0x00FFFFFF;
    x |= (x >> 16) & 0x0000FFFF;
    return x + 1;
  };

  b2Math.IsPowerOfTwo = function(x) {
    var result;
    if (x === void 0) {
      x = 0;
    }
    result = x > 0 && (x & (x - 1)) === 0;
    return result;
  };

  b2Math.b2Vec2_zero = new b2Vec2(0.0, 0.0);

  b2Math.b2Mat22_identity = b2Mat22.FromVV(new b2Vec2(1.0, 0.0), new b2Vec2(0.0, 1.0));

  b2Math.b2Transform_identity = new b2Transform(b2Math.b2Vec2_zero, b2Math.b2Mat22_identity);

  return b2Math;

})();

//# sourceMappingURL=b2Math.js.map

},{"../../index":103}],41:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Sweep = (function() {
  b2Sweep.prototype.localCenter = null;

  b2Sweep.prototype.c0 = null;

  b2Sweep.prototype.c = null;

  b2Sweep.prototype.a0 = null;

  b2Sweep.prototype.a = null;

  b2Sweep.prototype.t0 = null;

  function b2Sweep() {
    this.localCenter = new b2Vec2();
    this.c0 = new b2Vec2;
    this.c = new b2Vec2();
    return;
  }

  b2Sweep.prototype.Set = function(other) {
    this.localCenter.SetV(other.localCenter);
    this.c0.SetV(other.c0);
    this.c.SetV(other.c);
    this.a0 = other.a0;
    this.a = other.a;
    this.t0 = other.t0;
  };

  b2Sweep.prototype.Copy = function() {
    var copy;
    copy = new b2Sweep();
    copy.localCenter.SetV(this.localCenter);
    copy.c0.SetV(this.c0);
    copy.c.SetV(this.c);
    copy.a0 = this.a0;
    copy.a = this.a;
    copy.t0 = this.t0;
    return copy;
  };

  b2Sweep.prototype.GetTransform = function(xf, alpha) {
    var angle, tMat;
    if (alpha === void 0) {
      alpha = 0;
    }
    xf.position.x = (1.0 - alpha) * this.c0.x + alpha * this.c.x;
    xf.position.y = (1.0 - alpha) * this.c0.y + alpha * this.c.y;
    angle = (1.0 - alpha) * this.a0 + alpha * this.a;
    xf.R.Set(angle);
    tMat = xf.R;
    xf.position.x -= tMat.col1.x * this.localCenter.x + tMat.col2.x * this.localCenter.y;
    xf.position.y -= tMat.col1.y * this.localCenter.x + tMat.col2.y * this.localCenter.y;
  };

  b2Sweep.prototype.Advance = function(t) {
    var alpha;
    if (t === void 0) {
      t = 0;
    }
    if (this.t0 < t && 1.0 - this.t0 > Number.MIN_VALUE) {
      alpha = (t - this.t0) / (1.0 - this.t0);
      this.c0.x = (1.0 - alpha) * this.c0.x + alpha * this.c.x;
      this.c0.y = (1.0 - alpha) * this.c0.y + alpha * this.c.y;
      this.a0 = (1.0 - alpha) * this.a0 + alpha * this.a;
      this.t0 = t;
    }
  };

  return b2Sweep;

})();

//# sourceMappingURL=b2Sweep.js.map

},{"../../index":103}],42:[function(require,module,exports){
var Box2D, b2Mat22, b2Vec2;

Box2D = require('../../index');

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Transform = (function() {
  b2Transform.prototype.position = null;

  b2Transform.prototype.R = null;

  function b2Transform(pos, r) {
    this.position = new b2Vec2;
    this.R = new b2Mat22();
    if (pos === void 0) {
      pos = null;
    }
    if (r === void 0) {
      r = null;
    }
    if (pos) {
      this.position.SetV(pos);
      this.R.SetM(r);
    }
    return;
  }

  b2Transform.prototype.Initialize = function(pos, r) {
    this.position.SetV(pos);
    this.R.SetM(r);
  };

  b2Transform.prototype.SetIdentity = function() {
    this.position.SetZero();
    this.R.SetIdentity();
  };

  b2Transform.prototype.Set = function(x) {
    this.position.SetV(x.position);
    this.R.SetM(x.R);
  };

  b2Transform.prototype.GetAngle = function() {
    return Math.atan2(this.R.col1.y, this.R.col1.x);
  };

  return b2Transform;

})();

//# sourceMappingURL=b2Transform.js.map

},{"../../index":103}],43:[function(require,module,exports){
var Box2D, b2Math;

Box2D = require('../../index');

b2Math = Box2D.Common.Math.b2Math;

Box2D.Common.Math.b2Vec2 = (function() {
  b2Vec2.prototype.x = 0;

  b2Vec2.prototype.y = 0;

  function b2Vec2(x_, y_) {
    if (x_ === void 0) {
      x_ = 0;
    }
    if (y_ === void 0) {
      y_ = 0;
    }
    this.x = x_;
    this.y = y_;
    return;
  }

  b2Vec2.prototype.SetZero = function() {
    this.x = 0.0;
    this.y = 0.0;
  };

  b2Vec2.prototype.Set = function(x_, y_) {
    if (x_ === void 0) {
      x_ = 0;
    }
    if (y_ === void 0) {
      y_ = 0;
    }
    this.x = x_;
    this.y = y_;
  };

  b2Vec2.prototype.SetV = function(v) {
    this.x = v.x;
    this.y = v.y;
  };

  b2Vec2.prototype.GetNegative = function() {
    return new b2Vec2(-this.x, -this.y);
  };

  b2Vec2.prototype.NegativeSelf = function() {
    this.x = -this.x;
    this.y = -this.y;
  };

  b2Vec2.Make = function(x_, y_) {
    if (x_ === void 0) {
      x_ = 0;
    }
    if (y_ === void 0) {
      y_ = 0;
    }
    return new b2Vec2(x_, y_);
  };

  b2Vec2.prototype.Copy = function() {
    return new b2Vec2(this.x, this.y);
  };

  b2Vec2.prototype.Add = function(v) {
    this.x += v.x;
    this.y += v.y;
  };

  b2Vec2.prototype.Subtract = function(v) {
    this.x -= v.x;
    this.y -= v.y;
  };

  b2Vec2.prototype.Multiply = function(a) {
    if (a === void 0) {
      a = 0;
    }
    this.x *= a;
    this.y *= a;
  };

  b2Vec2.prototype.MulM = function(A) {
    var tX;
    tX = this.x;
    this.x = A.col1.x * tX + A.col2.x * this.y;
    this.y = A.col1.y * tX + A.col2.y * this.y;
  };

  b2Vec2.prototype.MulTM = function(A) {
    var tX;
    tX = b2Math.Dot(this, A.col1);
    this.y = b2Math.Dot(this, A.col2);
    this.x = tX;
  };

  b2Vec2.prototype.CrossVF = function(s) {
    var tX;
    if (s === void 0) {
      s = 0;
    }
    tX = this.x;
    this.x = s * this.y;
    this.y = -s * tX;
  };

  b2Vec2.prototype.CrossFV = function(s) {
    var tX;
    if (s === void 0) {
      s = 0;
    }
    tX = this.x;
    this.x = -s * this.y;
    this.y = s * tX;
  };

  b2Vec2.prototype.MinV = function(b) {
    this.x = (this.x < b.x ? this.x : b.x);
    this.y = (this.y < b.y ? this.y : b.y);
  };

  b2Vec2.prototype.MaxV = function(b) {
    this.x = (this.x > b.x ? this.x : b.x);
    this.y = (this.y > b.y ? this.y : b.y);
  };

  b2Vec2.prototype.Abs = function() {
    if (this.x < 0) {
      this.x = -this.x;
    }
    if (this.y < 0) {
      this.y = -this.y;
    }
  };

  b2Vec2.prototype.Length = function() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  };

  b2Vec2.prototype.LengthSquared = function() {
    return this.x * this.x + this.y * this.y;
  };

  b2Vec2.prototype.Normalize = function() {
    var invLength, length;
    length = Math.sqrt(this.x * this.x + this.y * this.y);
    if (length < Number.MIN_VALUE) {
      return 0.0;
    }
    invLength = 1.0 / length;
    this.x *= invLength;
    this.y *= invLength;
    return length;
  };

  b2Vec2.prototype.IsValid = function() {
    return b2Math.IsValid(this.x) && b2Math.IsValid(this.y);
  };

  return b2Vec2;

})();

//# sourceMappingURL=b2Vec2.js.map

},{"../../index":103}],44:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Common.Math.b2Vec3 = (function() {
  b2Vec3.prototype.x = 0;

  b2Vec3.prototype.y = 0;

  b2Vec3.prototype.z = 0;

  function b2Vec3(x, y, z) {
    if (x === void 0) {
      x = 0;
    }
    if (y === void 0) {
      y = 0;
    }
    if (z === void 0) {
      z = 0;
    }
    this.x = x;
    this.y = y;
    this.z = z;
    return;
  }

  b2Vec3.prototype.SetZero = function() {
    this.x = this.y = this.z = 0.0;
  };

  b2Vec3.prototype.Set = function(x, y, z) {
    if (x === void 0) {
      x = 0;
    }
    if (y === void 0) {
      y = 0;
    }
    if (z === void 0) {
      z = 0;
    }
    this.x = x;
    this.y = y;
    this.z = z;
  };

  b2Vec3.prototype.SetV = function(v) {
    this.x = v.x;
    this.y = v.y;
    this.z = v.z;
  };

  b2Vec3.prototype.GetNegative = function() {
    return new b2Vec3(-this.x, -this.y, -this.z);
  };

  b2Vec3.prototype.NegativeSelf = function() {
    this.x = -this.x;
    this.y = -this.y;
    this.z = -this.z;
  };

  b2Vec3.prototype.Copy = function() {
    return new b2Vec3(this.x, this.y, this.z);
  };

  b2Vec3.prototype.Add = function(v) {
    this.x += v.x;
    this.y += v.y;
    this.z += v.z;
  };

  b2Vec3.prototype.Subtract = function(v) {
    this.x -= v.x;
    this.y -= v.y;
    this.z -= v.z;
  };

  b2Vec3.prototype.Multiply = function(a) {
    if (a === void 0) {
      a = 0;
    }
    this.x *= a;
    this.y *= a;
    this.z *= a;
  };

  return b2Vec3;

})();

//# sourceMappingURL=b2Vec3.js.map

},{"../../index":103}],45:[function(require,module,exports){
var Box2D, b2BodyDef, b2Fixture, b2FixtureDef, b2Math, b2Settings, b2Sweep, b2Transform, b2Vec2;

Box2D = require('../index');

b2Math = Box2D.Common.Math.b2Math;

b2Sweep = Box2D.Common.Math.b2Sweep;

b2Transform = Box2D.Common.Math.b2Transform;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Settings = Box2D.Common.b2Settings;

b2Fixture = Box2D.Dynamics.b2Fixture;

b2FixtureDef = Box2D.Dynamics.b2FixtureDef;

b2BodyDef = Box2D.Dynamics.b2BodyDef;

Box2D.Dynamics.b2Body = (function() {
  b2Body.s_xf1 = new b2Transform();

  b2Body.e_islandFlag = 0x0001;

  b2Body.e_awakeFlag = 0x0002;

  b2Body.e_allowSleepFlag = 0x0004;

  b2Body.e_bulletFlag = 0x0008;

  b2Body.e_fixedRotationFlag = 0x0010;

  b2Body.e_activeFlag = 0x0020;

  b2Body.b2_staticBody = 0;

  b2Body.b2_kinematicBody = 1;

  b2Body.b2_dynamicBody = 2;

  b2Body.prototype.m_xf = null;

  b2Body.prototype.m_sweep = null;

  b2Body.prototype.m_linearVelocity = null;

  b2Body.prototype.m_force = null;

  b2Body.prototype.m_flags = 0;

  b2Body.prototype.m_world = null;

  b2Body.prototype.m_jointList = null;

  b2Body.prototype.m_controllerList = null;

  b2Body.prototype.m_contactList = null;

  b2Body.prototype.m_controllerCount = null;

  b2Body.prototype.m_prev = null;

  b2Body.prototype.m_next = null;

  b2Body.prototype.m_linearVelocity = null;

  b2Body.prototype.m_angularVelocity = null;

  b2Body.prototype.m_linearDamping = null;

  b2Body.prototype.m_angularDamping = null;

  b2Body.prototype.m_force = null;

  b2Body.prototype.m_torque = 0;

  b2Body.prototype.m_sleepTime = 0;

  b2Body.prototype.m_type = 0;

  b2Body.prototype.m_mass = 0;

  b2Body.prototype.m_invMass = 0;

  b2Body.prototype.m_I = 0;

  b2Body.prototype.m_invI = 0;

  b2Body.prototype.m_inertiaScale = 0;

  b2Body.prototype.m_userData = null;

  b2Body.prototype.m_fixtureList = null;

  b2Body.prototype.m_fixtureCount = 0;

  function b2Body(bd, world) {
    var tMat, tVec;
    this.m_xf = new b2Transform();
    this.m_sweep = new b2Sweep();
    this.m_linearVelocity = new b2Vec2();
    this.m_force = new b2Vec2();
    this.m_flags = 0;
    if (bd.bullet) {
      this.m_flags |= b2Body.e_bulletFlag;
    }
    if (bd.fixedRotation) {
      this.m_flags |= b2Body.e_fixedRotationFlag;
    }
    if (bd.allowSleep) {
      this.m_flags |= b2Body.e_allowSleepFlag;
    }
    if (bd.awake) {
      this.m_flags |= b2Body.e_awakeFlag;
    }
    if (bd.active) {
      this.m_flags |= b2Body.e_activeFlag;
    }
    this.m_world = world;
    this.m_xf.position.SetV(bd.position);
    this.m_xf.R.Set(bd.angle);
    this.m_sweep.localCenter.SetZero();
    this.m_sweep.t0 = 1.0;
    this.m_sweep.a0 = this.m_sweep.a = bd.angle;
    tMat = this.m_xf.R;
    tVec = this.m_sweep.localCenter;
    this.m_sweep.c.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    this.m_sweep.c.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    this.m_sweep.c.x += this.m_xf.position.x;
    this.m_sweep.c.y += this.m_xf.position.y;
    this.m_sweep.c0.SetV(this.m_sweep.c);
    this.m_jointList = null;
    this.m_controllerList = null;
    this.m_contactList = null;
    this.m_controllerCount = 0;
    this.m_prev = null;
    this.m_next = null;
    this.m_linearVelocity.SetV(bd.linearVelocity);
    this.m_angularVelocity = bd.angularVelocity;
    this.m_linearDamping = bd.linearDamping;
    this.m_angularDamping = bd.angularDamping;
    this.m_force.Set(0.0, 0.0);
    this.m_torque = 0.0;
    this.m_sleepTime = 0.0;
    this.m_type = bd.type;
    if (this.m_type === b2Body.b2_dynamicBody) {
      this.m_mass = 1.0;
      this.m_invMass = 1.0;
    } else {
      this.m_mass = 0.0;
      this.m_invMass = 0.0;
    }
    this.m_I = 0.0;
    this.m_invI = 0.0;
    this.m_inertiaScale = bd.inertiaScale;
    this.m_userData = bd.userData;
    this.m_fixtureList = null;
    this.m_fixtureCount = 0;
    return;
  }

  b2Body.prototype.ConnectEdges = function(s1, s2, angle1) {
    var angle2, convex, core, coreOffset, cornerDir;
    if (angle1 === void 0) {
      angle1 = 0;
    }
    angle2 = Math.atan2(s2.GetDirectionVector().y, s2.GetDirectionVector().x);
    coreOffset = Math.tan((angle2 - angle1) * 0.5);
    core = b2Math.MulFV(coreOffset, s2.GetDirectionVector());
    core = b2Math.SubtractVV(core, s2.GetNormalVector());
    core = b2Math.MulFV(b2Settings.b2_toiSlop, core);
    core = b2Math.AddVV(core, s2.GetVertex1());
    cornerDir = b2Math.AddVV(s1.GetDirectionVector(), s2.GetDirectionVector());
    cornerDir.Normalize();
    convex = b2Math.Dot(s1.GetDirectionVector(), s2.GetNormalVector()) > 0.0;
    s1.SetNextEdge(s2, core, cornerDir, convex);
    s2.SetPrevEdge(s1, core, cornerDir, convex);
    return angle2;
  };

  b2Body.prototype.CreateFixture = function(def) {
    var broadPhase, fixture;
    if (this.m_world.IsLocked() === true) {
      return null;
    }
    fixture = new b2Fixture();
    fixture.Create(this, this.m_xf, def);
    if (this.m_flags & b2Body.e_activeFlag) {
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      fixture.CreateProxy(broadPhase, this.m_xf);
    }
    fixture.m_next = this.m_fixtureList;
    this.m_fixtureList = fixture;
    ++this.m_fixtureCount;
    fixture.m_body = this;
    if (fixture.m_density > 0.0) {
      this.ResetMassData();
    }
    this.m_world.m_flags |= 0x0001;
    return fixture;
  };

  b2Body.prototype.CreateFixture2 = function(shape, density) {
    var def;
    if (density === void 0) {
      density = 0.0;
    }
    def = new b2FixtureDef();
    def.shape = shape;
    def.density = density;
    return this.CreateFixture(def);
  };

  b2Body.prototype.DestroyFixture = function(fixture) {
    var broadPhase, c, edge, fixtureA, fixtureB, found, node, ppF;
    if (this.m_world.IsLocked() === true) {
      return;
    }
    node = this.m_fixtureList;
    ppF = null;
    found = false;
    while (node != null) {
      if (node === fixture) {
        if (ppF) {
          ppF.m_next = fixture.m_next;
        } else {
          this.m_fixtureList = fixture.m_next;
        }
        found = true;
        break;
      }
      ppF = node;
      node = node.m_next;
    }
    edge = this.m_contactList;
    while (edge) {
      c = edge.contact;
      edge = edge.next;
      fixtureA = c.GetFixtureA();
      fixtureB = c.GetFixtureB();
      if (fixture === fixtureA || fixture === fixtureB) {
        this.m_world.m_contactManager.Destroy(c);
      }
    }
    if (this.m_flags & b2Body.e_activeFlag) {
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      fixture.DestroyProxy(broadPhase);
    } else {

    }
    fixture.Destroy();
    fixture.m_body = null;
    fixture.m_next = null;
    --this.m_fixtureCount;
    this.ResetMassData();
  };

  b2Body.prototype.SetPositionAndAngle = function(position, angle) {
    var broadPhase, f, tMat, tVec;
    if (angle === void 0) {
      angle = 0;
    }
    f = void 0;
    if (this.m_world.IsLocked() === true) {
      return;
    }
    this.m_xf.R.Set(angle);
    this.m_xf.position.SetV(position);
    tMat = this.m_xf.R;
    tVec = this.m_sweep.localCenter;
    this.m_sweep.c.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    this.m_sweep.c.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    this.m_sweep.c.x += this.m_xf.position.x;
    this.m_sweep.c.y += this.m_xf.position.y;
    this.m_sweep.c0.SetV(this.m_sweep.c);
    this.m_sweep.a0 = this.m_sweep.a = angle;
    broadPhase = this.m_world.m_contactManager.m_broadPhase;
    f = this.m_fixtureList;
    while (f) {
      f.Synchronize(broadPhase, this.m_xf, this.m_xf);
      f = f.m_next;
    }
    this.m_world.m_contactManager.FindNewContacts();
  };

  b2Body.prototype.SetTransform = function(xf) {
    this.SetPositionAndAngle(xf.position, xf.GetAngle());
  };

  b2Body.prototype.GetTransform = function() {
    return this.m_xf;
  };

  b2Body.prototype.GetPosition = function() {
    return this.m_xf.position;
  };

  b2Body.prototype.SetPosition = function(position) {
    this.SetPositionAndAngle(position, this.GetAngle());
  };

  b2Body.prototype.GetAngle = function() {
    return this.m_sweep.a;
  };

  b2Body.prototype.SetAngle = function(angle) {
    if (angle === void 0) {
      angle = 0;
    }
    this.SetPositionAndAngle(this.GetPosition(), angle);
  };

  b2Body.prototype.GetWorldCenter = function() {
    return this.m_sweep.c;
  };

  b2Body.prototype.GetLocalCenter = function() {
    return this.m_sweep.localCenter;
  };

  b2Body.prototype.SetLinearVelocity = function(v) {
    if (this.m_type === b2Body.b2_staticBody) {
      return;
    }
    this.m_linearVelocity.SetV(v);
  };

  b2Body.prototype.GetLinearVelocity = function() {
    return this.m_linearVelocity;
  };

  b2Body.prototype.SetAngularVelocity = function(omega) {
    if (omega === void 0) {
      omega = 0;
    }
    if (this.m_type === b2Body.b2_staticBody) {
      return;
    }
    this.m_angularVelocity = omega;
  };

  b2Body.prototype.GetAngularVelocity = function() {
    return this.m_angularVelocity;
  };

  b2Body.prototype.GetDefinition = function() {
    var bd;
    bd = new b2BodyDef();
    bd.type = this.GetType();
    bd.allowSleep = (this.m_flags & b2Body.e_allowSleepFlag) === b2Body.e_allowSleepFlag;
    bd.angle = this.GetAngle();
    bd.angularDamping = this.m_angularDamping;
    bd.angularVelocity = this.m_angularVelocity;
    bd.fixedRotation = (this.m_flags & b2Body.e_fixedRotationFlag) === b2Body.e_fixedRotationFlag;
    bd.bullet = (this.m_flags & b2Body.e_bulletFlag) === b2Body.e_bulletFlag;
    bd.awake = (this.m_flags & b2Body.e_awakeFlag) === b2Body.e_awakeFlag;
    bd.linearDamping = this.m_linearDamping;
    bd.linearVelocity.SetV(this.GetLinearVelocity());
    bd.position = this.GetPosition();
    bd.userData = this.GetUserData();
    return bd;
  };

  b2Body.prototype.ApplyForce = function(force, point) {
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    if (this.IsAwake() === false) {
      this.SetAwake(true);
    }
    this.m_force.x += force.x;
    this.m_force.y += force.y;
    this.m_torque += (point.x - this.m_sweep.c.x) * force.y - (point.y - this.m_sweep.c.y) * force.x;
  };

  b2Body.prototype.ApplyTorque = function(torque) {
    if (torque === void 0) {
      torque = 0;
    }
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    if (this.IsAwake() === false) {
      this.SetAwake(true);
    }
    this.m_torque += torque;
  };

  b2Body.prototype.ApplyImpulse = function(impulse, point) {
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    if (this.IsAwake() === false) {
      this.SetAwake(true);
    }
    this.m_linearVelocity.x += this.m_invMass * impulse.x;
    this.m_linearVelocity.y += this.m_invMass * impulse.y;
    this.m_angularVelocity += this.m_invI * ((point.x - this.m_sweep.c.x) * impulse.y - (point.y - this.m_sweep.c.y) * impulse.x);
  };

  b2Body.prototype.Split = function(callback) {
    var angularVelocity, body1, body2, center, center1, center2, f, linearVelocity, next, prev, velocity1, velocity2;
    linearVelocity = this.GetLinearVelocity().Copy();
    angularVelocity = this.GetAngularVelocity();
    center = this.GetWorldCenter();
    body1 = this;
    body2 = this.m_world.CreateBody(this.GetDefinition());
    prev = void 0;
    f = body1.m_fixtureList;
    while (f) {
      if (callback(f)) {
        next = f.m_next;
        if (prev) {
          prev.m_next = next;
        } else {
          body1.m_fixtureList = next;
        }
        body1.m_fixtureCount--;
        f.m_next = body2.m_fixtureList;
        body2.m_fixtureList = f;
        body2.m_fixtureCount++;
        f.m_body = body2;
        f = next;
      } else {
        prev = f;
        f = f.m_next;
      }
    }
    body1.ResetMassData();
    body2.ResetMassData();
    center1 = body1.GetWorldCenter();
    center2 = body2.GetWorldCenter();
    velocity1 = b2Math.AddVV(linearVelocity, b2Math.CrossFV(angularVelocity, b2Math.SubtractVV(center1, center)));
    velocity2 = b2Math.AddVV(linearVelocity, b2Math.CrossFV(angularVelocity, b2Math.SubtractVV(center2, center)));
    body1.SetLinearVelocity(velocity1);
    body2.SetLinearVelocity(velocity2);
    body1.SetAngularVelocity(angularVelocity);
    body2.SetAngularVelocity(angularVelocity);
    body1.SynchronizeFixtures();
    body2.SynchronizeFixtures();
    return body2;
  };

  b2Body.prototype.Merge = function(other) {
    var angular, angular1, body1, body2, center1, center2, f, next, velocity1, velocity2;
    f = void 0;
    f = other.m_fixtureList;
    while (f) {
      next = f.m_next;
      other.m_fixtureCount--;
      f.m_next = this.m_fixtureList;
      this.m_fixtureList = f;
      this.m_fixtureCount++;
      f.m_body = body2;
      f = next;
    }
    body1.m_fixtureCount = 0;
    body1 = this;
    body2 = other;
    center1 = body1.GetWorldCenter();
    center2 = body2.GetWorldCenter();
    velocity1 = body1.GetLinearVelocity().Copy();
    velocity2 = body2.GetLinearVelocity().Copy();
    angular1 = body1.GetAngularVelocity();
    angular = body2.GetAngularVelocity();
    body1.ResetMassData();
    this.SynchronizeFixtures();
  };

  b2Body.prototype.GetMass = function() {
    return this.m_mass;
  };

  b2Body.prototype.GetInertia = function() {
    return this.m_I;
  };

  b2Body.prototype.GetMassData = function(data) {
    data.mass = this.m_mass;
    data.I = this.m_I;
    data.center.SetV(this.m_sweep.localCenter);
  };

  b2Body.prototype.SetMassData = function(massData) {
    var oldCenter;
    b2Settings.b2Assert(this.m_world.IsLocked() === false);
    if (this.m_world.IsLocked() === true) {
      return;
    }
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    this.m_invMass = 0.0;
    this.m_I = 0.0;
    this.m_invI = 0.0;
    this.m_mass = massData.mass;
    if (this.m_mass <= 0.0) {
      this.m_mass = 1.0;
    }
    this.m_invMass = 1.0 / this.m_mass;
    if (massData.I > 0.0 && (this.m_flags & b2Body.e_fixedRotationFlag) === 0) {
      this.m_I = massData.I - this.m_mass * (massData.center.x * massData.center.x + massData.center.y * massData.center.y);
      this.m_invI = 1.0 / this.m_I;
    }
    oldCenter = this.m_sweep.c.Copy();
    this.m_sweep.localCenter.SetV(massData.center);
    this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf, this.m_sweep.localCenter));
    this.m_sweep.c.SetV(this.m_sweep.c0);
    this.m_linearVelocity.x += this.m_angularVelocity * (-(this.m_sweep.c.y - oldCenter.y));
    this.m_linearVelocity.y += this.m_angularVelocity * (+(this.m_sweep.c.x - oldCenter.x));
  };

  b2Body.prototype.ResetMassData = function() {
    var center, f, massData, oldCenter;
    this.m_mass = 0.0;
    this.m_invMass = 0.0;
    this.m_I = 0.0;
    this.m_invI = 0.0;
    this.m_sweep.localCenter.SetZero();
    if (this.m_type === b2Body.b2_staticBody || this.m_type === b2Body.b2_kinematicBody) {
      return;
    }
    center = b2Vec2.Make(0, 0);
    f = this.m_fixtureList;
    while (f) {
      if (f.m_density === 0.0) {
        continue;
      }
      massData = f.GetMassData();
      this.m_mass += massData.mass;
      center.x += massData.center.x * massData.mass;
      center.y += massData.center.y * massData.mass;
      this.m_I += massData.I;
      f = f.m_next;
    }
    if (this.m_mass > 0.0) {
      this.m_invMass = 1.0 / this.m_mass;
      center.x *= this.m_invMass;
      center.y *= this.m_invMass;
    } else {
      this.m_mass = 1.0;
      this.m_invMass = 1.0;
    }
    if (this.m_I > 0.0 && (this.m_flags & b2Body.e_fixedRotationFlag) === 0) {
      this.m_I -= this.m_mass * (center.x * center.x + center.y * center.y);
      this.m_I *= this.m_inertiaScale;
      b2Settings.b2Assert(this.m_I > 0);
      this.m_invI = 1.0 / this.m_I;
    } else {
      this.m_I = 0.0;
      this.m_invI = 0.0;
    }
    oldCenter = this.m_sweep.c.Copy();
    this.m_sweep.localCenter.SetV(center);
    this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf, this.m_sweep.localCenter));
    this.m_sweep.c.SetV(this.m_sweep.c0);
    this.m_linearVelocity.x += this.m_angularVelocity * (-(this.m_sweep.c.y - oldCenter.y));
    this.m_linearVelocity.y += this.m_angularVelocity * (+(this.m_sweep.c.x - oldCenter.x));
  };

  b2Body.prototype.GetWorldPoint = function(localPoint) {
    var A, u;
    A = this.m_xf.R;
    u = new b2Vec2(A.col1.x * localPoint.x + A.col2.x * localPoint.y, A.col1.y * localPoint.x + A.col2.y * localPoint.y);
    u.x += this.m_xf.position.x;
    u.y += this.m_xf.position.y;
    return u;
  };

  b2Body.prototype.GetWorldVector = function(localVector) {
    return b2Math.MulMV(this.m_xf.R, localVector);
  };

  b2Body.prototype.GetLocalPoint = function(worldPoint) {
    return b2Math.MulXT(this.m_xf, worldPoint);
  };

  b2Body.prototype.GetLocalVector = function(worldVector) {
    return b2Math.MulTMV(this.m_xf.R, worldVector);
  };

  b2Body.prototype.GetLinearVelocityFromWorldPoint = function(worldPoint) {
    return new b2Vec2(this.m_linearVelocity.x - this.m_angularVelocity * (worldPoint.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (worldPoint.x - this.m_sweep.c.x));
  };

  b2Body.prototype.GetLinearVelocityFromLocalPoint = function(localPoint) {
    var A, worldPoint;
    A = this.m_xf.R;
    worldPoint = new b2Vec2(A.col1.x * localPoint.x + A.col2.x * localPoint.y, A.col1.y * localPoint.x + A.col2.y * localPoint.y);
    worldPoint.x += this.m_xf.position.x;
    worldPoint.y += this.m_xf.position.y;
    return new b2Vec2(this.m_linearVelocity.x - this.m_angularVelocity * (worldPoint.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (worldPoint.x - this.m_sweep.c.x));
  };

  b2Body.prototype.GetLinearDamping = function() {
    return this.m_linearDamping;
  };

  b2Body.prototype.SetLinearDamping = function(linearDamping) {
    if (linearDamping === void 0) {
      linearDamping = 0;
    }
    this.m_linearDamping = linearDamping;
  };

  b2Body.prototype.GetAngularDamping = function() {
    return this.m_angularDamping;
  };

  b2Body.prototype.SetAngularDamping = function(angularDamping) {
    if (angularDamping === void 0) {
      angularDamping = 0;
    }
    this.m_angularDamping = angularDamping;
  };

  b2Body.prototype.SetType = function(type) {
    var ce;
    if (type === void 0) {
      type = 0;
    }
    if (this.m_type === type) {
      return;
    }
    this.m_type = type;
    this.ResetMassData();
    if (this.m_type === b2Body.b2_staticBody) {
      this.m_linearVelocity.SetZero();
      this.m_angularVelocity = 0.0;
    }
    this.SetAwake(true);
    this.m_force.SetZero();
    this.m_torque = 0.0;
    ce = this.m_contactList;
    while (ce) {
      ce.contact.FlagForFiltering();
      ce = ce.next;
    }
  };

  b2Body.prototype.GetType = function() {
    return this.m_type;
  };

  b2Body.prototype.SetBullet = function(flag) {
    if (flag) {
      this.m_flags |= b2Body.e_bulletFlag;
    } else {
      this.m_flags &= ~b2Body.e_bulletFlag;
    }
  };

  b2Body.prototype.IsBullet = function() {
    return (this.m_flags & b2Body.e_bulletFlag) === b2Body.e_bulletFlag;
  };

  b2Body.prototype.SetSleepingAllowed = function(flag) {
    if (flag) {
      this.m_flags |= b2Body.e_allowSleepFlag;
    } else {
      this.m_flags &= ~b2Body.e_allowSleepFlag;
      this.SetAwake(true);
    }
  };

  b2Body.prototype.SetAwake = function(flag) {
    if (flag) {
      this.m_flags |= b2Body.e_awakeFlag;
      this.m_sleepTime = 0.0;
    } else {
      this.m_flags &= ~b2Body.e_awakeFlag;
      this.m_sleepTime = 0.0;
      this.m_linearVelocity.SetZero();
      this.m_angularVelocity = 0.0;
      this.m_force.SetZero();
      this.m_torque = 0.0;
    }
  };

  b2Body.prototype.IsAwake = function() {
    return (this.m_flags & b2Body.e_awakeFlag) === b2Body.e_awakeFlag;
  };

  b2Body.prototype.SetFixedRotation = function(fixed) {
    if (fixed) {
      this.m_flags |= b2Body.e_fixedRotationFlag;
    } else {
      this.m_flags &= ~b2Body.e_fixedRotationFlag;
    }
    this.ResetMassData();
  };

  b2Body.prototype.IsFixedRotation = function() {
    return (this.m_flags & b2Body.e_fixedRotationFlag) === b2Body.e_fixedRotationFlag;
  };

  b2Body.prototype.SetActive = function(flag) {
    var broadPhase, ce, ce0, f;
    if (flag === this.IsActive()) {
      return;
    }
    broadPhase = void 0;
    f = void 0;
    if (flag) {
      this.m_flags |= b2Body.e_activeFlag;
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      f = this.m_fixtureList;
      while (f) {
        f.CreateProxy(broadPhase, this.m_xf);
        f = f.m_next;
      }
    } else {
      this.m_flags &= ~b2Body.e_activeFlag;
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      f = this.m_fixtureList;
      while (f) {
        f.DestroyProxy(broadPhase);
        f = f.m_next;
      }
      ce = this.m_contactList;
      while (ce) {
        ce0 = ce;
        ce = ce.next;
        this.m_world.m_contactManager.Destroy(ce0.contact);
      }
      this.m_contactList = null;
    }
  };

  b2Body.prototype.IsActive = function() {
    return (this.m_flags & b2Body.e_activeFlag) === b2Body.e_activeFlag;
  };

  b2Body.prototype.IsSleepingAllowed = function() {
    return (this.m_flags & b2Body.e_allowSleepFlag) === b2Body.e_allowSleepFlag;
  };

  b2Body.prototype.GetFixtureList = function() {
    return this.m_fixtureList;
  };

  b2Body.prototype.GetJointList = function() {
    return this.m_jointList;
  };

  b2Body.prototype.GetControllerList = function() {
    return this.m_controllerList;
  };

  b2Body.prototype.GetContactList = function() {
    return this.m_contactList;
  };

  b2Body.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Body.prototype.GetUserData = function() {
    return this.m_userData;
  };

  b2Body.prototype.SetUserData = function(data) {
    this.m_userData = data;
  };

  b2Body.prototype.GetWorld = function() {
    return this.m_world;
  };

  b2Body.prototype.SynchronizeFixtures = function() {
    var broadPhase, f, tMat, tVec, xf1;
    xf1 = b2Body.s_xf1;
    xf1.R.Set(this.m_sweep.a0);
    tMat = xf1.R;
    tVec = this.m_sweep.localCenter;
    xf1.position.x = this.m_sweep.c0.x - (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    xf1.position.y = this.m_sweep.c0.y - (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    f = void 0;
    broadPhase = this.m_world.m_contactManager.m_broadPhase;
    f = this.m_fixtureList;
    while (f) {
      f.Synchronize(broadPhase, xf1, this.m_xf);
      f = f.m_next;
    }
  };

  b2Body.prototype.SynchronizeTransform = function() {
    var tMat, tVec;
    this.m_xf.R.Set(this.m_sweep.a);
    tMat = this.m_xf.R;
    tVec = this.m_sweep.localCenter;
    this.m_xf.position.x = this.m_sweep.c.x - (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    this.m_xf.position.y = this.m_sweep.c.y - (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
  };

  b2Body.prototype.ShouldCollide = function(other) {
    var jn;
    if (this.m_type !== b2Body.b2_dynamicBody && other.m_type !== b2Body.b2_dynamicBody) {
      return false;
    }
    jn = this.m_jointList;
    while (jn) {
      if (jn.other === other) {
        if (jn.joint.m_collideConnected === false) {
          return false;
        }
      }
      jn = jn.next;
    }
    return true;
  };

  b2Body.prototype.Advance = function(t) {
    if (t === void 0) {
      t = 0;
    }
    this.m_sweep.Advance(t);
    this.m_sweep.c.SetV(this.m_sweep.c0);
    this.m_sweep.a = this.m_sweep.a0;
    this.SynchronizeTransform();
  };

  return b2Body;

})();

//# sourceMappingURL=b2Body.js.map

},{"../index":103}],46:[function(require,module,exports){
var Box2D, b2Body, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Body = Box2D.Dynamics.b2Body;

Box2D.Dynamics.b2BodyDef = (function() {
  b2BodyDef.prototype.position = null;

  b2BodyDef.prototype.linearVelocity = null;

  b2BodyDef.prototype.userData = null;

  b2BodyDef.prototype.angle = 0.0;

  b2BodyDef.prototype.linearVelocity = null;

  b2BodyDef.prototype.angularVelocity = 0.0;

  b2BodyDef.prototype.linearDamping = 0.0;

  b2BodyDef.prototype.angularDamping = 0.0;

  b2BodyDef.prototype.allowSleep = true;

  b2BodyDef.prototype.awake = true;

  b2BodyDef.prototype.fixedRotation = false;

  b2BodyDef.prototype.bullet = false;

  b2BodyDef.prototype.type = b2Body.b2_staticBody;

  b2BodyDef.prototype.active = true;

  b2BodyDef.prototype.inertiaScale = 1.0;

  function b2BodyDef() {
    this.position = new b2Vec2();
    this.position.Set(0.0, 0.0);
    this.linearVelocity = new b2Vec2();
    this.linearVelocity.Set(0, 0);
    return;
  }

  return b2BodyDef;

})();

//# sourceMappingURL=b2BodyDef.js.map

},{"../index":103}],47:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2ContactFilter = (function() {
  function b2ContactFilter() {}

  b2ContactFilter.prototype.ShouldCollide = function(fixtureA, fixtureB) {
    var collide, filter1, filter2;
    filter1 = fixtureA.GetFilterData();
    filter2 = fixtureB.GetFilterData();
    if (filter1.groupIndex === filter2.groupIndex && filter1.groupIndex !== 0) {
      return filter1.groupIndex > 0;
    }
    collide = (filter1.maskBits & filter2.categoryBits) !== 0 && (filter1.categoryBits & filter2.maskBits) !== 0;
    return collide;
  };

  b2ContactFilter.prototype.RayCollide = function(userData, fixture) {
    if (!userData) {
      return true;
    }
    return this.ShouldCollide((userData instanceof b2Fixture ? userData : null), fixture);
  };

  b2ContactFilter.b2_defaultFilter = new b2ContactFilter();

  return b2ContactFilter;

})();

//# sourceMappingURL=b2ContactFilter.js.map

},{"../index":103}],48:[function(require,module,exports){
var Box2D, Vector, b2Settings;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

Box2D.Dynamics.b2ContactImpulse = (function() {
  function b2ContactImpulse() {}

  b2ContactImpulse.prototype.normalImpulses = null;

  b2ContactImpulse.prototype.tangentImpulses = null;

  b2ContactImpulse.b2ContactImpulse = function() {
    this.normalImpulses = new Vector(b2Settings.b2_maxManifoldPoints);
    this.tangentImpulses = new Vector(b2Settings.b2_maxManifoldPoints);
  };

  return b2ContactImpulse;

})();

//# sourceMappingURL=b2ContactImpulse.js.map

},{"../index":103}],49:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2ContactListener = (function() {
  function b2ContactListener() {}

  b2ContactListener.prototype.BeginContact = function(contact) {};

  b2ContactListener.prototype.EndContact = function(contact) {};

  b2ContactListener.prototype.PreSolve = function(contact, oldManifold) {};

  b2ContactListener.prototype.PostSolve = function(contact, impulse) {};

  b2ContactListener.b2_defaultListener = new b2ContactListener();

  return b2ContactListener;

})();

//# sourceMappingURL=b2ContactListener.js.map

},{"../index":103}],50:[function(require,module,exports){
var Box2D, b2ContactFactory, b2ContactFilter, b2ContactListener, b2ContactPoint, b2DynamicTreeBroadPhase, b2Fixture;

Box2D = require('../index');

b2Fixture = Box2D.Dynamics.b2Fixture;

b2ContactFilter = Box2D.Dynamics.b2ContactFilter;

b2ContactListener = Box2D.Dynamics.b2ContactListener;

b2ContactFactory = Box2D.Dynamics.Contacts.b2ContactFactory;

b2ContactPoint = Box2D.Collision.b2ContactPoint;

b2DynamicTreeBroadPhase = Box2D.Collision.b2DynamicTreeBroadPhase;

Box2D.Dynamics.b2ContactManager = (function() {
  b2ContactManager.prototype.m_world = null;

  b2ContactManager.prototype.m_contactCount = null;

  b2ContactManager.prototype.m_contactFilter = null;

  b2ContactManager.prototype.m_contactListener = null;

  b2ContactManager.prototype.m_contactFactory = null;

  b2ContactManager.prototype.m_broadPhase = null;

  function b2ContactManager() {
    this.m_world = null;
    this.m_contactCount = 0;
    this.m_contactFilter = b2ContactFilter.b2_defaultFilter;
    this.m_contactListener = b2ContactListener.b2_defaultListener;
    this.m_contactFactory = new b2ContactFactory(this.m_allocator);
    this.m_broadPhase = new b2DynamicTreeBroadPhase();
    return;
  }

  b2ContactManager.prototype.AddPair = function(proxyUserDataA, proxyUserDataB) {
    var bodyA, bodyB, c, edge, fA, fB, fixtureA, fixtureB;
    fixtureA = (proxyUserDataA instanceof b2Fixture ? proxyUserDataA : null);
    fixtureB = (proxyUserDataB instanceof b2Fixture ? proxyUserDataB : null);
    bodyA = fixtureA.GetBody();
    bodyB = fixtureB.GetBody();
    if (bodyA === bodyB) {
      return;
    }
    edge = bodyB.GetContactList();
    while (edge) {
      if (edge.other === bodyA) {
        fA = edge.contact.GetFixtureA();
        fB = edge.contact.GetFixtureB();
        if (fA === fixtureA && fB === fixtureB) {
          return;
        }
        if (fA === fixtureB && fB === fixtureA) {
          return;
        }
      }
      edge = edge.next;
    }
    if (bodyB.ShouldCollide(bodyA) === false) {
      return;
    }
    if (this.m_contactFilter.ShouldCollide(fixtureA, fixtureB) === false) {
      return;
    }
    c = this.m_contactFactory.Create(fixtureA, fixtureB);
    fixtureA = c.GetFixtureA();
    fixtureB = c.GetFixtureB();
    bodyA = fixtureA.m_body;
    bodyB = fixtureB.m_body;
    c.m_prev = null;
    c.m_next = this.m_world.m_contactList;
    if (this.m_world.m_contactList != null) {
      this.m_world.m_contactList.m_prev = c;
    }
    this.m_world.m_contactList = c;
    c.m_nodeA.contact = c;
    c.m_nodeA.other = bodyB;
    c.m_nodeA.prev = null;
    c.m_nodeA.next = bodyA.m_contactList;
    if (bodyA.m_contactList != null) {
      bodyA.m_contactList.prev = c.m_nodeA;
    }
    bodyA.m_contactList = c.m_nodeA;
    c.m_nodeB.contact = c;
    c.m_nodeB.other = bodyA;
    c.m_nodeB.prev = null;
    c.m_nodeB.next = bodyB.m_contactList;
    if (bodyB.m_contactList != null) {
      bodyB.m_contactList.prev = c.m_nodeB;
    }
    bodyB.m_contactList = c.m_nodeB;
    ++this.m_world.m_contactCount;
  };

  b2ContactManager.prototype.FindNewContacts = function() {
    this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this, this.AddPair));
  };

  b2ContactManager.prototype.Destroy = function(c) {
    var bodyA, bodyB, fixtureA, fixtureB;
    fixtureA = c.GetFixtureA();
    fixtureB = c.GetFixtureB();
    bodyA = fixtureA.GetBody();
    bodyB = fixtureB.GetBody();
    if (c.IsTouching()) {
      this.m_contactListener.EndContact(c);
    }
    if (c.m_prev) {
      c.m_prev.m_next = c.m_next;
    }
    if (c.m_next) {
      c.m_next.m_prev = c.m_prev;
    }
    if (c === this.m_world.m_contactList) {
      this.m_world.m_contactList = c.m_next;
    }
    if (c.m_nodeA.prev) {
      c.m_nodeA.prev.next = c.m_nodeA.next;
    }
    if (c.m_nodeA.next) {
      c.m_nodeA.next.prev = c.m_nodeA.prev;
    }
    if (c.m_nodeA === bodyA.m_contactList) {
      bodyA.m_contactList = c.m_nodeA.next;
    }
    if (c.m_nodeB.prev) {
      c.m_nodeB.prev.next = c.m_nodeB.next;
    }
    if (c.m_nodeB.next) {
      c.m_nodeB.next.prev = c.m_nodeB.prev;
    }
    if (c.m_nodeB === bodyB.m_contactList) {
      bodyB.m_contactList = c.m_nodeB.next;
    }
    this.m_contactFactory.Destroy(c);
    --this.m_contactCount;
  };

  b2ContactManager.prototype.Collide = function() {
    var bodyA, bodyB, c, cNuke, fixtureA, fixtureB, overlap, proxyA, proxyB;
    c = this.m_world.m_contactList;
    while (c) {
      fixtureA = c.GetFixtureA();
      fixtureB = c.GetFixtureB();
      bodyA = fixtureA.GetBody();
      bodyB = fixtureB.GetBody();
      if (bodyA.IsAwake() === false && bodyB.IsAwake() === false) {
        c = c.GetNext();
        continue;
      }
      if (c.m_flags & 0x0040) {
        if (bodyB.ShouldCollide(bodyA) === false) {
          cNuke = c;
          c = cNuke.GetNext();
          this.Destroy(cNuke);
          continue;
        }
        if (this.m_contactFilter.ShouldCollide(fixtureA, fixtureB) === false) {
          cNuke = c;
          c = cNuke.GetNext();
          this.Destroy(cNuke);
          continue;
        }
        c.m_flags &= 0x0040;
      }
      proxyA = fixtureA.m_proxy;
      proxyB = fixtureB.m_proxy;
      overlap = this.m_broadPhase.TestOverlap(proxyA, proxyB);
      if (overlap === false) {
        cNuke = c;
        c = cNuke.GetNext();
        this.Destroy(cNuke);
        continue;
      }
      c.Update(this.m_contactListener);
      c = c.GetNext();
    }
  };

  b2ContactManager.s_evalCP = new b2ContactPoint();

  return b2ContactManager;

})();

//# sourceMappingURL=b2ContactManager.js.map

},{"../index":103}],51:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2DebugDraw = (function() {
  b2DebugDraw.e_shapeBit = 0x0001;

  b2DebugDraw.e_jointBit = 0x0002;

  b2DebugDraw.e_aabbBit = 0x0004;

  b2DebugDraw.e_pairBit = 0x0008;

  b2DebugDraw.e_centerOfMassBit = 0x0010;

  b2DebugDraw.e_controllerBit = 0x0020;

  b2DebugDraw.prototype.m_drawScale = 1.0;

  b2DebugDraw.prototype.m_lineThickness = 1.0;

  b2DebugDraw.prototype.m_alpha = 1.0;

  b2DebugDraw.prototype.m_fillAlpha = 1.0;

  b2DebugDraw.prototype.m_xformScale = 1.0;

  b2DebugDraw.prototype.m_drawFlags = 0;

  b2DebugDraw.prototype.m_ctx = null;

  function b2DebugDraw() {
    this.m_sprite = {
      graphics: {
        clear: (function(_this) {
          return function() {
            _this.m_ctx.clearRect(0, 0, _this.m_ctx.canvas.width, _this.m_ctx.canvas.height);
          };
        })(this)
      }
    };
    return;
  }

  b2DebugDraw.prototype._color = function(color, alpha) {
    return "rgba(" + ((color & 0xFF0000) >> 16) + "," + ((color & 0xFF00) >> 8) + "," + (color & 0xFF) + "," + alpha + ")";
  };

  b2DebugDraw.prototype.SetFlags = function(flags) {
    if (flags === undefined) {
      flags = 0;
    }
    this.m_drawFlags = flags;
  };

  b2DebugDraw.prototype.GetFlags = function() {
    return this.m_drawFlags;
  };

  b2DebugDraw.prototype.AppendFlags = function(flags) {
    if (flags === undefined) {
      flags = 0;
    }
    this.m_drawFlags |= flags;
  };

  b2DebugDraw.prototype.ClearFlags = function(flags) {
    if (flags === undefined) {
      flags = 0;
    }
    this.m_drawFlags &= ~flags;
  };

  b2DebugDraw.prototype.SetSprite = function(sprite) {
    this.m_ctx = sprite;
  };

  b2DebugDraw.prototype.GetSprite = function() {
    return this.m_ctx;
  };

  b2DebugDraw.prototype.SetDrawScale = function(drawScale) {
    if (drawScale === undefined) {
      drawScale = 0;
    }
    this.m_drawScale = drawScale;
  };

  b2DebugDraw.prototype.GetDrawScale = function() {
    return this.m_drawScale;
  };

  b2DebugDraw.prototype.SetLineThickness = function(lineThickness) {
    if (lineThickness === undefined) {
      lineThickness = 0;
    }
    this.m_lineThickness = lineThickness;
    this.m_ctx.strokeWidth = lineThickness;
  };

  b2DebugDraw.prototype.GetLineThickness = function() {
    return this.m_lineThickness;
  };

  b2DebugDraw.prototype.SetAlpha = function(alpha) {
    if (alpha === undefined) {
      alpha = 0;
    }
    this.m_alpha = alpha;
  };

  b2DebugDraw.prototype.GetAlpha = function() {
    return this.m_alpha;
  };

  b2DebugDraw.prototype.SetFillAlpha = function(alpha) {
    if (alpha === undefined) {
      alpha = 0;
    }
    this.m_fillAlpha = alpha;
  };

  b2DebugDraw.prototype.GetFillAlpha = function() {
    return this.m_fillAlpha;
  };

  b2DebugDraw.prototype.SetXFormScale = function(xformScale) {
    if (xformScale === undefined) {
      xformScale = 0;
    }
    this.m_xformScale = xformScale;
  };

  b2DebugDraw.prototype.GetXFormScale = function() {
    return this.m_xformScale;
  };

  b2DebugDraw.prototype.DrawPolygon = function(vertices, vertexCount, color) {
    var drawScale, i, s;
    if (!vertexCount) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.moveTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    i = 1;
    while (i < vertexCount) {
      s.lineTo(vertices[i].x * drawScale, vertices[i].y * drawScale);
      i++;
    }
    s.lineTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    s.closePath();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawSolidPolygon = function(vertices, vertexCount, color) {
    var drawScale, i, s;
    if (!vertexCount) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.fillStyle = this._color(color.color, this.m_fillAlpha);
    s.moveTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    i = 1;
    while (i < vertexCount) {
      s.lineTo(vertices[i].x * drawScale, vertices[i].y * drawScale);
      i++;
    }
    s.lineTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    s.closePath();
    s.fill();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawCircle = function(center, radius, color) {
    var drawScale, s;
    if (!radius) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.arc(center.x * drawScale, center.y * drawScale, radius * drawScale, 0, Math.PI * 2, true);
    s.closePath();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawSolidCircle = function(center, radius, axis, color) {
    var cx, cy, drawScale, s;
    if (!radius) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    cx = center.x * drawScale;
    cy = center.y * drawScale;
    s.moveTo(0, 0);
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.fillStyle = this._color(color.color, this.m_fillAlpha);
    s.arc(cx, cy, radius * drawScale, 0, Math.PI * 2, true);
    s.moveTo(cx, cy);
    s.lineTo((center.x + axis.x * radius) * drawScale, (center.y + axis.y * radius) * drawScale);
    s.closePath();
    s.fill();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawSegment = function(p1, p2, color) {
    var drawScale, s;
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.beginPath();
    s.moveTo(p1.x * drawScale, p1.y * drawScale);
    s.lineTo(p2.x * drawScale, p2.y * drawScale);
    s.closePath();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawTransform = function(xf) {
    var drawScale, s;
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(0xff0000, this.m_alpha);
    s.moveTo(xf.position.x * drawScale, xf.position.y * drawScale);
    s.lineTo((xf.position.x + this.m_xformScale * xf.R.col1.x) * drawScale, (xf.position.y + this.m_xformScale * xf.R.col1.y) * drawScale);
    s.strokeStyle = this._color(0xff00, this.m_alpha);
    s.moveTo(xf.position.x * drawScale, xf.position.y * drawScale);
    s.lineTo((xf.position.x + this.m_xformScale * xf.R.col2.x) * drawScale, (xf.position.y + this.m_xformScale * xf.R.col2.y) * drawScale);
    s.closePath();
    s.stroke();
  };

  return b2DebugDraw;

})();

//# sourceMappingURL=b2DebugDraw.js.map

},{"../index":103}],52:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2DestructionListener = (function() {
  function b2DestructionListener() {}

  b2DestructionListener.prototype.SayGoodbyeJoint = function(joint) {};

  b2DestructionListener.prototype.SayGoodbyeFixture = function(fixture) {};

  return b2DestructionListener;

})();

//# sourceMappingURL=b2DestructionListener.js.map

},{"../index":103}],53:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2FilterData = (function() {
  function b2FilterData() {}

  b2FilterData.prototype.categoryBits = 0x0001;

  b2FilterData.prototype.maskBits = 0xFFFF;

  b2FilterData.prototype.groupIndex = 0;

  b2FilterData.prototype.Copy = function() {
    var copy;
    copy = new b2FilterData();
    copy.categoryBits = this.categoryBits;
    copy.maskBits = this.maskBits;
    copy.groupIndex = this.groupIndex;
    return copy;
  };

  return b2FilterData;

})();

//# sourceMappingURL=b2FilterData.js.map

},{"../index":103}],54:[function(require,module,exports){
var Box2D, b2AABB, b2FilterData, b2MassData, b2Math, b2Vec2;

Box2D = require('../index');

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2FilterData = Box2D.Dynamics.b2FilterData;

b2AABB = Box2D.Collision.b2AABB;

b2MassData = Box2D.Collision.Shapes.b2MassData;

Box2D.Dynamics.b2Fixture = (function() {
  b2Fixture.prototype.m_filter = null;

  b2Fixture.prototype.m_shape = null;

  b2Fixture.prototype.m_isSensor = false;

  b2Fixture.prototype.m_body = null;

  b2Fixture.prototype.m_next = null;

  b2Fixture.prototype.m_userData = null;

  b2Fixture.prototype.m_density = 0.0;

  b2Fixture.prototype.m_friction = 0.0;

  b2Fixture.prototype.m_restitution = 0.0;

  b2Fixture.prototype.m_aabb = null;

  b2Fixture.prototype.m_proxy = null;

  function b2Fixture() {
    this.m_filter = new b2FilterData();
    this.m_aabb = new b2AABB();
  }

  b2Fixture.prototype.GetType = function() {
    return this.m_shape.GetType();
  };

  b2Fixture.prototype.GetShape = function() {
    return this.m_shape;
  };

  b2Fixture.prototype.SetSensor = function(sensor) {
    var contact, edge, fixtureA, fixtureB;
    if (this.m_isSensor === sensor) {
      return;
    }
    this.m_isSensor = sensor;
    if (this.m_body == null) {
      return;
    }
    edge = this.m_body.GetContactList();
    while (edge) {
      contact = edge.contact;
      fixtureA = contact.GetFixtureA();
      fixtureB = contact.GetFixtureB();
      if (fixtureA === this || fixtureB === this) {
        contact.SetSensor(fixtureA.IsSensor() || fixtureB.IsSensor());
      }
      edge = edge.next;
    }
  };

  b2Fixture.prototype.IsSensor = function() {
    return this.m_isSensor;
  };

  b2Fixture.prototype.SetFilterData = function(filter) {
    var contact, edge, fixtureA, fixtureB;
    this.m_filter = filter.Copy();
    if (this.m_body) {
      return;
    }
    edge = this.m_body.GetContactList();
    while (edge) {
      contact = edge.contact;
      fixtureA = contact.GetFixtureA();
      fixtureB = contact.GetFixtureB();
      if (fixtureA === this || fixtureB === this) {
        contact.FlagForFiltering();
      }
      edge = edge.next;
    }
  };

  b2Fixture.prototype.GetFilterData = function() {
    return this.m_filter.Copy();
  };

  b2Fixture.prototype.GetBody = function() {
    return this.m_body;
  };

  b2Fixture.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Fixture.prototype.GetUserData = function() {
    return this.m_userData;
  };

  b2Fixture.prototype.SetUserData = function(data) {
    return this.m_userData = data;
  };

  b2Fixture.prototype.TestPoint = function(p) {
    return this.m_shape.TestPoint(this.m_body.GetTransform(), p);
  };

  b2Fixture.prototype.RayCast = function(output, input) {
    return this.m_shape.RayCast(output, input, this.m_body.GetTransform());
  };

  b2Fixture.prototype.GetMassData = function(massData) {
    if (massData === void 0) {
      massData = null;
    }
    if (massData == null) {
      massData = new b2MassData();
    }
    this.m_shape.ComputeMass(massData, this.m_density);
    return massData;
  };

  b2Fixture.prototype.SetDensity = function(density) {
    if (density === void 0) {
      density = 0;
    }
    this.m_density = density;
  };

  b2Fixture.prototype.GetDensity = function() {
    return this.m_density;
  };

  b2Fixture.prototype.GetFriction = function() {
    return this.m_friction;
  };

  b2Fixture.prototype.SetFriction = function(friction) {
    if (friction === void 0) {
      friction = 0;
    }
    this.m_friction = friction;
  };

  b2Fixture.prototype.GetRestitution = function() {
    return this.m_restitution;
  };

  b2Fixture.prototype.SetRestitution = function(restitution) {
    if (restitution === void 0) {
      restitution = 0;
    }
    this.m_restitution = restitution;
  };

  b2Fixture.prototype.GetAABB = function() {
    return this.m_aabb;
  };

  b2Fixture.prototype.Create = function(body, xf, def) {
    this.m_userData = def.userData;
    this.m_friction = def.friction;
    this.m_restitution = def.restitution;
    this.m_body = body;
    this.m_next = null;
    this.m_filter = def.filter.Copy();
    this.m_isSensor = def.isSensor;
    this.m_shape = def.shape.Copy();
    this.m_density = def.density;
  };

  b2Fixture.prototype.Destroy = function() {
    this.m_shape = null;
  };

  b2Fixture.prototype.CreateProxy = function(broadPhase, xf) {
    this.m_shape.ComputeAABB(this.m_aabb, xf);
    this.m_proxy = broadPhase.CreateProxy(this.m_aabb, this);
  };

  b2Fixture.prototype.DestroyProxy = function(broadPhase) {
    if (this.m_proxy == null) {
      return;
    }
    broadPhase.DestroyProxy(this.m_proxy);
    this.m_proxy = null;
  };

  b2Fixture.prototype.Synchronize = function(broadPhase, transform1, transform2) {
    var aabb1, aabb2, displacement;
    if (!this.m_proxy) {
      return;
    }
    aabb1 = new b2AABB();
    aabb2 = new b2AABB();
    this.m_shape.ComputeAABB(aabb1, transform1);
    this.m_shape.ComputeAABB(aabb2, transform2);
    this.m_aabb.Combine(aabb1, aabb2);
    displacement = b2Math.SubtractVV(transform2.position, transform1.position);
    broadPhase.MoveProxy(this.m_proxy, this.m_aabb, displacement);
  };

  return b2Fixture;

})();

//# sourceMappingURL=b2Fixture.js.map

},{"../index":103}],55:[function(require,module,exports){
var Box2D, b2FilterData;

Box2D = require('../index');

b2FilterData = Box2D.Dynamics.b2FilterData;

Box2D.Dynamics.b2FixtureDef = (function() {
  b2FixtureDef.prototype.shape = null;

  b2FixtureDef.prototype.userData = null;

  b2FixtureDef.prototype.friction = 0.2;

  b2FixtureDef.prototype.restitution = 0.0;

  b2FixtureDef.prototype.density = 0.0;

  b2FixtureDef.prototype.isSensor = false;

  b2FixtureDef.prototype.filter = null;

  function b2FixtureDef() {
    this.filter = new b2FilterData();
    this.filter.categoryBits = 0x0001;
    this.filter.maskBits = 0xFFFF;
    this.filter.groupIndex = 0;
    return;
  }

  return b2FixtureDef;

})();

//# sourceMappingURL=b2FixtureDef.js.map

},{"../index":103}],56:[function(require,module,exports){
var Box2D, b2Body, b2ContactImpulse, b2Math, b2Settings;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2ContactImpulse = Box2D.Dynamics.b2ContactImpulse;

b2Body = Box2D.Dynamics.b2Body;

Box2D.Dynamics.b2Island = (function() {
  b2Island.prototype.m_bodies = null;

  b2Island.prototype.m_contacts = null;

  b2Island.prototype.m_joints = null;

  b2Island.prototype.m_bodyCapacity = 0;

  b2Island.prototype.m_contactCapacity = 0;

  b2Island.prototype.m_jointCapacity = 0;

  b2Island.prototype.m_bodyCount = 0;

  b2Island.prototype.m_contactCount = 0;

  b2Island.prototype.m_jointCount = 0;

  b2Island.prototype.m_allocator = null;

  b2Island.prototype.m_listener = null;

  b2Island.prototype.m_contactSolver = null;

  function b2Island() {
    this.m_bodies = new Array();
    this.m_contacts = new Array();
    this.m_joints = new Array();
    return;
  }

  b2Island.prototype.Initialize = function(bodyCapacity, contactCapacity, jointCapacity, allocator, listener, contactSolver) {
    var i;
    if (bodyCapacity === void 0) {
      bodyCapacity = 0;
    }
    if (contactCapacity === void 0) {
      contactCapacity = 0;
    }
    if (jointCapacity === void 0) {
      jointCapacity = 0;
    }
    i = 0;
    this.m_bodyCapacity = bodyCapacity;
    this.m_contactCapacity = contactCapacity;
    this.m_jointCapacity = jointCapacity;
    this.m_bodyCount = 0;
    this.m_contactCount = 0;
    this.m_jointCount = 0;
    this.m_allocator = allocator;
    this.m_listener = listener;
    this.m_contactSolver = contactSolver;
    i = this.m_bodies.length;
    while (i < bodyCapacity) {
      this.m_bodies[i] = null;
      i++;
    }
    i = this.m_contacts.length;
    while (i < contactCapacity) {
      this.m_contacts[i] = null;
      i++;
    }
    i = this.m_joints.length;
    while (i < jointCapacity) {
      this.m_joints[i] = null;
      i++;
    }
  };

  b2Island.prototype.Clear = function() {
    this.m_bodyCount = 0;
    this.m_contactCount = 0;
    this.m_jointCount = 0;
  };

  b2Island.prototype.Solve = function(step, gravity, allowSleep) {
    var angTolSqr, b, contactSolver, contactsOkay, i, j, joint, jointOkay, jointsOkay, linTolSqr, minSleepTime, rotation, translationX, translationY;
    i = 0;
    j = 0;
    b = void 0;
    joint = void 0;
    i = 0;
    while (i < this.m_bodyCount) {
      b = this.m_bodies[i];
      if (b.GetType() !== b2Body.b2_dynamicBody) {
        continue;
      }
      b.m_linearVelocity.x += step.dt * (gravity.x + b.m_invMass * b.m_force.x);
      b.m_linearVelocity.y += step.dt * (gravity.y + b.m_invMass * b.m_force.y);
      b.m_angularVelocity += step.dt * b.m_invI * b.m_torque;
      b.m_linearVelocity.Multiply(b2Math.Clamp(1.0 - step.dt * b.m_linearDamping, 0.0, 1.0));
      b.m_angularVelocity *= b2Math.Clamp(1.0 - step.dt * b.m_angularDamping, 0.0, 1.0);
      ++i;
    }
    this.m_contactSolver.Initialize(step, this.m_contacts, this.m_contactCount, this.m_allocator);
    contactSolver = this.m_contactSolver;
    contactSolver.InitVelocityConstraints(step);
    i = 0;
    while (i < this.m_jointCount) {
      joint = this.m_joints[i];
      joint.InitVelocityConstraints(step);
      ++i;
    }
    i = 0;
    while (i < step.velocityIterations) {
      j = 0;
      while (j < this.m_jointCount) {
        joint = this.m_joints[j];
        joint.SolveVelocityConstraints(step);
        ++j;
      }
      contactSolver.SolveVelocityConstraints();
      ++i;
    }
    i = 0;
    while (i < this.m_jointCount) {
      joint = this.m_joints[i];
      joint.FinalizeVelocityConstraints();
      ++i;
    }
    contactSolver.FinalizeVelocityConstraints();
    i = 0;
    while (i < this.m_bodyCount) {
      b = this.m_bodies[i];
      if (b.GetType() === b2Body.b2_staticBody) {
        continue;
      }
      translationX = step.dt * b.m_linearVelocity.x;
      translationY = step.dt * b.m_linearVelocity.y;
      if ((translationX * translationX + translationY * translationY) > b2Settings.b2_maxTranslationSquared) {
        b.m_linearVelocity.Normalize();
        b.m_linearVelocity.x *= b2Settings.b2_maxTranslation * step.inv_dt;
        b.m_linearVelocity.y *= b2Settings.b2_maxTranslation * step.inv_dt;
      }
      rotation = step.dt * b.m_angularVelocity;
      if (rotation * rotation > b2Settings.b2_maxRotationSquared) {
        if (b.m_angularVelocity < 0.0) {
          b.m_angularVelocity = -b2Settings.b2_maxRotation * step.inv_dt;
        } else {
          b.m_angularVelocity = b2Settings.b2_maxRotation * step.inv_dt;
        }
      }
      b.m_sweep.c0.SetV(b.m_sweep.c);
      b.m_sweep.a0 = b.m_sweep.a;
      b.m_sweep.c.x += step.dt * b.m_linearVelocity.x;
      b.m_sweep.c.y += step.dt * b.m_linearVelocity.y;
      b.m_sweep.a += step.dt * b.m_angularVelocity;
      b.SynchronizeTransform();
      ++i;
    }
    i = 0;
    while (i < step.positionIterations) {
      contactsOkay = contactSolver.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);
      jointsOkay = true;
      j = 0;
      while (j < this.m_jointCount) {
        joint = this.m_joints[j];
        jointOkay = joint.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);
        jointsOkay = jointsOkay && jointOkay;
        ++j;
      }
      if (contactsOkay && jointsOkay) {
        break;
      }
      ++i;
    }
    this.Report(contactSolver.m_constraints);
    if (allowSleep) {
      minSleepTime = Number.MAX_VALUE;
      linTolSqr = b2Settings.b2_linearSleepTolerance * b2Settings.b2_linearSleepTolerance;
      angTolSqr = b2Settings.b2_angularSleepTolerance * b2Settings.b2_angularSleepTolerance;
      i = 0;
      while (i < this.m_bodyCount) {
        b = this.m_bodies[i];
        if (b.GetType() === b2Body.b2_staticBody) {
          continue;
        }
        if ((b.m_flags & b2Body.e_allowSleepFlag) === 0) {
          b.m_sleepTime = 0.0;
          minSleepTime = 0.0;
        }
        if ((b.m_flags & b2Body.e_allowSleepFlag) === 0 || b.m_angularVelocity * b.m_angularVelocity > angTolSqr || b2Math.Dot(b.m_linearVelocity, b.m_linearVelocity) > linTolSqr) {
          b.m_sleepTime = 0.0;
          minSleepTime = 0.0;
        } else {
          b.m_sleepTime += step.dt;
          minSleepTime = b2Math.Min(minSleepTime, b.m_sleepTime);
        }
        ++i;
      }
      if (minSleepTime >= b2Settings.b2_timeToSleep) {
        i = 0;
        while (i < this.m_bodyCount) {
          b = this.m_bodies[i];
          b.SetAwake(false);
          ++i;
        }
      }
    }
  };

  b2Island.prototype.SolveTOI = function(subStep) {
    var b, contactSolver, contactsOkay, i, j, jointOkay, jointsOkay, k_toiBaumgarte, rotation, translationX, translationY;
    i = 0;
    j = 0;
    this.m_contactSolver.Initialize(subStep, this.m_contacts, this.m_contactCount, this.m_allocator);
    contactSolver = this.m_contactSolver;
    i = 0;
    while (i < this.m_jointCount) {
      this.m_joints[i].InitVelocityConstraints(subStep);
      ++i;
    }
    i = 0;
    while (i < subStep.velocityIterations) {
      contactSolver.SolveVelocityConstraints();
      j = 0;
      while (j < this.m_jointCount) {
        this.m_joints[j].SolveVelocityConstraints(subStep);
        ++j;
      }
      ++i;
    }
    i = 0;
    while (i < this.m_bodyCount) {
      b = this.m_bodies[i];
      if (b.GetType() === b2Body.b2_staticBody) {
        continue;
      }
      translationX = subStep.dt * b.m_linearVelocity.x;
      translationY = subStep.dt * b.m_linearVelocity.y;
      if ((translationX * translationX + translationY * translationY) > b2Settings.b2_maxTranslationSquared) {
        b.m_linearVelocity.Normalize();
        b.m_linearVelocity.x *= b2Settings.b2_maxTranslation * subStep.inv_dt;
        b.m_linearVelocity.y *= b2Settings.b2_maxTranslation * subStep.inv_dt;
      }
      rotation = subStep.dt * b.m_angularVelocity;
      if (rotation * rotation > b2Settings.b2_maxRotationSquared) {
        if (b.m_angularVelocity < 0.0) {
          b.m_angularVelocity = -b2Settings.b2_maxRotation * subStep.inv_dt;
        } else {
          b.m_angularVelocity = b2Settings.b2_maxRotation * subStep.inv_dt;
        }
      }
      b.m_sweep.c0.SetV(b.m_sweep.c);
      b.m_sweep.a0 = b.m_sweep.a;
      b.m_sweep.c.x += subStep.dt * b.m_linearVelocity.x;
      b.m_sweep.c.y += subStep.dt * b.m_linearVelocity.y;
      b.m_sweep.a += subStep.dt * b.m_angularVelocity;
      b.SynchronizeTransform();
      ++i;
    }
    k_toiBaumgarte = 0.75;
    i = 0;
    while (i < subStep.positionIterations) {
      contactsOkay = contactSolver.SolvePositionConstraints(k_toiBaumgarte);
      jointsOkay = true;
      j = 0;
      while (j < this.m_jointCount) {
        jointOkay = this.m_joints[j].SolvePositionConstraints(b2Settings.b2_contactBaumgarte);
        jointsOkay = jointsOkay && jointOkay;
        ++j;
      }
      if (contactsOkay && jointsOkay) {
        break;
      }
      ++i;
    }
    this.Report(contactSolver.m_constraints);
  };

  b2Island.prototype.Report = function(constraints) {
    var c, cc, i, j;
    if (this.m_listener == null) {
      return;
    }
    i = 0;
    while (i < this.m_contactCount) {
      c = this.m_contacts[i];
      cc = constraints[i];
      j = 0;
      while (j < cc.pointCount) {
        b2Island.s_impulse.normalImpulses[j] = cc.points[j].normalImpulse;
        b2Island.s_impulse.tangentImpulses[j] = cc.points[j].tangentImpulse;
        ++j;
      }
      this.m_listener.PostSolve(c, b2Island.s_impulse);
      ++i;
    }
  };

  b2Island.prototype.AddBody = function(body) {
    body.m_islandIndex = this.m_bodyCount;
    this.m_bodies[this.m_bodyCount++] = body;
  };

  b2Island.prototype.AddContact = function(contact) {
    this.m_contacts[this.m_contactCount++] = contact;
  };

  b2Island.prototype.AddJoint = function(joint) {
    this.m_joints[this.m_jointCount++] = joint;
  };

  b2Island.s_impulse = new b2ContactImpulse();

  return b2Island;

})();

//# sourceMappingURL=b2Island.js.map

},{"../index":103}],57:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2TimeStep = (function() {
  function b2TimeStep() {}

  b2TimeStep.prototype.dt = 0;

  b2TimeStep.prototype.inv_dt = 0;

  b2TimeStep.prototype.positionIterations = 0;

  b2TimeStep.prototype.velocityIterations = 0;

  b2TimeStep.prototype.warmStarting = 0;

  b2TimeStep.prototype.Set = function(step) {
    this.dt = step.dt;
    this.inv_dt = step.inv_dt;
    this.positionIterations = step.positionIterations;
    this.velocityIterations = step.velocityIterations;
    this.warmStarting = step.warmStarting;
  };

  return b2TimeStep;

})();

//# sourceMappingURL=b2TimeStep.js.map

},{"../index":103}],58:[function(require,module,exports){
var Box2D, b2AABB, b2Body, b2BodyDef, b2Color, b2Contact, b2ContactManager, b2ContactSolver, b2DebugDraw, b2EdgeShape, b2Island, b2Joint, b2Math, b2PolygonShape, b2RayCastInput, b2RayCastOutput, b2Settings, b2Shape, b2Sweep, b2TimeStep, b2Transform, b2Vec2;

Box2D = require('../index');

b2AABB = Box2D.Collision.b2AABB;

b2Color = Box2D.Common.b2Color;

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Sweep = Box2D.Common.Math.b2Sweep;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Transform = Box2D.Common.Math.b2Transform;

b2Body = Box2D.Dynamics.b2Body;

b2BodyDef = Box2D.Dynamics.b2BodyDef;

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Contact = Box2D.Dynamics.b2Contact;

b2ContactManager = Box2D.Dynamics.b2ContactManager;

b2ContactSolver = Box2D.Dynamics.Contacts.b2ContactSolver;

b2Island = Box2D.Dynamics.b2Island;

b2TimeStep = Box2D.Dynamics.b2TimeStep;

b2DebugDraw = Box2D.Dynamics.b2DebugDraw;

b2RayCastInput = Box2D.Collision.b2RayCastInput;

b2RayCastOutput = Box2D.Collision.b2RayCastOutput;

b2Shape = Box2D.Collision.Shapes.b2Shape;

b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape;

b2EdgeShape = Box2D.Collision.Shapes.b2EdgeShape;

Box2D.Dynamics.b2World = (function() {
  var b2Body_activeFlag, b2Body_allowSleepFlag, b2Body_awakeFlag, b2Body_bulletFlag, b2Body_dynamicBody, b2Body_fixedRotationFlag, b2Body_islandFlag, b2Body_kinematicBody, b2Body_staticBody, b2Contact_continuousFlag, b2Contact_enabledFlag, b2Contact_filterFlag, b2Contact_islandFlag, b2Contact_sensorFlag, b2Contact_toiFlag, b2Contact_touchingFlag;

  b2Contact_sensorFlag = 0x0001;

  b2Contact_continuousFlag = 0x0002;

  b2Contact_islandFlag = 0x0004;

  b2Contact_toiFlag = 0x0008;

  b2Contact_touchingFlag = 0x0010;

  b2Contact_enabledFlag = 0x0020;

  b2Contact_filterFlag = 0x0040;

  b2Body_islandFlag = 0x0001;

  b2Body_awakeFlag = 0x0002;

  b2Body_allowSleepFlag = 0x0004;

  b2Body_bulletFlag = 0x0008;

  b2Body_fixedRotationFlag = 0x0010;

  b2Body_activeFlag = 0x0020;

  b2Body_staticBody = 0;

  b2Body_kinematicBody = 1;

  b2Body_dynamicBody = 2;

  b2World.s_timestep2 = new b2TimeStep();

  b2World.s_xf = new b2Transform();

  b2World.s_backupA = new b2Sweep();

  b2World.s_backupB = new b2Sweep();

  b2World.s_timestep = new b2TimeStep();

  b2World.s_queue = new Array();

  b2World.s_jointColor = new b2Color(0.5, 0.8, 0.8);

  b2World.e_newFixture = 0x0001;

  b2World.e_locked = 0x0002;

  b2World.prototype.s_stack = null;

  b2World.prototype.m_contactManager = null;

  b2World.prototype.m_contactSolver = null;

  b2World.prototype.m_island = null;

  b2World.prototype.m_destructionListener = null;

  b2World.prototype.m_debugDraw = null;

  b2World.prototype.m_bodyList = null;

  b2World.prototype.m_contactList = null;

  b2World.prototype.m_jointList = null;

  b2World.prototype.m_controllerList = null;

  b2World.prototype.m_bodyCount = 0;

  b2World.prototype.m_contactCount = 0;

  b2World.prototype.m_jointCount = 0;

  b2World.prototype.m_controllerCount = 0;

  b2World.prototype.m_allowSleep = null;

  b2World.prototype.m_gravity = null;

  b2World.prototype.m_inv_dt0 = 0.0;

  b2World.prototype.m_groundBody = null;

  function b2World(gravity, doSleep) {
    var bd;
    this.s_stack = new Array();
    this.m_contactManager = new b2ContactManager();
    this.m_contactSolver = new b2ContactSolver();
    this.m_island = new b2Island();
    b2World.m_warmStarting = true;
    b2World.m_continuousPhysics = true;
    this.m_allowSleep = doSleep;
    this.m_gravity = gravity;
    this.m_contactManager.m_world = this;
    bd = new b2BodyDef();
    this.m_groundBody = this.CreateBody(bd);
    return;
  }

  b2World.prototype.SetDestructionListener = function(listener) {
    this.m_destructionListener = listener;
  };

  b2World.prototype.SetContactFilter = function(filter) {
    this.m_contactManager.m_contactFilter = filter;
  };

  b2World.prototype.SetContactListener = function(listener) {
    this.m_contactManager.m_contactListener = listener;
  };

  b2World.prototype.SetDebugDraw = function(debugDraw) {
    this.m_debugDraw = debugDraw;
  };

  b2World.prototype.SetBroadPhase = function(broadPhase) {
    var b, f, oldBroadPhase;
    oldBroadPhase = this.m_contactManager.m_broadPhase;
    this.m_contactManager.m_broadPhase = broadPhase;
    b = this.m_bodyList;
    while (b) {
      f = b.m_fixtureList;
      while (f) {
        f.m_proxy = broadPhase.CreateProxy(oldBroadPhase.GetFatAABB(f.m_proxy), f);
        f = f.m_next;
      }
      b = b.m_next;
    }
  };

  b2World.prototype.Validate = function() {
    this.m_contactManager.m_broadPhase.Validate();
  };

  b2World.prototype.GetProxyCount = function() {
    return this.m_contactManager.m_broadPhase.GetProxyCount();
  };

  b2World.prototype.CreateBody = function(def) {
    var b;
    if (this.IsLocked() === true) {
      return null;
    }
    b = new b2Body(def, this);
    b.m_prev = null;
    b.m_next = this.m_bodyList;
    if (this.m_bodyList) {
      this.m_bodyList.m_prev = b;
    }
    this.m_bodyList = b;
    ++this.m_bodyCount;
    return b;
  };

  b2World.prototype.DestroyBody = function(b) {
    var ce, ce0, coe, coe0, f, f0, jn, jn0;
    if (this.IsLocked() === true) {
      return;
    }
    jn = b.m_jointList;
    while (jn) {
      jn0 = jn;
      jn = jn.next;
      if (this.m_destructionListener) {
        this.m_destructionListener.SayGoodbyeJoint(jn0.joint);
      }
      this.DestroyJoint(jn0.joint);
    }
    coe = b.m_controllerList;
    while (coe) {
      coe0 = coe;
      coe = coe.nextController;
      coe0.controller.RemoveBody(b);
    }
    ce = b.m_contactList;
    while (ce) {
      ce0 = ce;
      ce = ce.next;
      this.m_contactManager.Destroy(ce0.contact);
    }
    b.m_contactList = null;
    f = b.m_fixtureList;
    while (f) {
      f0 = f;
      f = f.m_next;
      if (this.m_destructionListener) {
        this.m_destructionListener.SayGoodbyeFixture(f0);
      }
      f0.DestroyProxy(this.m_contactManager.m_broadPhase);
      f0.Destroy();
    }
    b.m_fixtureList = null;
    b.m_fixtureCount = 0;
    if (b.m_prev) {
      b.m_prev.m_next = b.m_next;
    }
    if (b.m_next) {
      b.m_next.m_prev = b.m_prev;
    }
    if (b === this.m_bodyList) {
      this.m_bodyList = b.m_next;
    }
    --this.m_bodyCount;
  };

  b2World.prototype.CreateJoint = function(def) {
    var bodyA, bodyB, edge, j;
    j = b2Joint.Create(def, null);
    j.m_prev = null;
    j.m_next = this.m_jointList;
    if (this.m_jointList) {
      this.m_jointList.m_prev = j;
    }
    this.m_jointList = j;
    ++this.m_jointCount;
    j.m_edgeA.joint = j;
    j.m_edgeA.other = j.m_bodyB;
    j.m_edgeA.prev = null;
    j.m_edgeA.next = j.m_bodyA.m_jointList;
    if (j.m_bodyA.m_jointList) {
      j.m_bodyA.m_jointList.prev = j.m_edgeA;
    }
    j.m_bodyA.m_jointList = j.m_edgeA;
    j.m_edgeB.joint = j;
    j.m_edgeB.other = j.m_bodyA;
    j.m_edgeB.prev = null;
    j.m_edgeB.next = j.m_bodyB.m_jointList;
    if (j.m_bodyB.m_jointList) {
      j.m_bodyB.m_jointList.prev = j.m_edgeB;
    }
    j.m_bodyB.m_jointList = j.m_edgeB;
    bodyA = def.bodyA;
    bodyB = def.bodyB;
    if (def.collideConnected === false) {
      edge = bodyB.GetContactList();
      while (edge) {
        if (edge.other === bodyA) {
          edge.contact.FlagForFiltering();
        }
        edge = edge.next;
      }
    }
    return j;
  };

  b2World.prototype.DestroyJoint = function(j) {
    var bodyA, bodyB, collideConnected, edge;
    collideConnected = j.m_collideConnected;
    if (j.m_prev) {
      j.m_prev.m_next = j.m_next;
    }
    if (j.m_next) {
      j.m_next.m_prev = j.m_prev;
    }
    if (j === this.m_jointList) {
      this.m_jointList = j.m_next;
    }
    bodyA = j.m_bodyA;
    bodyB = j.m_bodyB;
    bodyA.SetAwake(true);
    bodyB.SetAwake(true);
    if (j.m_edgeA.prev) {
      j.m_edgeA.prev.next = j.m_edgeA.next;
    }
    if (j.m_edgeA.next) {
      j.m_edgeA.next.prev = j.m_edgeA.prev;
    }
    if (j.m_edgeA === bodyA.m_jointList) {
      bodyA.m_jointList = j.m_edgeA.next;
    }
    j.m_edgeA.prev = null;
    j.m_edgeA.next = null;
    if (j.m_edgeB.prev) {
      j.m_edgeB.prev.next = j.m_edgeB.next;
    }
    if (j.m_edgeB.next) {
      j.m_edgeB.next.prev = j.m_edgeB.prev;
    }
    if (j.m_edgeB === bodyB.m_jointList) {
      bodyB.m_jointList = j.m_edgeB.next;
    }
    j.m_edgeB.prev = null;
    j.m_edgeB.next = null;
    b2Joint.Destroy(j, null);
    --this.m_jointCount;
    if (collideConnected === false) {
      edge = bodyB.GetContactList();
      while (edge) {
        if (edge.other === bodyA) {
          edge.contact.FlagForFiltering();
        }
        edge = edge.next;
      }
    }
  };

  b2World.prototype.AddController = function(c) {
    c.m_next = this.m_controllerList;
    c.m_prev = null;
    this.m_controllerList = c;
    c.m_world = this;
    this.m_controllerCount++;
    return c;
  };

  b2World.prototype.RemoveController = function(c) {
    if (c.m_prev) {
      c.m_prev.m_next = c.m_next;
    }
    if (c.m_next) {
      c.m_next.m_prev = c.m_prev;
    }
    if (this.m_controllerList === c) {
      this.m_controllerList = c.m_next;
    }
    this.m_controllerCount--;
  };

  b2World.prototype.CreateController = function(controller) {
    if (controller.m_world !== this) {
      throw new Error("Controller can only be a member of one world");
    }
    controller.m_next = this.m_controllerList;
    controller.m_prev = null;
    if (this.m_controllerList) {
      this.m_controllerList.m_prev = controller;
    }
    this.m_controllerList = controller;
    ++this.m_controllerCount;
    controller.m_world = this;
    return controller;
  };

  b2World.prototype.DestroyController = function(controller) {
    controller.Clear();
    if (controller.m_next) {
      controller.m_next.m_prev = controller.m_prev;
    }
    if (controller.m_prev) {
      controller.m_prev.m_next = controller.m_next;
    }
    if (controller === this.m_controllerList) {
      this.m_controllerList = controller.m_next;
    }
    --this.m_controllerCount;
  };

  b2World.prototype.SetWarmStarting = function(flag) {
    b2World.m_warmStarting = flag;
  };

  b2World.prototype.SetContinuousPhysics = function(flag) {
    b2World.m_continuousPhysics = flag;
  };

  b2World.prototype.GetBodyCount = function() {
    return this.m_bodyCount;
  };

  b2World.prototype.GetJointCount = function() {
    return this.m_jointCount;
  };

  b2World.prototype.GetContactCount = function() {
    return this.m_contactCount;
  };

  b2World.prototype.SetGravity = function(gravity) {
    this.m_gravity = gravity;
  };

  b2World.prototype.GetGravity = function() {
    return this.m_gravity;
  };

  b2World.prototype.GetGroundBody = function() {
    return this.m_groundBody;
  };

  b2World.prototype.Step = function(dt, velocityIterations, positionIterations) {
    var step;
    if (dt === void 0) {
      dt = 0;
    }
    if (velocityIterations === void 0) {
      velocityIterations = 0;
    }
    if (positionIterations === void 0) {
      positionIterations = 0;
    }
    if (this.m_flags & b2World.e_newFixture) {
      this.m_contactManager.FindNewContacts();
      this.m_flags &= ~b2World.e_newFixture;
    }
    this.m_flags |= b2World.e_locked;
    step = b2World.s_timestep2;
    step.dt = dt;
    step.velocityIterations = velocityIterations;
    step.positionIterations = positionIterations;
    if (dt > 0.0) {
      step.inv_dt = 1.0 / dt;
    } else {
      step.inv_dt = 0.0;
    }
    step.dtRatio = this.m_inv_dt0 * dt;
    step.warmStarting = b2World.m_warmStarting;
    this.m_contactManager.Collide();
    if (step.dt > 0.0) {
      this.Solve(step);
    }
    if (b2World.m_continuousPhysics && step.dt > 0.0) {
      this.SolveTOI(step);
    }
    if (step.dt > 0.0) {
      this.m_inv_dt0 = step.inv_dt;
    }
    this.m_flags &= ~b2World.e_locked;
  };

  b2World.prototype.ClearForces = function() {
    var body;
    body = this.m_bodyList;
    while (body) {
      body.m_force.SetZero();
      body.m_torque = 0.0;
      body = body.m_next;
    }
  };

  b2World.prototype.DrawDebugData = function() {
    var aabb, b, b1, b2, bp, c, cA, cB, color, contact, f, fixtureA, fixtureB, flags, i, invQ, j, s, vs, x1, x2, xf;
    if (this.m_debugDraw == null) {
      return;
    }
    this.m_debugDraw.m_sprite.graphics.clear();
    flags = this.m_debugDraw.GetFlags();
    i = 0;
    b = void 0;
    f = void 0;
    s = void 0;
    j = void 0;
    bp = void 0;
    invQ = new b2Vec2;
    x1 = new b2Vec2;
    x2 = new b2Vec2;
    xf = void 0;
    b1 = new b2AABB();
    b2 = new b2AABB();
    vs = [new b2Vec2(), new b2Vec2(), new b2Vec2(), new b2Vec2()];
    color = new b2Color(0, 0, 0);
    if (flags & b2DebugDraw.e_shapeBit) {
      b = this.m_bodyList;
      while (b) {
        xf = b.m_xf;
        f = b.GetFixtureList();
        while (f) {
          s = f.GetShape();
          if (b.IsActive() === false) {
            color.Set(0.5, 0.5, 0.3);
            this.DrawShape(s, xf, color);
          } else if (b.GetType() === b2Body_staticBody) {
            color.Set(0.5, 0.9, 0.5);
            this.DrawShape(s, xf, color);
          } else if (b.GetType() === b2Body_kinematicBody) {
            color.Set(0.5, 0.5, 0.9);
            this.DrawShape(s, xf, color);
          } else if (b.IsAwake() === false) {
            color.Set(0.6, 0.6, 0.6);
            this.DrawShape(s, xf, color);
          } else {
            color.Set(0.9, 0.7, 0.7);
            this.DrawShape(s, xf, color);
          }
          f = f.m_next;
        }
        b = b.m_next;
      }
    }
    if (flags & b2DebugDraw.e_jointBit) {
      j = this.m_jointList;
      while (j) {
        this.DrawJoint(j);
        j = j.m_next;
      }
    }
    if (flags & b2DebugDraw.e_controllerBit) {
      c = this.m_controllerList;
      while (c) {
        c.Draw(this.m_debugDraw);
        c = c.m_next;
      }
    }
    if (flags & b2DebugDraw.e_pairBit) {
      color.Set(0.3, 0.9, 0.9);
      contact = this.m_contactManager.m_contactList;
      while (contact) {
        fixtureA = contact.GetFixtureA();
        fixtureB = contact.GetFixtureB();
        cA = fixtureA.GetAABB().GetCenter();
        cB = fixtureB.GetAABB().GetCenter();
        this.m_debugDraw.DrawSegment(cA, cB, color);
        contact = contact.GetNext();
      }
    }
    if (flags & b2DebugDraw.e_aabbBit) {
      bp = this.m_contactManager.m_broadPhase;
      vs = [new b2Vec2(), new b2Vec2(), new b2Vec2(), new b2Vec2()];
      b = this.m_bodyList;
      while (b) {
        if (b.IsActive() === false) {
          continue;
        }
        f = b.GetFixtureList();
        while (f) {
          aabb = bp.GetFatAABB(f.m_proxy);
          vs[0].Set(aabb.lowerBound.x, aabb.lowerBound.y);
          vs[1].Set(aabb.upperBound.x, aabb.lowerBound.y);
          vs[2].Set(aabb.upperBound.x, aabb.upperBound.y);
          vs[3].Set(aabb.lowerBound.x, aabb.upperBound.y);
          this.m_debugDraw.DrawPolygon(vs, 4, color);
          f = f.GetNext();
        }
        b = b.GetNext();
      }
    }
    if (flags & b2DebugDraw.e_centerOfMassBit) {
      b = this.m_bodyList;
      while (b) {
        xf = b2World.s_xf;
        xf.R = b.m_xf.R;
        xf.position = b.GetWorldCenter();
        this.m_debugDraw.DrawTransform(xf);
        b = b.m_next;
      }
    }
  };

  b2World.prototype.QueryAABB = function(callback, aabb) {
    var WorldQueryWrapper, broadPhase, __this;
    WorldQueryWrapper = function(proxy) {
      return callback(broadPhase.GetUserData(proxy));
    };
    __this = this;
    broadPhase = __this.m_contactManager.m_broadPhase;
    broadPhase.Query(WorldQueryWrapper, aabb);
  };

  b2World.prototype.QueryShape = function(callback, shape, transform) {
    var WorldQueryWrapper, aabb, broadPhase, __this;
    WorldQueryWrapper = function(proxy) {
      var fixture;
      fixture = (broadPhase.GetUserData(proxy) instanceof b2Fixture ? broadPhase.GetUserData(proxy) : null);
      if (b2Shape.TestOverlap(shape, transform, fixture.GetShape(), fixture.GetBody().GetTransform())) {
        return callback(fixture);
      }
      return true;
    };
    __this = this;
    if (transform === void 0) {
      transform = null;
    }
    if (transform == null) {
      transform = new b2Transform();
      transform.SetIdentity();
    }
    broadPhase = __this.m_contactManager.m_broadPhase;
    aabb = new b2AABB();
    shape.ComputeAABB(aabb, transform);
    broadPhase.Query(WorldQueryWrapper, aabb);
  };

  b2World.prototype.QueryPoint = function(callback, p) {
    var WorldQueryWrapper, aabb, broadPhase, __this;
    WorldQueryWrapper = function(proxy) {
      var fixture;
      fixture = (broadPhase.GetUserData(proxy) instanceof b2Fixture ? broadPhase.GetUserData(proxy) : null);
      if (fixture.TestPoint(p)) {
        return callback(fixture);
      }
      return true;
    };
    __this = this;
    broadPhase = __this.m_contactManager.m_broadPhase;
    aabb = new b2AABB();
    aabb.lowerBound.Set(p.x - b2Settings.b2_linearSlop, p.y - b2Settings.b2_linearSlop);
    aabb.upperBound.Set(p.x + b2Settings.b2_linearSlop, p.y + b2Settings.b2_linearSlop);
    broadPhase.Query(WorldQueryWrapper, aabb);
  };

  b2World.prototype.RayCast = function(callback, point1, point2) {
    var RayCastWrapper, broadPhase, input, output, __this;
    RayCastWrapper = function(input, proxy) {
      var fixture, fraction, hit, point, userData;
      userData = broadPhase.GetUserData(proxy);
      fixture = (userData instanceof b2Fixture ? userData : null);
      hit = fixture.RayCast(output, input);
      if (hit) {
        fraction = output.fraction;
        point = new b2Vec2((1.0 - fraction) * point1.x + fraction * point2.x, (1.0 - fraction) * point1.y + fraction * point2.y);
        return callback(fixture, point, output.normal, fraction);
      }
      return input.maxFraction;
    };
    __this = this;
    broadPhase = __this.m_contactManager.m_broadPhase;
    output = new b2RayCastOutput;
    input = new b2RayCastInput(point1, point2);
    broadPhase.RayCast(RayCastWrapper, input);
  };

  b2World.prototype.RayCastOne = function(point1, point2) {
    var RayCastOneWrapper, result, __this;
    RayCastOneWrapper = function(fixture, point, normal, fraction) {
      var result;
      if (fraction === void 0) {
        fraction = 0;
      }
      result = fixture;
      return fraction;
    };
    __this = this;
    result = void 0;
    __this.RayCast(RayCastOneWrapper, point1, point2);
    return result;
  };

  b2World.prototype.RayCastAll = function(point1, point2) {
    var RayCastAllWrapper, result, __this;
    RayCastAllWrapper = function(fixture, point, normal, fraction) {
      if (fraction === void 0) {
        fraction = 0;
      }
      result[result.length] = fixture;
      return 1;
    };
    __this = this;
    result = new Array();
    __this.RayCast(RayCastAllWrapper, point1, point2);
    return result;
  };

  b2World.prototype.GetBodyList = function() {
    return this.m_bodyList;
  };

  b2World.prototype.GetJointList = function() {
    return this.m_jointList;
  };

  b2World.prototype.GetContactList = function() {
    return this.m_contactList;
  };

  b2World.prototype.IsLocked = function() {
    return (this.m_flags & b2World.e_locked) > 0;
  };

  b2World.prototype.Solve = function(step) {
    var b, c, ce, controller, i, island, j, jn, other, seed, stack, stackCount, stackSize;
    b = void 0;
    controller = this.m_controllerList;
    while (controller) {
      controller.Step(step);
      controller = controller.m_next;
    }
    island = this.m_island;
    island.Initialize(this.m_bodyCount, this.m_contactCount, this.m_jointCount, null, this.m_contactManager.m_contactListener, this.m_contactSolver);
    b = this.m_bodyList;
    while (b) {
      b.m_flags &= ~b2Body_islandFlag;
      b = b.m_next;
    }
    c = this.m_contactList;
    while (c) {
      c.m_flags &= ~b2Contact_islandFlag;
      c = c.m_next;
    }
    j = this.m_jointList;
    while (j) {
      j.m_islandFlag = false;
      j = j.m_next;
    }
    stackSize = parseInt(this.m_bodyCount);
    stack = this.s_stack;
    seed = this.m_bodyList;
    while (seed) {
      if (seed.m_flags & b2Body_islandFlag) {
        seed = seed.m_next;
        continue;
      }
      if (seed.IsAwake() === false || seed.IsActive() === false) {
        seed = seed.m_next;
        continue;
      }
      if (seed.GetType() === b2Body_staticBody) {
        seed = seed.m_next;
        continue;
      }
      island.Clear();
      stackCount = 0;
      stack[stackCount++] = seed;
      seed.m_flags |= b2Body_islandFlag;
      while (stackCount > 0) {
        b = stack[--stackCount];
        island.AddBody(b);
        if (b.IsAwake() === false) {
          b.SetAwake(true);
        }
        if (b.GetType() === b2Body_staticBody) {
          continue;
        }
        other = void 0;
        ce = b.m_contactList;
        while (ce) {
          if (ce.contact.m_flags & b2Contact_islandFlag) {
            ce = ce.next;
            continue;
          }
          if (ce.contact.IsSensor() === true || ce.contact.IsEnabled() === false || ce.contact.IsTouching() === false) {
            ce = ce.next;
            continue;
          }
          island.AddContact(ce.contact);
          ce.contact.m_flags |= b2Contact_islandFlag;
          other = ce.other;
          if (other.m_flags & b2Body_islandFlag) {
            ce = ce.next;
            continue;
          }
          stack[stackCount++] = other;
          other.m_flags |= b2Body_islandFlag;
          ce = ce.next;
        }
        jn = b.m_jointList;
        while (jn) {
          if (jn.joint.m_islandFlag === true) {
            jn = jn.next;
            continue;
          }
          other = jn.other;
          if (other.IsActive() === false) {
            jn = jn.next;
            continue;
          }
          island.AddJoint(jn.joint);
          jn.joint.m_islandFlag = true;
          if (other.m_flags & b2Body_islandFlag) {
            jn = jn.next;
            continue;
          }
          stack[stackCount++] = other;
          other.m_flags |= b2Body_islandFlag;
          jn = jn.next;
        }
      }
      island.Solve(step, this.m_gravity, this.m_allowSleep);
      i = 0;
      while (i < island.m_bodyCount) {
        b = island.m_bodies[i];
        if (b.GetType() === b2Body_staticBody) {
          b.m_flags &= ~b2Body_islandFlag;
        }
        ++i;
      }
      seed = seed.m_next;
    }
    i = 0;
    while (i < stack.length) {
      if (!stack[i]) {
        break;
      }
      stack[i] = null;
      ++i;
    }
    b = this.m_bodyList;
    while (b) {
      if (b.IsAwake() === false || b.IsActive() === false) {
        b = b.m_next;
        continue;
      }
      if (b.GetType() === b2Body_staticBody) {
        b = b.m_next;
        continue;
      }
      b.SynchronizeFixtures();
      b = b.m_next;
    }
    this.m_contactManager.FindNewContacts();
  };

  b2World.prototype.SolveTOI = function(step) {
    var b, bA, bB, c, cEdge, fA, fB, i, island, j, jEdge, minContact, minTOI, other, queue, queueSize, queueStart, seed, subStep, t0, toi;
    b = void 0;
    fA = void 0;
    fB = void 0;
    bA = void 0;
    bB = void 0;
    cEdge = void 0;
    j = void 0;
    island = this.m_island;
    island.Initialize(this.m_bodyCount, b2Settings.b2_maxTOIContactsPerIsland, b2Settings.b2_maxTOIJointsPerIsland, null, this.m_contactManager.m_contactListener, this.m_contactSolver);
    queue = b2World.s_queue;
    b = this.m_bodyList;
    while (b) {
      b.m_flags &= ~b2Body_islandFlag;
      b.m_sweep.t0 = 0.0;
      b = b.m_next;
    }
    c = void 0;
    c = this.m_contactList;
    while (c) {
      c.m_flags &= ~(b2Contact_toiFlag | b2Contact_islandFlag);
      c = c.m_next;
    }
    j = this.m_jointList;
    while (j) {
      j.m_islandFlag = false;
      j = j.m_next;
    }
    while (true) {
      minContact = null;
      minTOI = 1.0;
      c = this.m_contactList;
      while (c) {
        if (c.IsSensor() === true || c.IsEnabled() === false || c.IsContinuous() === false) {
          continue;
        }
        toi = 1.0;
        if (c.m_flags & b2Contact_toiFlag) {
          toi = c.m_toi;
        } else {
          fA = c.m_fixtureA;
          fB = c.m_fixtureB;
          bA = fA.m_body;
          bB = fB.m_body;
          if ((bA.GetType() !== b2Body.b2_dynamicBody || bA.IsAwake() === false) && (bB.GetType() !== b2Body.b2_dynamicBody || bB.IsAwake() === false)) {
            continue;
          }
          t0 = bA.m_sweep.t0;
          if (bA.m_sweep.t0 < bB.m_sweep.t0) {
            t0 = bB.m_sweep.t0;
            bA.m_sweep.Advance(t0);
          } else if (bB.m_sweep.t0 < bA.m_sweep.t0) {
            t0 = bA.m_sweep.t0;
            bB.m_sweep.Advance(t0);
          }
          toi = c.ComputeTOI(bA.m_sweep, bB.m_sweep);
          b2Settings.b2Assert(0.0 <= toi && toi <= 1.0);
          if (toi > 0.0 && toi < 1.0) {
            toi = (1.0 - toi) * t0 + toi;
            if (toi > 1) {
              toi = 1;
            }
          }
          c.m_toi = toi;
          c.m_flags |= b2Contact_toiFlag;
        }
        if (Number.MIN_VALUE < toi && toi < minTOI) {
          minContact = c;
          minTOI = toi;
        }
        c = c.m_next;
      }
      if ((minContact == null) || 1.0 - 100.0 * Number.MIN_VALUE < minTOI) {
        break;
      }
      fA = minContact.m_fixtureA;
      fB = minContact.m_fixtureB;
      bA = fA.m_body;
      bB = fB.m_body;
      b2World.s_backupA.Set(bA.m_sweep);
      b2World.s_backupB.Set(bB.m_sweep);
      bA.Advance(minTOI);
      bB.Advance(minTOI);
      minContact.Update(this.m_contactManager.m_contactListener);
      minContact.m_flags &= ~b2Contact_toiFlag;
      if (minContact.IsSensor() === true || minContact.IsEnabled() === false) {
        bA.m_sweep.Set(b2World.s_backupA);
        bB.m_sweep.Set(b2World.s_backupB);
        bA.SynchronizeTransform();
        bB.SynchronizeTransform();
        continue;
      }
      if (minContact.IsTouching() === false) {
        continue;
      }
      seed = bA;
      if (seed.GetType() !== b2Body.b2_dynamicBody) {
        seed = bB;
      }
      island.Clear();
      queueStart = 0;
      queueSize = 0;
      queue[queueStart + queueSize++] = seed;
      seed.m_flags |= b2Body_islandFlag;
      while (queueSize > 0) {
        b = queue[queueStart++];
        --queueSize;
        island.AddBody(b);
        if (b.IsAwake() === false) {
          b.SetAwake(true);
        }
        if (b.GetType() !== b2Body.b2_dynamicBody) {
          continue;
        }
        cEdge = b.m_contactList;
        while (cEdge) {
          if (island.m_contactCount === island.m_contactCapacity) {
            break;
          }
          if (cEdge.contact.m_flags & b2Contact_islandFlag) {
            continue;
          }
          if (cEdge.contact.IsSensor() === true || cEdge.contact.IsEnabled() === false || cEdge.contact.IsTouching() === false) {
            continue;
          }
          island.AddContact(cEdge.contact);
          cEdge.contact.m_flags |= b2Contact_islandFlag;
          other = cEdge.other;
          if (other.m_flags & b2Body_islandFlag) {
            continue;
          }
          if (other.GetType() !== b2Body_staticBody) {
            other.Advance(minTOI);
            other.SetAwake(true);
          }
          queue[queueStart + queueSize] = other;
          ++queueSize;
          other.m_flags |= b2Body_islandFlag;
          cEdge = cEdge.next;
        }
        jEdge = b.m_jointList;
        while (jEdge) {
          if (island.m_jointCount === island.m_jointCapacity) {
            continue;
          }
          if (jEdge.joint.m_islandFlag === true) {
            continue;
          }
          other = jEdge.other;
          if (other.IsActive() === false) {
            continue;
          }
          island.AddJoint(jEdge.joint);
          jEdge.joint.m_islandFlag = true;
          if (other.m_flags & b2Body_islandFlag) {
            continue;
          }
          if (other.GetType() !== b2Body_staticBody) {
            other.Advance(minTOI);
            other.SetAwake(true);
          }
          queue[queueStart + queueSize] = other;
          ++queueSize;
          other.m_flags |= b2Body_islandFlag;
          jEdge = jEdge.next;
        }
      }
      subStep = b2World.s_timestep;
      subStep.warmStarting = false;
      subStep.dt = (1.0 - minTOI) * step.dt;
      subStep.inv_dt = 1.0 / subStep.dt;
      subStep.dtRatio = 0.0;
      subStep.velocityIterations = step.velocityIterations;
      subStep.positionIterations = step.positionIterations;
      island.SolveTOI(subStep);
      i = 0;
      i = 0;
      while (i < island.m_bodyCount) {
        b = island.m_bodies[i];
        b.m_flags &= ~b2Body_islandFlag;
        if (b.IsAwake() === false) {
          continue;
        }
        if (b.GetType() !== b2Body.b2_dynamicBody) {
          continue;
        }
        b.SynchronizeFixtures();
        cEdge = b.m_contactList;
        while (cEdge) {
          cEdge.contact.m_flags &= ~b2Contact_toiFlag;
          cEdge = cEdge.next;
        }
        ++i;
      }
      i = 0;
      while (i < island.m_contactCount) {
        c = island.m_contacts[i];
        c.m_flags &= ~(b2Contact_toiFlag | b2Contact_islandFlag);
        ++i;
      }
      i = 0;
      while (i < island.m_jointCount) {
        j = island.m_joints[i];
        j.m_islandFlag = false;
        ++i;
      }
      this.m_contactManager.FindNewContacts();
    }
  };

  b2World.prototype.DrawJoint = function(joint) {
    var b1, b2, color, p1, p2, pulley, s1, s2, x1, x2, xf1, xf2;
    b1 = joint.GetBodyA();
    b2 = joint.GetBodyB();
    xf1 = b1.m_xf;
    xf2 = b2.m_xf;
    x1 = xf1.position;
    x2 = xf2.position;
    p1 = joint.GetAnchorA();
    p2 = joint.GetAnchorB();
    color = b2World.s_jointColor;
    switch (joint.m_type) {
      case b2Joint.e_distanceJoint:
        this.m_debugDraw.DrawSegment(p1, p2, color);
        break;
      case b2Joint.e_pulleyJoint:
        pulley = (joint instanceof b2PulleyJoint ? joint : null);
        s1 = pulley.GetGroundAnchorA();
        s2 = pulley.GetGroundAnchorB();
        this.m_debugDraw.DrawSegment(s1, p1, color);
        this.m_debugDraw.DrawSegment(s2, p2, color);
        this.m_debugDraw.DrawSegment(s1, s2, color);
        break;
      case b2Joint.e_mouseJoint:
        this.m_debugDraw.DrawSegment(p1, p2, color);
        break;
      default:
        if (b1 !== this.m_groundBody) {
          this.m_debugDraw.DrawSegment(x1, p1, color);
        }
        this.m_debugDraw.DrawSegment(p1, p2, color);
        if (b2 !== this.m_groundBody) {
          this.m_debugDraw.DrawSegment(x2, p2, color);
        }
    }
  };

  b2World.prototype.DrawShape = function(shape, xf, color) {
    var axis, center, circle, edge, i, localVertices, poly, radius, vertexCount, vertices;
    switch (shape.m_type) {
      case b2Shape.e_circleShape:
        circle = (shape instanceof b2CircleShape ? shape : null);
        center = b2Math.MulX(xf, circle.m_p);
        radius = circle.m_radius;
        axis = xf.R.col1;
        return this.m_debugDraw.DrawSolidCircle(center, radius, axis, color);
      case b2Shape.e_polygonShape:
        i = 0;
        poly = (shape instanceof b2PolygonShape ? shape : null);
        vertexCount = parseInt(poly.GetVertexCount());
        localVertices = poly.GetVertices();
        vertices = new Array(vertexCount);
        i = 0;
        while (i < vertexCount) {
          vertices[i] = b2Math.MulX(xf, localVertices[i]);
          ++i;
        }
        return this.m_debugDraw.DrawSolidPolygon(vertices, vertexCount, color);
      case b2Shape.e_edgeShape:
        edge = (shape instanceof b2EdgeShape ? shape : null);
        return this.m_debugDraw.DrawSegment(b2Math.MulX(xf, edge.GetVertex1()), b2Math.MulX(xf, edge.GetVertex2()), color);
    }
  };

  return b2World;

})();

//# sourceMappingURL=b2World.js.map

},{"../index":103}],59:[function(require,module,exports){
var Box2D, b2CircleShape, b2Collision, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

b2Collision = Box2D.Collision.b2Collision;

b2CircleShape = Box2D.Collision.Shapes.b2CircleShape;

Box2D.Dynamics.Contacts.b2CircleContact = (function(_super) {
  __extends(b2CircleContact, _super);

  function b2CircleContact() {
    return b2CircleContact.__super__.constructor.apply(this, arguments);
  }

  b2CircleContact.Create = function(allocator) {
    return new b2CircleContact();
  };

  b2CircleContact.Destroy = function(contact, allocator) {};

  b2CircleContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2CircleContact.__super__.Reset.call(this, fixtureA, fixtureB);
  };

  b2CircleContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    b2Collision.CollideCircles(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2CircleShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2CircleShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2CircleContact;

})(b2Contact);

//# sourceMappingURL=b2CircleContact.js.map

},{"../../index":103}],60:[function(require,module,exports){
var Box2D, b2ContactEdge, b2Manifold, b2Settings, b2TOIInput, b2TimeOfImpact;

Box2D = require('../../index');

b2Settings = Box2D.Common.b2Settings;

b2ContactEdge = Box2D.Dynamics.Contacts.b2ContactEdge;

b2Manifold = Box2D.Collision.b2Manifold;

b2TimeOfImpact = Box2D.Collision.b2TimeOfImpact;

b2TOIInput = Box2D.Collision.b2TOIInput;

Box2D.Dynamics.Contacts.b2Contact = (function() {
  b2Contact.e_sensorFlag = 0x0001;

  b2Contact.e_continuousFlag = 0x0002;

  b2Contact.e_islandFlag = 0x0004;

  b2Contact.e_toiFlag = 0x0008;

  b2Contact.e_touchingFlag = 0x0010;

  b2Contact.e_enabledFlag = 0x0020;

  b2Contact.e_filterFlag = 0x0040;

  b2Contact.s_input = new b2TOIInput();

  b2Contact.prototype.m_nodeA = null;

  b2Contact.prototype.m_nodeB = null;

  b2Contact.prototype.m_manifold = null;

  b2Contact.prototype.m_oldManifold = null;

  b2Contact.prototype.m_fixtureA = null;

  b2Contact.prototype.m_fixtureB = null;

  b2Contact.prototype.m_touching = false;

  function b2Contact() {
    this.m_nodeA = new b2ContactEdge();
    this.m_nodeB = new b2ContactEdge();
    this.m_manifold = new b2Manifold();
    this.m_oldManifold = new b2Manifold();
    return;
  }

  b2Contact.prototype.GetManifold = function() {
    return this.m_manifold;
  };

  b2Contact.prototype.GetWorldManifold = function(worldManifold) {
    var bodyA, bodyB, shapeA, shapeB;
    bodyA = this.m_fixtureA.GetBody();
    bodyB = this.m_fixtureB.GetBody();
    shapeA = this.m_fixtureA.GetShape();
    shapeB = this.m_fixtureB.GetShape();
    worldManifold.Initialize(this.m_manifold, bodyA.GetTransform(), shapeA.m_radius, bodyB.GetTransform(), shapeB.m_radius);
  };

  b2Contact.prototype.IsTouching = function() {
    return (this.m_flags & b2Contact.e_touchingFlag) === b2Contact.e_touchingFlag;
  };

  b2Contact.prototype.IsContinuous = function() {
    return (this.m_flags & b2Contact.e_continuousFlag) === b2Contact.e_continuousFlag;
  };

  b2Contact.prototype.SetSensor = function(sensor) {
    if (sensor) {
      this.m_flags |= b2Contact.e_sensorFlag;
    } else {
      this.m_flags &= ~b2Contact.e_sensorFlag;
    }
  };

  b2Contact.prototype.IsSensor = function() {
    return (this.m_flags & b2Contact.e_sensorFlag) === b2Contact.e_sensorFlag;
  };

  b2Contact.prototype.SetEnabled = function(flag) {
    if (flag) {
      this.m_flags |= b2Contact.e_enabledFlag;
    } else {
      this.m_flags &= ~b2Contact.e_enabledFlag;
    }
  };

  b2Contact.prototype.IsEnabled = function() {
    return (this.m_flags & b2Contact.e_enabledFlag) === b2Contact.e_enabledFlag;
  };

  b2Contact.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Contact.prototype.GetFixtureA = function() {
    return this.m_fixtureA;
  };

  b2Contact.prototype.GetFixtureB = function() {
    return this.m_fixtureB;
  };

  b2Contact.prototype.FlagForFiltering = function() {
    this.m_flags |= b2Contact.e_filterFlag;
  };

  b2Contact.prototype.Reset = function(fixtureA, fixtureB) {
    var bodyA, bodyB;
    if (fixtureA === void 0) {
      fixtureA = null;
    }
    if (fixtureB === void 0) {
      fixtureB = null;
    }
    this.m_flags = b2Contact.e_enabledFlag;
    if (!fixtureA || !fixtureB) {
      this.m_fixtureA = null;
      this.m_fixtureB = null;
      return;
    }
    if (fixtureA.IsSensor() || fixtureB.IsSensor()) {
      this.m_flags |= b2Contact.e_sensorFlag;
    }
    bodyA = fixtureA.GetBody();
    bodyB = fixtureB.GetBody();
    if (bodyA.GetType() !== Box2D.Dynamics.b2Body.b2_dynamicBody || bodyA.IsBullet() || bodyB.GetType() !== Box2D.Dynamics.b2Body.b2_dynamicBody || bodyB.IsBullet()) {
      this.m_flags |= b2Contact.e_continuousFlag;
    }
    this.m_fixtureA = fixtureA;
    this.m_fixtureB = fixtureB;
    this.m_manifold.m_pointCount = 0;
    this.m_prev = null;
    this.m_next = null;
    this.m_nodeA.contact = null;
    this.m_nodeA.prev = null;
    this.m_nodeA.next = null;
    this.m_nodeA.other = null;
    this.m_nodeB.contact = null;
    this.m_nodeB.prev = null;
    this.m_nodeB.next = null;
    this.m_nodeB.other = null;
  };

  b2Contact.prototype.Update = function(listener) {
    var aabbOverlap, bodyA, bodyB, i, id2, j, mp1, mp2, shapeA, shapeB, tManifold, touching, wasTouching, xfA, xfB;
    tManifold = this.m_oldManifold;
    this.m_oldManifold = this.m_manifold;
    this.m_manifold = tManifold;
    this.m_flags |= b2Contact.e_enabledFlag;
    touching = false;
    wasTouching = (this.m_flags & b2Contact.e_touchingFlag) === b2Contact.e_touchingFlag;
    bodyA = this.m_fixtureA.m_body;
    bodyB = this.m_fixtureB.m_body;
    aabbOverlap = this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);
    if (this.m_flags & b2Contact.e_sensorFlag) {
      if (aabbOverlap) {
        shapeA = this.m_fixtureA.GetShape();
        shapeB = this.m_fixtureB.GetShape();
        xfA = bodyA.GetTransform();
        xfB = bodyB.GetTransform();
        touching = b2Shape.TestOverlap(shapeA, xfA, shapeB, xfB);
      }
      this.m_manifold.m_pointCount = 0;
    } else {
      if (bodyA.GetType() !== Box2D.Dynamics.b2Body.b2_dynamicBody || bodyA.IsBullet() || bodyB.GetType() !== Box2D.Dynamics.b2Body.b2_dynamicBody || bodyB.IsBullet()) {
        this.m_flags |= b2Contact.e_continuousFlag;
      } else {
        this.m_flags &= ~b2Contact.e_continuousFlag;
      }
      if (aabbOverlap) {
        this.Evaluate();
        touching = this.m_manifold.m_pointCount > 0;
        i = 0;
        while (i < this.m_manifold.m_pointCount) {
          mp2 = this.m_manifold.m_points[i];
          mp2.m_normalImpulse = 0.0;
          mp2.m_tangentImpulse = 0.0;
          id2 = mp2.m_id;
          j = 0;
          while (j < this.m_oldManifold.m_pointCount) {
            mp1 = this.m_oldManifold.m_points[j];
            if (mp1.m_id.key === id2.key) {
              mp2.m_normalImpulse = mp1.m_normalImpulse;
              mp2.m_tangentImpulse = mp1.m_tangentImpulse;
              break;
            }
            ++j;
          }
          ++i;
        }
      } else {
        this.m_manifold.m_pointCount = 0;
      }
      if (touching !== wasTouching) {
        bodyA.SetAwake(true);
        bodyB.SetAwake(true);
      }
    }
    if (touching) {
      this.m_flags |= b2Contact.e_touchingFlag;
    } else {
      this.m_flags &= ~b2Contact.e_touchingFlag;
    }
    if (wasTouching === false && touching === true) {
      listener.BeginContact(this);
    }
    if (wasTouching === true && touching === false) {
      listener.EndContact(this);
    }
    if ((this.m_flags & b2Contact.e_sensorFlag) === 0) {
      listener.PreSolve(this, this.m_oldManifold);
    }
  };

  b2Contact.prototype.Evaluate = function() {};

  b2Contact.prototype.ComputeTOI = function(sweepA, sweepB) {
    b2Contact.s_input.proxyA.Set(this.m_fixtureA.GetShape());
    b2Contact.s_input.proxyB.Set(this.m_fixtureB.GetShape());
    b2Contact.s_input.sweepA = sweepA;
    b2Contact.s_input.sweepB = sweepB;
    b2Contact.s_input.tolerance = b2Settings.b2_linearSlop;
    return b2TimeOfImpact.TimeOfImpact(b2Contact.s_input);
  };

  return b2Contact;

})();

//# sourceMappingURL=b2Contact.js.map

},{"../../index":103}],61:[function(require,module,exports){
var Box2D, b2ContactConstraintPoint, b2Mat22, b2Settings, b2Vec2;

Box2D = require('../../index');

b2Settings = Box2D.Common.b2Settings;

b2ContactConstraintPoint = Box2D.Dynamics.Contacts.b2ContactConstraintPoint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Contacts.b2ContactConstraint = (function() {
  b2ContactConstraint.prototype.localPlaneNormal = null;

  b2ContactConstraint.prototype.localPoint = null;

  b2ContactConstraint.prototype.normal = null;

  b2ContactConstraint.prototype.normalMass = null;

  b2ContactConstraint.prototype.K = null;

  b2ContactConstraint.prototype.points = null;

  function b2ContactConstraint() {
    var i;
    this.localPlaneNormal = new b2Vec2();
    this.localPoint = new b2Vec2();
    this.normal = new b2Vec2();
    this.normalMass = new b2Mat22();
    this.K = new b2Mat22();
    this.points = new Array(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.points[i] = new b2ContactConstraintPoint();
      i++;
    }
    return;
  }

  return b2ContactConstraint;

})();

//# sourceMappingURL=b2ContactConstraint.js.map

},{"../../index":103}],62:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Contacts.b2ContactConstraintPoint = (function() {
  b2ContactConstraintPoint.prototype.localPoint = null;

  b2ContactConstraintPoint.prototype.rA = null;

  b2ContactConstraintPoint.prototype.rB = null;

  function b2ContactConstraintPoint() {
    this.localPoint = new b2Vec2();
    this.rA = new b2Vec2();
    this.rB = new b2Vec2();
    return;
  }

  return b2ContactConstraintPoint;

})();

//# sourceMappingURL=b2ContactConstraintPoint.js.map

},{"../../index":103}],63:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Contacts.b2ContactEdge = (function() {
  function b2ContactEdge() {}

  return b2ContactEdge;

})();

//# sourceMappingURL=b2ContactEdge.js.map

},{"../../index":103}],64:[function(require,module,exports){
var Box2D, b2CircleContact, b2ContactRegister, b2EdgeAndCircleContact, b2PolyAndCircleContact, b2PolyAndEdgeContact, b2PolygonContact, b2Shape;

Box2D = require('../../index');

b2Shape = Box2D.Collision.Shapes.b2Shape;

b2ContactRegister = Box2D.Dynamics.Contacts.b2ContactRegister;

b2CircleContact = Box2D.Dynamics.Contacts.b2CircleContact;

b2PolyAndCircleContact = Box2D.Dynamics.Contacts.b2PolyAndCircleContact;

b2PolygonContact = Box2D.Dynamics.Contacts.b2PolygonContact;

b2EdgeAndCircleContact = Box2D.Dynamics.Contacts.b2EdgeAndCircleContact;

b2PolyAndEdgeContact = Box2D.Dynamics.Contacts.b2PolyAndEdgeContact;

Box2D.Dynamics.Contacts.b2ContactFactory = (function() {
  b2ContactFactory.prototype.m_allocator = null;

  b2ContactFactory.prototype.m_registers = null;

  function b2ContactFactory(allocator) {
    this.m_allocator = allocator;
    this.InitializeRegisters();
    return;
  }

  b2ContactFactory.prototype.AddType = function(createFcn, destroyFcn, type1, type2) {
    if (type1 === void 0) {
      type1 = 0;
    }
    if (type2 === void 0) {
      type2 = 0;
    }
    this.m_registers[type1][type2].createFcn = createFcn;
    this.m_registers[type1][type2].destroyFcn = destroyFcn;
    this.m_registers[type1][type2].primary = true;
    if (type1 !== type2) {
      this.m_registers[type2][type1].createFcn = createFcn;
      this.m_registers[type2][type1].destroyFcn = destroyFcn;
      this.m_registers[type2][type1].primary = false;
    }
  };

  b2ContactFactory.prototype.InitializeRegisters = function() {
    var i, j;
    this.m_registers = new Array(b2Shape.e_shapeTypeCount);
    i = 0;
    while (i < b2Shape.e_shapeTypeCount) {
      this.m_registers[i] = new Array(b2Shape.e_shapeTypeCount);
      j = 0;
      while (j < b2Shape.e_shapeTypeCount) {
        this.m_registers[i][j] = new b2ContactRegister();
        j++;
      }
      i++;
    }
    this.AddType(b2CircleContact.Create, b2CircleContact.Destroy, b2Shape.e_circleShape, b2Shape.e_circleShape);
    this.AddType(b2PolyAndCircleContact.Create, b2PolyAndCircleContact.Destroy, b2Shape.e_polygonShape, b2Shape.e_circleShape);
    this.AddType(b2PolygonContact.Create, b2PolygonContact.Destroy, b2Shape.e_polygonShape, b2Shape.e_polygonShape);
    this.AddType(b2EdgeAndCircleContact.Create, b2EdgeAndCircleContact.Destroy, b2Shape.e_edgeShape, b2Shape.e_circleShape);
    this.AddType(b2PolyAndEdgeContact.Create, b2PolyAndEdgeContact.Destroy, b2Shape.e_polygonShape, b2Shape.e_edgeShape);
  };

  b2ContactFactory.prototype.Create = function(fixtureA, fixtureB) {
    var c, createFcn, reg, type1, type2;
    type1 = parseInt(fixtureA.GetType());
    type2 = parseInt(fixtureB.GetType());
    reg = this.m_registers[type1][type2];
    c = void 0;
    if (reg.pool) {
      c = reg.pool;
      reg.pool = c.m_next;
      reg.poolCount--;
      c.Reset(fixtureA, fixtureB);
      return c;
    }
    createFcn = reg.createFcn;
    if (createFcn != null) {
      if (reg.primary) {
        c = createFcn(this.m_allocator);
        c.Reset(fixtureA, fixtureB);
        return c;
      } else {
        c = createFcn(this.m_allocator);
        c.Reset(fixtureB, fixtureA);
        return c;
      }
    } else {
      return null;
    }
  };

  b2ContactFactory.prototype.Destroy = function(contact) {
    var destroyFcn, reg, type1, type2;
    if (contact.m_manifold.m_pointCount > 0) {
      contact.m_fixtureA.m_body.SetAwake(true);
      contact.m_fixtureB.m_body.SetAwake(true);
    }
    type1 = parseInt(contact.m_fixtureA.GetType());
    type2 = parseInt(contact.m_fixtureB.GetType());
    reg = this.m_registers[type1][type2];
    if (true) {
      reg.poolCount++;
      contact.m_next = reg.pool;
      reg.pool = contact;
    }
    destroyFcn = reg.destroyFcn;
    destroyFcn(contact, this.m_allocator);
  };

  return b2ContactFactory;

})();

//# sourceMappingURL=b2ContactFactory.js.map

},{"../../index":103}],65:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Contacts.b2ContactRegister = (function() {
  function b2ContactRegister() {}

  return b2ContactRegister;

})();

//# sourceMappingURL=b2ContactRegister.js.map

},{"../../index":103}],66:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../../index');

b2ContactID = Box2D.Collision.b2ContactID;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Contacts.b2ContactResult = (function() {
  b2ContactResult.prototype.position = null;

  b2ContactResult.prototype.normal = null;

  b2ContactResult.prototype.id = null;

  function b2ContactResult() {
    this.position = new b2Vec2();
    this.normal = new b2Vec2();
    this.id = new b2ContactID();
    return;
  }

  return b2ContactResult;

})();

//# sourceMappingURL=b2ContactResult.js.map

},{"../../index":103}],67:[function(require,module,exports){
var Box2D, b2ContactConstraint, b2Math, b2PositionSolverManifold, b2Settings, b2TimeStep, b2WorldManifold;

Box2D = require('../../index');

b2Math = Box2D.Common.Math.b2Math;

b2Settings = Box2D.Common.b2Settings;

b2TimeStep = Box2D.Dynamics.b2TimeStep;

b2ContactConstraint = Box2D.Dynamics.Contacts.b2ContactConstraint;

b2WorldManifold = Box2D.Collision.b2WorldManifold;

b2PositionSolverManifold = Box2D.Dynamics.Contacts.b2PositionSolverManifold;

Box2D.Dynamics.Contacts.b2ContactSolver = (function() {
  b2ContactSolver.s_worldManifold = new b2WorldManifold();

  b2ContactSolver.s_psm = new b2PositionSolverManifold();

  b2ContactSolver.prototype.m_step = null;

  b2ContactSolver.prototype.m_constraints = null;

  b2ContactSolver.prototype.m_allocator = null;

  b2ContactSolver.prototype.m_constraintCount = 0;

  function b2ContactSolver() {
    this.m_step = new b2TimeStep();
    this.m_constraints = new Array();
    return;
  }

  b2ContactSolver.prototype.Initialize = function(step, contacts, contactCount, allocator) {
    var bodyA, bodyB, cc, ccp, ccp1, ccp2, contact, cp, fixtureA, fixtureB, friction, i, invIA, invIB, invMassA, invMassB, k, k11, k12, k22, kEqualized, kNormal, kTangent, k_maxConditionNumber, manifold, normalX, normalY, rAX, rAY, rBX, rBY, radiusA, radiusB, restitution, rn1A, rn1B, rn2A, rn2B, rnA, rnB, rtA, rtB, shapeA, shapeB, tMat, tVec, tX, tY, tangentX, tangentY, vAX, vAY, vBX, vBY, vRel, wA, wB;
    if (contactCount === void 0) {
      contactCount = 0;
    }
    contact = void 0;
    this.m_step.Set(step);
    this.m_allocator = allocator;
    i = 0;
    tVec = void 0;
    tMat = void 0;
    this.m_constraintCount = contactCount;
    while (this.m_constraints.length < this.m_constraintCount) {
      this.m_constraints[this.m_constraints.length] = new b2ContactConstraint();
    }
    i = 0;
    while (i < contactCount) {
      contact = contacts[i];
      fixtureA = contact.m_fixtureA;
      fixtureB = contact.m_fixtureB;
      shapeA = fixtureA.m_shape;
      shapeB = fixtureB.m_shape;
      radiusA = shapeA.m_radius;
      radiusB = shapeB.m_radius;
      bodyA = fixtureA.m_body;
      bodyB = fixtureB.m_body;
      manifold = contact.GetManifold();
      friction = b2Settings.b2MixFriction(fixtureA.GetFriction(), fixtureB.GetFriction());
      restitution = b2Settings.b2MixRestitution(fixtureA.GetRestitution(), fixtureB.GetRestitution());
      vAX = bodyA.m_linearVelocity.x;
      vAY = bodyA.m_linearVelocity.y;
      vBX = bodyB.m_linearVelocity.x;
      vBY = bodyB.m_linearVelocity.y;
      wA = bodyA.m_angularVelocity;
      wB = bodyB.m_angularVelocity;
      b2Settings.b2Assert(manifold.m_pointCount > 0);
      b2ContactSolver.s_worldManifold.Initialize(manifold, bodyA.m_xf, radiusA, bodyB.m_xf, radiusB);
      normalX = b2ContactSolver.s_worldManifold.m_normal.x;
      normalY = b2ContactSolver.s_worldManifold.m_normal.y;
      cc = this.m_constraints[i];
      cc.bodyA = bodyA;
      cc.bodyB = bodyB;
      cc.manifold = manifold;
      cc.normal.x = normalX;
      cc.normal.y = normalY;
      cc.pointCount = manifold.m_pointCount;
      cc.friction = friction;
      cc.restitution = restitution;
      cc.localPlaneNormal.x = manifold.m_localPlaneNormal.x;
      cc.localPlaneNormal.y = manifold.m_localPlaneNormal.y;
      cc.localPoint.x = manifold.m_localPoint.x;
      cc.localPoint.y = manifold.m_localPoint.y;
      cc.radius = radiusA + radiusB;
      cc.type = manifold.m_type;
      k = 0;
      while (k < cc.pointCount) {
        cp = manifold.m_points[k];
        ccp = cc.points[k];
        ccp.normalImpulse = cp.m_normalImpulse;
        ccp.tangentImpulse = cp.m_tangentImpulse;
        ccp.localPoint.SetV(cp.m_localPoint);
        rAX = ccp.rA.x = b2ContactSolver.s_worldManifold.m_points[k].x - bodyA.m_sweep.c.x;
        rAY = ccp.rA.y = b2ContactSolver.s_worldManifold.m_points[k].y - bodyA.m_sweep.c.y;
        rBX = ccp.rB.x = b2ContactSolver.s_worldManifold.m_points[k].x - bodyB.m_sweep.c.x;
        rBY = ccp.rB.y = b2ContactSolver.s_worldManifold.m_points[k].y - bodyB.m_sweep.c.y;
        rnA = rAX * normalY - rAY * normalX;
        rnB = rBX * normalY - rBY * normalX;
        rnA *= rnA;
        rnB *= rnB;
        kNormal = bodyA.m_invMass + bodyB.m_invMass + bodyA.m_invI * rnA + bodyB.m_invI * rnB;
        ccp.normalMass = 1.0 / kNormal;
        kEqualized = bodyA.m_mass * bodyA.m_invMass + bodyB.m_mass * bodyB.m_invMass;
        kEqualized += bodyA.m_mass * bodyA.m_invI * rnA + bodyB.m_mass * bodyB.m_invI * rnB;
        ccp.equalizedMass = 1.0 / kEqualized;
        tangentX = normalY;
        tangentY = -normalX;
        rtA = rAX * tangentY - rAY * tangentX;
        rtB = rBX * tangentY - rBY * tangentX;
        rtA *= rtA;
        rtB *= rtB;
        kTangent = bodyA.m_invMass + bodyB.m_invMass + bodyA.m_invI * rtA + bodyB.m_invI * rtB;
        ccp.tangentMass = 1.0 / kTangent;
        ccp.velocityBias = 0.0;
        tX = vBX + (-wB * rBY) - vAX - (-wA * rAY);
        tY = vBY + (wB * rBX) - vAY - (wA * rAX);
        vRel = cc.normal.x * tX + cc.normal.y * tY;
        if (vRel < (-b2Settings.b2_velocityThreshold)) {
          ccp.velocityBias += -cc.restitution * vRel;
        }
        ++k;
      }
      if (cc.pointCount === 2) {
        ccp1 = cc.points[0];
        ccp2 = cc.points[1];
        invMassA = bodyA.m_invMass;
        invIA = bodyA.m_invI;
        invMassB = bodyB.m_invMass;
        invIB = bodyB.m_invI;
        rn1A = ccp1.rA.x * normalY - ccp1.rA.y * normalX;
        rn1B = ccp1.rB.x * normalY - ccp1.rB.y * normalX;
        rn2A = ccp2.rA.x * normalY - ccp2.rA.y * normalX;
        rn2B = ccp2.rB.x * normalY - ccp2.rB.y * normalX;
        k11 = invMassA + invMassB + invIA * rn1A * rn1A + invIB * rn1B * rn1B;
        k22 = invMassA + invMassB + invIA * rn2A * rn2A + invIB * rn2B * rn2B;
        k12 = invMassA + invMassB + invIA * rn1A * rn2A + invIB * rn1B * rn2B;
        k_maxConditionNumber = 100.0;
        if (k11 * k11 < k_maxConditionNumber * (k11 * k22 - k12 * k12)) {
          cc.K.col1.Set(k11, k12);
          cc.K.col2.Set(k12, k22);
          cc.K.GetInverse(cc.normalMass);
        } else {
          cc.pointCount = 1;
        }
      }
      ++i;
    }
  };

  b2ContactSolver.prototype.InitVelocityConstraints = function(step) {
    var PX, PY, bodyA, bodyB, c, ccp, ccp2, i, invIA, invIB, invMassA, invMassB, j, normalX, normalY, tCount, tMat, tVec, tVec2, tX, tangentX, tangentY;
    tVec = void 0;
    tVec2 = void 0;
    tMat = void 0;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      bodyA = c.bodyA;
      bodyB = c.bodyB;
      invMassA = bodyA.m_invMass;
      invIA = bodyA.m_invI;
      invMassB = bodyB.m_invMass;
      invIB = bodyB.m_invI;
      normalX = c.normal.x;
      normalY = c.normal.y;
      tangentX = normalY;
      tangentY = -normalX;
      tX = 0;
      j = 0;
      tCount = 0;
      if (step.warmStarting) {
        tCount = c.pointCount;
        j = 0;
        while (j < tCount) {
          ccp = c.points[j];
          ccp.normalImpulse *= step.dtRatio;
          ccp.tangentImpulse *= step.dtRatio;
          PX = ccp.normalImpulse * normalX + ccp.tangentImpulse * tangentX;
          PY = ccp.normalImpulse * normalY + ccp.tangentImpulse * tangentY;
          bodyA.m_angularVelocity -= invIA * (ccp.rA.x * PY - ccp.rA.y * PX);
          bodyA.m_linearVelocity.x -= invMassA * PX;
          bodyA.m_linearVelocity.y -= invMassA * PY;
          bodyB.m_angularVelocity += invIB * (ccp.rB.x * PY - ccp.rB.y * PX);
          bodyB.m_linearVelocity.x += invMassB * PX;
          bodyB.m_linearVelocity.y += invMassB * PY;
          ++j;
        }
      } else {
        tCount = c.pointCount;
        j = 0;
        while (j < tCount) {
          ccp2 = c.points[j];
          ccp2.normalImpulse = 0.0;
          ccp2.tangentImpulse = 0.0;
          ++j;
        }
      }
      ++i;
    }
  };

  b2ContactSolver.prototype.SolveVelocityConstraints = function() {
    var P1X, P1Y, P2X, P2Y, PX, PY, aX, aY, bX, bY, bodyA, bodyB, c, ccp, cp1, cp2, dX, dY, dv1X, dv1Y, dv2X, dv2Y, dvX, dvY, friction, i, invIA, invIB, invMassA, invMassB, j, k_errorTol, lambda, maxFriction, newImpulse, normalX, normalY, rAX, rAY, rBX, rBY, tCount, tMat, tVec, tX, tangentX, tangentY, vA, vB, vn, vn1, vn2, vt, wA, wB, xX, xY;
    j = 0;
    ccp = void 0;
    rAX = 0;
    rAY = 0;
    rBX = 0;
    rBY = 0;
    dvX = 0;
    dvY = 0;
    vn = 0;
    vt = 0;
    lambda = 0;
    maxFriction = 0;
    newImpulse = 0;
    PX = 0;
    PY = 0;
    dX = 0;
    dY = 0;
    P1X = 0;
    P1Y = 0;
    P2X = 0;
    P2Y = 0;
    tMat = void 0;
    tVec = void 0;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      bodyA = c.bodyA;
      bodyB = c.bodyB;
      wA = bodyA.m_angularVelocity;
      wB = bodyB.m_angularVelocity;
      vA = bodyA.m_linearVelocity;
      vB = bodyB.m_linearVelocity;
      invMassA = bodyA.m_invMass;
      invIA = bodyA.m_invI;
      invMassB = bodyB.m_invMass;
      invIB = bodyB.m_invI;
      normalX = c.normal.x;
      normalY = c.normal.y;
      tangentX = normalY;
      tangentY = -normalX;
      friction = c.friction;
      tX = 0;
      j = 0;
      while (j < c.pointCount) {
        ccp = c.points[j];
        dvX = vB.x - wB * ccp.rB.y - vA.x + wA * ccp.rA.y;
        dvY = vB.y + wB * ccp.rB.x - vA.y - wA * ccp.rA.x;
        vt = dvX * tangentX + dvY * tangentY;
        lambda = ccp.tangentMass * (-vt);
        maxFriction = friction * ccp.normalImpulse;
        newImpulse = b2Math.Clamp(ccp.tangentImpulse + lambda, -maxFriction, maxFriction);
        lambda = newImpulse - ccp.tangentImpulse;
        PX = lambda * tangentX;
        PY = lambda * tangentY;
        vA.x -= invMassA * PX;
        vA.y -= invMassA * PY;
        wA -= invIA * (ccp.rA.x * PY - ccp.rA.y * PX);
        vB.x += invMassB * PX;
        vB.y += invMassB * PY;
        wB += invIB * (ccp.rB.x * PY - ccp.rB.y * PX);
        ccp.tangentImpulse = newImpulse;
        j++;
      }
      tCount = parseInt(c.pointCount);
      if (c.pointCount === 1) {
        ccp = c.points[0];
        dvX = vB.x + (-wB * ccp.rB.y) - vA.x - (-wA * ccp.rA.y);
        dvY = vB.y + (wB * ccp.rB.x) - vA.y - (wA * ccp.rA.x);
        vn = dvX * normalX + dvY * normalY;
        lambda = -ccp.normalMass * (vn - ccp.velocityBias);
        newImpulse = ccp.normalImpulse + lambda;
        newImpulse = (newImpulse > 0 ? newImpulse : 0.0);
        lambda = newImpulse - ccp.normalImpulse;
        PX = lambda * normalX;
        PY = lambda * normalY;
        vA.x -= invMassA * PX;
        vA.y -= invMassA * PY;
        wA -= invIA * (ccp.rA.x * PY - ccp.rA.y * PX);
        vB.x += invMassB * PX;
        vB.y += invMassB * PY;
        wB += invIB * (ccp.rB.x * PY - ccp.rB.y * PX);
        ccp.normalImpulse = newImpulse;
      } else {
        cp1 = c.points[0];
        cp2 = c.points[1];
        aX = cp1.normalImpulse;
        aY = cp2.normalImpulse;
        dv1X = vB.x - wB * cp1.rB.y - vA.x + wA * cp1.rA.y;
        dv1Y = vB.y + wB * cp1.rB.x - vA.y - wA * cp1.rA.x;
        dv2X = vB.x - wB * cp2.rB.y - vA.x + wA * cp2.rA.y;
        dv2Y = vB.y + wB * cp2.rB.x - vA.y - wA * cp2.rA.x;
        vn1 = dv1X * normalX + dv1Y * normalY;
        vn2 = dv2X * normalX + dv2Y * normalY;
        bX = vn1 - cp1.velocityBias;
        bY = vn2 - cp2.velocityBias;
        tMat = c.K;
        bX -= tMat.col1.x * aX + tMat.col2.x * aY;
        bY -= tMat.col1.y * aX + tMat.col2.y * aY;
        k_errorTol = 0.001;
        while (true) {
          tMat = c.normalMass;
          xX = -(tMat.col1.x * bX + tMat.col2.x * bY);
          xY = -(tMat.col1.y * bX + tMat.col2.y * bY);
          if (xX >= 0.0 && xY >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          xX = -cp1.normalMass * bX;
          xY = 0.0;
          vn1 = 0.0;
          vn2 = c.K.col1.y * xX + bY;
          if (xX >= 0.0 && vn2 >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          xX = 0.0;
          xY = -cp2.normalMass * bY;
          vn1 = c.K.col2.x * xY + bX;
          vn2 = 0.0;
          if (xY >= 0.0 && vn1 >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          xX = 0.0;
          xY = 0.0;
          vn1 = bX;
          vn2 = bY;
          if (vn1 >= 0.0 && vn2 >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          break;
        }
      }
      bodyA.m_angularVelocity = wA;
      bodyB.m_angularVelocity = wB;
      ++i;
    }
  };

  b2ContactSolver.prototype.FinalizeVelocityConstraints = function() {
    var c, i, j, m, point1, point2;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      m = c.manifold;
      j = 0;
      while (j < c.pointCount) {
        point1 = m.m_points[j];
        point2 = c.points[j];
        point1.m_normalImpulse = point2.normalImpulse;
        point1.m_tangentImpulse = point2.tangentImpulse;
        ++j;
      }
      ++i;
    }
  };

  b2ContactSolver.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, PX, PY, bodyA, bodyB, c, ccp, i, impulse, invIA, invIB, invMassA, invMassB, j, minSeparation, normal, point, rAX, rAY, rBX, rBY, separation;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    minSeparation = 0.0;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      bodyA = c.bodyA;
      bodyB = c.bodyB;
      invMassA = bodyA.m_mass * bodyA.m_invMass;
      invIA = bodyA.m_mass * bodyA.m_invI;
      invMassB = bodyB.m_mass * bodyB.m_invMass;
      invIB = bodyB.m_mass * bodyB.m_invI;
      b2ContactSolver.s_psm.Initialize(c);
      normal = b2ContactSolver.s_psm.m_normal;
      j = 0;
      while (j < c.pointCount) {
        ccp = c.points[j];
        point = b2ContactSolver.s_psm.m_points[j];
        separation = b2ContactSolver.s_psm.m_separations[j];
        rAX = point.x - bodyA.m_sweep.c.x;
        rAY = point.y - bodyA.m_sweep.c.y;
        rBX = point.x - bodyB.m_sweep.c.x;
        rBY = point.y - bodyB.m_sweep.c.y;
        minSeparation = (minSeparation < separation ? minSeparation : separation);
        C = b2Math.Clamp(baumgarte * (separation + b2Settings.b2_linearSlop), -b2Settings.b2_maxLinearCorrection, 0.0);
        impulse = -ccp.equalizedMass * C;
        PX = impulse * normal.x;
        PY = impulse * normal.y;
        bodyA.m_sweep.c.x -= invMassA * PX;
        bodyA.m_sweep.c.y -= invMassA * PY;
        bodyA.m_sweep.a -= invIA * (rAX * PY - rAY * PX);
        bodyA.SynchronizeTransform();
        bodyB.m_sweep.c.x += invMassB * PX;
        bodyB.m_sweep.c.y += invMassB * PY;
        bodyB.m_sweep.a += invIB * (rBX * PY - rBY * PX);
        bodyB.SynchronizeTransform();
        j++;
      }
      i++;
    }
    return minSeparation > (-1.5 * b2Settings.b2_linearSlop);
  };

  return b2ContactSolver;

})();

//# sourceMappingURL=b2ContactSolver.js.map

},{"../../index":103}],68:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2EdgeAndCircleContact = (function(_super) {
  var b2CollideEdgeAndCircle;

  __extends(b2EdgeAndCircleContact, _super);

  function b2EdgeAndCircleContact() {
    return b2EdgeAndCircleContact.__super__.constructor.apply(this, arguments);
  }

  b2EdgeAndCircleContact.prototype.m_fixtureA = null;

  b2EdgeAndCircleContact.prototype.m_fixtureB = null;

  b2EdgeAndCircleContact.prototype.m_manifold = null;

  b2EdgeAndCircleContact.Create = function(allocator) {
    return new b2EdgeAndCircleContact();
  };

  b2EdgeAndCircleContact.Destroy = function(contact, allocator) {};

  b2EdgeAndCircleContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2EdgeAndCircleContact.__super__.Reset.call(this, fixtureA, fixtureB);
  };

  b2EdgeAndCircleContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    this.b2CollideEdgeAndCircle(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2EdgeShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2CircleShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  b2CollideEdgeAndCircle = function(manifold, edge, xf1, circle, xf2) {};

  return b2EdgeAndCircleContact;

})(b2Contact);

//# sourceMappingURL=b2EdgeAndCircleContact.js.map

},{"../../index":103}],69:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2NullContact = (function(_super) {
  __extends(b2NullContact, _super);

  function b2NullContact() {
    return b2NullContact.__super__.constructor.apply(this, arguments);
  }

  b2NullContact.prototype.Evaluate = function() {};

  return b2NullContact;

})(b2Contact);

//# sourceMappingURL=b2NullContact.js.map

},{"../../index":103}],70:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2PolyAndCircleContact = (function(_super) {
  var Evaluate;

  __extends(b2PolyAndCircleContact, _super);

  function b2PolyAndCircleContact() {
    return b2PolyAndCircleContact.__super__.constructor.apply(this, arguments);
  }

  b2PolyAndCircleContact.Create = function(allocator) {
    return new b2PolyAndCircleContact();
  };

  b2PolyAndCircleContact.Destroy = function(contact, allocator) {};

  b2PolyAndCircleContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2PolyAndCircleContact.__super__.Reset.call(this, fixtureA, fixtureB);
    b2Settings.b2Assert(fixtureA.GetType() === b2Shape.e_polygonShape);
    b2Settings.b2Assert(fixtureB.GetType() === b2Shape.e_circleShape);
  };

  Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.m_body;
    bB = this.m_fixtureB.m_body;
    b2Collision.CollidePolygonAndCircle(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2PolygonShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2CircleShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2PolyAndCircleContact;

})(b2Contact);

//# sourceMappingURL=b2PolyAndCircleContact.js.map

},{"../../index":103}],71:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2PolyAndEdgeContact = (function(_super) {
  __extends(b2PolyAndEdgeContact, _super);

  function b2PolyAndEdgeContact() {
    return b2PolyAndEdgeContact.__super__.constructor.apply(this, arguments);
  }

  b2PolyAndEdgeContact.Create = function(allocator) {
    return new b2PolyAndEdgeContact();
  };

  b2PolyAndEdgeContact.Destroy = function(contact, allocator) {};

  b2PolyAndEdgeContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2PolyAndEdgeContact.__super__.Reset.call(this, fixtureA, fixtureB);
    b2Settings.b2Assert(fixtureA.GetType() === b2Shape.e_polygonShape);
    b2Settings.b2Assert(fixtureB.GetType() === b2Shape.e_edgeShape);
  };

  b2PolyAndEdgeContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    this.b2CollidePolyAndEdge(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2PolygonShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2EdgeShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2PolyAndEdgeContact;

})(b2Contact);

//# sourceMappingURL=b2PolyAndEdgeContact.js.map

},{"../../index":103}],72:[function(require,module,exports){
var Box2D, b2Collision, b2Contact, b2PolygonShape,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

b2Collision = Box2D.Collision.b2Collision;

b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape;

Box2D.Dynamics.Contacts.b2PolygonContact = (function(_super) {
  __extends(b2PolygonContact, _super);

  function b2PolygonContact() {
    return b2PolygonContact.__super__.constructor.apply(this, arguments);
  }

  b2PolygonContact.Create = function(allocator) {
    return new b2PolygonContact();
  };

  b2PolygonContact.Destroy = function(contact, allocator) {};

  b2PolygonContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2PolygonContact.__super__.Reset.call(this, fixtureA, fixtureB);
  };

  b2PolygonContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    b2Collision.CollidePolygons(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2PolygonShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2PolygonShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2PolygonContact;

})(b2Contact);

//# sourceMappingURL=b2PolygonContact.js.map

},{"../../index":103}],73:[function(require,module,exports){
var Box2D, Vector, b2Settings, b2Vec2;

Box2D = require('../../index');

Vector = Box2D.Vector;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Settings = Box2D.Common.b2Settings;

Box2D.Dynamics.Contacts.b2PositionSolverManifold = (function() {
  b2PositionSolverManifold.prototype.m_normal = null;

  b2PositionSolverManifold.prototype.m_separations = null;

  b2PositionSolverManifold.prototype.m_points = null;

  function b2PositionSolverManifold() {
    var i;
    this.m_normal = new b2Vec2();
    this.m_separations = new Vector(b2Settings.b2_maxManifoldPoints);
    this.m_points = new Array(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.m_points[i] = new b2Vec2();
      i++;
    }
    return;
  }

  b2PositionSolverManifold.prototype.Initialize = function(cc) {
    var clipPointX, clipPointY, d, d2, dX, dY, i, planePointX, planePointY, pointAX, pointAY, pointBX, pointBY, tMat, tVec, _results;
    b2Settings.b2Assert(cc.pointCount > 0);
    i = 0;
    clipPointX = 0;
    clipPointY = 0;
    tMat = void 0;
    tVec = void 0;
    planePointX = 0;
    planePointY = 0;
    switch (cc.type) {
      case b2Manifold.e_circles:
        tMat = cc.bodyA.m_xf.R;
        tVec = cc.localPoint;
        pointAX = cc.bodyA.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointAY = cc.bodyA.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tMat = cc.bodyB.m_xf.R;
        tVec = cc.points[0].localPoint;
        pointBX = cc.bodyB.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointBY = cc.bodyB.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        dX = pointBX - pointAX;
        dY = pointBY - pointAY;
        d2 = dX * dX + dY * dY;
        if (d2 > Number.MIN_VALUE * Number.MIN_VALUE) {
          d = Math.sqrt(d2);
          this.m_normal.x = dX / d;
          this.m_normal.y = dY / d;
        } else {
          this.m_normal.x = 1.0;
          this.m_normal.y = 0.0;
        }
        this.m_points[0].x = 0.5 * (pointAX + pointBX);
        this.m_points[0].y = 0.5 * (pointAY + pointBY);
        return this.m_separations[0] = dX * this.m_normal.x + dY * this.m_normal.y - cc.radius;
      case b2Manifold.e_faceA:
        tMat = cc.bodyA.m_xf.R;
        tVec = cc.localPlaneNormal;
        this.m_normal.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        this.m_normal.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = cc.bodyA.m_xf.R;
        tVec = cc.localPoint;
        planePointX = cc.bodyA.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        planePointY = cc.bodyA.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tMat = cc.bodyB.m_xf.R;
        i = 0;
        _results = [];
        while (i < cc.pointCount) {
          tVec = cc.points[i].localPoint;
          clipPointX = cc.bodyB.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
          clipPointY = cc.bodyB.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
          this.m_separations[i] = (clipPointX - planePointX) * this.m_normal.x + (clipPointY - planePointY) * this.m_normal.y - cc.radius;
          this.m_points[i].x = clipPointX;
          this.m_points[i].y = clipPointY;
          _results.push(++i);
        }
        return _results;
        break;
      case b2Manifold.e_faceB:
        tMat = cc.bodyB.m_xf.R;
        tVec = cc.localPlaneNormal;
        this.m_normal.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        this.m_normal.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = cc.bodyB.m_xf.R;
        tVec = cc.localPoint;
        planePointX = cc.bodyB.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        planePointY = cc.bodyB.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tMat = cc.bodyA.m_xf.R;
        i = 0;
        while (i < cc.pointCount) {
          tVec = cc.points[i].localPoint;
          clipPointX = cc.bodyA.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
          clipPointY = cc.bodyA.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
          this.m_separations[i] = (clipPointX - planePointX) * this.m_normal.x + (clipPointY - planePointY) * this.m_normal.y - cc.radius;
          this.m_points[i].Set(clipPointX, clipPointY);
          ++i;
        }
        this.m_normal.x *= -1.;
        return this.m_normal.y *= -1.;
    }
  };

  b2PositionSolverManifold.circlePointA = new b2Vec2();

  b2PositionSolverManifold.circlePointB = new b2Vec2();

  return b2PositionSolverManifold;

})();

//# sourceMappingURL=b2PositionSolverManifold.js.map

},{"../../index":103}],74:[function(require,module,exports){
var Box2D, b2Color, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Color = Box2D.Common.b2Color;

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2BuoyancyController = (function(_super) {
  __extends(b2BuoyancyController, _super);

  b2BuoyancyController.prototype.normal = null;

  b2BuoyancyController.prototype.offset = 0;

  b2BuoyancyController.prototype.density = 0;

  b2BuoyancyController.prototype.velocity = null;

  b2BuoyancyController.prototype.linearDrag = 2;

  b2BuoyancyController.prototype.angularDrag = 1;

  b2BuoyancyController.prototype.useDensity = false;

  b2BuoyancyController.prototype.useWorldGravity = true;

  b2BuoyancyController.prototype.gravity = null;

  function b2BuoyancyController() {
    b2BuoyancyController.__super__.constructor.apply(this, arguments);
    this.normal = new b2Vec2(0, -1.);
    this.velocity = new b2Vec2(0, 0);
    return;
  }

  b2BuoyancyController.prototype.Step = function(step) {
    var area, areac, body, buoyancyForce, dragForce, fixture, i, mass, massc, sarea, sc, shapeDensity;
    if (!this.m_bodyList) {
      return;
    }
    if (this.useWorldGravity) {
      this.gravity = this.GetWorld().GetGravity().Copy();
    }
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (body.IsAwake() === false) {
        continue;
      }
      areac = new b2Vec2();
      massc = new b2Vec2();
      area = 0.0;
      mass = 0.0;
      fixture = body.GetFixtureList();
      while (fixture) {
        sc = new b2Vec2();
        sarea = fixture.GetShape().ComputeSubmergedArea(this.normal, this.offset, body.GetTransform(), sc);
        area += sarea;
        areac.x += sarea * sc.x;
        areac.y += sarea * sc.y;
        shapeDensity = 0;
        if (this.useDensity) {
          shapeDensity = 1;
        } else {
          shapeDensity = 1;
        }
        mass += sarea * shapeDensity;
        massc.x += sarea * sc.x * shapeDensity;
        massc.y += sarea * sc.y * shapeDensity;
        fixture = fixture.GetNext();
      }
      areac.x /= area;
      areac.y /= area;
      massc.x /= mass;
      massc.y /= mass;
      if (area < Number.MIN_VALUE) {
        continue;
      }
      buoyancyForce = this.gravity.GetNegative();
      buoyancyForce.Multiply(this.density * area);
      body.ApplyForce(buoyancyForce, massc);
      dragForce = body.GetLinearVelocityFromWorldPoint(areac);
      dragForce.Subtract(this.velocity);
      dragForce.Multiply(-this.linearDrag * area);
      body.ApplyForce(dragForce, areac);
      body.ApplyTorque(-body.GetInertia() / body.GetMass() * area * body.GetAngularVelocity() * this.angularDrag);
      i = i.nextBody;
    }
  };

  b2BuoyancyController.prototype.Draw = function(debugDraw) {
    var color, p1, p2, r;
    r = 1000;
    p1 = new b2Vec2();
    p2 = new b2Vec2();
    p1.x = this.normal.x * this.offset + this.normal.y * r;
    p1.y = this.normal.y * this.offset - this.normal.x * r;
    p2.x = this.normal.x * this.offset - this.normal.y * r;
    p2.y = this.normal.y * this.offset + this.normal.x * r;
    color = new b2Color(0, 0, 1);
    debugDraw.DrawSegment(p1, p2, color);
  };

  return b2BuoyancyController;

})(b2Controller);

//# sourceMappingURL=b2BuoyancyController.js.map

},{"../../index":103}],75:[function(require,module,exports){
var Box2D, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2ConstantAccelController = (function(_super) {
  __extends(b2ConstantAccelController, _super);

  b2ConstantAccelController.prototype.A = null;

  function b2ConstantAccelController() {
    b2ConstantAccelController.__super__.constructor.apply(this, arguments);
    this.A = new b2Vec2(0, 0);
    return;
  }

  b2ConstantAccelController.prototype.Step = function(step) {
    var body, i, smallA;
    smallA = new b2Vec2(this.A.x * step.dt, this.A.y * step.dt);
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (!body.IsAwake()) {
        continue;
      }
      body.SetLinearVelocity(new b2Vec2(body.GetLinearVelocity().x + smallA.x, body.GetLinearVelocity().y + smallA.y));
      i = i.nextBody;
    }
  };

  return b2ConstantAccelController;

})(b2Controller);

//# sourceMappingURL=b2ConstantAccelController.js.map

},{"../../index":103}],76:[function(require,module,exports){
var Box2D, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2ConstantForceController = (function(_super) {
  __extends(b2ConstantForceController, _super);

  b2ConstantForceController.prototype.F = null;

  function b2ConstantForceController() {
    b2ConstantForceController.__super__.constructor.apply(this, arguments);
    this.F = new b2Vec2(0, 0);
    return;
  }

  b2ConstantForceController.prototype.Step = function(step) {
    var body, i;
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (!body.IsAwake()) {
        continue;
      }
      body.ApplyForce(this.F, body.GetWorldCenter());
      i = i.nextBody;
    }
  };

  return b2ConstantForceController;

})(b2Controller);

//# sourceMappingURL=b2ConstantForceController.js.map

},{"../../index":103}],77:[function(require,module,exports){
var Box2D, b2ControllerEdge;

Box2D = require('../../index');

b2ControllerEdge = Box2D.Dynamics.Controllers.b2ControllerEdge;

Box2D.Dynamics.Controllers.b2Controller = (function() {
  function b2Controller() {}

  b2Controller.prototype.m_bodyList = null;

  b2Controller.prototype.m_bodyCount = 0;

  b2Controller.prototype.m_next = null;

  b2Controller.prototype.m_world = null;

  b2Controller.prototype.Step = function(step) {};

  b2Controller.prototype.Draw = function(debugDraw) {};

  b2Controller.prototype.AddBody = function(body) {
    var edge;
    edge = new b2ControllerEdge();
    edge.controller = this;
    edge.body = body;
    edge.nextBody = this.m_bodyList;
    edge.prevBody = null;
    this.m_bodyList = edge;
    if (edge.nextBody) {
      edge.nextBody.prevBody = edge;
    }
    this.m_bodyCount++;
    edge.nextController = body.m_controllerList;
    edge.prevController = null;
    body.m_controllerList = edge;
    if (edge.nextController) {
      edge.nextController.prevController = edge;
    }
    body.m_controllerCount++;
  };

  b2Controller.prototype.RemoveBody = function(body) {
    var edge;
    edge = body.m_controllerList;
    while (edge && edge.controller !== this) {
      edge = edge.nextController;
    }
    if (edge.prevBody) {
      edge.prevBody.nextBody = edge.nextBody;
    }
    if (edge.nextBody) {
      edge.nextBody.prevBody = edge.prevBody;
    }
    if (edge.nextController) {
      edge.nextController.prevController = edge.prevController;
    }
    if (edge.prevController) {
      edge.prevController.nextController = edge.nextController;
    }
    if (this.m_bodyList === edge) {
      this.m_bodyList = edge.nextBody;
    }
    if (body.m_controllerList === edge) {
      body.m_controllerList = edge.nextController;
    }
    body.m_controllerCount--;
    this.m_bodyCount--;
  };

  b2Controller.prototype.Clear = function() {
    while (this.m_bodyList) {
      this.RemoveBody(this.m_bodyList.body);
    }
  };

  b2Controller.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Controller.prototype.GetWorld = function() {
    return this.m_world;
  };

  b2Controller.prototype.GetBodyList = function() {
    return this.m_bodyList;
  };

  return b2Controller;

})();

//# sourceMappingURL=b2Controller.js.map

},{"../../index":103}],78:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Controllers.b2ControllerEdge = (function() {
  function b2ControllerEdge() {}

  return b2ControllerEdge;

})();

//# sourceMappingURL=b2ControllerEdge.js.map

},{"../../index":103}],79:[function(require,module,exports){
var Box2D, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2GravityController = (function(_super) {
  __extends(b2GravityController, _super);

  b2GravityController.prototype.G = 1;

  b2GravityController.prototype.invSqr = true;

  function b2GravityController() {
    b2GravityController.__super__.constructor.apply(this, arguments);
    this.G = 1;
    this.invSqr = true;
    return;
  }

  b2GravityController.prototype.Step = function(step) {
    var body1, body2, dx, dy, f, i, j, mass1, p1, p2, r2;
    i = null;
    body1 = null;
    p1 = null;
    mass1 = 0;
    j = null;
    body2 = null;
    p2 = null;
    dx = 0;
    dy = 0;
    r2 = 0;
    f = null;
    if (this.invSqr) {
      i = this.m_bodyList;
      while (i) {
        body1 = i.body;
        p1 = body1.GetWorldCenter();
        mass1 = body1.GetMass();
        j = this.m_bodyList;
        while (j !== i) {
          body2 = j.body;
          p2 = body2.GetWorldCenter();
          dx = p2.x - p1.x;
          dy = p2.y - p1.y;
          r2 = dx * dx + dy * dy;
          if (r2 < Number.MIN_VALUE) {
            continue;
          }
          f = new b2Vec2(dx, dy);
          f.Multiply(this.G / r2 / Math.sqrt(r2) * mass1 * body2.GetMass());
          if (body1.IsAwake()) {
            body1.ApplyForce(f, p1);
          }
          f.Multiply(-1.);
          if (body2.IsAwake()) {
            body2.ApplyForce(f, p2);
          }
          j = j.nextBody;
        }
        i = i.nextBody;
      }
    } else {
      i = this.m_bodyList;
      while (i) {
        body1 = i.body;
        p1 = body1.GetWorldCenter();
        mass1 = body1.GetMass();
        j = this.m_bodyList;
        while (j !== i) {
          body2 = j.body;
          p2 = body2.GetWorldCenter();
          dx = p2.x - p1.x;
          dy = p2.y - p1.y;
          r2 = dx * dx + dy * dy;
          if (r2 < Number.MIN_VALUE) {
            continue;
          }
          f = new b2Vec2(dx, dy);
          f.Multiply(this.G / r2 * mass1 * body2.GetMass());
          if (body1.IsAwake()) {
            body1.ApplyForce(f, p1);
          }
          f.Multiply(-1.);
          if (body2.IsAwake()) {
            body2.ApplyForce(f, p2);
          }
          j = j.nextBody;
        }
        i = i.nextBody;
      }
    }
  };

  return b2GravityController;

})(b2Controller);

//# sourceMappingURL=b2GravityController.js.map

},{"../../index":103}],80:[function(require,module,exports){
var Box2D, b2Controller, b2Mat22, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Controllers.b2TensorDampingController = (function(_super) {
  __extends(b2TensorDampingController, _super);

  b2TensorDampingController.prototype.T = null;

  b2TensorDampingController.prototype.maxTimestep = 0;

  function b2TensorDampingController() {
    b2TensorDampingController.__super__.constructor.apply(this, arguments);
    this.T = new b2Mat22();
    this.maxTimestep = 0;
    return;
  }

  b2TensorDampingController.prototype.SetAxisAligned = function(xDamping, yDamping) {
    if (xDamping === void 0) {
      xDamping = 0;
    }
    if (yDamping === void 0) {
      yDamping = 0;
    }
    this.T.col1.x = -xDamping;
    this.T.col1.y = 0;
    this.T.col2.x = 0;
    this.T.col2.y = -yDamping;
    if (xDamping > 0 || yDamping > 0) {
      this.maxTimestep = 1 / Math.max(xDamping, yDamping);
    } else {
      this.maxTimestep = 0;
    }
  };

  b2TensorDampingController.prototype.Step = function(step) {
    var body, damping, i, timestep;
    timestep = step.dt;
    if (timestep <= Number.MIN_VALUE) {
      return;
    }
    if (timestep > this.maxTimestep && this.maxTimestep > 0) {
      timestep = this.maxTimestep;
    }
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (!body.IsAwake()) {
        continue;
      }
      damping = body.GetWorldVector(b2Math.MulMV(this.T, body.GetLocalVector(body.GetLinearVelocity())));
      body.SetLinearVelocity(new b2Vec2(body.GetLinearVelocity().x + damping.x * timestep, body.GetLinearVelocity().y + damping.y * timestep));
      i = i.nextBody;
    }
  };

  return b2TensorDampingController;

})(b2Controller);

//# sourceMappingURL=b2TensorDampingController.js.map

},{"../../index":103}],81:[function(require,module,exports){
var Box2D, b2Joint, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Joints.b2DistanceJoint = (function(_super) {
  __extends(b2DistanceJoint, _super);

  b2DistanceJoint.prototype.m_u = null;

  b2DistanceJoint.prototype.m_length = 0;

  b2DistanceJoint.prototype.m_frequencyHz = 0;

  b2DistanceJoint.prototype.m_dampingRatio = 0;

  b2DistanceJoint.prototype.m_impulse = 0.0;

  b2DistanceJoint.prototype.m_gamma = 0.0;

  b2DistanceJoint.prototype.m_bias = 0.0;

  function b2DistanceJoint(def) {
    b2DistanceJoint.__super__.constructor.call(this, def);
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_u = new b2Vec2();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_length = def.length;
    this.m_frequencyHz = def.frequencyHz;
    this.m_dampingRatio = def.dampingRatio;
    return;
  }

  b2DistanceJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2DistanceJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2DistanceJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse * this.m_u.x, inv_dt * this.m_impulse * this.m_u.y);
  };

  b2DistanceJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2DistanceJoint.prototype.GetLength = function() {
    return this.m_length;
  };

  b2DistanceJoint.prototype.SetLength = function(length) {
    if (length === void 0) {
      length = 0;
    }
    this.m_length = length;
  };

  b2DistanceJoint.prototype.GetFrequency = function() {
    return this.m_frequencyHz;
  };

  b2DistanceJoint.prototype.SetFrequency = function(hz) {
    if (hz === void 0) {
      hz = 0;
    }
    this.m_frequencyHz = hz;
  };

  b2DistanceJoint.prototype.GetDampingRatio = function() {
    return this.m_dampingRatio;
  };

  b2DistanceJoint.prototype.SetDampingRatio = function(ratio) {
    if (ratio === void 0) {
      ratio = 0;
    }
    this.m_dampingRatio = ratio;
  };

  b2DistanceJoint.prototype.InitVelocityConstraints = function(step) {
    var C, PX, PY, bA, bB, cr1u, cr2u, d, invMass, k, length, omega, r1X, r1Y, r2X, r2Y, tMat, tX;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    this.m_u.x = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    this.m_u.y = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    length = Math.sqrt(this.m_u.x * this.m_u.x + this.m_u.y * this.m_u.y);
    if (length > b2Settings.b2_linearSlop) {
      this.m_u.Multiply(1.0 / length);
    } else {
      this.m_u.SetZero();
    }
    cr1u = r1X * this.m_u.y - r1Y * this.m_u.x;
    cr2u = r2X * this.m_u.y - r2Y * this.m_u.x;
    invMass = bA.m_invMass + bA.m_invI * cr1u * cr1u + bB.m_invMass + bB.m_invI * cr2u * cr2u;
    this.m_mass = (invMass !== 0.0 ? 1.0 / invMass : 0.0);
    if (this.m_frequencyHz > 0.0) {
      C = length - this.m_length;
      omega = 2.0 * Math.PI * this.m_frequencyHz;
      d = 2.0 * this.m_mass * this.m_dampingRatio * omega;
      k = this.m_mass * omega * omega;
      this.m_gamma = step.dt * (d + step.dt * k);
      this.m_gamma = (this.m_gamma !== 0.0 ? 1 / this.m_gamma : 0.0);
      this.m_bias = C * step.dt * k * this.m_gamma;
      this.m_mass = invMass + this.m_gamma;
      this.m_mass = (this.m_mass !== 0.0 ? 1.0 / this.m_mass : 0.0);
    }
    if (step.warmStarting) {
      this.m_impulse *= step.dtRatio;
      PX = this.m_impulse * this.m_u.x;
      PY = this.m_impulse * this.m_u.y;
      bA.m_linearVelocity.x -= bA.m_invMass * PX;
      bA.m_linearVelocity.y -= bA.m_invMass * PY;
      bA.m_angularVelocity -= bA.m_invI * (r1X * PY - r1Y * PX);
      bB.m_linearVelocity.x += bB.m_invMass * PX;
      bB.m_linearVelocity.y += bB.m_invMass * PY;
      bB.m_angularVelocity += bB.m_invI * (r2X * PY - r2Y * PX);
    } else {
      this.m_impulse = 0.0;
    }
  };

  b2DistanceJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, PX, PY, bA, bB, impulse, r1X, r1Y, r2X, r2Y, tMat, tX, v1X, v1Y, v2X, v2Y;
    tMat = void 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    v1X = bA.m_linearVelocity.x + (-bA.m_angularVelocity * r1Y);
    v1Y = bA.m_linearVelocity.y + (bA.m_angularVelocity * r1X);
    v2X = bB.m_linearVelocity.x + (-bB.m_angularVelocity * r2Y);
    v2Y = bB.m_linearVelocity.y + (bB.m_angularVelocity * r2X);
    Cdot = this.m_u.x * (v2X - v1X) + this.m_u.y * (v2Y - v1Y);
    impulse = -this.m_mass * (Cdot + this.m_bias + this.m_gamma * this.m_impulse);
    this.m_impulse += impulse;
    PX = impulse * this.m_u.x;
    PY = impulse * this.m_u.y;
    bA.m_linearVelocity.x -= bA.m_invMass * PX;
    bA.m_linearVelocity.y -= bA.m_invMass * PY;
    bA.m_angularVelocity -= bA.m_invI * (r1X * PY - r1Y * PX);
    bB.m_linearVelocity.x += bB.m_invMass * PX;
    bB.m_linearVelocity.y += bB.m_invMass * PY;
    bB.m_angularVelocity += bB.m_invI * (r2X * PY - r2Y * PX);
  };

  b2DistanceJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, PX, PY, bA, bB, dX, dY, impulse, length, r1X, r1Y, r2X, r2Y, tMat, tX;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    tMat = void 0;
    if (this.m_frequencyHz > 0.0) {
      return true;
    }
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    dY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    length = Math.sqrt(dX * dX + dY * dY);
    dX /= length;
    dY /= length;
    C = length - this.m_length;
    C = b2Math.Clamp(C, -b2Settings.b2_maxLinearCorrection, b2Settings.b2_maxLinearCorrection);
    impulse = -this.m_mass * C;
    this.m_u.Set(dX, dY);
    PX = impulse * this.m_u.x;
    PY = impulse * this.m_u.y;
    bA.m_sweep.c.x -= bA.m_invMass * PX;
    bA.m_sweep.c.y -= bA.m_invMass * PY;
    bA.m_sweep.a -= bA.m_invI * (r1X * PY - r1Y * PX);
    bB.m_sweep.c.x += bB.m_invMass * PX;
    bB.m_sweep.c.y += bB.m_invMass * PY;
    bB.m_sweep.a += bB.m_invI * (r2X * PY - r2Y * PX);
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return b2Math.Abs(C) < b2Settings.b2_linearSlop;
  };

  return b2DistanceJoint;

})(b2Joint);

//# sourceMappingURL=b2DistanceJoint.js.map

},{"../../index":103}],82:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2DistanceJointDef = (function(_super) {
  __extends(b2DistanceJointDef, _super);

  b2DistanceJointDef.prototype.type = 0;

  b2DistanceJointDef.prototype.localAnchorA = null;

  b2DistanceJointDef.prototype.localAnchorB = null;

  b2DistanceJointDef.prototype.userData = null;

  b2DistanceJointDef.prototype.bodyA = null;

  b2DistanceJointDef.prototype.bodyB = null;

  b2DistanceJointDef.prototype.length = 1.0;

  b2DistanceJointDef.prototype.frequencyHz = 0.0;

  b2DistanceJointDef.prototype.dampingRatio = 0.0;

  function b2DistanceJointDef() {
    this.localAnchorA = new b2Vec2();
    this.type = b2Joint.e_distanceJoint;
    return;
  }

  b2DistanceJointDef.prototype.Initialize = function(bA, bB, anchorA, anchorB) {
    var dX, dY;
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchorA));
    this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchorB));
    dX = anchorB.x - anchorA.x;
    dY = anchorB.y - anchorA.y;
    this.length = Math.sqrt(dX * dX + dY * dY);
    this.frequencyHz = 0.0;
    this.dampingRatio = 0.0;
  };

  return b2DistanceJointDef;

})(b2JointDef);

//# sourceMappingURL=b2DistanceJointDef.js.map

},{"../../index":103}],83:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Joints.b2FrictionJoint = (function(_super) {
  __extends(b2FrictionJoint, _super);

  b2FrictionJoint.prototype.m_linearMass = null;

  b2FrictionJoint.prototype.m_linearImpulse = null;

  b2FrictionJoint.prototype.m_angularMass = 0.0;

  b2FrictionJoint.prototype.m_angularImpulse = 0.0;

  b2FrictionJoint.prototype.m_maxForce = 0;

  b2FrictionJoint.prototype.m_maxTorque = 0;

  function b2FrictionJoint(def) {
    b2FrictionJoint.__super__.constructor.call(this, def);
    this.m_localAnchorA = new b2Vec2();
    this.m_localAnchorB = new b2Vec2();
    this.m_linearMass = new b2Mat22();
    this.m_linearImpulse = new b2Vec2();
    this.m_localAnchorA.SetV(def.localAnchorA);
    this.m_localAnchorB.SetV(def.localAnchorB);
    this.m_linearMass.SetZero();
    this.m_linearImpulse.SetZero();
    this.m_maxForce = def.maxForce;
    this.m_maxTorque = def.maxTorque;
    return;
  }

  b2FrictionJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchorA);
  };

  b2FrictionJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchorB);
  };

  b2FrictionJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_linearImpulse.x, inv_dt * this.m_linearImpulse.y);
  };

  b2FrictionJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_angularImpulse;
  };

  b2FrictionJoint.prototype.SetMaxForce = function(force) {
    if (force === void 0) {
      force = 0;
    }
    this.m_maxForce = force;
  };

  b2FrictionJoint.prototype.GetMaxForce = function() {
    return this.m_maxForce;
  };

  b2FrictionJoint.prototype.SetMaxTorque = function(torque) {
    if (torque === void 0) {
      torque = 0;
    }
    this.m_maxTorque = torque;
  };

  b2FrictionJoint.prototype.GetMaxTorque = function() {
    return this.m_maxTorque;
  };

  b2FrictionJoint.prototype.InitVelocityConstraints = function(step) {
    var K, P, bA, bB, iA, iB, mA, mB, rAX, rAY, rBX, rBY, tMat, tX;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    K = new b2Mat22();
    K.col1.x = mA + mB;
    K.col2.x = 0.0;
    K.col1.y = 0.0;
    K.col2.y = mA + mB;
    K.col1.x += iA * rAY * rAY;
    K.col2.x += -iA * rAX * rAY;
    K.col1.y += -iA * rAX * rAY;
    K.col2.y += iA * rAX * rAX;
    K.col1.x += iB * rBY * rBY;
    K.col2.x += -iB * rBX * rBY;
    K.col1.y += -iB * rBX * rBY;
    K.col2.y += iB * rBX * rBX;
    K.GetInverse(this.m_linearMass);
    this.m_angularMass = iA + iB;
    if (this.m_angularMass > 0.0) {
      this.m_angularMass = 1.0 / this.m_angularMass;
    }
    if (step.warmStarting) {
      this.m_linearImpulse.x *= step.dtRatio;
      this.m_linearImpulse.y *= step.dtRatio;
      this.m_angularImpulse *= step.dtRatio;
      P = this.m_linearImpulse;
      bA.m_linearVelocity.x -= mA * P.x;
      bA.m_linearVelocity.y -= mA * P.y;
      bA.m_angularVelocity -= iA * (rAX * P.y - rAY * P.x + this.m_angularImpulse);
      bB.m_linearVelocity.x += mB * P.x;
      bB.m_linearVelocity.y += mB * P.y;
      bB.m_angularVelocity += iB * (rBX * P.y - rBY * P.x + this.m_angularImpulse);
    } else {
      this.m_linearImpulse.SetZero();
      this.m_angularImpulse = 0.0;
    }
  };

  b2FrictionJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, CdotX, CdotY, bA, bB, iA, iB, impulse, impulseV, mA, mB, maxImpulse, oldImpulse, oldImpulseV, rAX, rAY, rBX, rBY, tMat, tX, vA, vB, wA, wB;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    vA = bA.m_linearVelocity;
    wA = bA.m_angularVelocity;
    vB = bB.m_linearVelocity;
    wB = bB.m_angularVelocity;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    maxImpulse = 0;
    Cdot = wB - wA;
    impulse = -this.m_angularMass * Cdot;
    oldImpulse = this.m_angularImpulse;
    maxImpulse = step.dt * this.m_maxTorque;
    this.m_angularImpulse = b2Math.Clamp(this.m_angularImpulse + impulse, -maxImpulse, maxImpulse);
    impulse = this.m_angularImpulse - oldImpulse;
    wA -= iA * impulse;
    wB += iB * impulse;
    CdotX = vB.x - wB * rBY - vA.x + wA * rAY;
    CdotY = vB.y + wB * rBX - vA.y - wA * rAX;
    impulseV = b2Math.MulMV(this.m_linearMass, new b2Vec2(-CdotX, -CdotY));
    oldImpulseV = this.m_linearImpulse.Copy();
    this.m_linearImpulse.Add(impulseV);
    maxImpulse = step.dt * this.m_maxForce;
    if (this.m_linearImpulse.LengthSquared() > maxImpulse * maxImpulse) {
      this.m_linearImpulse.Normalize();
      this.m_linearImpulse.Multiply(maxImpulse);
    }
    impulseV = b2Math.SubtractVV(this.m_linearImpulse, oldImpulseV);
    vA.x -= mA * impulseV.x;
    vA.y -= mA * impulseV.y;
    wA -= iA * (rAX * impulseV.y - rAY * impulseV.x);
    vB.x += mB * impulseV.x;
    vB.y += mB * impulseV.y;
    wB += iB * (rBX * impulseV.y - rBY * impulseV.x);
    bA.m_angularVelocity = wA;
    bB.m_angularVelocity = wB;
  };

  b2FrictionJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    return true;
  };

  return b2FrictionJoint;

})(b2Joint);

//# sourceMappingURL=b2FrictionJoint.js.map

},{"../../index":103}],84:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2FrictionJointDef = (function(_super) {
  __extends(b2FrictionJointDef, _super);

  function b2FrictionJointDef() {
    return b2FrictionJointDef.__super__.constructor.apply(this, arguments);
  }

  b2FrictionJointDef.prototype.type = b2Joint.e_frictionJoint;

  b2FrictionJointDef.prototype.localAnchorA = null;

  b2FrictionJointDef.prototype.localAnchorB = null;

  b2FrictionJointDef.prototype.maxForce = 0.0;

  b2FrictionJointDef.prototype.maxTorque = 0.0;

  return b2FrictionJointDef;

})(b2JointDef);

({
  constructor: function() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
  },
  Initialize: function(bA, bB, anchor) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor));
    this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor));
  }
});

//# sourceMappingURL=b2FrictionJointDef.js.map

},{"../../index":103}],85:[function(require,module,exports){
var Box2D, b2Jacobian, b2Joint, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Jacobian = Box2D.Dynamics.Joints.b2Jacobian;

Box2D.Dynamics.Joints.b2GearJoint = (function(_super) {
  __extends(b2GearJoint, _super);

  b2GearJoint.prototype.m_groundAnchor1 = null;

  b2GearJoint.prototype.m_groundAnchor2 = null;

  b2GearJoint.prototype.m_J = null;

  b2GearJoint.prototype.m_revolute1 = null;

  b2GearJoint.prototype.m_prismatic1 = null;

  b2GearJoint.prototype.m_revolute2 = null;

  b2GearJoint.prototype.m_prismatic2 = null;

  b2GearJoint.prototype.m_ground1 = null;

  b2GearJoint.prototype.m_ground2 = null;

  b2GearJoint.prototype.m_ratio = 0;

  b2GearJoint.prototype.m_constant = 0;

  b2GearJoint.prototype.m_impulse = 0.0;

  function b2GearJoint(def) {
    var coordinate1, coordinate2, type1, type2;
    b2GearJoint.__super__.constructor.call(this, def);
    this.m_groundAnchor1 = new b2Vec2();
    this.m_groundAnchor2 = new b2Vec2();
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_J = new b2Jacobian();
    type1 = parseInt(def.joint1.m_type);
    type2 = parseInt(def.joint2.m_type);
    coordinate1 = 0;
    coordinate2 = 0;
    this.m_ground1 = def.joint1.GetBodyA();
    this.m_bodyA = def.joint1.GetBodyB();
    if (type1 === b2Joint.e_revoluteJoint) {
      this.m_revolute1 = (def.joint1 instanceof b2RevoluteJoint ? def.joint1 : null);
      this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1);
      this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2);
      coordinate1 = this.m_revolute1.GetJointAngle();
    } else {
      this.m_prismatic1 = (def.joint1 instanceof b2PrismaticJoint ? def.joint1 : null);
      this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1);
      this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2);
      coordinate1 = this.m_prismatic1.GetJointTranslation();
    }
    this.m_ground2 = def.joint2.GetBodyA();
    this.m_bodyB = def.joint2.GetBodyB();
    if (type2 === b2Joint.e_revoluteJoint) {
      this.m_revolute2 = (def.joint2 instanceof b2RevoluteJoint ? def.joint2 : null);
      this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1);
      this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2);
      coordinate2 = this.m_revolute2.GetJointAngle();
    } else {
      this.m_prismatic2 = (def.joint2 instanceof b2PrismaticJoint ? def.joint2 : null);
      this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1);
      this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2);
      coordinate2 = this.m_prismatic2.GetJointTranslation();
    }
    this.m_ratio = def.ratio;
    this.m_constant = coordinate1 + this.m_ratio * coordinate2;
    return;
  }

  b2GearJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2GearJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2GearJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse * this.m_J.linearB.x, inv_dt * this.m_impulse * this.m_J.linearB.y);
  };

  b2GearJoint.prototype.GetReactionTorque = function(inv_dt) {
    var PX, PY, rX, rY, tMat, tX;
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    tMat = this.m_bodyB.m_xf.R;
    rX = this.m_localAnchor1.x - this.m_bodyB.m_sweep.localCenter.x;
    rY = this.m_localAnchor1.y - this.m_bodyB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rX + tMat.col2.x * rY;
    rY = tMat.col1.y * rX + tMat.col2.y * rY;
    rX = tX;
    PX = this.m_impulse * this.m_J.linearB.x;
    PY = this.m_impulse * this.m_J.linearB.y;
    return inv_dt * (this.m_impulse * this.m_J.angularB - rX * PY + rY * PX);
  };

  b2GearJoint.prototype.GetRatio = function() {
    return this.m_ratio;
  };

  b2GearJoint.prototype.SetRatio = function(ratio) {
    if (ratio === void 0) {
      ratio = 0;
    }
    this.m_ratio = ratio;
  };

  b2GearJoint.prototype.InitVelocityConstraints = function(step) {
    var K, bA, bB, crug, g1, g2, rX, rY, tMat, tVec, tX, ugX, ugY;
    g1 = this.m_ground1;
    g2 = this.m_ground2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    ugX = 0;
    ugY = 0;
    rX = 0;
    rY = 0;
    tMat = void 0;
    tVec = void 0;
    crug = 0;
    tX = 0;
    K = 0.0;
    this.m_J.SetZero();
    if (this.m_revolute1) {
      this.m_J.angularA = -1.0;
      K += bA.m_invI;
    } else {
      tMat = g1.m_xf.R;
      tVec = this.m_prismatic1.m_localXAxis1;
      ugX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      ugY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tMat = bA.m_xf.R;
      rX = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      rY = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * rX + tMat.col2.x * rY;
      rY = tMat.col1.y * rX + tMat.col2.y * rY;
      rX = tX;
      crug = rX * ugY - rY * ugX;
      this.m_J.linearA.Set(-ugX, -ugY);
      this.m_J.angularA = -crug;
      K += bA.m_invMass + bA.m_invI * crug * crug;
    }
    if (this.m_revolute2) {
      this.m_J.angularB = -this.m_ratio;
      K += this.m_ratio * this.m_ratio * bB.m_invI;
    } else {
      tMat = g2.m_xf.R;
      tVec = this.m_prismatic2.m_localXAxis1;
      ugX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      ugY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tMat = bB.m_xf.R;
      rX = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      rY = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * rX + tMat.col2.x * rY;
      rY = tMat.col1.y * rX + tMat.col2.y * rY;
      rX = tX;
      crug = rX * ugY - rY * ugX;
      this.m_J.linearB.Set(-this.m_ratio * ugX, -this.m_ratio * ugY);
      this.m_J.angularB = -this.m_ratio * crug;
      K += this.m_ratio * this.m_ratio * (bB.m_invMass + bB.m_invI * crug * crug);
    }
    this.m_mass = (K > 0.0 ? 1.0 / K : 0.0);
    if (step.warmStarting) {
      bA.m_linearVelocity.x += bA.m_invMass * this.m_impulse * this.m_J.linearA.x;
      bA.m_linearVelocity.y += bA.m_invMass * this.m_impulse * this.m_J.linearA.y;
      bA.m_angularVelocity += bA.m_invI * this.m_impulse * this.m_J.angularA;
      bB.m_linearVelocity.x += bB.m_invMass * this.m_impulse * this.m_J.linearB.x;
      bB.m_linearVelocity.y += bB.m_invMass * this.m_impulse * this.m_J.linearB.y;
      bB.m_angularVelocity += bB.m_invI * this.m_impulse * this.m_J.angularB;
    } else {
      this.m_impulse = 0.0;
    }
  };

  b2GearJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, bA, bB, impulse;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    Cdot = this.m_J.Compute(bA.m_linearVelocity, bA.m_angularVelocity, bB.m_linearVelocity, bB.m_angularVelocity);
    impulse = -this.m_mass * Cdot;
    this.m_impulse += impulse;
    bA.m_linearVelocity.x += bA.m_invMass * impulse * this.m_J.linearA.x;
    bA.m_linearVelocity.y += bA.m_invMass * impulse * this.m_J.linearA.y;
    bA.m_angularVelocity += bA.m_invI * impulse * this.m_J.angularA;
    bB.m_linearVelocity.x += bB.m_invMass * impulse * this.m_J.linearB.x;
    bB.m_linearVelocity.y += bB.m_invMass * impulse * this.m_J.linearB.y;
    bB.m_angularVelocity += bB.m_invI * impulse * this.m_J.angularB;
  };

  b2GearJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, bA, bB, coordinate1, coordinate2, impulse, linearError;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    linearError = 0.0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    coordinate1 = 0;
    coordinate2 = 0;
    if (this.m_revolute1) {
      coordinate1 = this.m_revolute1.GetJointAngle();
    } else {
      coordinate1 = this.m_prismatic1.GetJointTranslation();
    }
    if (this.m_revolute2) {
      coordinate2 = this.m_revolute2.GetJointAngle();
    } else {
      coordinate2 = this.m_prismatic2.GetJointTranslation();
    }
    C = this.m_constant - (coordinate1 + this.m_ratio * coordinate2);
    impulse = -this.m_mass * C;
    bA.m_sweep.c.x += bA.m_invMass * impulse * this.m_J.linearA.x;
    bA.m_sweep.c.y += bA.m_invMass * impulse * this.m_J.linearA.y;
    bA.m_sweep.a += bA.m_invI * impulse * this.m_J.angularA;
    bB.m_sweep.c.x += bB.m_invMass * impulse * this.m_J.linearB.x;
    bB.m_sweep.c.y += bB.m_invMass * impulse * this.m_J.linearB.y;
    bB.m_sweep.a += bB.m_invI * impulse * this.m_J.angularB;
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return linearError < b2Settings.b2_linearSlop;
  };

  return b2GearJoint;

})(b2Joint);

//# sourceMappingURL=b2GearJoint.js.map

},{"../../index":103}],86:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2GearJointDef = (function(_super) {
  __extends(b2GearJointDef, _super);

  function b2GearJointDef() {
    return b2GearJointDef.__super__.constructor.apply(this, arguments);
  }

  b2GearJointDef.prototype.type = b2Joint.e_gearJoint;

  b2GearJointDef.prototype.joint1 = null;

  b2GearJointDef.prototype.joint2 = null;

  b2GearJointDef.prototype.ratio = 1.0;

  return b2GearJointDef;

})(b2JointDef);

//# sourceMappingURL=b2GearJointDef.js.map

},{"../../index":103}],87:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Joints.b2Jacobian = (function() {
  b2Jacobian.prototype.linearA = null;

  b2Jacobian.prototype.linearB = null;

  b2Jacobian.prototype.angularA = null;

  b2Jacobian.prototype.angularB = null;

  function b2Jacobian() {
    this.linearA = new b2Vec2();
    this.linearB = new b2Vec2();
    return;
  }

  b2Jacobian.prototype.SetZero = function() {
    this.linearA.SetZero();
    this.angularA = 0.0;
    this.linearB.SetZero();
    this.angularB = 0.0;
  };

  b2Jacobian.prototype.Set = function(x1, a1, x2, a2) {
    if (a1 === void 0) {
      a1 = 0;
    }
    if (a2 === void 0) {
      a2 = 0;
    }
    this.linearA.SetV(x1);
    this.angularA = a1;
    this.linearB.SetV(x2);
    this.angularB = a2;
  };

  b2Jacobian.prototype.Compute = function(x1, a1, x2, a2) {
    if (a1 === void 0) {
      a1 = 0;
    }
    if (a2 === void 0) {
      a2 = 0;
    }
    return (this.linearA.x * x1.x + this.linearA.y * x1.y) + this.angularA * a1 + (this.linearB.x * x2.x + this.linearB.y * x2.y) + this.angularB * a2;
  };

  return b2Jacobian;

})();

//# sourceMappingURL=b2Jacobian.js.map

},{"../../index":103}],88:[function(require,module,exports){
var Box2D, b2DistanceJoint, b2DistanceJointDef, b2FrictionJoint, b2FrictionJointDef, b2GearJoint, b2GearJointDef, b2JointEdge, b2LineJoint, b2LineJointDef, b2MouseJoint, b2MouseJointDef, b2PrismaticJoint, b2PrismaticJointDef, b2PulleyJoint, b2PulleyJointDef, b2RevoluteJoint, b2RevoluteJointDef, b2Vec2, b2WeldJoint, b2WeldJointDef;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointEdge = Box2D.Dynamics.Joints.b2JointEdge;

b2DistanceJoint = Box2D.Dynamics.Joints.b2DistanceJoint;

b2MouseJoint = Box2D.Dynamics.Joints.b2MouseJoint;

b2PrismaticJoint = Box2D.Dynamics.Joints.b2PrismaticJoint;

b2RevoluteJoint = Box2D.Dynamics.Joints.b2RevoluteJoint;

b2PulleyJoint = Box2D.Dynamics.Joints.b2PulleyJoint;

b2GearJoint = Box2D.Dynamics.Joints.b2GearJoint;

b2LineJoint = Box2D.Dynamics.Joints.b2LineJoint;

b2WeldJoint = Box2D.Dynamics.Joints.b2WeldJoint;

b2FrictionJoint = Box2D.Dynamics.Joints.b2FrictionJoint;

b2DistanceJointDef = Box2D.Dynamics.Joints.b2DistanceJointDef;

b2MouseJointDef = Box2D.Dynamics.Joints.b2MouseJointDef;

b2PrismaticJointDef = Box2D.Dynamics.Joints.b2PrismaticJointDef;

b2RevoluteJointDef = Box2D.Dynamics.Joints.b2RevoluteJointDef;

b2PulleyJointDef = Box2D.Dynamics.Joints.b2PulleyJointDef;

b2GearJointDef = Box2D.Dynamics.Joints.b2GearJointDef;

b2LineJointDef = Box2D.Dynamics.Joints.b2LineJointDef;

b2WeldJointDef = Box2D.Dynamics.Joints.b2WeldJointDef;

b2FrictionJointDef = Box2D.Dynamics.Joints.b2FrictionJointDef;

Box2D.Dynamics.Joints.b2Joint = (function() {
  b2Joint.e_unknownJoint = 0;

  b2Joint.e_revoluteJoint = 1;

  b2Joint.e_prismaticJoint = 2;

  b2Joint.e_distanceJoint = 3;

  b2Joint.e_pulleyJoint = 4;

  b2Joint.e_mouseJoint = 5;

  b2Joint.e_gearJoint = 6;

  b2Joint.e_lineJoint = 7;

  b2Joint.e_weldJoint = 8;

  b2Joint.e_frictionJoint = 9;

  b2Joint.e_inactiveLimit = 0;

  b2Joint.e_atLowerLimit = 1;

  b2Joint.e_atUpperLimit = 2;

  b2Joint.e_equalLimits = 3;

  b2Joint.prototype.m_type = b2Joint.e_unknownJoint;

  b2Joint.prototype.m_edgeA = null;

  b2Joint.prototype.m_edgeB = null;

  b2Joint.prototype.m_localAnchor1 = null;

  b2Joint.prototype.m_localAnchor2 = null;

  b2Joint.prototype.m_localCenterA = null;

  b2Joint.prototype.m_localCenterB = null;

  b2Joint.prototype.m_prev = null;

  b2Joint.prototype.m_next = null;

  b2Joint.prototype.m_bodyA = null;

  b2Joint.prototype.m_bodyB = null;

  b2Joint.prototype.m_collideConnected = null;

  b2Joint.prototype.m_islandFlag = null;

  b2Joint.prototype.m_userData = null;

  function b2Joint(def) {
    this.m_edgeA = new b2JointEdge();
    this.m_edgeB = new b2JointEdge();
    this.m_localCenterA = new b2Vec2();
    this.m_localCenterB = new b2Vec2();
    b2Settings.b2Assert(def.bodyA !== def.bodyB);
    this.m_type = def.type;
    this.m_prev = null;
    this.m_next = null;
    this.m_bodyA = def.bodyA;
    this.m_bodyB = def.bodyB;
    this.m_collideConnected = def.collideConnected;
    this.m_islandFlag = false;
    this.m_userData = def.userData;
    return;
  }

  b2Joint.prototype.GetType = function() {
    return this.m_type;
  };

  b2Joint.prototype.GetAnchorA = function() {
    return null;
  };

  b2Joint.prototype.GetAnchorB = function() {
    return null;
  };

  b2Joint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return null;
  };

  b2Joint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2Joint.prototype.GetBodyA = function() {
    return this.m_bodyA;
  };

  b2Joint.prototype.GetBodyB = function() {
    return this.m_bodyB;
  };

  b2Joint.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Joint.prototype.GetUserData = function() {
    return this.m_userData;
  };

  b2Joint.prototype.SetUserData = function(data) {
    this.m_userData = data;
  };

  b2Joint.prototype.IsActive = function() {
    return this.m_bodyA.IsActive() && this.m_bodyB.IsActive();
  };

  b2Joint.Create = function(def, allocator) {
    var joint;
    joint = null;
    switch (def.type) {
      case b2Joint.e_distanceJoint:
        joint = new b2DistanceJoint((def instanceof b2DistanceJointDef ? def : null));
        break;
      case b2Joint.e_mouseJoint:
        joint = new b2MouseJoint((def instanceof b2MouseJointDef ? def : null));
        break;
      case b2Joint.e_prismaticJoint:
        joint = new b2PrismaticJoint((def instanceof b2PrismaticJointDef ? def : null));
        break;
      case b2Joint.e_revoluteJoint:
        joint = new b2RevoluteJoint((def instanceof b2RevoluteJointDef ? def : null));
        break;
      case b2Joint.e_pulleyJoint:
        joint = new b2PulleyJoint((def instanceof b2PulleyJointDef ? def : null));
        break;
      case b2Joint.e_gearJoint:
        joint = new b2GearJoint((def instanceof b2GearJointDef ? def : null));
        break;
      case b2Joint.e_lineJoint:
        joint = new b2LineJoint((def instanceof b2LineJointDef ? def : null));
        break;
      case b2Joint.e_weldJoint:
        joint = new b2WeldJoint((def instanceof b2WeldJointDef ? def : null));
        break;
      case b2Joint.e_frictionJoint:
        joint = new b2FrictionJoint((def instanceof b2FrictionJointDef ? def : null));
        break;
    }
    return joint;
  };

  b2Joint.Destroy = function(joint, allocator) {};

  b2Joint.prototype.InitVelocityConstraints = function(step) {};

  b2Joint.prototype.SolveVelocityConstraints = function(step) {};

  b2Joint.prototype.FinalizeVelocityConstraints = function() {};

  b2Joint.prototype.SolvePositionConstraints = function(baumgarte) {
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    return false;
  };

  return b2Joint;

})();

//# sourceMappingURL=b2Joint.js.map

},{"../../index":103}],89:[function(require,module,exports){
var Box2D, b2Joint;

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

Box2D.Dynamics.Joints.b2JointDef = (function() {
  function b2JointDef() {}

  b2JointDef.prototype.type = b2Joint.e_unknownJoint;

  b2JointDef.prototype.userData = null;

  b2JointDef.prototype.bodyA = null;

  b2JointDef.prototype.bodyB = null;

  b2JointDef.prototype.collideConnected = null;

  return b2JointDef;

})();

//# sourceMappingURL=b2JointDef.js.map

},{"../../index":103}],90:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Joints.b2JointEdge = (function() {
  function b2JointEdge() {}

  return b2JointEdge;

})();

//# sourceMappingURL=b2JointEdge.js.map

},{"../../index":103}],91:[function(require,module,exports){
var Box2D, b2Joint, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Joints.b2LineJoint = (function(_super) {
  __extends(b2LineJoint, _super);

  b2LineJoint.prototype.m_localXAxis1 = null;

  b2LineJoint.prototype.m_localYAxis1 = null;

  b2LineJoint.prototype.m_axis = null;

  b2LineJoint.prototype.m_perp = null;

  b2LineJoint.prototype.m_K = null;

  b2LineJoint.prototype.m_impulse = null;

  b2LineJoint.prototype.m_motorMass = 0.0;

  b2LineJoint.prototype.m_motorImpulse = 0.0;

  b2LineJoint.prototype.m_lowerTranslation = 0.0;

  b2LineJoint.prototype.m_upperTranslation = 0.0;

  b2LineJoint.prototype.m_maxMotorForce = 0.0;

  b2LineJoint.prototype.m_motorSpeed = 0.0;

  b2LineJoint.prototype.m_enableLimit = false;

  b2LineJoint.prototype.m_enableMotor = false;

  b2LineJoint.prototype.m_limitState = b2Joint.e_inactiveLimit;

  function b2LineJoint(def) {
    b2LineJoint.__super__.constructor.call(this, def);
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_localXAxis1 = new b2Vec2();
    this.m_localYAxis1 = new b2Vec2();
    this.m_axis = new b2Vec2();
    this.m_perp = new b2Vec2();
    this.m_K = new b2Mat22();
    this.m_impulse = new b2Vec2();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_localXAxis1.SetV(def.localAxisA);
    this.m_localYAxis1.x = -this.m_localXAxis1.y;
    this.m_localYAxis1.y = this.m_localXAxis1.x;
    this.m_impulse.SetZero();
    this.m_lowerTranslation = def.lowerTranslation;
    this.m_upperTranslation = def.upperTranslation;
    this.m_maxMotorForce = def.maxMotorForce;
    this.m_motorSpeed = def.motorSpeed;
    this.m_enableLimit = def.enableLimit;
    this.m_enableMotor = def.enableMotor;
    this.m_axis.SetZero();
    this.m_perp.SetZero();
    return;
  }

  b2LineJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2LineJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2LineJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x), inv_dt * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y));
  };

  b2LineJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.y;
  };

  b2LineJoint.prototype.GetJointTranslation = function() {
    var axis, bA, bB, dX, dY, p1, p2, tMat, translation;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    p1 = bA.GetWorldPoint(this.m_localAnchor1);
    p2 = bB.GetWorldPoint(this.m_localAnchor2);
    dX = p2.x - p1.x;
    dY = p2.y - p1.y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    translation = axis.x * dX + axis.y * dY;
    return translation;
  };

  b2LineJoint.prototype.GetJointSpeed = function() {
    var axis, bA, bB, dX, dY, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, speed, tMat, tX, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    p1X = bA.m_sweep.c.x + r1X;
    p1Y = bA.m_sweep.c.y + r1Y;
    p2X = bB.m_sweep.c.x + r2X;
    p2Y = bB.m_sweep.c.y + r2Y;
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    v1 = bA.m_linearVelocity;
    v2 = bB.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    w2 = bB.m_angularVelocity;
    speed = (dX * (-w1 * axis.y) + dY * (w1 * axis.x)) + (axis.x * (((v2.x + (-w2 * r2Y)) - v1.x) - (-w1 * r1Y)) + axis.y * (((v2.y + (w2 * r2X)) - v1.y) - (w1 * r1X)));
    return speed;
  };

  b2LineJoint.prototype.IsLimitEnabled = function() {
    return this.m_enableLimit;
  };

  b2LineJoint.prototype.EnableLimit = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableLimit = flag;
  };

  b2LineJoint.prototype.GetLowerLimit = function() {
    return this.m_lowerTranslation;
  };

  b2LineJoint.prototype.GetUpperLimit = function() {
    return this.m_upperTranslation;
  };

  b2LineJoint.prototype.SetLimits = function(lower, upper) {
    if (lower === void 0) {
      lower = 0;
    }
    if (upper === void 0) {
      upper = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_lowerTranslation = lower;
    this.m_upperTranslation = upper;
  };

  b2LineJoint.prototype.IsMotorEnabled = function() {
    return this.m_enableMotor;
  };

  b2LineJoint.prototype.EnableMotor = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableMotor = flag;
  };

  b2LineJoint.prototype.SetMotorSpeed = function(speed) {
    if (speed === void 0) {
      speed = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_motorSpeed = speed;
  };

  b2LineJoint.prototype.GetMotorSpeed = function() {
    return this.m_motorSpeed;
  };

  b2LineJoint.prototype.SetMaxMotorForce = function(force) {
    if (force === void 0) {
      force = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_maxMotorForce = force;
  };

  b2LineJoint.prototype.GetMaxMotorForce = function() {
    return this.m_maxMotorForce;
  };

  b2LineJoint.prototype.GetMotorForce = function() {
    return this.m_motorImpulse;
  };

  b2LineJoint.prototype.InitVelocityConstraints = function(step) {
    var L1, L2, PX, PY, bA, bB, dX, dY, i1, i2, jointTransition, m1, m2, r1X, r1Y, r2X, r2Y, tMat, tX, xf1, xf2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    this.m_localCenterA.SetV(bA.GetLocalCenter());
    this.m_localCenterB.SetV(bB.GetLocalCenter());
    xf1 = bA.GetTransform();
    xf2 = bB.GetTransform();
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    dY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    this.m_invMassA = bA.m_invMass;
    this.m_invMassB = bB.m_invMass;
    this.m_invIA = bA.m_invI;
    this.m_invIB = bB.m_invI;
    this.m_axis.SetV(b2Math.MulMV(xf1.R, this.m_localXAxis1));
    this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
    this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
    this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2;
    this.m_motorMass = (this.m_motorMass > Number.MIN_VALUE ? 1.0 / this.m_motorMass : 0.0);
    this.m_perp.SetV(b2Math.MulMV(xf1.R, this.m_localYAxis1));
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    m1 = this.m_invMassA;
    m2 = this.m_invMassB;
    i1 = this.m_invIA;
    i2 = this.m_invIB;
    this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
    this.m_K.col1.y = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
    this.m_K.col2.x = this.m_K.col1.y;
    this.m_K.col2.y = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
    if (this.m_enableLimit) {
      jointTransition = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        this.m_limitState = b2Joint.e_equalLimits;
      } else if (jointTransition <= this.m_lowerTranslation) {
        if (this.m_limitState !== b2Joint.e_atLowerLimit) {
          this.m_limitState = b2Joint.e_atLowerLimit;
          this.m_impulse.y = 0.0;
        }
      } else if (jointTransition >= this.m_upperTranslation) {
        if (this.m_limitState !== b2Joint.e_atUpperLimit) {
          this.m_limitState = b2Joint.e_atUpperLimit;
          this.m_impulse.y = 0.0;
        }
      } else {
        this.m_limitState = b2Joint.e_inactiveLimit;
        this.m_impulse.y = 0.0;
      }
    } else {
      this.m_limitState = b2Joint.e_inactiveLimit;
    }
    if (this.m_enableMotor === false) {
      this.m_motorImpulse = 0.0;
    }
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_motorImpulse *= step.dtRatio;
      PX = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x;
      PY = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y;
      L1 = this.m_impulse.x * this.m_s1 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a1;
      L2 = this.m_impulse.x * this.m_s2 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a2;
      bA.m_linearVelocity.x -= this.m_invMassA * PX;
      bA.m_linearVelocity.y -= this.m_invMassA * PY;
      bA.m_angularVelocity -= this.m_invIA * L1;
      bB.m_linearVelocity.x += this.m_invMassB * PX;
      bB.m_linearVelocity.y += this.m_invMassB * PY;
      bB.m_angularVelocity += this.m_invIB * L2;
    } else {
      this.m_impulse.SetZero();
      this.m_motorImpulse = 0.0;
    }
  };

  b2LineJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, Cdot1, Cdot2, L1, L2, PX, PY, b, bA, bB, df, df2, f1, f2r, impulse, maxImpulse, oldImpulse, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    v1 = bA.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    v2 = bB.m_linearVelocity;
    w2 = bB.m_angularVelocity;
    PX = 0;
    PY = 0;
    L1 = 0;
    L2 = 0;
    if (this.m_enableMotor && this.m_limitState !== b2Joint.e_equalLimits) {
      Cdot = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      impulse = this.m_motorMass * (this.m_motorSpeed - Cdot);
      oldImpulse = this.m_motorImpulse;
      maxImpulse = step.dt * this.m_maxMotorForce;
      this.m_motorImpulse = b2Math.Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);
      impulse = this.m_motorImpulse - oldImpulse;
      PX = impulse * this.m_axis.x;
      PY = impulse * this.m_axis.y;
      L1 = impulse * this.m_a1;
      L2 = impulse * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    Cdot1 = this.m_perp.x * (v2.x - v1.x) + this.m_perp.y * (v2.y - v1.y) + this.m_s2 * w2 - this.m_s1 * w1;
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      Cdot2 = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      f1 = this.m_impulse.Copy();
      df = this.m_K.Solve(new b2Vec2(), -Cdot1, -Cdot2);
      this.m_impulse.Add(df);
      if (this.m_limitState === b2Joint.e_atLowerLimit) {
        this.m_impulse.y = b2Math.Max(this.m_impulse.y, 0.0);
      } else {
        if (this.m_limitState === b2Joint.e_atUpperLimit) {
          this.m_impulse.y = b2Math.Min(this.m_impulse.y, 0.0);
        }
      }
      b = (-Cdot1) - (this.m_impulse.y - f1.y) * this.m_K.col2.x;
      f2r = 0;
      if (this.m_K.col1.x !== 0.0) {
        f2r = b / this.m_K.col1.x + f1.x;
      } else {
        f2r = f1.x;
      }
      this.m_impulse.x = f2r;
      df.x = this.m_impulse.x - f1.x;
      df.y = this.m_impulse.y - f1.y;
      PX = df.x * this.m_perp.x + df.y * this.m_axis.x;
      PY = df.x * this.m_perp.y + df.y * this.m_axis.y;
      L1 = df.x * this.m_s1 + df.y * this.m_a1;
      L2 = df.x * this.m_s2 + df.y * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    } else {
      df2 = 0;
      if (this.m_K.col1.x !== 0.0) {
        df2 = (-Cdot1) / this.m_K.col1.x;
      } else {
        df2 = 0.0;
      }
      this.m_impulse.x += df2;
      PX = df2 * this.m_perp.x;
      PY = df2 * this.m_perp.y;
      L1 = df2 * this.m_s1;
      L2 = df2 * this.m_s2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    bA.m_linearVelocity.SetV(v1);
    bA.m_angularVelocity = w1;
    bB.m_linearVelocity.SetV(v2);
    bB.m_angularVelocity = w2;
  };

  b2LineJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C1, C2, L1, L2, PX, PY, R1, R2, a1, a2, active, angularError, bA, bB, c1, c2, dX, dY, i1, i2, impulse, impulse1, k11, limitC, linearError, m1, m2, oldLimitImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, translation;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    limitC = 0;
    oldLimitImpulse = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    c1 = bA.m_sweep.c;
    a1 = bA.m_sweep.a;
    c2 = bB.m_sweep.c;
    a2 = bB.m_sweep.a;
    tMat = void 0;
    tX = 0;
    m1 = 0;
    m2 = 0;
    i1 = 0;
    i2 = 0;
    linearError = 0.0;
    angularError = 0.0;
    active = false;
    C2 = 0.0;
    R1 = b2Mat22.FromAngle(a1);
    R2 = b2Mat22.FromAngle(a2);
    tMat = R1;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = R2;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = c2.x + r2X - c1.x - r1X;
    dY = c2.y + r2Y - c1.y - r1Y;
    if (this.m_enableLimit) {
      this.m_axis = b2Math.MulMV(R1, this.m_localXAxis1);
      this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
      this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
      translation = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        C2 = b2Math.Clamp(translation, -b2Settings.b2_maxLinearCorrection, b2Settings.b2_maxLinearCorrection);
        linearError = b2Math.Abs(translation);
        active = true;
      } else if (translation <= this.m_lowerTranslation) {
        C2 = b2Math.Clamp(translation - this.m_lowerTranslation + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
        linearError = this.m_lowerTranslation - translation;
        active = true;
      } else if (translation >= this.m_upperTranslation) {
        C2 = b2Math.Clamp(translation - this.m_upperTranslation + b2Settings.b2_linearSlop, 0.0, b2Settings.b2_maxLinearCorrection);
        linearError = translation - this.m_upperTranslation;
        active = true;
      }
    }
    this.m_perp = b2Math.MulMV(R1, this.m_localYAxis1);
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    impulse = new b2Vec2();
    C1 = this.m_perp.x * dX + this.m_perp.y * dY;
    linearError = b2Math.Max(linearError, b2Math.Abs(C1));
    angularError = 0.0;
    if (active) {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      this.m_K.col1.y = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
      this.m_K.col2.x = this.m_K.col1.y;
      this.m_K.col2.y = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
      this.m_K.Solve(impulse, -C1, -C2);
    } else {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      k11 = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      impulse1 = 0;
      if (k11 !== 0.0) {
        impulse1 = (-C1) / k11;
      } else {
        impulse1 = 0.0;
      }
      impulse.x = impulse1;
      impulse.y = 0.0;
    }
    PX = impulse.x * this.m_perp.x + impulse.y * this.m_axis.x;
    PY = impulse.x * this.m_perp.y + impulse.y * this.m_axis.y;
    L1 = impulse.x * this.m_s1 + impulse.y * this.m_a1;
    L2 = impulse.x * this.m_s2 + impulse.y * this.m_a2;
    c1.x -= this.m_invMassA * PX;
    c1.y -= this.m_invMassA * PY;
    a1 -= this.m_invIA * L1;
    c2.x += this.m_invMassB * PX;
    c2.y += this.m_invMassB * PY;
    a2 += this.m_invIB * L2;
    bA.m_sweep.a = a1;
    bB.m_sweep.a = a2;
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return linearError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2LineJoint;

})(b2Joint);

//# sourceMappingURL=b2LineJoint.js.map

},{"../../index":103}],92:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2LineJointDef = (function(_super) {
  __extends(b2LineJointDef, _super);

  b2LineJointDef.prototype.type = b2Joint.e_lineJoint;

  b2LineJointDef.prototype.localAnchorA = null;

  b2LineJointDef.prototype.localAnchorB = null;

  b2LineJointDef.prototype.localAxisA = null;

  b2LineJointDef.prototype.enableLimit = false;

  b2LineJointDef.prototype.lowerTranslation = 0.0;

  b2LineJointDef.prototype.upperTranslation = 0.0;

  b2LineJointDef.prototype.enableMotor = false;

  b2LineJointDef.prototype.maxMotorForce = 0.0;

  b2LineJointDef.prototype.motorSpeed = 0.0;

  function b2LineJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.localAxisA = new b2Vec2();
    this.localAxisA.Set(1.0, 0.0);
    return;
  }

  b2LineJointDef.prototype.Initialize = function(bA, bB, anchor, axis) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA = this.bodyA.GetLocalPoint(anchor);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchor);
    this.localAxisA = this.bodyA.GetLocalVector(axis);
  };

  return b2LineJointDef;

})(b2JointDef);

//# sourceMappingURL=b2LineJointDef.js.map

},{"../../index":103}],93:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Joints.b2MouseJoint = (function(_super) {
  __extends(b2MouseJoint, _super);

  b2MouseJoint.prototype.K = null;

  b2MouseJoint.prototype.K1 = null;

  b2MouseJoint.prototype.K2 = null;

  b2MouseJoint.prototype.m_localAnchor = null;

  b2MouseJoint.prototype.m_target = null;

  b2MouseJoint.prototype.m_impulse = null;

  b2MouseJoint.prototype.m_mass = null;

  b2MouseJoint.prototype.m_C = null;

  b2MouseJoint.prototype.m_frequencyHz = 0.0;

  b2MouseJoint.prototype.m_dampingRatio = 0.0;

  b2MouseJoint.prototype.m_beta = 0.0;

  b2MouseJoint.prototype.m_gamma = 0.0;

  function b2MouseJoint(def) {
    var tMat, tX, tY;
    b2MouseJoint.__super__.constructor.call(this, def);
    this.K = new b2Mat22();
    this.K1 = new b2Mat22();
    this.K2 = new b2Mat22();
    this.m_localAnchor = new b2Vec2();
    this.m_target = new b2Vec2();
    this.m_impulse = new b2Vec2();
    this.m_mass = new b2Mat22();
    this.m_C = new b2Vec2();
    this.m_target.SetV(def.target);
    tX = this.m_target.x - this.m_bodyB.m_xf.position.x;
    tY = this.m_target.y - this.m_bodyB.m_xf.position.y;
    tMat = this.m_bodyB.m_xf.R;
    this.m_localAnchor.x = tX * tMat.col1.x + tY * tMat.col1.y;
    this.m_localAnchor.y = tX * tMat.col2.x + tY * tMat.col2.y;
    this.m_maxForce = def.maxForce;
    this.m_impulse.SetZero();
    this.m_frequencyHz = def.frequencyHz;
    this.m_dampingRatio = def.dampingRatio;
    return;
  }

  b2MouseJoint.prototype.GetAnchorA = function() {
    return this.m_target;
  };

  b2MouseJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor);
  };

  b2MouseJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse.x, inv_dt * this.m_impulse.y);
  };

  b2MouseJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2MouseJoint.prototype.GetTarget = function() {
    return this.m_target;
  };

  b2MouseJoint.prototype.SetTarget = function(target) {
    if (this.m_bodyB.IsAwake() === false) {
      this.m_bodyB.SetAwake(true);
    }
    this.m_target = target;
  };

  b2MouseJoint.prototype.GetMaxForce = function() {
    return this.m_maxForce;
  };

  b2MouseJoint.prototype.SetMaxForce = function(maxForce) {
    if (maxForce === void 0) {
      maxForce = 0;
    }
    this.m_maxForce = maxForce;
  };

  b2MouseJoint.prototype.GetFrequency = function() {
    return this.m_frequencyHz;
  };

  b2MouseJoint.prototype.SetFrequency = function(hz) {
    if (hz === void 0) {
      hz = 0;
    }
    this.m_frequencyHz = hz;
  };

  b2MouseJoint.prototype.GetDampingRatio = function() {
    return this.m_dampingRatio;
  };

  b2MouseJoint.prototype.SetDampingRatio = function(ratio) {
    if (ratio === void 0) {
      ratio = 0;
    }
    this.m_dampingRatio = ratio;
  };

  b2MouseJoint.prototype.InitVelocityConstraints = function(step) {
    var b, d, invI, invMass, k, mass, omega, rX, rY, tMat, tX;
    b = this.m_bodyB;
    mass = b.GetMass();
    omega = 2.0 * Math.PI * this.m_frequencyHz;
    d = 2.0 * mass * this.m_dampingRatio * omega;
    k = mass * omega * omega;
    this.m_gamma = step.dt * (d + step.dt * k);
    this.m_gamma = (this.m_gamma !== 0 ? 1 / this.m_gamma : 0.0);
    this.m_beta = step.dt * k * this.m_gamma;
    tMat = void 0;
    tMat = b.m_xf.R;
    rX = this.m_localAnchor.x - b.m_sweep.localCenter.x;
    rY = this.m_localAnchor.y - b.m_sweep.localCenter.y;
    tX = tMat.col1.x * rX + tMat.col2.x * rY;
    rY = tMat.col1.y * rX + tMat.col2.y * rY;
    rX = tX;
    invMass = b.m_invMass;
    invI = b.m_invI;
    this.K1.col1.x = invMass;
    this.K1.col2.x = 0.0;
    this.K1.col1.y = 0.0;
    this.K1.col2.y = invMass;
    this.K2.col1.x = invI * rY * rY;
    this.K2.col2.x = -invI * rX * rY;
    this.K2.col1.y = -invI * rX * rY;
    this.K2.col2.y = invI * rX * rX;
    this.K.SetM(this.K1);
    this.K.AddM(this.K2);
    this.K.col1.x += this.m_gamma;
    this.K.col2.y += this.m_gamma;
    this.K.GetInverse(this.m_mass);
    this.m_C.x = b.m_sweep.c.x + rX - this.m_target.x;
    this.m_C.y = b.m_sweep.c.y + rY - this.m_target.y;
    b.m_angularVelocity *= 0.98;
    this.m_impulse.x *= step.dtRatio;
    this.m_impulse.y *= step.dtRatio;
    b.m_linearVelocity.x += invMass * this.m_impulse.x;
    b.m_linearVelocity.y += invMass * this.m_impulse.y;
    b.m_angularVelocity += invI * (rX * this.m_impulse.y - rY * this.m_impulse.x);
  };

  b2MouseJoint.prototype.SolveVelocityConstraints = function(step) {
    var CdotX, CdotY, b, impulseX, impulseY, maxImpulse, oldImpulseX, oldImpulseY, rX, rY, tMat, tX, tY;
    b = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    tY = 0;
    tMat = b.m_xf.R;
    rX = this.m_localAnchor.x - b.m_sweep.localCenter.x;
    rY = this.m_localAnchor.y - b.m_sweep.localCenter.y;
    tX = tMat.col1.x * rX + tMat.col2.x * rY;
    rY = tMat.col1.y * rX + tMat.col2.y * rY;
    rX = tX;
    CdotX = b.m_linearVelocity.x + (-b.m_angularVelocity * rY);
    CdotY = b.m_linearVelocity.y + (b.m_angularVelocity * rX);
    tMat = this.m_mass;
    tX = CdotX + this.m_beta * this.m_C.x + this.m_gamma * this.m_impulse.x;
    tY = CdotY + this.m_beta * this.m_C.y + this.m_gamma * this.m_impulse.y;
    impulseX = -(tMat.col1.x * tX + tMat.col2.x * tY);
    impulseY = -(tMat.col1.y * tX + tMat.col2.y * tY);
    oldImpulseX = this.m_impulse.x;
    oldImpulseY = this.m_impulse.y;
    this.m_impulse.x += impulseX;
    this.m_impulse.y += impulseY;
    maxImpulse = step.dt * this.m_maxForce;
    if (this.m_impulse.LengthSquared() > maxImpulse * maxImpulse) {
      this.m_impulse.Multiply(maxImpulse / this.m_impulse.Length());
    }
    impulseX = this.m_impulse.x - oldImpulseX;
    impulseY = this.m_impulse.y - oldImpulseY;
    b.m_linearVelocity.x += b.m_invMass * impulseX;
    b.m_linearVelocity.y += b.m_invMass * impulseY;
    b.m_angularVelocity += b.m_invI * (rX * impulseY - rY * impulseX);
  };

  b2MouseJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    return true;
  };

  return b2MouseJoint;

})(b2Joint);

//# sourceMappingURL=b2MouseJoint.js.map

},{"../../index":103}],94:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2MouseJointDef = (function(_super) {
  __extends(b2MouseJointDef, _super);

  b2MouseJointDef.prototype.type = b2Joint.e_mouseJoint;

  b2MouseJointDef.prototype.target = null;

  b2MouseJointDef.prototype.maxForce = 0.0;

  b2MouseJointDef.prototype.frequencyHz = 5.0;

  b2MouseJointDef.prototype.dampingRatio = 0.7;

  function b2MouseJointDef() {
    this.target = new b2Vec2();
    return;
  }

  return b2MouseJointDef;

})(b2JointDef);

//# sourceMappingURL=b2MouseJointDef.js.map

},{"../../index":103}],95:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Math, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Math = Box2D.Common.Math.b2Math;

Box2D.Dynamics.Joints.b2PrismaticJoint = (function(_super) {
  __extends(b2PrismaticJoint, _super);

  b2PrismaticJoint.prototype.m_localXAxis1 = null;

  b2PrismaticJoint.prototype.m_localYAxis1 = null;

  b2PrismaticJoint.prototype.m_axis = null;

  b2PrismaticJoint.prototype.m_perp = null;

  b2PrismaticJoint.prototype.m_K = null;

  b2PrismaticJoint.prototype.m_refAngle = null;

  b2PrismaticJoint.prototype.m_impulse = null;

  b2PrismaticJoint.prototype.m_motorMass = 0.0;

  b2PrismaticJoint.prototype.m_motorImpulse = 0.0;

  b2PrismaticJoint.prototype.m_lowerTranslation = 0.0;

  b2PrismaticJoint.prototype.m_upperTranslation = 0.0;

  b2PrismaticJoint.prototype.m_maxMotorForce = 0.0;

  b2PrismaticJoint.prototype.m_motorSpeed = 0.0;

  b2PrismaticJoint.prototype.m_enableLimit = false;

  b2PrismaticJoint.prototype.m_enableMotor = false;

  b2PrismaticJoint.prototype.m_limitState = b2Joint.e_inactiveLimit;

  function b2PrismaticJoint(def) {
    b2PrismaticJoint.__super__.constructor.apply(this, arguments);
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_localXAxis1 = new b2Vec2();
    this.m_localYAxis1 = new b2Vec2();
    this.m_axis = new b2Vec2();
    this.m_perp = new b2Vec2();
    this.m_K = new b2Mat33();
    this.m_impulse = new b2Vec3();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_localXAxis1.SetV(def.localAxisA);
    this.m_localYAxis1.x = -this.m_localXAxis1.y;
    this.m_localYAxis1.y = this.m_localXAxis1.x;
    this.m_refAngle = def.referenceAngle;
    this.m_impulse.SetZero();
    this.m_motorMass = 0.0;
    this.m_motorImpulse = 0.0;
    this.m_lowerTranslation = def.lowerTranslation;
    this.m_upperTranslation = def.upperTranslation;
    this.m_maxMotorForce = def.maxMotorForce;
    this.m_motorSpeed = def.motorSpeed;
    this.m_enableLimit = def.enableLimit;
    this.m_enableMotor = def.enableMotor;
    this.m_limitState = b2Joint.e_inactiveLimit;
    this.m_axis.SetZero();
    this.m_perp.SetZero();
    return;
  }

  b2PrismaticJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2PrismaticJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2PrismaticJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x), inv_dt * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y));
  };

  b2PrismaticJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.y;
  };

  b2PrismaticJoint.prototype.GetJointTranslation = function() {
    var axis, bA, bB, dX, dY, p1, p2, tMat, translation;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    p1 = bA.GetWorldPoint(this.m_localAnchor1);
    p2 = bB.GetWorldPoint(this.m_localAnchor2);
    dX = p2.x - p1.x;
    dY = p2.y - p1.y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    translation = axis.x * dX + axis.y * dY;
    return translation;
  };

  b2PrismaticJoint.prototype.GetJointSpeed = function() {
    var axis, bA, bB, dX, dY, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, speed, tMat, tX, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    p1X = bA.m_sweep.c.x + r1X;
    p1Y = bA.m_sweep.c.y + r1Y;
    p2X = bB.m_sweep.c.x + r2X;
    p2Y = bB.m_sweep.c.y + r2Y;
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    v1 = bA.m_linearVelocity;
    v2 = bB.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    w2 = bB.m_angularVelocity;
    speed = (dX * (-w1 * axis.y) + dY * (w1 * axis.x)) + (axis.x * (((v2.x + (-w2 * r2Y)) - v1.x) - (-w1 * r1Y)) + axis.y * (((v2.y + (w2 * r2X)) - v1.y) - (w1 * r1X)));
    return speed;
  };

  b2PrismaticJoint.prototype.IsLimitEnabled = function() {
    return this.m_enableLimit;
  };

  b2PrismaticJoint.prototype.EnableLimit = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableLimit = flag;
  };

  b2PrismaticJoint.prototype.GetLowerLimit = function() {
    return this.m_lowerTranslation;
  };

  b2PrismaticJoint.prototype.GetUpperLimit = function() {
    return this.m_upperTranslation;
  };

  b2PrismaticJoint.prototype.SetLimits = function(lower, upper) {
    if (lower === void 0) {
      lower = 0;
    }
    if (upper === void 0) {
      upper = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_lowerTranslation = lower;
    this.m_upperTranslation = upper;
  };

  b2PrismaticJoint.prototype.IsMotorEnabled = function() {
    return this.m_enableMotor;
  };

  b2PrismaticJoint.prototype.EnableMotor = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableMotor = flag;
  };

  b2PrismaticJoint.prototype.SetMotorSpeed = function(speed) {
    if (speed === void 0) {
      speed = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_motorSpeed = speed;
  };

  b2PrismaticJoint.prototype.GetMotorSpeed = function() {
    return this.m_motorSpeed;
  };

  b2PrismaticJoint.prototype.SetMaxMotorForce = function(force) {
    if (force === void 0) {
      force = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_maxMotorForce = force;
  };

  b2PrismaticJoint.prototype.GetMotorForce = function() {
    return this.m_motorImpulse;
  };

  b2PrismaticJoint.prototype.InitVelocityConstraints = function(step) {
    var L1, L2, PX, PY, bA, bB, dX, dY, i1, i2, jointTransition, m1, m2, r1X, r1Y, r2X, r2Y, tMat, tX, xf1, xf2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    this.m_localCenterA.SetV(bA.GetLocalCenter());
    this.m_localCenterB.SetV(bB.GetLocalCenter());
    xf1 = bA.GetTransform();
    xf2 = bB.GetTransform();
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    dY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    this.m_invMassA = bA.m_invMass;
    this.m_invMassB = bB.m_invMass;
    this.m_invIA = bA.m_invI;
    this.m_invIB = bB.m_invI;
    this.m_axis.SetV(b2Math.MulMV(xf1.R, this.m_localXAxis1));
    this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
    this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
    this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2;
    if (this.m_motorMass > Number.MIN_VALUE) {
      this.m_motorMass = 1.0 / this.m_motorMass;
    }
    this.m_perp.SetV(b2Math.MulMV(xf1.R, this.m_localYAxis1));
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    m1 = this.m_invMassA;
    m2 = this.m_invMassB;
    i1 = this.m_invIA;
    i2 = this.m_invIB;
    this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
    this.m_K.col1.y = i1 * this.m_s1 + i2 * this.m_s2;
    this.m_K.col1.z = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
    this.m_K.col2.x = this.m_K.col1.y;
    this.m_K.col2.y = i1 + i2;
    this.m_K.col2.z = i1 * this.m_a1 + i2 * this.m_a2;
    this.m_K.col3.x = this.m_K.col1.z;
    this.m_K.col3.y = this.m_K.col2.z;
    this.m_K.col3.z = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
    if (this.m_enableLimit) {
      jointTransition = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        this.m_limitState = b2Joint.e_equalLimits;
      } else if (jointTransition <= this.m_lowerTranslation) {
        if (this.m_limitState !== b2Joint.e_atLowerLimit) {
          this.m_limitState = b2Joint.e_atLowerLimit;
          this.m_impulse.z = 0.0;
        }
      } else if (jointTransition >= this.m_upperTranslation) {
        if (this.m_limitState !== b2Joint.e_atUpperLimit) {
          this.m_limitState = b2Joint.e_atUpperLimit;
          this.m_impulse.z = 0.0;
        }
      } else {
        this.m_limitState = b2Joint.e_inactiveLimit;
        this.m_impulse.z = 0.0;
      }
    } else {
      this.m_limitState = b2Joint.e_inactiveLimit;
    }
    if (this.m_enableMotor === false) {
      this.m_motorImpulse = 0.0;
    }
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_motorImpulse *= step.dtRatio;
      PX = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x;
      PY = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y;
      L1 = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1;
      L2 = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a2;
      bA.m_linearVelocity.x -= this.m_invMassA * PX;
      bA.m_linearVelocity.y -= this.m_invMassA * PY;
      bA.m_angularVelocity -= this.m_invIA * L1;
      bB.m_linearVelocity.x += this.m_invMassB * PX;
      bB.m_linearVelocity.y += this.m_invMassB * PY;
      bB.m_angularVelocity += this.m_invIB * L2;
    } else {
      this.m_impulse.SetZero();
      this.m_motorImpulse = 0.0;
    }
  };

  b2PrismaticJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, Cdot1X, Cdot1Y, Cdot2, L1, L2, PX, PY, bA, bB, bX, bY, df, df2, f1, f2r, impulse, maxImpulse, oldImpulse, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    v1 = bA.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    v2 = bB.m_linearVelocity;
    w2 = bB.m_angularVelocity;
    PX = 0;
    PY = 0;
    L1 = 0;
    L2 = 0;
    if (this.m_enableMotor && this.m_limitState !== b2Joint.e_equalLimits) {
      Cdot = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      impulse = this.m_motorMass * (this.m_motorSpeed - Cdot);
      oldImpulse = this.m_motorImpulse;
      maxImpulse = step.dt * this.m_maxMotorForce;
      this.m_motorImpulse = b2Math.Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);
      impulse = this.m_motorImpulse - oldImpulse;
      PX = impulse * this.m_axis.x;
      PY = impulse * this.m_axis.y;
      L1 = impulse * this.m_a1;
      L2 = impulse * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    Cdot1X = this.m_perp.x * (v2.x - v1.x) + this.m_perp.y * (v2.y - v1.y) + this.m_s2 * w2 - this.m_s1 * w1;
    Cdot1Y = w2 - w1;
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      Cdot2 = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      f1 = this.m_impulse.Copy();
      df = this.m_K.Solve33(new b2Vec3(), -Cdot1X, -Cdot1Y, -Cdot2);
      this.m_impulse.Add(df);
      if (this.m_limitState === b2Joint.e_atLowerLimit) {
        this.m_impulse.z = b2Math.Max(this.m_impulse.z, 0.0);
      } else {
        if (this.m_limitState === b2Joint.e_atUpperLimit) {
          this.m_impulse.z = b2Math.Min(this.m_impulse.z, 0.0);
        }
      }
      bX = (-Cdot1X) - (this.m_impulse.z - f1.z) * this.m_K.col3.x;
      bY = (-Cdot1Y) - (this.m_impulse.z - f1.z) * this.m_K.col3.y;
      f2r = this.m_K.Solve22(new b2Vec2(), bX, bY);
      f2r.x += f1.x;
      f2r.y += f1.y;
      this.m_impulse.x = f2r.x;
      this.m_impulse.y = f2r.y;
      df.x = this.m_impulse.x - f1.x;
      df.y = this.m_impulse.y - f1.y;
      df.z = this.m_impulse.z - f1.z;
      PX = df.x * this.m_perp.x + df.z * this.m_axis.x;
      PY = df.x * this.m_perp.y + df.z * this.m_axis.y;
      L1 = df.x * this.m_s1 + df.y + df.z * this.m_a1;
      L2 = df.x * this.m_s2 + df.y + df.z * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    } else {
      df2 = this.m_K.Solve22(new b2Vec2(), -Cdot1X, -Cdot1Y);
      this.m_impulse.x += df2.x;
      this.m_impulse.y += df2.y;
      PX = df2.x * this.m_perp.x;
      PY = df2.x * this.m_perp.y;
      L1 = df2.x * this.m_s1 + df2.y;
      L2 = df2.x * this.m_s2 + df2.y;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    bA.m_linearVelocity.SetV(v1);
    bA.m_angularVelocity = w1;
    bB.m_linearVelocity.SetV(v2);
    bB.m_angularVelocity = w2;
  };

  b2PrismaticJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C1X, C1Y, C2, L1, L2, PX, PY, R1, R2, a1, a2, active, angularError, bA, bB, c1, c2, dX, dY, i1, i2, impulse, impulse1, k11, k12, k22, limitC, linearError, m1, m2, oldLimitImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, translation;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    limitC = 0;
    oldLimitImpulse = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    c1 = bA.m_sweep.c;
    a1 = bA.m_sweep.a;
    c2 = bB.m_sweep.c;
    a2 = bB.m_sweep.a;
    tMat = void 0;
    tX = 0;
    m1 = 0;
    m2 = 0;
    i1 = 0;
    i2 = 0;
    linearError = 0.0;
    angularError = 0.0;
    active = false;
    C2 = 0.0;
    R1 = b2Mat22.FromAngle(a1);
    R2 = b2Mat22.FromAngle(a2);
    tMat = R1;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = R2;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = c2.x + r2X - c1.x - r1X;
    dY = c2.y + r2Y - c1.y - r1Y;
    if (this.m_enableLimit) {
      this.m_axis = b2Math.MulMV(R1, this.m_localXAxis1);
      this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
      this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
      translation = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        C2 = b2Math.Clamp(translation, -b2Settings.b2_maxLinearCorrection, b2Settings.b2_maxLinearCorrection);
        linearError = b2Math.Abs(translation);
        active = true;
      } else if (translation <= this.m_lowerTranslation) {
        C2 = b2Math.Clamp(translation - this.m_lowerTranslation + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
        linearError = this.m_lowerTranslation - translation;
        active = true;
      } else if (translation >= this.m_upperTranslation) {
        C2 = b2Math.Clamp(translation - this.m_upperTranslation + b2Settings.b2_linearSlop, 0.0, b2Settings.b2_maxLinearCorrection);
        linearError = translation - this.m_upperTranslation;
        active = true;
      }
    }
    this.m_perp = b2Math.MulMV(R1, this.m_localYAxis1);
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    impulse = new b2Vec3();
    C1X = this.m_perp.x * dX + this.m_perp.y * dY;
    C1Y = a2 - a1 - this.m_refAngle;
    linearError = b2Math.Max(linearError, b2Math.Abs(C1X));
    angularError = b2Math.Abs(C1Y);
    if (active) {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      this.m_K.col1.y = i1 * this.m_s1 + i2 * this.m_s2;
      this.m_K.col1.z = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
      this.m_K.col2.x = this.m_K.col1.y;
      this.m_K.col2.y = i1 + i2;
      this.m_K.col2.z = i1 * this.m_a1 + i2 * this.m_a2;
      this.m_K.col3.x = this.m_K.col1.z;
      this.m_K.col3.y = this.m_K.col2.z;
      this.m_K.col3.z = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
      this.m_K.Solve33(impulse, -C1X, -C1Y, -C2);
    } else {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      k11 = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      k12 = i1 * this.m_s1 + i2 * this.m_s2;
      k22 = i1 + i2;
      this.m_K.col1.Set(k11, k12, 0.0);
      this.m_K.col2.Set(k12, k22, 0.0);
      impulse1 = this.m_K.Solve22(new b2Vec2(), -C1X, -C1Y);
      impulse.x = impulse1.x;
      impulse.y = impulse1.y;
      impulse.z = 0.0;
    }
    PX = impulse.x * this.m_perp.x + impulse.z * this.m_axis.x;
    PY = impulse.x * this.m_perp.y + impulse.z * this.m_axis.y;
    L1 = impulse.x * this.m_s1 + impulse.y + impulse.z * this.m_a1;
    L2 = impulse.x * this.m_s2 + impulse.y + impulse.z * this.m_a2;
    c1.x -= this.m_invMassA * PX;
    c1.y -= this.m_invMassA * PY;
    a1 -= this.m_invIA * L1;
    c2.x += this.m_invMassB * PX;
    c2.y += this.m_invMassB * PY;
    a2 += this.m_invIB * L2;
    bA.m_sweep.a = a1;
    bB.m_sweep.a = a2;
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return linearError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2PrismaticJoint;

})(b2Joint);

//# sourceMappingURL=b2PrismaticJoint.js.map

},{"../../index":103}],96:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2PrismaticJointDef = (function(_super) {
  __extends(b2PrismaticJointDef, _super);

  b2PrismaticJointDef.prototype.type = b2Joint.e_prismaticJoint;

  b2PrismaticJointDef.prototype.localAnchorA = null;

  b2PrismaticJointDef.prototype.localAnchorB = null;

  b2PrismaticJointDef.prototype.localAxisA = null;

  b2PrismaticJointDef.prototype.referenceAngle = 0.0;

  b2PrismaticJointDef.prototype.enableLimit = false;

  b2PrismaticJointDef.prototype.lowerTranslation = 0.0;

  b2PrismaticJointDef.prototype.upperTranslation = 0.0;

  b2PrismaticJointDef.prototype.enableMotor = false;

  b2PrismaticJointDef.prototype.maxMotorForce = 0.0;

  b2PrismaticJointDef.prototype.motorSpeed = 0.0;

  function b2PrismaticJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.localAxisA = new b2Vec2();
    this.type = b2Joint.e_prismaticJoint;
    this.localAxisA.Set(1.0, 0.0);
    return;
  }

  b2PrismaticJointDef.prototype.Initialize = function(bA, bB, anchor, axis) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA = this.bodyA.GetLocalPoint(anchor);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchor);
    this.localAxisA = this.bodyA.GetLocalVector(axis);
    this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
  };

  return b2PrismaticJointDef;

})(b2JointDef);

//# sourceMappingURL=b2PrismaticJointDef.js.map

},{"../../index":103}],97:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Math, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Math = Box2D.Common.Math.b2Math;

Box2D.Dynamics.Joints.b2PulleyJoint = (function(_super) {
  __extends(b2PulleyJoint, _super);

  b2PulleyJoint.b2_minPulleyLength = 2.0;

  b2PulleyJoint.prototype.m_localXAxis1 = null;

  b2PulleyJoint.prototype.m_localYAxis1 = null;

  b2PulleyJoint.prototype.m_u1 = null;

  b2PulleyJoint.prototype.m_u2 = null;

  b2PulleyJoint.prototype.m_ground = null;

  b2PulleyJoint.prototype.m_ratio = 0.0;

  b2PulleyJoint.prototype.m_constant = 0.0;

  b2PulleyJoint.prototype.m_maxLength1 = 0.0;

  b2PulleyJoint.prototype.m_maxLength2 = 0.0;

  b2PulleyJoint.prototype.m_impulse = 0.0;

  b2PulleyJoint.prototype.m_limitImpulse1 = 0.0;

  b2PulleyJoint.prototype.m_limitImpulse2 = 0.0;

  function b2PulleyJoint(def) {
    b2PulleyJoint.__super__.constructor.call(this, def);
    this.m_groundAnchor1 = new b2Vec2();
    this.m_groundAnchor2 = new b2Vec2();
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_u1 = new b2Vec2();
    this.m_u2 = new b2Vec2();
    this.m_ground = this.m_bodyA.m_world.m_groundBody;
    this.m_groundAnchor1.x = def.groundAnchorA.x - this.m_ground.m_xf.position.x;
    this.m_groundAnchor1.y = def.groundAnchorA.y - this.m_ground.m_xf.position.y;
    this.m_groundAnchor2.x = def.groundAnchorB.x - this.m_ground.m_xf.position.x;
    this.m_groundAnchor2.y = def.groundAnchorB.y - this.m_ground.m_xf.position.y;
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_ratio = def.ratio;
    this.m_constant = def.lengthA + this.m_ratio * def.lengthB;
    this.m_maxLength1 = b2Math.Min(def.maxLengthA, this.m_constant - this.m_ratio * b2PulleyJoint.b2_minPulleyLength);
    this.m_maxLength2 = b2Math.Min(def.maxLengthB, (this.m_constant - b2PulleyJoint.b2_minPulleyLength) / this.m_ratio);
    this.m_impulse = 0.0;
    this.m_limitImpulse1 = 0.0;
    this.m_limitImpulse2 = 0.0;
    return;
  }

  b2PulleyJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2PulleyJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2PulleyJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse * this.m_u2.x, inv_dt * this.m_impulse * this.m_u2.y);
  };

  b2PulleyJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2PulleyJoint.prototype.GetGroundAnchorA = function() {
    var a;
    a = this.m_ground.m_xf.position.Copy();
    a.Add(this.m_groundAnchor1);
    return a;
  };

  b2PulleyJoint.prototype.GetGroundAnchorB = function() {
    var a;
    a = this.m_ground.m_xf.position.Copy();
    a.Add(this.m_groundAnchor2);
    return a;
  };

  b2PulleyJoint.prototype.GetLength1 = function() {
    var dX, dY, p, sX, sY;
    p = this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
    sX = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x;
    sY = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y;
    dX = p.x - sX;
    dY = p.y - sY;
    return Math.sqrt(dX * dX + dY * dY);
  };

  b2PulleyJoint.prototype.GetLength2 = function() {
    var dX, dY, p, sX, sY;
    p = this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
    sX = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x;
    sY = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
    dX = p.x - sX;
    dY = p.y - sY;
    return Math.sqrt(dX * dX + dY * dY);
  };

  b2PulleyJoint.prototype.GetRatio = function() {
    return this.m_ratio;
  };

  b2PulleyJoint.prototype.InitVelocityConstraints = function(step) {
    var C, P1X, P1Y, P2X, P2Y, bA, bB, cr1u1, cr2u2, length1, length2, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, s1X, s1Y, s2X, s2Y, tMat, tX;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    p1X = bA.m_sweep.c.x + r1X;
    p1Y = bA.m_sweep.c.y + r1Y;
    p2X = bB.m_sweep.c.x + r2X;
    p2Y = bB.m_sweep.c.y + r2Y;
    s1X = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x;
    s1Y = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y;
    s2X = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x;
    s2Y = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
    this.m_u1.Set(p1X - s1X, p1Y - s1Y);
    this.m_u2.Set(p2X - s2X, p2Y - s2Y);
    length1 = this.m_u1.Length();
    length2 = this.m_u2.Length();
    if (length1 > b2Settings.b2_linearSlop) {
      this.m_u1.Multiply(1.0 / length1);
    } else {
      this.m_u1.SetZero();
    }
    if (length2 > b2Settings.b2_linearSlop) {
      this.m_u2.Multiply(1.0 / length2);
    } else {
      this.m_u2.SetZero();
    }
    C = this.m_constant - length1 - this.m_ratio * length2;
    if (C > 0.0) {
      this.m_state = b2Joint.e_inactiveLimit;
      this.m_impulse = 0.0;
    } else {
      this.m_state = b2Joint.e_atUpperLimit;
    }
    if (length1 < this.m_maxLength1) {
      this.m_limitState1 = b2Joint.e_inactiveLimit;
      this.m_limitImpulse1 = 0.0;
    } else {
      this.m_limitState1 = b2Joint.e_atUpperLimit;
    }
    if (length2 < this.m_maxLength2) {
      this.m_limitState2 = b2Joint.e_inactiveLimit;
      this.m_limitImpulse2 = 0.0;
    } else {
      this.m_limitState2 = b2Joint.e_atUpperLimit;
    }
    cr1u1 = r1X * this.m_u1.y - r1Y * this.m_u1.x;
    cr2u2 = r2X * this.m_u2.y - r2Y * this.m_u2.x;
    this.m_limitMass1 = bA.m_invMass + bA.m_invI * cr1u1 * cr1u1;
    this.m_limitMass2 = bB.m_invMass + bB.m_invI * cr2u2 * cr2u2;
    this.m_pulleyMass = this.m_limitMass1 + this.m_ratio * this.m_ratio * this.m_limitMass2;
    this.m_limitMass1 = 1.0 / this.m_limitMass1;
    this.m_limitMass2 = 1.0 / this.m_limitMass2;
    this.m_pulleyMass = 1.0 / this.m_pulleyMass;
    if (step.warmStarting) {
      this.m_impulse *= step.dtRatio;
      this.m_limitImpulse1 *= step.dtRatio;
      this.m_limitImpulse2 *= step.dtRatio;
      P1X = ((-this.m_impulse) - this.m_limitImpulse1) * this.m_u1.x;
      P1Y = ((-this.m_impulse) - this.m_limitImpulse1) * this.m_u1.y;
      P2X = ((-this.m_ratio * this.m_impulse) - this.m_limitImpulse2) * this.m_u2.x;
      P2Y = ((-this.m_ratio * this.m_impulse) - this.m_limitImpulse2) * this.m_u2.y;
      bA.m_linearVelocity.x += bA.m_invMass * P1X;
      bA.m_linearVelocity.y += bA.m_invMass * P1Y;
      bA.m_angularVelocity += bA.m_invI * (r1X * P1Y - r1Y * P1X);
      bB.m_linearVelocity.x += bB.m_invMass * P2X;
      bB.m_linearVelocity.y += bB.m_invMass * P2Y;
      bB.m_angularVelocity += bB.m_invI * (r2X * P2Y - r2Y * P2X);
    } else {
      this.m_impulse = 0.0;
      this.m_limitImpulse1 = 0.0;
      this.m_limitImpulse2 = 0.0;
    }
  };

  b2PulleyJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, P1X, P1Y, P2X, P2Y, bA, bB, impulse, oldImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, v1X, v1Y, v2X, v2Y;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    v1X = 0;
    v1Y = 0;
    v2X = 0;
    v2Y = 0;
    P1X = 0;
    P1Y = 0;
    P2X = 0;
    P2Y = 0;
    Cdot = 0;
    impulse = 0;
    oldImpulse = 0;
    if (this.m_state === b2Joint.e_atUpperLimit) {
      v1X = bA.m_linearVelocity.x + (-bA.m_angularVelocity * r1Y);
      v1Y = bA.m_linearVelocity.y + (bA.m_angularVelocity * r1X);
      v2X = bB.m_linearVelocity.x + (-bB.m_angularVelocity * r2Y);
      v2Y = bB.m_linearVelocity.y + (bB.m_angularVelocity * r2X);
      Cdot = (-(this.m_u1.x * v1X + this.m_u1.y * v1Y)) - this.m_ratio * (this.m_u2.x * v2X + this.m_u2.y * v2Y);
      impulse = this.m_pulleyMass * (-Cdot);
      oldImpulse = this.m_impulse;
      this.m_impulse = b2Math.Max(0.0, this.m_impulse + impulse);
      impulse = this.m_impulse - oldImpulse;
      P1X = -impulse * this.m_u1.x;
      P1Y = -impulse * this.m_u1.y;
      P2X = -this.m_ratio * impulse * this.m_u2.x;
      P2Y = -this.m_ratio * impulse * this.m_u2.y;
      bA.m_linearVelocity.x += bA.m_invMass * P1X;
      bA.m_linearVelocity.y += bA.m_invMass * P1Y;
      bA.m_angularVelocity += bA.m_invI * (r1X * P1Y - r1Y * P1X);
      bB.m_linearVelocity.x += bB.m_invMass * P2X;
      bB.m_linearVelocity.y += bB.m_invMass * P2Y;
      bB.m_angularVelocity += bB.m_invI * (r2X * P2Y - r2Y * P2X);
    }
    if (this.m_limitState1 === b2Joint.e_atUpperLimit) {
      v1X = bA.m_linearVelocity.x + (-bA.m_angularVelocity * r1Y);
      v1Y = bA.m_linearVelocity.y + (bA.m_angularVelocity * r1X);
      Cdot = -(this.m_u1.x * v1X + this.m_u1.y * v1Y);
      impulse = -this.m_limitMass1 * Cdot;
      oldImpulse = this.m_limitImpulse1;
      this.m_limitImpulse1 = b2Math.Max(0.0, this.m_limitImpulse1 + impulse);
      impulse = this.m_limitImpulse1 - oldImpulse;
      P1X = -impulse * this.m_u1.x;
      P1Y = -impulse * this.m_u1.y;
      bA.m_linearVelocity.x += bA.m_invMass * P1X;
      bA.m_linearVelocity.y += bA.m_invMass * P1Y;
      bA.m_angularVelocity += bA.m_invI * (r1X * P1Y - r1Y * P1X);
    }
    if (this.m_limitState2 === b2Joint.e_atUpperLimit) {
      v2X = bB.m_linearVelocity.x + (-bB.m_angularVelocity * r2Y);
      v2Y = bB.m_linearVelocity.y + (bB.m_angularVelocity * r2X);
      Cdot = -(this.m_u2.x * v2X + this.m_u2.y * v2Y);
      impulse = -this.m_limitMass2 * Cdot;
      oldImpulse = this.m_limitImpulse2;
      this.m_limitImpulse2 = b2Math.Max(0.0, this.m_limitImpulse2 + impulse);
      impulse = this.m_limitImpulse2 - oldImpulse;
      P2X = -impulse * this.m_u2.x;
      P2Y = -impulse * this.m_u2.y;
      bB.m_linearVelocity.x += bB.m_invMass * P2X;
      bB.m_linearVelocity.y += bB.m_invMass * P2Y;
      bB.m_angularVelocity += bB.m_invI * (r2X * P2Y - r2Y * P2X);
    }
  };

  b2PulleyJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, bA, bB, impulse, length1, length2, linearError, oldImpulse, oldLimitPositionImpulse, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, s1X, s1Y, s2X, s2Y, tMat, tX;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    s1X = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x;
    s1Y = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y;
    s2X = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x;
    s2Y = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
    r1X = 0;
    r1Y = 0;
    r2X = 0;
    r2Y = 0;
    p1X = 0;
    p1Y = 0;
    p2X = 0;
    p2Y = 0;
    length1 = 0;
    length2 = 0;
    C = 0;
    impulse = 0;
    oldImpulse = 0;
    oldLimitPositionImpulse = 0;
    tX = 0;
    linearError = 0.0;
    if (this.m_state === b2Joint.e_atUpperLimit) {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      p1X = bA.m_sweep.c.x + r1X;
      p1Y = bA.m_sweep.c.y + r1Y;
      p2X = bB.m_sweep.c.x + r2X;
      p2Y = bB.m_sweep.c.y + r2Y;
      this.m_u1.Set(p1X - s1X, p1Y - s1Y);
      this.m_u2.Set(p2X - s2X, p2Y - s2Y);
      length1 = this.m_u1.Length();
      length2 = this.m_u2.Length();
      if (length1 > b2Settings.b2_linearSlop) {
        this.m_u1.Multiply(1.0 / length1);
      } else {
        this.m_u1.SetZero();
      }
      if (length2 > b2Settings.b2_linearSlop) {
        this.m_u2.Multiply(1.0 / length2);
      } else {
        this.m_u2.SetZero();
      }
      C = this.m_constant - length1 - this.m_ratio * length2;
      linearError = b2Math.Max(linearError, -C);
      C = b2Math.Clamp(C + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
      impulse = -this.m_pulleyMass * C;
      p1X = -impulse * this.m_u1.x;
      p1Y = -impulse * this.m_u1.y;
      p2X = -this.m_ratio * impulse * this.m_u2.x;
      p2Y = -this.m_ratio * impulse * this.m_u2.y;
      bA.m_sweep.c.x += bA.m_invMass * p1X;
      bA.m_sweep.c.y += bA.m_invMass * p1Y;
      bA.m_sweep.a += bA.m_invI * (r1X * p1Y - r1Y * p1X);
      bB.m_sweep.c.x += bB.m_invMass * p2X;
      bB.m_sweep.c.y += bB.m_invMass * p2Y;
      bB.m_sweep.a += bB.m_invI * (r2X * p2Y - r2Y * p2X);
      bA.SynchronizeTransform();
      bB.SynchronizeTransform();
    }
    if (this.m_limitState1 === b2Joint.e_atUpperLimit) {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      p1X = bA.m_sweep.c.x + r1X;
      p1Y = bA.m_sweep.c.y + r1Y;
      this.m_u1.Set(p1X - s1X, p1Y - s1Y);
      length1 = this.m_u1.Length();
      if (length1 > b2Settings.b2_linearSlop) {
        this.m_u1.x *= 1.0 / length1;
        this.m_u1.y *= 1.0 / length1;
      } else {
        this.m_u1.SetZero();
      }
      C = this.m_maxLength1 - length1;
      linearError = b2Math.Max(linearError, -C);
      C = b2Math.Clamp(C + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
      impulse = -this.m_limitMass1 * C;
      p1X = -impulse * this.m_u1.x;
      p1Y = -impulse * this.m_u1.y;
      bA.m_sweep.c.x += bA.m_invMass * p1X;
      bA.m_sweep.c.y += bA.m_invMass * p1Y;
      bA.m_sweep.a += bA.m_invI * (r1X * p1Y - r1Y * p1X);
      bA.SynchronizeTransform();
    }
    if (this.m_limitState2 === b2Joint.e_atUpperLimit) {
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      p2X = bB.m_sweep.c.x + r2X;
      p2Y = bB.m_sweep.c.y + r2Y;
      this.m_u2.Set(p2X - s2X, p2Y - s2Y);
      length2 = this.m_u2.Length();
      if (length2 > b2Settings.b2_linearSlop) {
        this.m_u2.x *= 1.0 / length2;
        this.m_u2.y *= 1.0 / length2;
      } else {
        this.m_u2.SetZero();
      }
      C = this.m_maxLength2 - length2;
      linearError = b2Math.Max(linearError, -C);
      C = b2Math.Clamp(C + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
      impulse = -this.m_limitMass2 * C;
      p2X = -impulse * this.m_u2.x;
      p2Y = -impulse * this.m_u2.y;
      bB.m_sweep.c.x += bB.m_invMass * p2X;
      bB.m_sweep.c.y += bB.m_invMass * p2Y;
      bB.m_sweep.a += bB.m_invI * (r2X * p2Y - r2Y * p2X);
      bB.SynchronizeTransform();
    }
    return linearError < b2Settings.b2_linearSlop;
  };

  return b2PulleyJoint;

})(b2Joint);

//# sourceMappingURL=b2PulleyJoint.js.map

},{"../../index":103}],98:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2PulleyJointDef = (function(_super) {
  __extends(b2PulleyJointDef, _super);

  b2PulleyJointDef.prototype.type = b2Joint.e_pulleyJoint;

  b2PulleyJointDef.prototype.groundAnchorA = null;

  b2PulleyJointDef.prototype.groundAnchorB = null;

  b2PulleyJointDef.prototype.localAnchorA = null;

  b2PulleyJointDef.prototype.localAnchorB = null;

  b2PulleyJointDef.prototype.lengthA = 0.0;

  b2PulleyJointDef.prototype.maxLengthA = 0.0;

  b2PulleyJointDef.prototype.lengthB = 0.0;

  b2PulleyJointDef.prototype.maxLengthB = 0.0;

  b2PulleyJointDef.prototype.ratio = 1.0;

  b2PulleyJointDef.prototype.collideConnected = true;

  function b2PulleyJointDef() {
    b2PulleyJointDef.__super__.constructor.apply(this, arguments);
    this.groundAnchorA = new b2Vec2();
    this.groundAnchorB = new b2Vec2();
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.groundAnchorA.Set(-1.0, 1.0);
    this.groundAnchorB.Set(1.0, 1.0);
    this.localAnchorA.Set(-1.0, 0.0);
    this.localAnchorB.Set(1.0, 0.0);
    return;
  }

  b2PulleyJointDef.prototype.Initialize = function(bA, bB, gaA, gaB, anchorA, anchorB, r) {
    var C, d1X, d1Y, d2X, d2Y;
    if (r === void 0) {
      r = 0;
    }
    this.bodyA = bA;
    this.bodyB = bB;
    this.groundAnchorA.SetV(gaA);
    this.groundAnchorB.SetV(gaB);
    this.localAnchorA = this.bodyA.GetLocalPoint(anchorA);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchorB);
    d1X = anchorA.x - gaA.x;
    d1Y = anchorA.y - gaA.y;
    this.lengthA = Math.sqrt(d1X * d1X + d1Y * d1Y);
    d2X = anchorB.x - gaB.x;
    d2Y = anchorB.y - gaB.y;
    this.lengthB = Math.sqrt(d2X * d2X + d2Y * d2Y);
    this.ratio = r;
    C = this.lengthA + this.ratio * this.lengthB;
    this.maxLengthA = C - this.ratio * b2PulleyJoint.b2_minPulleyLength;
    this.maxLengthB = (C - b2PulleyJoint.b2_minPulleyLength) / this.ratio;
  };

  return b2PulleyJointDef;

})(b2JointDef);

//# sourceMappingURL=b2PulleyJointDef.js.map

},{"../../index":103}],99:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Math, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Math = Box2D.Common.Math.b2Math;

Box2D.Dynamics.Joints.b2RevoluteJoint = (function(_super) {
  __extends(b2RevoluteJoint, _super);

  b2RevoluteJoint.tImpulse = new b2Vec2();

  b2RevoluteJoint.prototype.K = null;

  b2RevoluteJoint.prototype.K1 = null;

  b2RevoluteJoint.prototype.K2 = null;

  b2RevoluteJoint.prototype.K3 = null;

  b2RevoluteJoint.prototype.impulse2 = null;

  b2RevoluteJoint.prototype.impulse3 = null;

  b2RevoluteJoint.prototype.reduced = null;

  b2RevoluteJoint.prototype.m_impulse = null;

  b2RevoluteJoint.prototype.m_mass = 0.0;

  b2RevoluteJoint.prototype.m_referenceAngle = 0.0;

  b2RevoluteJoint.prototype.m_motorImpulse = 0.0;

  b2RevoluteJoint.prototype.m_lowerAngle = 0.0;

  b2RevoluteJoint.prototype.m_upperAngle = 0.0;

  b2RevoluteJoint.prototype.m_maxMotorTorque = 0.0;

  b2RevoluteJoint.prototype.m_motorSpeed = 0.0;

  b2RevoluteJoint.prototype.m_enableLimit = 0.0;

  b2RevoluteJoint.prototype.m_enableMotor = false;

  b2RevoluteJoint.prototype.m_limitState = b2Joint.e_inactiveLimit;

  function b2RevoluteJoint(def) {
    b2RevoluteJoint.__super__.constructor.call(this, def);
    this.K = new b2Mat22();
    this.K1 = new b2Mat22();
    this.K2 = new b2Mat22();
    this.K3 = new b2Mat22();
    this.impulse3 = new b2Vec3();
    this.impulse2 = new b2Vec2();
    this.reduced = new b2Vec2();
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_impulse = new b2Vec3();
    this.m_mass = new b2Mat33();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_referenceAngle = def.referenceAngle;
    this.m_impulse.SetZero();
    this.m_lowerAngle = def.lowerAngle;
    this.m_upperAngle = def.upperAngle;
    this.m_maxMotorTorque = def.maxMotorTorque;
    this.m_motorSpeed = def.motorSpeed;
    this.m_enableLimit = def.enableLimit;
    this.m_enableMotor = def.enableMotor;
    return;
  }

  b2RevoluteJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2RevoluteJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2RevoluteJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse.x, inv_dt * this.m_impulse.y);
  };

  b2RevoluteJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.z;
  };

  b2RevoluteJoint.prototype.GetJointAngle = function() {
    return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a - this.m_referenceAngle;
  };

  b2RevoluteJoint.prototype.GetJointSpeed = function() {
    return this.m_bodyB.m_angularVelocity - this.m_bodyA.m_angularVelocity;
  };

  b2RevoluteJoint.prototype.IsLimitEnabled = function() {
    return this.m_enableLimit;
  };

  b2RevoluteJoint.prototype.EnableLimit = function(flag) {
    this.m_enableLimit = flag;
  };

  b2RevoluteJoint.prototype.GetLowerLimit = function() {
    return this.m_lowerAngle;
  };

  b2RevoluteJoint.prototype.GetUpperLimit = function() {
    return this.m_upperAngle;
  };

  b2RevoluteJoint.prototype.SetLimits = function(lower, upper) {
    if (lower === void 0) {
      lower = 0;
    }
    if (upper === void 0) {
      upper = 0;
    }
    this.m_lowerAngle = lower;
    this.m_upperAngle = upper;
  };

  b2RevoluteJoint.prototype.IsMotorEnabled = function() {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    return this.m_enableMotor;
  };

  b2RevoluteJoint.prototype.EnableMotor = function(flag) {
    this.m_enableMotor = flag;
  };

  b2RevoluteJoint.prototype.SetMotorSpeed = function(speed) {
    if (speed === void 0) {
      speed = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_motorSpeed = speed;
  };

  b2RevoluteJoint.prototype.GetMotorSpeed = function() {
    return this.m_motorSpeed;
  };

  b2RevoluteJoint.prototype.SetMaxMotorTorque = function(torque) {
    if (torque === void 0) {
      torque = 0;
    }
    this.m_maxMotorTorque = torque;
  };

  b2RevoluteJoint.prototype.GetMotorTorque = function() {
    return this.m_maxMotorTorque;
  };

  b2RevoluteJoint.prototype.InitVelocityConstraints = function(step) {
    var PX, PY, bA, bB, i1, i2, jointAngle, m1, m2, r1X, r1Y, r2X, r2Y, tMat, tX;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;

    /**
    todo: fix this
     */
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    m1 = bA.m_invMass;
    m2 = bB.m_invMass;
    i1 = bA.m_invI;
    i2 = bB.m_invI;
    this.m_mass.col1.x = m1 + m2 + r1Y * r1Y * i1 + r2Y * r2Y * i2;
    this.m_mass.col2.x = (-r1Y * r1X * i1) - r2Y * r2X * i2;
    this.m_mass.col3.x = (-r1Y * i1) - r2Y * i2;
    this.m_mass.col1.y = this.m_mass.col2.x;
    this.m_mass.col2.y = m1 + m2 + r1X * r1X * i1 + r2X * r2X * i2;
    this.m_mass.col3.y = r1X * i1 + r2X * i2;
    this.m_mass.col1.z = this.m_mass.col3.x;
    this.m_mass.col2.z = this.m_mass.col3.y;
    this.m_mass.col3.z = i1 + i2;
    this.m_motorMass = 1.0 / (i1 + i2);
    if (this.m_enableMotor === false) {
      this.m_motorImpulse = 0.0;
    }
    if (this.m_enableLimit) {
      jointAngle = bB.m_sweep.a - bA.m_sweep.a - this.m_referenceAngle;
      if (b2Math.Abs(this.m_upperAngle - this.m_lowerAngle) < 2.0 * b2Settings.b2_angularSlop) {
        this.m_limitState = b2Joint.e_equalLimits;
      } else if (jointAngle <= this.m_lowerAngle) {
        if (this.m_limitState !== b2Joint.e_atLowerLimit) {
          this.m_impulse.z = 0.0;
        }
        this.m_limitState = b2Joint.e_atLowerLimit;
      } else if (jointAngle >= this.m_upperAngle) {
        if (this.m_limitState !== b2Joint.e_atUpperLimit) {
          this.m_impulse.z = 0.0;
        }
        this.m_limitState = b2Joint.e_atUpperLimit;
      } else {
        this.m_limitState = b2Joint.e_inactiveLimit;
        this.m_impulse.z = 0.0;
      }
    } else {
      this.m_limitState = b2Joint.e_inactiveLimit;
    }
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_motorImpulse *= step.dtRatio;
      PX = this.m_impulse.x;
      PY = this.m_impulse.y;
      bA.m_linearVelocity.x -= m1 * PX;
      bA.m_linearVelocity.y -= m1 * PY;
      bA.m_angularVelocity -= i1 * ((r1X * PY - r1Y * PX) + this.m_motorImpulse + this.m_impulse.z);
      bB.m_linearVelocity.x += m2 * PX;
      bB.m_linearVelocity.y += m2 * PY;
      bB.m_angularVelocity += i2 * ((r2X * PY - r2Y * PX) + this.m_motorImpulse + this.m_impulse.z);
    } else {
      this.m_impulse.SetZero();
      this.m_motorImpulse = 0.0;
    }
  };

  b2RevoluteJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, Cdot1X, Cdot1Y, Cdot2, CdotX, CdotY, bA, bB, i1, i2, impulse, m1, m2, maxImpulse, newImpulse, oldImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    newImpulse = 0;
    r1X = 0;
    r1Y = 0;
    r2X = 0;
    r2Y = 0;
    v1 = bA.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    v2 = bB.m_linearVelocity;
    w2 = bB.m_angularVelocity;
    m1 = bA.m_invMass;
    m2 = bB.m_invMass;
    i1 = bA.m_invI;
    i2 = bB.m_invI;
    if (this.m_enableMotor && this.m_limitState !== b2Joint.e_equalLimits) {
      Cdot = w2 - w1 - this.m_motorSpeed;
      impulse = this.m_motorMass * (-Cdot);
      oldImpulse = this.m_motorImpulse;
      maxImpulse = step.dt * this.m_maxMotorTorque;
      this.m_motorImpulse = b2Math.Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);
      impulse = this.m_motorImpulse - oldImpulse;
      w1 -= i1 * impulse;
      w2 += i2 * impulse;
    }
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      Cdot1X = v2.x + (-w2 * r2Y) - v1.x - (-w1 * r1Y);
      Cdot1Y = v2.y + (w2 * r2X) - v1.y - (w1 * r1X);
      Cdot2 = w2 - w1;
      this.m_mass.Solve33(this.impulse3, -Cdot1X, -Cdot1Y, -Cdot2);
      if (this.m_limitState === b2Joint.e_equalLimits) {
        this.m_impulse.Add(this.impulse3);
      } else if (this.m_limitState === b2Joint.e_atLowerLimit) {
        newImpulse = this.m_impulse.z + this.impulse3.z;
        if (newImpulse < 0.0) {
          this.m_mass.Solve22(this.reduced, -Cdot1X, -Cdot1Y);
          this.impulse3.x = this.reduced.x;
          this.impulse3.y = this.reduced.y;
          this.impulse3.z = -this.m_impulse.z;
          this.m_impulse.x += this.reduced.x;
          this.m_impulse.y += this.reduced.y;
          this.m_impulse.z = 0.0;
        }
      } else if (this.m_limitState === b2Joint.e_atUpperLimit) {
        newImpulse = this.m_impulse.z + this.impulse3.z;
        if (newImpulse > 0.0) {
          this.m_mass.Solve22(this.reduced, -Cdot1X, -Cdot1Y);
          this.impulse3.x = this.reduced.x;
          this.impulse3.y = this.reduced.y;
          this.impulse3.z = -this.m_impulse.z;
          this.m_impulse.x += this.reduced.x;
          this.m_impulse.y += this.reduced.y;
          this.m_impulse.z = 0.0;
        }
      }
      v1.x -= m1 * this.impulse3.x;
      v1.y -= m1 * this.impulse3.y;
      w1 -= i1 * (r1X * this.impulse3.y - r1Y * this.impulse3.x + this.impulse3.z);
      v2.x += m2 * this.impulse3.x;
      v2.y += m2 * this.impulse3.y;
      w2 += i2 * (r2X * this.impulse3.y - r2Y * this.impulse3.x + this.impulse3.z);
    } else {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      CdotX = v2.x + (-w2 * r2Y) - v1.x - (-w1 * r1Y);
      CdotY = v2.y + (w2 * r2X) - v1.y - (w1 * r1X);
      this.m_mass.Solve22(this.impulse2, -CdotX, -CdotY);
      this.m_impulse.x += this.impulse2.x;
      this.m_impulse.y += this.impulse2.y;
      v1.x -= m1 * this.impulse2.x;
      v1.y -= m1 * this.impulse2.y;
      w1 -= i1 * (r1X * this.impulse2.y - r1Y * this.impulse2.x);
      v2.x += m2 * this.impulse2.x;
      v2.y += m2 * this.impulse2.y;
      w2 += i2 * (r2X * this.impulse2.y - r2Y * this.impulse2.x);
    }
    bA.m_linearVelocity.SetV(v1);
    bA.m_angularVelocity = w1;
    bB.m_linearVelocity.SetV(v2);
    bB.m_angularVelocity = w2;
  };

  b2RevoluteJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, CLength, CLengthSquared, CX, CY, angle, angularError, bA, bB, impulseX, impulseY, invI1, invI2, invMass1, invMass2, k, k_allowedStretch, k_beta, limitImpulse, m, oldLimitImpulse, positionError, r1X, r1Y, r2X, r2Y, tMat, tX, uX, uY;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    oldLimitImpulse = 0;
    C = 0;
    tMat = void 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    angularError = 0.0;
    positionError = 0.0;
    tX = 0;
    impulseX = 0;
    impulseY = 0;
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      angle = bB.m_sweep.a - bA.m_sweep.a - this.m_referenceAngle;
      limitImpulse = 0.0;
      if (this.m_limitState === b2Joint.e_equalLimits) {
        C = b2Math.Clamp(angle - this.m_lowerAngle, -b2Settings.b2_maxAngularCorrection, b2Settings.b2_maxAngularCorrection);
        limitImpulse = -this.m_motorMass * C;
        angularError = b2Math.Abs(C);
      } else if (this.m_limitState === b2Joint.e_atLowerLimit) {
        C = angle - this.m_lowerAngle;
        angularError = -C;
        C = b2Math.Clamp(C + b2Settings.b2_angularSlop, -b2Settings.b2_maxAngularCorrection, 0.0);
        limitImpulse = -this.m_motorMass * C;
      } else if (this.m_limitState === b2Joint.e_atUpperLimit) {
        C = angle - this.m_upperAngle;
        angularError = C;
        C = b2Math.Clamp(C - b2Settings.b2_angularSlop, 0.0, b2Settings.b2_maxAngularCorrection);
        limitImpulse = -this.m_motorMass * C;
      }
      bA.m_sweep.a -= bA.m_invI * limitImpulse;
      bB.m_sweep.a += bB.m_invI * limitImpulse;
      bA.SynchronizeTransform();
      bB.SynchronizeTransform();
    }
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    CX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    CY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    CLengthSquared = CX * CX + CY * CY;
    CLength = Math.sqrt(CLengthSquared);
    positionError = CLength;
    invMass1 = bA.m_invMass;
    invMass2 = bB.m_invMass;
    invI1 = bA.m_invI;
    invI2 = bB.m_invI;
    k_allowedStretch = 10.0 * b2Settings.b2_linearSlop;
    if (CLengthSquared > k_allowedStretch * k_allowedStretch) {
      uX = CX / CLength;
      uY = CY / CLength;
      k = invMass1 + invMass2;
      m = 1.0 / k;
      impulseX = m * (-CX);
      impulseY = m * (-CY);
      k_beta = 0.5;
      bA.m_sweep.c.x -= k_beta * invMass1 * impulseX;
      bA.m_sweep.c.y -= k_beta * invMass1 * impulseY;
      bB.m_sweep.c.x += k_beta * invMass2 * impulseX;
      bB.m_sweep.c.y += k_beta * invMass2 * impulseY;
      CX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
      CY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    }
    this.K1.col1.x = invMass1 + invMass2;
    this.K1.col2.x = 0.0;
    this.K1.col1.y = 0.0;
    this.K1.col2.y = invMass1 + invMass2;
    this.K2.col1.x = invI1 * r1Y * r1Y;
    this.K2.col2.x = -invI1 * r1X * r1Y;
    this.K2.col1.y = -invI1 * r1X * r1Y;
    this.K2.col2.y = invI1 * r1X * r1X;
    this.K3.col1.x = invI2 * r2Y * r2Y;
    this.K3.col2.x = -invI2 * r2X * r2Y;
    this.K3.col1.y = -invI2 * r2X * r2Y;
    this.K3.col2.y = invI2 * r2X * r2X;
    this.K.SetM(this.K1);
    this.K.AddM(this.K2);
    this.K.AddM(this.K3);
    this.K.Solve(b2RevoluteJoint.tImpulse, -CX, -CY);
    impulseX = b2RevoluteJoint.tImpulse.x;
    impulseY = b2RevoluteJoint.tImpulse.y;
    bA.m_sweep.c.x -= bA.m_invMass * impulseX;
    bA.m_sweep.c.y -= bA.m_invMass * impulseY;
    bA.m_sweep.a -= bA.m_invI * (r1X * impulseY - r1Y * impulseX);
    bB.m_sweep.c.x += bB.m_invMass * impulseX;
    bB.m_sweep.c.y += bB.m_invMass * impulseY;
    bB.m_sweep.a += bB.m_invI * (r2X * impulseY - r2Y * impulseX);
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return positionError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2RevoluteJoint;

})(b2Joint);

//# sourceMappingURL=b2RevoluteJoint.js.map

},{"../../index":103}],100:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2RevoluteJointDef = (function(_super) {
  __extends(b2RevoluteJointDef, _super);

  b2RevoluteJointDef.prototype.type = b2Joint.e_revoluteJoint;

  b2RevoluteJointDef.prototype.localAnchorA = null;

  b2RevoluteJointDef.prototype.localAnchorB = null;

  b2RevoluteJointDef.prototype.referenceAngle = 0.0;

  b2RevoluteJointDef.prototype.lowerAngle = 0.0;

  b2RevoluteJointDef.prototype.upperAngle = 0.0;

  b2RevoluteJointDef.prototype.maxMotorTorque = 0.0;

  b2RevoluteJointDef.prototype.motorSpeed = 0.0;

  b2RevoluteJointDef.prototype.enableLimit = false;

  b2RevoluteJointDef.prototype.enableMotor = false;

  function b2RevoluteJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.localAnchorA.Set(0.0, 0.0);
    this.localAnchorB.Set(0.0, 0.0);
    return;
  }

  b2RevoluteJointDef.prototype.Initialize = function(bA, bB, anchor) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA = this.bodyA.GetLocalPoint(anchor);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchor);
    this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
  };

  return b2RevoluteJointDef;

})(b2JointDef);

//# sourceMappingURL=b2RevoluteJointDef.js.map

},{"../../index":103}],101:[function(require,module,exports){
var Box2D, b2Joint, b2Mat33, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Mat33 = Box2D.Common.Math.b2Mat33;

b2Joint = Box2D.Dynamics.Joints.b2Joint;

Box2D.Dynamics.Joints.b2WeldJoint = (function(_super) {
  __extends(b2WeldJoint, _super);

  b2WeldJoint.prototype.m_impulse = null;

  b2WeldJoint.prototype.m_mass = null;

  b2WeldJoint.prototype.m_referenceAngle = 0.0;

  function b2WeldJoint(def) {
    b2WeldJoint.__super__.constructor.call(this, def);
    this.m_localAnchorA = new b2Vec2();
    this.m_localAnchorB = new b2Vec2();
    this.m_impulse = new b2Vec3();
    this.m_mass = new b2Mat33();
    this.m_localAnchorA.SetV(def.localAnchorA);
    this.m_localAnchorB.SetV(def.localAnchorB);
    this.m_referenceAngle = def.referenceAngle;
    this.m_impulse.SetZero();
    this.m_mass = new b2Mat33();
    return;
  }

  b2WeldJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchorA);
  };

  b2WeldJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchorB);
  };

  b2WeldJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse.x, inv_dt * this.m_impulse.y);
  };

  b2WeldJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.z;
  };

  b2WeldJoint.prototype.InitVelocityConstraints = function(step) {
    var bA, bB, iA, iB, mA, mB, rAX, rAY, rBX, rBY, tMat, tX;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    this.m_mass.col1.x = mA + mB + rAY * rAY * iA + rBY * rBY * iB;
    this.m_mass.col2.x = (-rAY * rAX * iA) - rBY * rBX * iB;
    this.m_mass.col3.x = (-rAY * iA) - rBY * iB;
    this.m_mass.col1.y = this.m_mass.col2.x;
    this.m_mass.col2.y = mA + mB + rAX * rAX * iA + rBX * rBX * iB;
    this.m_mass.col3.y = rAX * iA + rBX * iB;
    this.m_mass.col1.z = this.m_mass.col3.x;
    this.m_mass.col2.z = this.m_mass.col3.y;
    this.m_mass.col3.z = iA + iB;
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_impulse.z *= step.dtRatio;
      bA.m_linearVelocity.x -= mA * this.m_impulse.x;
      bA.m_linearVelocity.y -= mA * this.m_impulse.y;
      bA.m_angularVelocity -= iA * (rAX * this.m_impulse.y - rAY * this.m_impulse.x + this.m_impulse.z);
      bB.m_linearVelocity.x += mB * this.m_impulse.x;
      bB.m_linearVelocity.y += mB * this.m_impulse.y;
      bB.m_angularVelocity += iB * (rBX * this.m_impulse.y - rBY * this.m_impulse.x + this.m_impulse.z);
    } else {
      this.m_impulse.SetZero();
    }
  };

  b2WeldJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot1X, Cdot1Y, Cdot2, bA, bB, iA, iB, impulse, mA, mB, rAX, rAY, rBX, rBY, tMat, tX, vA, vB, wA, wB;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    vA = bA.m_linearVelocity;
    wA = bA.m_angularVelocity;
    vB = bB.m_linearVelocity;
    wB = bB.m_angularVelocity;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    Cdot1X = vB.x - wB * rBY - vA.x + wA * rAY;
    Cdot1Y = vB.y + wB * rBX - vA.y - wA * rAX;
    Cdot2 = wB - wA;
    impulse = new b2Vec3();
    this.m_mass.Solve33(impulse, -Cdot1X, -Cdot1Y, -Cdot2);
    this.m_impulse.Add(impulse);
    vA.x -= mA * impulse.x;
    vA.y -= mA * impulse.y;
    wA -= iA * (rAX * impulse.y - rAY * impulse.x + impulse.z);
    vB.x += mB * impulse.x;
    vB.y += mB * impulse.y;
    wB += iB * (rBX * impulse.y - rBY * impulse.x + impulse.z);
    bA.m_angularVelocity = wA;
    bB.m_angularVelocity = wB;
  };

  b2WeldJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C1X, C1Y, C2, angularError, bA, bB, iA, iB, impulse, k_allowedStretch, mA, mB, positionError, rAX, rAY, rBX, rBY, tMat, tX;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    C1X = bB.m_sweep.c.x + rBX - bA.m_sweep.c.x - rAX;
    C1Y = bB.m_sweep.c.y + rBY - bA.m_sweep.c.y - rAY;
    C2 = bB.m_sweep.a - bA.m_sweep.a - this.m_referenceAngle;
    k_allowedStretch = 10.0 * b2Settings.b2_linearSlop;
    positionError = Math.sqrt(C1X * C1X + C1Y * C1Y);
    angularError = b2Math.Abs(C2);
    if (positionError > k_allowedStretch) {
      iA *= 1.0;
      iB *= 1.0;
    }
    this.m_mass.col1.x = mA + mB + rAY * rAY * iA + rBY * rBY * iB;
    this.m_mass.col2.x = (-rAY * rAX * iA) - rBY * rBX * iB;
    this.m_mass.col3.x = (-rAY * iA) - rBY * iB;
    this.m_mass.col1.y = this.m_mass.col2.x;
    this.m_mass.col2.y = mA + mB + rAX * rAX * iA + rBX * rBX * iB;
    this.m_mass.col3.y = rAX * iA + rBX * iB;
    this.m_mass.col1.z = this.m_mass.col3.x;
    this.m_mass.col2.z = this.m_mass.col3.y;
    this.m_mass.col3.z = iA + iB;
    impulse = new b2Vec3();
    this.m_mass.Solve33(impulse, -C1X, -C1Y, -C2);
    bA.m_sweep.c.x -= mA * impulse.x;
    bA.m_sweep.c.y -= mA * impulse.y;
    bA.m_sweep.a -= iA * (rAX * impulse.y - rAY * impulse.x + impulse.z);
    bB.m_sweep.c.x += mB * impulse.x;
    bB.m_sweep.c.y += mB * impulse.y;
    bB.m_sweep.a += iB * (rBX * impulse.y - rBY * impulse.x + impulse.z);
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return positionError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2WeldJoint;

})(b2Joint);

//# sourceMappingURL=b2WeldJoint.js.map

},{"../../index":103}],102:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2WeldJointDef = (function(_super) {
  __extends(b2WeldJointDef, _super);

  b2WeldJointDef.prototype.type = b2Joint.e_weldJoint;

  b2WeldJointDef.prototype.referenceAngle = 0.0;

  b2WeldJointDef.prototype.localAnchorA = null;

  b2WeldJointDef.prototype.localAnchorB = null;

  function b2WeldJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    return;
  }

  b2WeldJointDef.prototype.Initialize = function(bA, bB, anchor) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor));
    this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor));
    this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
  };

  return b2WeldJointDef;

})(b2JointDef);

//# sourceMappingURL=b2WeldJointDef.js.map

},{"../../index":103}],103:[function(require,module,exports){

/*
 */
'use strict';
var Box2D;

module.exports = Box2D = (function() {
  function Box2D() {}

  Box2D.parseUInt = function(v) {
    return Math.abs(parseInt(v));
  };

  Box2D.Vector = function(length) {
    var i, tmp;
    if (length == null) {
      length = 0;
    }
    tmp = new Array(length);
    i = 0;
    while (i < length) {
      tmp[i] = 0;
      ++i;
    }
    return tmp;
  };

  Box2D.equals = function(o1, o2) {
    var _ref;
    if (o1 === null) {
      return false;
    }
    if ((o2 instanceof Function) && (o1 instanceof o2)) {
      return true;
    }
    if (((_ref = o1.constructor.__implements) != null ? _ref[o2.name] : void 0)) {
      return true;
    }
    return false;
  };

  Box2D.generateCallback = function(context, cb) {
    return function() {
      cb.apply(context, arguments);
    };
  };

  return Box2D;

})();

Box2D.Common = (function() {
  function Common() {}

  return Common;

})();

Box2D.Common.Math = (function() {
  function Math() {}

  return Math;

})();

require('./common/math/b2Vec2');

require('./common/math/b2Vec3');

require('./common/math/b2Mat22');

require('./common/math/b2Mat33');

require('./common/math/b2Sweep');

require('./common/math/b2Transform');

require('./common/math/b2Math');

require('./common/b2Color');

require('./common/b2Settings');

Box2D.Collision = (function() {
  function Collision() {}

  return Collision;

})();

Box2D.Collision.Shapes = (function() {
  function Shapes() {}

  return Shapes;

})();

require('./collision/shapes/b2Shape');

require('./collision/shapes/b2CircleShape');

require('./collision/shapes/b2PolygonShape');

require('./collision/shapes/b2EdgeChainDef');

require('./collision/shapes/b2EdgeShape');

require('./collision/shapes/b2MassData');

require('./collision/Features');

require('./collision/b2ContactID');

require('./collision/ClipVertex');

require('./collision/b2AABB');

require('./collision/b2SimplexCache');

require('./collision/b2Bound');

require('./collision/b2BoundValues');

require('./collision/b2ManifoldPoint');

require('./collision/b2Manifold');

require('./collision/b2Collision');

require('./collision/b2ContactPoint');

require('./collision/b2SimplexVertex');

require('./collision/b2Simplex');

require('./collision/b2Distance');

require('./collision/b2DistanceInput');

require('./collision/b2DistanceOutput');

require('./collision/b2DistanceProxy');

require('./collision/b2DynamicTreeNode');

require('./collision/b2DynamicTree');

require('./collision/b2DynamicTreePair');

require('./collision/b2DynamicTreeBroadPhase');

require('./collision/b2Point');

require('./collision/b2RayCastInput');

require('./collision/b2RayCastOutput');

require('./collision/b2Segment');

require('./collision/b2SeparationFunction');

require('./collision/b2TimeOfImpact');

require('./collision/b2TOIInput');

require('./collision/b2WorldManifold');

Box2D.Dynamics = (function() {
  function Dynamics() {}

  return Dynamics;

})();

require('./dynamics/b2FilterData');

require('./dynamics/b2TimeStep');

Box2D.Dynamics.Contacts = (function() {
  function Contacts() {}

  return Contacts;

})();

require('./dynamics/contacts/b2ContactRegister');

require('./dynamics/contacts/b2ContactResult');

require('./dynamics/contacts/b2ContactEdge');

require('./dynamics/contacts/b2ContactConstraintPoint');

require('./dynamics/contacts/b2ContactConstraint');

require('./dynamics/contacts/b2Contact');

require('./dynamics/contacts/b2CircleContact');

require('./dynamics/contacts/b2PositionSolverManifold');

require('./dynamics/contacts/b2ContactSolver');

require('./dynamics/contacts/b2EdgeAndCircleContact');

require('./dynamics/contacts/b2NullContact');

require('./dynamics/contacts/b2PolyAndCircleContact');

require('./dynamics/contacts/b2PolyAndEdgeContact');

require('./dynamics/contacts/b2PolygonContact');

require('./dynamics/contacts/b2ContactFactory');

Box2D.Dynamics.Controllers = (function() {
  function Controllers() {}

  return Controllers;

})();

require('./dynamics/controllers/b2ControllerEdge');

require('./dynamics/controllers/b2Controller');

require('./dynamics/controllers/b2BuoyancyController');

require('./dynamics/controllers/b2ConstantAccelController');

require('./dynamics/controllers/b2ConstantForceController');

require('./dynamics/controllers/b2GravityController');

require('./dynamics/controllers/b2TensorDampingController');

Box2D.Dynamics.Joints = (function() {
  function Joints() {}

  return Joints;

})();

require('./dynamics/joints/b2Joint');

require('./dynamics/joints/b2JointDef');

require('./dynamics/joints/b2JointEdge');

require('./dynamics/joints/b2Jacobian');

require('./dynamics/joints/b2DistanceJoint');

require('./dynamics/joints/b2DistanceJointDef');

require('./dynamics/joints/b2FrictionJoint');

require('./dynamics/joints/b2FrictionJointDef');

require('./dynamics/joints/b2GearJoint');

require('./dynamics/joints/b2GearJointDef');

require('./dynamics/joints/b2LineJoint');

require('./dynamics/joints/b2LineJointDef');

require('./dynamics/joints/b2MouseJoint');

require('./dynamics/joints/b2MouseJointDef');

require('./dynamics/joints/b2PrismaticJoint');

require('./dynamics/joints/b2PrismaticJointDef');

require('./dynamics/joints/b2PulleyJoint');

require('./dynamics/joints/b2PulleyJointDef');

require('./dynamics/joints/b2RevoluteJoint');

require('./dynamics/joints/b2RevoluteJointDef');

require('./dynamics/joints/b2WeldJoint');

require('./dynamics/joints/b2WeldJointDef');

require('./dynamics/b2ContactListener');

require('./dynamics/b2ContactFilter');

require('./dynamics/b2Fixture');

require('./dynamics/b2ContactManager');

require('./dynamics/b2Body');

require('./dynamics/b2DebugDraw');

require('./dynamics/b2BodyDef');

require('./dynamics/b2ContactFilter');

require('./dynamics/b2ContactImpulse');

require('./dynamics/b2FixtureDef');

require('./dynamics/b2Island');

require('./dynamics/b2World');

require('./dynamics/b2DestructionListener');

//# sourceMappingURL=index.js.map

},{"./collision/ClipVertex":1,"./collision/Features":2,"./collision/b2AABB":3,"./collision/b2Bound":4,"./collision/b2BoundValues":5,"./collision/b2Collision":6,"./collision/b2ContactID":7,"./collision/b2ContactPoint":8,"./collision/b2Distance":9,"./collision/b2DistanceInput":10,"./collision/b2DistanceOutput":11,"./collision/b2DistanceProxy":12,"./collision/b2DynamicTree":13,"./collision/b2DynamicTreeBroadPhase":14,"./collision/b2DynamicTreeNode":15,"./collision/b2DynamicTreePair":16,"./collision/b2Manifold":17,"./collision/b2ManifoldPoint":18,"./collision/b2Point":19,"./collision/b2RayCastInput":20,"./collision/b2RayCastOutput":21,"./collision/b2Segment":22,"./collision/b2SeparationFunction":23,"./collision/b2Simplex":24,"./collision/b2SimplexCache":25,"./collision/b2SimplexVertex":26,"./collision/b2TOIInput":27,"./collision/b2TimeOfImpact":28,"./collision/b2WorldManifold":29,"./collision/shapes/b2CircleShape":30,"./collision/shapes/b2EdgeChainDef":31,"./collision/shapes/b2EdgeShape":32,"./collision/shapes/b2MassData":33,"./collision/shapes/b2PolygonShape":34,"./collision/shapes/b2Shape":35,"./common/b2Color":36,"./common/b2Settings":37,"./common/math/b2Mat22":38,"./common/math/b2Mat33":39,"./common/math/b2Math":40,"./common/math/b2Sweep":41,"./common/math/b2Transform":42,"./common/math/b2Vec2":43,"./common/math/b2Vec3":44,"./dynamics/b2Body":45,"./dynamics/b2BodyDef":46,"./dynamics/b2ContactFilter":47,"./dynamics/b2ContactImpulse":48,"./dynamics/b2ContactListener":49,"./dynamics/b2ContactManager":50,"./dynamics/b2DebugDraw":51,"./dynamics/b2DestructionListener":52,"./dynamics/b2FilterData":53,"./dynamics/b2Fixture":54,"./dynamics/b2FixtureDef":55,"./dynamics/b2Island":56,"./dynamics/b2TimeStep":57,"./dynamics/b2World":58,"./dynamics/contacts/b2CircleContact":59,"./dynamics/contacts/b2Contact":60,"./dynamics/contacts/b2ContactConstraint":61,"./dynamics/contacts/b2ContactConstraintPoint":62,"./dynamics/contacts/b2ContactEdge":63,"./dynamics/contacts/b2ContactFactory":64,"./dynamics/contacts/b2ContactRegister":65,"./dynamics/contacts/b2ContactResult":66,"./dynamics/contacts/b2ContactSolver":67,"./dynamics/contacts/b2EdgeAndCircleContact":68,"./dynamics/contacts/b2NullContact":69,"./dynamics/contacts/b2PolyAndCircleContact":70,"./dynamics/contacts/b2PolyAndEdgeContact":71,"./dynamics/contacts/b2PolygonContact":72,"./dynamics/contacts/b2PositionSolverManifold":73,"./dynamics/controllers/b2BuoyancyController":74,"./dynamics/controllers/b2ConstantAccelController":75,"./dynamics/controllers/b2ConstantForceController":76,"./dynamics/controllers/b2Controller":77,"./dynamics/controllers/b2ControllerEdge":78,"./dynamics/controllers/b2GravityController":79,"./dynamics/controllers/b2TensorDampingController":80,"./dynamics/joints/b2DistanceJoint":81,"./dynamics/joints/b2DistanceJointDef":82,"./dynamics/joints/b2FrictionJoint":83,"./dynamics/joints/b2FrictionJointDef":84,"./dynamics/joints/b2GearJoint":85,"./dynamics/joints/b2GearJointDef":86,"./dynamics/joints/b2Jacobian":87,"./dynamics/joints/b2Joint":88,"./dynamics/joints/b2JointDef":89,"./dynamics/joints/b2JointEdge":90,"./dynamics/joints/b2LineJoint":91,"./dynamics/joints/b2LineJointDef":92,"./dynamics/joints/b2MouseJoint":93,"./dynamics/joints/b2MouseJointDef":94,"./dynamics/joints/b2PrismaticJoint":95,"./dynamics/joints/b2PrismaticJointDef":96,"./dynamics/joints/b2PulleyJoint":97,"./dynamics/joints/b2PulleyJointDef":98,"./dynamics/joints/b2RevoluteJoint":99,"./dynamics/joints/b2RevoluteJointDef":100,"./dynamics/joints/b2WeldJoint":101,"./dynamics/joints/b2WeldJointDef":102}]},{},[103])(103)
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9DbGlwVmVydGV4LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vRmVhdHVyZXMuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkFBQkIuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkJvdW5kLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJCb3VuZFZhbHVlcy5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyQ29sbGlzaW9uLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJDb250YWN0SUQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkNvbnRhY3RQb2ludC5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyRGlzdGFuY2UuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkRpc3RhbmNlSW5wdXQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkRpc3RhbmNlT3V0cHV0LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJEaXN0YW5jZVByb3h5LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJEeW5hbWljVHJlZS5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyRHluYW1pY1RyZWVCcm9hZFBoYXNlLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJEeW5hbWljVHJlZU5vZGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkR5bmFtaWNUcmVlUGFpci5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyTWFuaWZvbGQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMk1hbmlmb2xkUG9pbnQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlBvaW50LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJSYXlDYXN0SW5wdXQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlJheUNhc3RPdXRwdXQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlNlZ21lbnQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlNlcGFyYXRpb25GdW5jdGlvbi5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyU2ltcGxleC5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyU2ltcGxleENhY2hlLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJTaW1wbGV4VmVydGV4LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJUT0lJbnB1dC5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyVGltZU9mSW1wYWN0LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJXb3JsZE1hbmlmb2xkLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vc2hhcGVzL2IyQ2lyY2xlU2hhcGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9zaGFwZXMvYjJFZGdlQ2hhaW5EZWYuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9zaGFwZXMvYjJFZGdlU2hhcGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9zaGFwZXMvYjJNYXNzRGF0YS5qcyIsInRtcC9saWIvY29sbGlzaW9uL3NoYXBlcy9iMlBvbHlnb25TaGFwZS5qcyIsInRtcC9saWIvY29sbGlzaW9uL3NoYXBlcy9iMlNoYXBlLmpzIiwidG1wL2xpYi9jb21tb24vYjJDb2xvci5qcyIsInRtcC9saWIvY29tbW9uL2IyU2V0dGluZ3MuanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyTWF0MjIuanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyTWF0MzMuanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyTWF0aC5qcyIsInRtcC9saWIvY29tbW9uL21hdGgvYjJTd2VlcC5qcyIsInRtcC9saWIvY29tbW9uL21hdGgvYjJUcmFuc2Zvcm0uanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyVmVjMi5qcyIsInRtcC9saWIvY29tbW9uL21hdGgvYjJWZWMzLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkJvZHkuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyQm9keURlZi5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJDb250YWN0RmlsdGVyLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkNvbnRhY3RJbXB1bHNlLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkNvbnRhY3RMaXN0ZW5lci5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJDb250YWN0TWFuYWdlci5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJEZWJ1Z0RyYXcuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyRGVzdHJ1Y3Rpb25MaXN0ZW5lci5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJGaWx0ZXJEYXRhLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkZpeHR1cmUuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyRml4dHVyZURlZi5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJJc2xhbmQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyVGltZVN0ZXAuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyV29ybGQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ2lyY2xlQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJDb250YWN0LmpzIiwidG1wL2xpYi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RDb25zdHJhaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RDb25zdHJhaW50UG9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdEVkZ2UuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdEZhY3RvcnkuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdFJlZ2lzdGVyLmpzIiwidG1wL2xpYi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RSZXN1bHQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdFNvbHZlci5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJOdWxsQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJQb2x5QW5kRWRnZUNvbnRhY3QuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9seWdvbkNvbnRhY3QuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJCdW95YW5jeUNvbnRyb2xsZXIuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXIuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29udHJvbGxlci5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJDb250cm9sbGVyRWRnZS5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJHcmF2aXR5Q29udHJvbGxlci5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlci5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRGlzdGFuY2VKb2ludC5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRGlzdGFuY2VKb2ludERlZi5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRnJpY3Rpb25Kb2ludC5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRnJpY3Rpb25Kb2ludERlZi5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyR2VhckpvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJHZWFySm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMkphY29iaWFuLmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJKb2ludC5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IySm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMkpvaW50RWRnZS5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyTGluZUpvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJMaW5lSm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMk1vdXNlSm9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMk1vdXNlSm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMlByaXNtYXRpY0pvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJQcmlzbWF0aWNKb2ludERlZi5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyUHVsbGV5Sm9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMlB1bGxleUpvaW50RGVmLmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJSZXZvbHV0ZUpvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJSZXZvbHV0ZUpvaW50RGVmLmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJXZWxkSm9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMldlbGRKb2ludERlZi5qcyIsInRtcC9saWIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9nQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25RQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1ekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDblVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsbUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcGJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgQm94MkQsIGIyQ29udGFjdElELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkNvbnRhY3RJRCA9IEJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRDtcblxuQm94MkQuQ29sbGlzaW9uLkNsaXBWZXJ0ZXggPSAoZnVuY3Rpb24oKSB7XG4gIENsaXBWZXJ0ZXgucHJvdG90eXBlLnYgPSBudWxsO1xuXG4gIENsaXBWZXJ0ZXgucHJvdG90eXBlLmlkID0gbnVsbDtcblxuICBmdW5jdGlvbiBDbGlwVmVydGV4KCkge1xuICAgIHRoaXMudiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmlkID0gbmV3IGIyQ29udGFjdElEKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgQ2xpcFZlcnRleC5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICB0aGlzLnYuU2V0VihvdGhlci52KTtcbiAgICB0aGlzLmlkLlNldChvdGhlci5pZCk7XG4gIH07XG5cbiAgcmV0dXJuIENsaXBWZXJ0ZXg7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNsaXBWZXJ0ZXguanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuQm94MkQuQ29sbGlzaW9uLkZlYXR1cmVzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBGZWF0dXJlcygpIHt9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRmVhdHVyZXMucHJvdG90eXBlLCB7XG4gICAgcmVmZXJlbmNlRWRnZToge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmZXJlbmNlRWRnZTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlZmVyZW5jZUVkZ2UgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fbV9pZC5fa2V5ID0gKHRoaXMuX21faWQuX2tleSAmIDB4ZmZmZmZmMDApIHwgKHRoaXMuX3JlZmVyZW5jZUVkZ2UgJiAweDAwMDAwMGZmKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGluY2lkZW50RWRnZToge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5jaWRlbnRFZGdlO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW5jaWRlbnRFZGdlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX21faWQuX2tleSA9ICh0aGlzLl9tX2lkLl9rZXkgJiAweGZmZmYwMGZmKSB8ICgodGhpcy5faW5jaWRlbnRFZGdlIDw8IDgpICYgMHgwMDAwZmYwMCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpbmNpZGVudFZlcnRleDoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5jaWRlbnRWZXJ0ZXg7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbmNpZGVudFZlcnRleCA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9tX2lkLl9rZXkgPSAodGhpcy5fbV9pZC5fa2V5ICYgMHhmZjAwZmZmZikgfCAoKHRoaXMuX2luY2lkZW50VmVydGV4IDw8IDE2KSAmIDB4MDBmZjAwMDApO1xuICAgICAgfVxuICAgIH0sXG4gICAgZmxpcDoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmxpcDtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZsaXAgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fbV9pZC5fa2V5ID0gKHRoaXMuX21faWQuX2tleSAmIDB4MDBmZmZmZmYpIHwgKCh0aGlzLl9mbGlwIDw8IDI0KSAmIDB4ZmYwMDAwMDApO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIEZlYXR1cmVzO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GZWF0dXJlcy5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29sbGlzaW9uLmIyQUFCQiA9IChmdW5jdGlvbigpIHtcbiAgYjJBQUJCLnByb3RvdHlwZS5sb3dlckJvdW5kID0gbnVsbDtcblxuICBiMkFBQkIucHJvdG90eXBlLnVwcGVyQm91bmQgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQUFCQigpIHtcbiAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy51cHBlckJvdW5kID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQUFCQi5wcm90b3R5cGUuSXNWYWxpZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkWCwgZFksIHZhbGlkO1xuICAgIGRYID0gdGhpcy51cHBlckJvdW5kLnggLSB0aGlzLmxvd2VyQm91bmQueDtcbiAgICBkWSA9IHRoaXMudXBwZXJCb3VuZC55IC0gdGhpcy5sb3dlckJvdW5kLnk7XG4gICAgdmFsaWQgPSBkWCA+PSAwLjAgJiYgZFkgPj0gMC4wO1xuICAgIHZhbGlkID0gdmFsaWQgJiYgdGhpcy5sb3dlckJvdW5kLklzVmFsaWQoKSAmJiB0aGlzLnVwcGVyQm91bmQuSXNWYWxpZCgpO1xuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICBiMkFBQkIucHJvdG90eXBlLkdldENlbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgYjJWZWMyKCh0aGlzLmxvd2VyQm91bmQueCArIHRoaXMudXBwZXJCb3VuZC54KSAvIDIsICh0aGlzLmxvd2VyQm91bmQueSArIHRoaXMudXBwZXJCb3VuZC55KSAvIDIpO1xuICB9O1xuXG4gIGIyQUFCQi5wcm90b3R5cGUuR2V0RXh0ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgYjJWZWMyKCh0aGlzLnVwcGVyQm91bmQueCAtIHRoaXMubG93ZXJCb3VuZC54KSAvIDIsICh0aGlzLnVwcGVyQm91bmQueSAtIHRoaXMubG93ZXJCb3VuZC55KSAvIDIpO1xuICB9O1xuXG4gIGIyQUFCQi5wcm90b3R5cGUuQ29udGFpbnMgPSBmdW5jdGlvbihhYWJiKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICByZXN1bHQgPSB0cnVlO1xuICAgIHJlc3VsdCA9IHJlc3VsdCAmJiB0aGlzLmxvd2VyQm91bmQueCA8PSBhYWJiLmxvd2VyQm91bmQueDtcbiAgICByZXN1bHQgPSByZXN1bHQgJiYgdGhpcy5sb3dlckJvdW5kLnkgPD0gYWFiYi5sb3dlckJvdW5kLnk7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICYmIGFhYmIudXBwZXJCb3VuZC54IDw9IHRoaXMudXBwZXJCb3VuZC54O1xuICAgIHJlc3VsdCA9IHJlc3VsdCAmJiBhYWJiLnVwcGVyQm91bmQueSA8PSB0aGlzLnVwcGVyQm91bmQueTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGIyQUFCQi5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dCwgaW5wdXQpIHtcbiAgICB2YXIgYWJzRFgsIGFic0RZLCBkWCwgZFksIGludl9kLCBub3JtYWwsIHBYLCBwWSwgcywgdDEsIHQyLCB0MywgdG1heCwgdG1pbjtcbiAgICB0bWluID0gLU51bWJlci5NQVhfVkFMVUU7XG4gICAgdG1heCA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgcFggPSBpbnB1dC5wMS54O1xuICAgIHBZID0gaW5wdXQucDEueTtcbiAgICBkWCA9IGlucHV0LnAyLnggLSBpbnB1dC5wMS54O1xuICAgIGRZID0gaW5wdXQucDIueSAtIGlucHV0LnAxLnk7XG4gICAgYWJzRFggPSBNYXRoLmFicyhkWCk7XG4gICAgYWJzRFkgPSBNYXRoLmFicyhkWSk7XG4gICAgbm9ybWFsID0gb3V0cHV0Lm5vcm1hbDtcbiAgICBpbnZfZCA9IDA7XG4gICAgdDEgPSAwO1xuICAgIHQyID0gMDtcbiAgICB0MyA9IDA7XG4gICAgcyA9IDA7XG4gICAgaWYgKGFic0RYIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgaWYgKHBYIDwgdGhpcy5sb3dlckJvdW5kLnggfHwgdGhpcy51cHBlckJvdW5kLnggPCBwWCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGludl9kID0gMS4wIC8gZFg7XG4gICAgICB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIHBYKSAqIGludl9kO1xuICAgICAgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBwWCkgKiBpbnZfZDtcbiAgICAgIHMgPSAtMS4wO1xuICAgICAgaWYgKHQxID4gdDIpIHtcbiAgICAgICAgdDMgPSB0MTtcbiAgICAgICAgdDEgPSB0MjtcbiAgICAgICAgdDIgPSB0MztcbiAgICAgICAgcyA9IDEuMDtcbiAgICAgIH1cbiAgICAgIGlmICh0MSA+IHRtaW4pIHtcbiAgICAgICAgbm9ybWFsLnggPSBzO1xuICAgICAgICBub3JtYWwueSA9IDA7XG4gICAgICAgIHRtaW4gPSB0MTtcbiAgICAgIH1cbiAgICAgIHRtYXggPSBNYXRoLm1pbih0bWF4LCB0Mik7XG4gICAgICBpZiAodG1pbiA+IHRtYXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWJzRFkgPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICBpZiAocFkgPCB0aGlzLmxvd2VyQm91bmQueSB8fCB0aGlzLnVwcGVyQm91bmQueSA8IHBZKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaW52X2QgPSAxLjAgLyBkWTtcbiAgICAgIHQxID0gKHRoaXMubG93ZXJCb3VuZC55IC0gcFkpICogaW52X2Q7XG4gICAgICB0MiA9ICh0aGlzLnVwcGVyQm91bmQueSAtIHBZKSAqIGludl9kO1xuICAgICAgcyA9IC0xLjA7XG4gICAgICBpZiAodDEgPiB0Mikge1xuICAgICAgICB0MyA9IHQxO1xuICAgICAgICB0MSA9IHQyO1xuICAgICAgICB0MiA9IHQzO1xuICAgICAgICBzID0gMS4wO1xuICAgICAgfVxuICAgICAgaWYgKHQxID4gdG1pbikge1xuICAgICAgICBub3JtYWwueSA9IHM7XG4gICAgICAgIG5vcm1hbC54ID0gMDtcbiAgICAgICAgdG1pbiA9IHQxO1xuICAgICAgfVxuICAgICAgdG1heCA9IE1hdGgubWluKHRtYXgsIHQyKTtcbiAgICAgIGlmICh0bWluID4gdG1heCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIG91dHB1dC5mcmFjdGlvbiA9IHRtaW47XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgYjJBQUJCLnByb3RvdHlwZS5UZXN0T3ZlcmxhcCA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgdmFyIGQxWCwgZDFZLCBkMlgsIGQyWTtcbiAgICBkMVggPSBvdGhlci5sb3dlckJvdW5kLnggLSB0aGlzLnVwcGVyQm91bmQueDtcbiAgICBkMVkgPSBvdGhlci5sb3dlckJvdW5kLnkgLSB0aGlzLnVwcGVyQm91bmQueTtcbiAgICBkMlggPSB0aGlzLmxvd2VyQm91bmQueCAtIG90aGVyLnVwcGVyQm91bmQueDtcbiAgICBkMlkgPSB0aGlzLmxvd2VyQm91bmQueSAtIG90aGVyLnVwcGVyQm91bmQueTtcbiAgICBpZiAoZDFYID4gMC4wIHx8IGQxWSA+IDAuMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZDJYID4gMC4wIHx8IGQyWSA+IDAuMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBiMkFBQkIuQ29tYmluZSA9IGZ1bmN0aW9uKGFhYmIxLCBhYWJiMikge1xuICAgIHZhciBhYWJiO1xuICAgIGFhYmIgPSBuZXcgYjJBQUJCKCk7XG4gICAgYWFiYi5Db21iaW5lKGFhYmIxLCBhYWJiMik7XG4gICAgcmV0dXJuIGFhYmI7XG4gIH07XG5cbiAgYjJBQUJCLnByb3RvdHlwZS5Db21iaW5lID0gZnVuY3Rpb24oYWFiYjEsIGFhYmIyKSB7XG4gICAgdGhpcy5sb3dlckJvdW5kLnggPSBNYXRoLm1pbihhYWJiMS5sb3dlckJvdW5kLngsIGFhYmIyLmxvd2VyQm91bmQueCk7XG4gICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbihhYWJiMS5sb3dlckJvdW5kLnksIGFhYmIyLmxvd2VyQm91bmQueSk7XG4gICAgdGhpcy51cHBlckJvdW5kLnggPSBNYXRoLm1heChhYWJiMS51cHBlckJvdW5kLngsIGFhYmIyLnVwcGVyQm91bmQueCk7XG4gICAgdGhpcy51cHBlckJvdW5kLnkgPSBNYXRoLm1heChhYWJiMS51cHBlckJvdW5kLnksIGFhYmIyLnVwcGVyQm91bmQueSk7XG4gIH07XG5cbiAgcmV0dXJuIGIyQUFCQjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJBQUJCLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkNvbGxpc2lvbi5iMkJvdW5kID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkJvdW5kKCkge31cblxuICBiMkJvdW5kLnByb3RvdHlwZS52YWx1ZSA9IDA7XG5cbiAgYjJCb3VuZC5wcm90b3R5cGUucHJveHkgPSBudWxsO1xuXG4gIGIyQm91bmQucHJvdG90eXBlLnN0YWJiaW5nQ291bnQgPSAwO1xuXG4gIGIyQm91bmQucHJvdG90eXBlLklzTG93ZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMudmFsdWUgJiAxKSA9PT0gMDtcbiAgfTtcblxuICBiMkJvdW5kLnByb3RvdHlwZS5Jc1VwcGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLnZhbHVlICYgMSkgPT09IDE7XG4gIH07XG5cbiAgYjJCb3VuZC5wcm90b3R5cGUuU3dhcCA9IGZ1bmN0aW9uKGIpIHtcbiAgICB2YXIgdGVtcFByb3h5LCB0ZW1wU3RhYmJpbmdDb3VudCwgdGVtcFZhbHVlO1xuICAgIHRlbXBWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgdGVtcFByb3h5ID0gdGhpcy5wcm94eTtcbiAgICB0ZW1wU3RhYmJpbmdDb3VudCA9IHRoaXMuc3RhYmJpbmdDb3VudDtcbiAgICB0aGlzLnZhbHVlID0gYi52YWx1ZTtcbiAgICB0aGlzLnByb3h5ID0gYi5wcm94eTtcbiAgICB0aGlzLnN0YWJiaW5nQ291bnQgPSBiLnN0YWJiaW5nQ291bnQ7XG4gICAgYi52YWx1ZSA9IHRlbXBWYWx1ZTtcbiAgICBiLnByb3h5ID0gdGVtcFByb3h5O1xuICAgIGIuc3RhYmJpbmdDb3VudCA9IHRlbXBTdGFiYmluZ0NvdW50O1xuICB9O1xuXG4gIHJldHVybiBiMkJvdW5kO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkJvdW5kLmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3I7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJCb3VuZFZhbHVlcyA9IChmdW5jdGlvbigpIHtcbiAgYjJCb3VuZFZhbHVlcy5wcm90b3R5cGUubG93ZXJWYWx1ZXMgPSBudWxsO1xuXG4gIGIyQm91bmRWYWx1ZXMucHJvdG90eXBlLnVwcGVyVmFsdWVzID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkJvdW5kVmFsdWVzKCkge1xuICAgIHRoaXMubG93ZXJWYWx1ZXMgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5sb3dlclZhbHVlc1swXSA9IDAuMDtcbiAgICB0aGlzLmxvd2VyVmFsdWVzWzFdID0gMC4wO1xuICAgIHRoaXMudXBwZXJWYWx1ZXMgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy51cHBlclZhbHVlc1swXSA9IDAuMDtcbiAgICB0aGlzLnVwcGVyVmFsdWVzWzFdID0gMC4wO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkJvdW5kVmFsdWVzO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkJvdW5kVmFsdWVzLmpzLm1hcFxuIiwidmFyIEJveDJELCBDbGlwVmVydGV4LCBWZWN0b3IsIGIyTWFuaWZvbGQsIGIyU2V0dGluZ3MsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5DbGlwVmVydGV4ID0gQm94MkQuQ29sbGlzaW9uLkNsaXBWZXJ0ZXg7XG5cbmIyTWFuaWZvbGQgPSBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZDtcblxuQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkNvbGxpc2lvbigpIHt9XG5cbiAgYjJDb2xsaXNpb24uYjJfbnVsbEZlYXR1cmUgPSAweDAwMDAwMGZmO1xuXG4gIGIyQ29sbGlzaW9uLnNfZWRnZUFPID0gbmV3IFZlY3RvcigxKTtcblxuICBiMkNvbGxpc2lvbi5zX2VkZ2VCTyA9IG5ldyBWZWN0b3IoMSk7XG5cbiAgYjJDb2xsaXNpb24uc19sb2NhbFRhbmdlbnQgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uc19sb2NhbE5vcm1hbCA9IG5ldyBiMlZlYzIoKTtcblxuICBiMkNvbGxpc2lvbi5zX3BsYW5lUG9pbnQgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uc19ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uc190YW5nZW50ID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLnNfdGFuZ2VudDIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uc192MTEgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uc192MTIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uYjJDb2xsaWRlUG9seVRlbXBWZWMgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uQ2xpcFNlZ21lbnRUb0xpbmUgPSBmdW5jdGlvbih2T3V0LCB2SW4sIG5vcm1hbCwgb2Zmc2V0KSB7XG4gICAgdmFyIGN2LCBjdjIsIGRpc3RhbmNlMCwgZGlzdGFuY2UxLCBpbnRlcnAsIG51bU91dCwgdFZlYywgdkluMCwgdkluMTtcbiAgICBpZiAob2Zmc2V0ID09PSB2b2lkIDApIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuICAgIGN2ID0gdm9pZCAwO1xuICAgIG51bU91dCA9IDA7XG4gICAgY3YgPSB2SW5bMF07XG4gICAgdkluMCA9IGN2LnY7XG4gICAgY3YgPSB2SW5bMV07XG4gICAgdkluMSA9IGN2LnY7XG4gICAgZGlzdGFuY2UwID0gbm9ybWFsLnggKiB2SW4wLnggKyBub3JtYWwueSAqIHZJbjAueSAtIG9mZnNldDtcbiAgICBkaXN0YW5jZTEgPSBub3JtYWwueCAqIHZJbjEueCArIG5vcm1hbC55ICogdkluMS55IC0gb2Zmc2V0O1xuICAgIGlmIChkaXN0YW5jZTAgPD0gMC4wKSB7XG4gICAgICB2T3V0W251bU91dCsrXS5TZXQodkluWzBdKTtcbiAgICB9XG4gICAgaWYgKGRpc3RhbmNlMSA8PSAwLjApIHtcbiAgICAgIHZPdXRbbnVtT3V0KytdLlNldCh2SW5bMV0pO1xuICAgIH1cbiAgICBpZiAoZGlzdGFuY2UwICogZGlzdGFuY2UxIDwgMC4wKSB7XG4gICAgICBpbnRlcnAgPSBkaXN0YW5jZTAgLyAoZGlzdGFuY2UwIC0gZGlzdGFuY2UxKTtcbiAgICAgIGN2ID0gdk91dFtudW1PdXRdO1xuICAgICAgdFZlYyA9IGN2LnY7XG4gICAgICB0VmVjLnggPSB2SW4wLnggKyBpbnRlcnAgKiAodkluMS54IC0gdkluMC54KTtcbiAgICAgIHRWZWMueSA9IHZJbjAueSArIGludGVycCAqICh2SW4xLnkgLSB2SW4wLnkpO1xuICAgICAgY3YgPSB2T3V0W251bU91dF07XG4gICAgICBjdjIgPSB2b2lkIDA7XG4gICAgICBpZiAoZGlzdGFuY2UwID4gMC4wKSB7XG4gICAgICAgIGN2MiA9IHZJblswXTtcbiAgICAgICAgY3YuaWQgPSBjdjIuaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdjIgPSB2SW5bMV07XG4gICAgICAgIGN2LmlkID0gY3YyLmlkO1xuICAgICAgfVxuICAgICAgKytudW1PdXQ7XG4gICAgfVxuICAgIHJldHVybiBudW1PdXQ7XG4gIH07XG5cbiAgYjJDb2xsaXNpb24uRWRnZVNlcGFyYXRpb24gPSBmdW5jdGlvbihwb2x5MSwgeGYxLCBlZGdlMSwgcG9seTIsIHhmMikge1xuICAgIHZhciBjb3VudDEsIGNvdW50MiwgZG90LCBpLCBpbmRleCwgbWluRG90LCBub3JtYWwxV29ybGRYLCBub3JtYWwxV29ybGRZLCBub3JtYWwxWCwgbm9ybWFsMVksIG5vcm1hbHMxLCBzZXBhcmF0aW9uLCB0TWF0LCB0VmVjLCB2MVgsIHYxWSwgdjJYLCB2MlksIHZlcnRpY2VzMSwgdmVydGljZXMyO1xuICAgIGlmIChlZGdlMSA9PT0gdm9pZCAwKSB7XG4gICAgICBlZGdlMSA9IDA7XG4gICAgfVxuICAgIGNvdW50MSA9IHBhcnNlSW50KHBvbHkxLm1fdmVydGV4Q291bnQpO1xuICAgIHZlcnRpY2VzMSA9IHBvbHkxLm1fdmVydGljZXM7XG4gICAgbm9ybWFsczEgPSBwb2x5MS5tX25vcm1hbHM7XG4gICAgY291bnQyID0gcGFyc2VJbnQocG9seTIubV92ZXJ0ZXhDb3VudCk7XG4gICAgdmVydGljZXMyID0gcG9seTIubV92ZXJ0aWNlcztcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgdE1hdCA9IHhmMS5SO1xuICAgIHRWZWMgPSBub3JtYWxzMVtlZGdlMV07XG4gICAgbm9ybWFsMVdvcmxkWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgbm9ybWFsMVdvcmxkWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgdE1hdCA9IHhmMi5SO1xuICAgIG5vcm1hbDFYID0gdE1hdC5jb2wxLnggKiBub3JtYWwxV29ybGRYICsgdE1hdC5jb2wxLnkgKiBub3JtYWwxV29ybGRZO1xuICAgIG5vcm1hbDFZID0gdE1hdC5jb2wyLnggKiBub3JtYWwxV29ybGRYICsgdE1hdC5jb2wyLnkgKiBub3JtYWwxV29ybGRZO1xuICAgIGluZGV4ID0gMDtcbiAgICBtaW5Eb3QgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY291bnQyKSB7XG4gICAgICB0VmVjID0gdmVydGljZXMyW2ldO1xuICAgICAgZG90ID0gdFZlYy54ICogbm9ybWFsMVggKyB0VmVjLnkgKiBub3JtYWwxWTtcbiAgICAgIGlmIChkb3QgPCBtaW5Eb3QpIHtcbiAgICAgICAgbWluRG90ID0gZG90O1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHRWZWMgPSB2ZXJ0aWNlczFbZWRnZTFdO1xuICAgIHRNYXQgPSB4ZjEuUjtcbiAgICB2MVggPSB4ZjEucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICB2MVkgPSB4ZjEucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICB0VmVjID0gdmVydGljZXMyW2luZGV4XTtcbiAgICB0TWF0ID0geGYyLlI7XG4gICAgdjJYID0geGYyLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgdjJZID0geGYyLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgdjJYIC09IHYxWDtcbiAgICB2MlkgLT0gdjFZO1xuICAgIHNlcGFyYXRpb24gPSB2MlggKiBub3JtYWwxV29ybGRYICsgdjJZICogbm9ybWFsMVdvcmxkWTtcbiAgICByZXR1cm4gc2VwYXJhdGlvbjtcbiAgfTtcblxuICBiMkNvbGxpc2lvbi5GaW5kTWF4U2VwYXJhdGlvbiA9IGZ1bmN0aW9uKGVkZ2VJbmRleCwgcG9seTEsIHhmMSwgcG9seTIsIHhmMikge1xuICAgIHZhciBiZXN0RWRnZSwgYmVzdFNlcGFyYXRpb24sIGNvdW50MSwgZExvY2FsMVgsIGRMb2NhbDFZLCBkWCwgZFksIGRvdCwgZWRnZSwgaSwgaW5jcmVtZW50LCBtYXhEb3QsIG5leHRFZGdlLCBub3JtYWxzMSwgcHJldkVkZ2UsIHMsIHNOZXh0LCBzUHJldiwgdE1hdCwgdFZlYztcbiAgICBjb3VudDEgPSBwYXJzZUludChwb2x5MS5tX3ZlcnRleENvdW50KTtcbiAgICBub3JtYWxzMSA9IHBvbHkxLm1fbm9ybWFscztcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdE1hdCA9IHhmMi5SO1xuICAgIHRWZWMgPSBwb2x5Mi5tX2NlbnRyb2lkO1xuICAgIGRYID0geGYyLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgZFkgPSB4ZjIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICB0TWF0ID0geGYxLlI7XG4gICAgdFZlYyA9IHBvbHkxLm1fY2VudHJvaWQ7XG4gICAgZFggLT0geGYxLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgZFkgLT0geGYxLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgZExvY2FsMVggPSBkWCAqIHhmMS5SLmNvbDEueCArIGRZICogeGYxLlIuY29sMS55O1xuICAgIGRMb2NhbDFZID0gZFggKiB4ZjEuUi5jb2wyLnggKyBkWSAqIHhmMS5SLmNvbDIueTtcbiAgICBlZGdlID0gMDtcbiAgICBtYXhEb3QgPSAtTnVtYmVyLk1BWF9WQUxVRTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGNvdW50MSkge1xuICAgICAgdFZlYyA9IG5vcm1hbHMxW2ldO1xuICAgICAgZG90ID0gdFZlYy54ICogZExvY2FsMVggKyB0VmVjLnkgKiBkTG9jYWwxWTtcbiAgICAgIGlmIChkb3QgPiBtYXhEb3QpIHtcbiAgICAgICAgbWF4RG90ID0gZG90O1xuICAgICAgICBlZGdlID0gaTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcyA9IGIyQ29sbGlzaW9uLkVkZ2VTZXBhcmF0aW9uKHBvbHkxLCB4ZjEsIGVkZ2UsIHBvbHkyLCB4ZjIpO1xuICAgIHByZXZFZGdlID0gcGFyc2VJbnQoKGVkZ2UgLSAxID49IDAgPyBlZGdlIC0gMSA6IGNvdW50MSAtIDEpKTtcbiAgICBzUHJldiA9IGIyQ29sbGlzaW9uLkVkZ2VTZXBhcmF0aW9uKHBvbHkxLCB4ZjEsIHByZXZFZGdlLCBwb2x5MiwgeGYyKTtcbiAgICBuZXh0RWRnZSA9IHBhcnNlSW50KChlZGdlICsgMSA8IGNvdW50MSA/IGVkZ2UgKyAxIDogMCkpO1xuICAgIHNOZXh0ID0gYjJDb2xsaXNpb24uRWRnZVNlcGFyYXRpb24ocG9seTEsIHhmMSwgbmV4dEVkZ2UsIHBvbHkyLCB4ZjIpO1xuICAgIGJlc3RFZGdlID0gMDtcbiAgICBiZXN0U2VwYXJhdGlvbiA9IDA7XG4gICAgaW5jcmVtZW50ID0gMDtcbiAgICBpZiAoc1ByZXYgPiBzICYmIHNQcmV2ID4gc05leHQpIHtcbiAgICAgIGluY3JlbWVudCA9IC0xLjtcbiAgICAgIGJlc3RFZGdlID0gcHJldkVkZ2U7XG4gICAgICBiZXN0U2VwYXJhdGlvbiA9IHNQcmV2O1xuICAgIH0gZWxzZSBpZiAoc05leHQgPiBzKSB7XG4gICAgICBpbmNyZW1lbnQgPSAxO1xuICAgICAgYmVzdEVkZ2UgPSBuZXh0RWRnZTtcbiAgICAgIGJlc3RTZXBhcmF0aW9uID0gc05leHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVkZ2VJbmRleFswXSA9IGVkZ2U7XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGlmIChpbmNyZW1lbnQgPT09ICgtMSkpIHtcbiAgICAgICAgZWRnZSA9IChiZXN0RWRnZSAtIDEgPj0gMCA/IGJlc3RFZGdlIC0gMSA6IGNvdW50MSAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWRnZSA9IChiZXN0RWRnZSArIDEgPCBjb3VudDEgPyBiZXN0RWRnZSArIDEgOiAwKTtcbiAgICAgIH1cbiAgICAgIHMgPSBiMkNvbGxpc2lvbi5FZGdlU2VwYXJhdGlvbihwb2x5MSwgeGYxLCBlZGdlLCBwb2x5MiwgeGYyKTtcbiAgICAgIGlmIChzID4gYmVzdFNlcGFyYXRpb24pIHtcbiAgICAgICAgYmVzdEVkZ2UgPSBlZGdlO1xuICAgICAgICBiZXN0U2VwYXJhdGlvbiA9IHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZWRnZUluZGV4WzBdID0gYmVzdEVkZ2U7XG4gICAgcmV0dXJuIGJlc3RTZXBhcmF0aW9uO1xuICB9O1xuXG4gIGIyQ29sbGlzaW9uLkZpbmRJbmNpZGVudEVkZ2UgPSBmdW5jdGlvbihjLCBwb2x5MSwgeGYxLCBlZGdlMSwgcG9seTIsIHhmMikge1xuICAgIHZhciBjb3VudDEsIGNvdW50MiwgZG90LCBpLCBpMSwgaTIsIGluZGV4LCBtaW5Eb3QsIG5vcm1hbDFYLCBub3JtYWwxWSwgbm9ybWFsczEsIG5vcm1hbHMyLCB0Q2xpcCwgdE1hdCwgdFZlYywgdFgsIHZlcnRpY2VzMjtcbiAgICBpZiAoZWRnZTEgPT09IHZvaWQgMCkge1xuICAgICAgZWRnZTEgPSAwO1xuICAgIH1cbiAgICBjb3VudDEgPSBwYXJzZUludChwb2x5MS5tX3ZlcnRleENvdW50KTtcbiAgICBub3JtYWxzMSA9IHBvbHkxLm1fbm9ybWFscztcbiAgICBjb3VudDIgPSBwYXJzZUludChwb2x5Mi5tX3ZlcnRleENvdW50KTtcbiAgICB2ZXJ0aWNlczIgPSBwb2x5Mi5tX3ZlcnRpY2VzO1xuICAgIG5vcm1hbHMyID0gcG9seTIubV9ub3JtYWxzO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0TWF0ID0geGYxLlI7XG4gICAgdFZlYyA9IG5vcm1hbHMxW2VkZ2UxXTtcbiAgICBub3JtYWwxWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgbm9ybWFsMVkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgIHRNYXQgPSB4ZjIuUjtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogbm9ybWFsMVggKyB0TWF0LmNvbDEueSAqIG5vcm1hbDFZO1xuICAgIG5vcm1hbDFZID0gdE1hdC5jb2wyLnggKiBub3JtYWwxWCArIHRNYXQuY29sMi55ICogbm9ybWFsMVk7XG4gICAgbm9ybWFsMVggPSB0WDtcbiAgICBpbmRleCA9IDA7XG4gICAgbWluRG90ID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGNvdW50Mikge1xuICAgICAgdFZlYyA9IG5vcm1hbHMyW2ldO1xuICAgICAgZG90ID0gbm9ybWFsMVggKiB0VmVjLnggKyBub3JtYWwxWSAqIHRWZWMueTtcbiAgICAgIGlmIChkb3QgPCBtaW5Eb3QpIHtcbiAgICAgICAgbWluRG90ID0gZG90O1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHRDbGlwID0gdm9pZCAwO1xuICAgIGkxID0gcGFyc2VJbnQoaW5kZXgpO1xuICAgIGkyID0gcGFyc2VJbnQoKGkxICsgMSA8IGNvdW50MiA/IGkxICsgMSA6IDApKTtcbiAgICB0Q2xpcCA9IGNbMF07XG4gICAgdFZlYyA9IHZlcnRpY2VzMltpMV07XG4gICAgdE1hdCA9IHhmMi5SO1xuICAgIHRDbGlwLnYueCA9IHhmMi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIHRDbGlwLnYueSA9IHhmMi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgIHRDbGlwLmlkLmZlYXR1cmVzLnJlZmVyZW5jZUVkZ2UgPSBlZGdlMTtcbiAgICB0Q2xpcC5pZC5mZWF0dXJlcy5pbmNpZGVudEVkZ2UgPSBpMTtcbiAgICB0Q2xpcC5pZC5mZWF0dXJlcy5pbmNpZGVudFZlcnRleCA9IDA7XG4gICAgdENsaXAgPSBjWzFdO1xuICAgIHRWZWMgPSB2ZXJ0aWNlczJbaTJdO1xuICAgIHRNYXQgPSB4ZjIuUjtcbiAgICB0Q2xpcC52LnggPSB4ZjIucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICB0Q2xpcC52LnkgPSB4ZjIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICB0Q2xpcC5pZC5mZWF0dXJlcy5yZWZlcmVuY2VFZGdlID0gZWRnZTE7XG4gICAgdENsaXAuaWQuZmVhdHVyZXMuaW5jaWRlbnRFZGdlID0gaTI7XG4gICAgdENsaXAuaWQuZmVhdHVyZXMuaW5jaWRlbnRWZXJ0ZXggPSAxO1xuICB9O1xuXG4gIGIyQ29sbGlzaW9uLk1ha2VDbGlwUG9pbnRWZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcjtcbiAgICByID0gbmV3IEFycmF5KDIpO1xuICAgIHJbMF0gPSBuZXcgQ2xpcFZlcnRleCgpO1xuICAgIHJbMV0gPSBuZXcgQ2xpcFZlcnRleCgpO1xuICAgIHJldHVybiByO1xuICB9O1xuXG4gIGIyQ29sbGlzaW9uLkNvbGxpZGVQb2x5Z29ucyA9IGZ1bmN0aW9uKG1hbmlmb2xkLCBwb2x5QSwgeGZBLCBwb2x5QiwgeGZCKSB7XG4gICAgdmFyIGNsaXBQb2ludHMxLCBjbGlwUG9pbnRzMiwgY291bnQxLCBjcCwgY3YsIGVkZ2UxLCBlZGdlQSwgZWRnZUIsIGZsaXAsIGZyb250T2Zmc2V0LCBpLCBpbmNpZGVudEVkZ2UsIGtfYWJzb2x1dGVUb2wsIGtfcmVsYXRpdmVUb2wsIGxvY2FsTm9ybWFsLCBsb2NhbFRhbmdlbnQsIGxvY2FsX3YxMSwgbG9jYWxfdjEyLCBub3JtYWwsIG5wLCBwbGFuZVBvaW50LCBwb2ludENvdW50LCBwb2x5MSwgcG9seTIsIHNlcGFyYXRpb24sIHNlcGFyYXRpb25BLCBzZXBhcmF0aW9uQiwgc2lkZU9mZnNldDEsIHNpZGVPZmZzZXQyLCB0TWF0LCB0WCwgdFksIHRhbmdlbnQsIHRhbmdlbnQyLCB0b3RhbFJhZGl1cywgdjExLCB2MTIsIHZlcnRpY2VzMSwgeGYxLCB4ZjI7XG4gICAgY3YgPSB2b2lkIDA7XG4gICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gMDtcbiAgICB0b3RhbFJhZGl1cyA9IHBvbHlBLm1fcmFkaXVzICsgcG9seUIubV9yYWRpdXM7XG4gICAgZWRnZUEgPSAwO1xuICAgIGIyQ29sbGlzaW9uLnNfZWRnZUFPWzBdID0gZWRnZUE7XG4gICAgc2VwYXJhdGlvbkEgPSBiMkNvbGxpc2lvbi5GaW5kTWF4U2VwYXJhdGlvbihiMkNvbGxpc2lvbi5zX2VkZ2VBTywgcG9seUEsIHhmQSwgcG9seUIsIHhmQik7XG4gICAgZWRnZUEgPSBiMkNvbGxpc2lvbi5zX2VkZ2VBT1swXTtcbiAgICBpZiAoc2VwYXJhdGlvbkEgPiB0b3RhbFJhZGl1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlZGdlQiA9IDA7XG4gICAgYjJDb2xsaXNpb24uc19lZGdlQk9bMF0gPSBlZGdlQjtcbiAgICBzZXBhcmF0aW9uQiA9IGIyQ29sbGlzaW9uLkZpbmRNYXhTZXBhcmF0aW9uKGIyQ29sbGlzaW9uLnNfZWRnZUJPLCBwb2x5QiwgeGZCLCBwb2x5QSwgeGZBKTtcbiAgICBlZGdlQiA9IGIyQ29sbGlzaW9uLnNfZWRnZUJPWzBdO1xuICAgIGlmIChzZXBhcmF0aW9uQiA+IHRvdGFsUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHBvbHkxID0gdm9pZCAwO1xuICAgIHBvbHkyID0gdm9pZCAwO1xuICAgIHhmMSA9IHZvaWQgMDtcbiAgICB4ZjIgPSB2b2lkIDA7XG4gICAgZWRnZTEgPSAwO1xuICAgIGZsaXAgPSAwO1xuICAgIGtfcmVsYXRpdmVUb2wgPSAwLjk4O1xuICAgIGtfYWJzb2x1dGVUb2wgPSAwLjAwMTtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIGlmIChzZXBhcmF0aW9uQiA+IGtfcmVsYXRpdmVUb2wgKiBzZXBhcmF0aW9uQSArIGtfYWJzb2x1dGVUb2wpIHtcbiAgICAgIHBvbHkxID0gcG9seUI7XG4gICAgICBwb2x5MiA9IHBvbHlBO1xuICAgICAgeGYxID0geGZCO1xuICAgICAgeGYyID0geGZBO1xuICAgICAgZWRnZTEgPSBlZGdlQjtcbiAgICAgIG1hbmlmb2xkLm1fdHlwZSA9IGIyTWFuaWZvbGQuZV9mYWNlQjtcbiAgICAgIGZsaXAgPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb2x5MSA9IHBvbHlBO1xuICAgICAgcG9seTIgPSBwb2x5QjtcbiAgICAgIHhmMSA9IHhmQTtcbiAgICAgIHhmMiA9IHhmQjtcbiAgICAgIGVkZ2UxID0gZWRnZUE7XG4gICAgICBtYW5pZm9sZC5tX3R5cGUgPSBiMk1hbmlmb2xkLmVfZmFjZUE7XG4gICAgICBmbGlwID0gMDtcbiAgICB9XG4gICAgaW5jaWRlbnRFZGdlID0gYjJDb2xsaXNpb24uc19pbmNpZGVudEVkZ2U7XG4gICAgYjJDb2xsaXNpb24uRmluZEluY2lkZW50RWRnZShpbmNpZGVudEVkZ2UsIHBvbHkxLCB4ZjEsIGVkZ2UxLCBwb2x5MiwgeGYyKTtcbiAgICBjb3VudDEgPSBwYXJzZUludChwb2x5MS5tX3ZlcnRleENvdW50KTtcbiAgICB2ZXJ0aWNlczEgPSBwb2x5MS5tX3ZlcnRpY2VzO1xuICAgIGxvY2FsX3YxMSA9IHZlcnRpY2VzMVtlZGdlMV07XG4gICAgbG9jYWxfdjEyID0gdm9pZCAwO1xuICAgIGlmIChlZGdlMSArIDEgPCBjb3VudDEpIHtcbiAgICAgIGxvY2FsX3YxMiA9IHZlcnRpY2VzMVtwYXJzZUludChlZGdlMSArIDEpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYWxfdjEyID0gdmVydGljZXMxWzBdO1xuICAgIH1cbiAgICBsb2NhbFRhbmdlbnQgPSBiMkNvbGxpc2lvbi5zX2xvY2FsVGFuZ2VudDtcbiAgICBsb2NhbFRhbmdlbnQuU2V0KGxvY2FsX3YxMi54IC0gbG9jYWxfdjExLngsIGxvY2FsX3YxMi55IC0gbG9jYWxfdjExLnkpO1xuICAgIGxvY2FsVGFuZ2VudC5Ob3JtYWxpemUoKTtcbiAgICBsb2NhbE5vcm1hbCA9IGIyQ29sbGlzaW9uLnNfbG9jYWxOb3JtYWw7XG4gICAgbG9jYWxOb3JtYWwueCA9IGxvY2FsVGFuZ2VudC55O1xuICAgIGxvY2FsTm9ybWFsLnkgPSAtbG9jYWxUYW5nZW50Lng7XG4gICAgcGxhbmVQb2ludCA9IGIyQ29sbGlzaW9uLnNfcGxhbmVQb2ludDtcbiAgICBwbGFuZVBvaW50LlNldCgwLjUgKiAobG9jYWxfdjExLnggKyBsb2NhbF92MTIueCksIDAuNSAqIChsb2NhbF92MTEueSArIGxvY2FsX3YxMi55KSk7XG4gICAgdGFuZ2VudCA9IGIyQ29sbGlzaW9uLnNfdGFuZ2VudDtcbiAgICB0TWF0ID0geGYxLlI7XG4gICAgdGFuZ2VudC54ID0gdE1hdC5jb2wxLnggKiBsb2NhbFRhbmdlbnQueCArIHRNYXQuY29sMi54ICogbG9jYWxUYW5nZW50Lnk7XG4gICAgdGFuZ2VudC55ID0gdE1hdC5jb2wxLnkgKiBsb2NhbFRhbmdlbnQueCArIHRNYXQuY29sMi55ICogbG9jYWxUYW5nZW50Lnk7XG4gICAgdGFuZ2VudDIgPSBiMkNvbGxpc2lvbi5zX3RhbmdlbnQyO1xuICAgIHRhbmdlbnQyLnggPSAtdGFuZ2VudC54O1xuICAgIHRhbmdlbnQyLnkgPSAtdGFuZ2VudC55O1xuICAgIG5vcm1hbCA9IGIyQ29sbGlzaW9uLnNfbm9ybWFsO1xuICAgIG5vcm1hbC54ID0gdGFuZ2VudC55O1xuICAgIG5vcm1hbC55ID0gLXRhbmdlbnQueDtcbiAgICB2MTEgPSBiMkNvbGxpc2lvbi5zX3YxMTtcbiAgICB2MTIgPSBiMkNvbGxpc2lvbi5zX3YxMjtcbiAgICB2MTEueCA9IHhmMS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogbG9jYWxfdjExLnggKyB0TWF0LmNvbDIueCAqIGxvY2FsX3YxMS55KTtcbiAgICB2MTEueSA9IHhmMS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogbG9jYWxfdjExLnggKyB0TWF0LmNvbDIueSAqIGxvY2FsX3YxMS55KTtcbiAgICB2MTIueCA9IHhmMS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogbG9jYWxfdjEyLnggKyB0TWF0LmNvbDIueCAqIGxvY2FsX3YxMi55KTtcbiAgICB2MTIueSA9IHhmMS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogbG9jYWxfdjEyLnggKyB0TWF0LmNvbDIueSAqIGxvY2FsX3YxMi55KTtcbiAgICBmcm9udE9mZnNldCA9IG5vcm1hbC54ICogdjExLnggKyBub3JtYWwueSAqIHYxMS55O1xuICAgIHNpZGVPZmZzZXQxID0gKC10YW5nZW50LnggKiB2MTEueCkgLSB0YW5nZW50LnkgKiB2MTEueSArIHRvdGFsUmFkaXVzO1xuICAgIHNpZGVPZmZzZXQyID0gdGFuZ2VudC54ICogdjEyLnggKyB0YW5nZW50LnkgKiB2MTIueSArIHRvdGFsUmFkaXVzO1xuICAgIGNsaXBQb2ludHMxID0gYjJDb2xsaXNpb24uc19jbGlwUG9pbnRzMTtcbiAgICBjbGlwUG9pbnRzMiA9IGIyQ29sbGlzaW9uLnNfY2xpcFBvaW50czI7XG4gICAgbnAgPSAwO1xuICAgIG5wID0gYjJDb2xsaXNpb24uQ2xpcFNlZ21lbnRUb0xpbmUoY2xpcFBvaW50czEsIGluY2lkZW50RWRnZSwgdGFuZ2VudDIsIHNpZGVPZmZzZXQxKTtcbiAgICBpZiAobnAgPCAyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG5wID0gYjJDb2xsaXNpb24uQ2xpcFNlZ21lbnRUb0xpbmUoY2xpcFBvaW50czIsIGNsaXBQb2ludHMxLCB0YW5nZW50LCBzaWRlT2Zmc2V0Mik7XG4gICAgaWYgKG5wIDwgMikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwuU2V0Vihsb2NhbE5vcm1hbCk7XG4gICAgbWFuaWZvbGQubV9sb2NhbFBvaW50LlNldFYocGxhbmVQb2ludCk7XG4gICAgcG9pbnRDb3VudCA9IDA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgICBjdiA9IGNsaXBQb2ludHMyW2ldO1xuICAgICAgc2VwYXJhdGlvbiA9IG5vcm1hbC54ICogY3Yudi54ICsgbm9ybWFsLnkgKiBjdi52LnkgLSBmcm9udE9mZnNldDtcbiAgICAgIGlmIChzZXBhcmF0aW9uIDw9IHRvdGFsUmFkaXVzKSB7XG4gICAgICAgIGNwID0gbWFuaWZvbGQubV9wb2ludHNbcG9pbnRDb3VudF07XG4gICAgICAgIHRNYXQgPSB4ZjIuUjtcbiAgICAgICAgdFggPSBjdi52LnggLSB4ZjIucG9zaXRpb24ueDtcbiAgICAgICAgdFkgPSBjdi52LnkgLSB4ZjIucG9zaXRpb24ueTtcbiAgICAgICAgY3AubV9sb2NhbFBvaW50LnggPSB0WCAqIHRNYXQuY29sMS54ICsgdFkgKiB0TWF0LmNvbDEueTtcbiAgICAgICAgY3AubV9sb2NhbFBvaW50LnkgPSB0WCAqIHRNYXQuY29sMi54ICsgdFkgKiB0TWF0LmNvbDIueTtcbiAgICAgICAgY3AubV9pZC5TZXQoY3YuaWQpO1xuICAgICAgICBjcC5tX2lkLmZlYXR1cmVzLmZsaXAgPSBmbGlwO1xuICAgICAgICArK3BvaW50Q291bnQ7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIG1hbmlmb2xkLm1fcG9pbnRDb3VudCA9IHBvaW50Q291bnQ7XG4gIH07XG5cbiAgYjJDb2xsaXNpb24uQ29sbGlkZUNpcmNsZXMgPSBmdW5jdGlvbihtYW5pZm9sZCwgY2lyY2xlMSwgeGYxLCBjaXJjbGUyLCB4ZjIpIHtcbiAgICB2YXIgZFgsIGRZLCBkaXN0U3FyLCBwMVgsIHAxWSwgcDJYLCBwMlksIHJhZGl1cywgdE1hdCwgdFZlYztcbiAgICBtYW5pZm9sZC5tX3BvaW50Q291bnQgPSAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0TWF0ID0geGYxLlI7XG4gICAgdFZlYyA9IGNpcmNsZTEubV9wO1xuICAgIHAxWCA9IHhmMS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIHAxWSA9IHhmMS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgIHRNYXQgPSB4ZjIuUjtcbiAgICB0VmVjID0gY2lyY2xlMi5tX3A7XG4gICAgcDJYID0geGYyLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgcDJZID0geGYyLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgZFggPSBwMlggLSBwMVg7XG4gICAgZFkgPSBwMlkgLSBwMVk7XG4gICAgZGlzdFNxciA9IGRYICogZFggKyBkWSAqIGRZO1xuICAgIHJhZGl1cyA9IGNpcmNsZTEubV9yYWRpdXMgKyBjaXJjbGUyLm1fcmFkaXVzO1xuICAgIGlmIChkaXN0U3FyID4gcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG1hbmlmb2xkLm1fdHlwZSA9IGIyTWFuaWZvbGQuZV9jaXJjbGVzO1xuICAgIG1hbmlmb2xkLm1fbG9jYWxQb2ludC5TZXRWKGNpcmNsZTEubV9wKTtcbiAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwuU2V0WmVybygpO1xuICAgIG1hbmlmb2xkLm1fcG9pbnRDb3VudCA9IDE7XG4gICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9sb2NhbFBvaW50LlNldFYoY2lyY2xlMi5tX3ApO1xuICAgIG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1faWQua2V5ID0gMDtcbiAgfTtcblxuICBiMkNvbGxpc2lvbi5Db2xsaWRlUG9seWdvbkFuZENpcmNsZSA9IGZ1bmN0aW9uKG1hbmlmb2xkLCBwb2x5Z29uLCB4ZjEsIGNpcmNsZSwgeGYyKSB7XG4gICAgdmFyIGNMb2NhbFgsIGNMb2NhbFksIGNYLCBjWSwgZFgsIGRZLCBkaXN0LCBmYWNlQ2VudGVyWCwgZmFjZUNlbnRlclksIGksIG5vcm1hbEluZGV4LCBub3JtYWxzLCBwb3NpdGlvblgsIHBvc2l0aW9uWSwgcmFkaXVzLCBzLCBzZXBhcmF0aW9uLCB0TWF0LCB0UG9pbnQsIHRWZWMsIHUxLCB1MiwgdjEsIHYyLCB2ZXJ0SW5kZXgxLCB2ZXJ0SW5kZXgyLCB2ZXJ0ZXhDb3VudCwgdmVydGljZXM7XG4gICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gMDtcbiAgICB0UG9pbnQgPSB2b2lkIDA7XG4gICAgZFggPSAwO1xuICAgIGRZID0gMDtcbiAgICBwb3NpdGlvblggPSAwO1xuICAgIHBvc2l0aW9uWSA9IDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRNYXQgPSB4ZjIuUjtcbiAgICB0VmVjID0gY2lyY2xlLm1fcDtcbiAgICBjWCA9IHhmMi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIGNZID0geGYyLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgZFggPSBjWCAtIHhmMS5wb3NpdGlvbi54O1xuICAgIGRZID0gY1kgLSB4ZjEucG9zaXRpb24ueTtcbiAgICB0TWF0ID0geGYxLlI7XG4gICAgY0xvY2FsWCA9IGRYICogdE1hdC5jb2wxLnggKyBkWSAqIHRNYXQuY29sMS55O1xuICAgIGNMb2NhbFkgPSBkWCAqIHRNYXQuY29sMi54ICsgZFkgKiB0TWF0LmNvbDIueTtcbiAgICBkaXN0ID0gMDtcbiAgICBub3JtYWxJbmRleCA9IDA7XG4gICAgc2VwYXJhdGlvbiA9IC1OdW1iZXIuTUFYX1ZBTFVFO1xuICAgIHJhZGl1cyA9IHBvbHlnb24ubV9yYWRpdXMgKyBjaXJjbGUubV9yYWRpdXM7XG4gICAgdmVydGV4Q291bnQgPSBwYXJzZUludChwb2x5Z29uLm1fdmVydGV4Q291bnQpO1xuICAgIHZlcnRpY2VzID0gcG9seWdvbi5tX3ZlcnRpY2VzO1xuICAgIG5vcm1hbHMgPSBwb2x5Z29uLm1fbm9ybWFscztcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHZlcnRleENvdW50KSB7XG4gICAgICB0VmVjID0gdmVydGljZXNbaV07XG4gICAgICBkWCA9IGNMb2NhbFggLSB0VmVjLng7XG4gICAgICBkWSA9IGNMb2NhbFkgLSB0VmVjLnk7XG4gICAgICB0VmVjID0gbm9ybWFsc1tpXTtcbiAgICAgIHMgPSB0VmVjLnggKiBkWCArIHRWZWMueSAqIGRZO1xuICAgICAgaWYgKHMgPiByYWRpdXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHMgPiBzZXBhcmF0aW9uKSB7XG4gICAgICAgIHNlcGFyYXRpb24gPSBzO1xuICAgICAgICBub3JtYWxJbmRleCA9IGk7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHZlcnRJbmRleDEgPSBwYXJzZUludChub3JtYWxJbmRleCk7XG4gICAgdmVydEluZGV4MiA9IHBhcnNlSW50KCh2ZXJ0SW5kZXgxICsgMSA8IHZlcnRleENvdW50ID8gdmVydEluZGV4MSArIDEgOiAwKSk7XG4gICAgdjEgPSB2ZXJ0aWNlc1t2ZXJ0SW5kZXgxXTtcbiAgICB2MiA9IHZlcnRpY2VzW3ZlcnRJbmRleDJdO1xuICAgIGlmIChzZXBhcmF0aW9uIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLm1fdHlwZSA9IGIyTWFuaWZvbGQuZV9mYWNlQTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5TZXRWKG5vcm1hbHNbbm9ybWFsSW5kZXhdKTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQb2ludC54ID0gMC41ICogKHYxLnggKyB2Mi54KTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQb2ludC55ID0gMC41ICogKHYxLnkgKyB2Mi55KTtcbiAgICAgIG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1fbG9jYWxQb2ludC5TZXRWKGNpcmNsZS5tX3ApO1xuICAgICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9pZC5rZXkgPSAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB1MSA9IChjTG9jYWxYIC0gdjEueCkgKiAodjIueCAtIHYxLngpICsgKGNMb2NhbFkgLSB2MS55KSAqICh2Mi55IC0gdjEueSk7XG4gICAgdTIgPSAoY0xvY2FsWCAtIHYyLngpICogKHYxLnggLSB2Mi54KSArIChjTG9jYWxZIC0gdjIueSkgKiAodjEueSAtIHYyLnkpO1xuICAgIGlmICh1MSA8PSAwLjApIHtcbiAgICAgIGlmICgoY0xvY2FsWCAtIHYxLngpICogKGNMb2NhbFggLSB2MS54KSArIChjTG9jYWxZIC0gdjEueSkgKiAoY0xvY2FsWSAtIHYxLnkpID4gcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG1hbmlmb2xkLm1fcG9pbnRDb3VudCA9IDE7XG4gICAgICBtYW5pZm9sZC5tX3R5cGUgPSBiMk1hbmlmb2xkLmVfZmFjZUE7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwueCA9IGNMb2NhbFggLSB2MS54O1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnkgPSBjTG9jYWxZIC0gdjEueTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5Ob3JtYWxpemUoKTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQb2ludC5TZXRWKHYxKTtcbiAgICAgIG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1fbG9jYWxQb2ludC5TZXRWKGNpcmNsZS5tX3ApO1xuICAgICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9pZC5rZXkgPSAwO1xuICAgIH0gZWxzZSBpZiAodTIgPD0gMCkge1xuICAgICAgaWYgKChjTG9jYWxYIC0gdjIueCkgKiAoY0xvY2FsWCAtIHYyLngpICsgKGNMb2NhbFkgLSB2Mi55KSAqIChjTG9jYWxZIC0gdjIueSkgPiByYWRpdXMgKiByYWRpdXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLm1fdHlwZSA9IGIyTWFuaWZvbGQuZV9mYWNlQTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC54ID0gY0xvY2FsWCAtIHYyLng7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwueSA9IGNMb2NhbFkgLSB2Mi55O1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLk5vcm1hbGl6ZSgpO1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBvaW50LlNldFYodjIpO1xuICAgICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9sb2NhbFBvaW50LlNldFYoY2lyY2xlLm1fcCk7XG4gICAgICBtYW5pZm9sZC5tX3BvaW50c1swXS5tX2lkLmtleSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhY2VDZW50ZXJYID0gMC41ICogKHYxLnggKyB2Mi54KTtcbiAgICAgIGZhY2VDZW50ZXJZID0gMC41ICogKHYxLnkgKyB2Mi55KTtcbiAgICAgIHNlcGFyYXRpb24gPSAoY0xvY2FsWCAtIGZhY2VDZW50ZXJYKSAqIG5vcm1hbHNbdmVydEluZGV4MV0ueCArIChjTG9jYWxZIC0gZmFjZUNlbnRlclkpICogbm9ybWFsc1t2ZXJ0SW5kZXgxXS55O1xuICAgICAgaWYgKHNlcGFyYXRpb24gPiByYWRpdXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLm1fdHlwZSA9IGIyTWFuaWZvbGQuZV9mYWNlQTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC54ID0gbm9ybWFsc1t2ZXJ0SW5kZXgxXS54O1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnkgPSBub3JtYWxzW3ZlcnRJbmRleDFdLnk7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwuTm9ybWFsaXplKCk7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUG9pbnQuU2V0KGZhY2VDZW50ZXJYLCBmYWNlQ2VudGVyWSk7XG4gICAgICBtYW5pZm9sZC5tX3BvaW50c1swXS5tX2xvY2FsUG9pbnQuU2V0VihjaXJjbGUubV9wKTtcbiAgICAgIG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1faWQua2V5ID0gMDtcbiAgICB9XG4gIH07XG5cbiAgYjJDb2xsaXNpb24uVGVzdE92ZXJsYXAgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIGQxWCwgZDFZLCBkMlgsIGQyWSwgdDEsIHQyO1xuICAgIHQxID0gYi5sb3dlckJvdW5kO1xuICAgIHQyID0gYS51cHBlckJvdW5kO1xuICAgIGQxWCA9IHQxLnggLSB0Mi54O1xuICAgIGQxWSA9IHQxLnkgLSB0Mi55O1xuICAgIHQxID0gYS5sb3dlckJvdW5kO1xuICAgIHQyID0gYi51cHBlckJvdW5kO1xuICAgIGQyWCA9IHQxLnggLSB0Mi54O1xuICAgIGQyWSA9IHQxLnkgLSB0Mi55O1xuICAgIGlmIChkMVggPiAwLjAgfHwgZDFZID4gMC4wKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkMlggPiAwLjAgfHwgZDJZID4gMC4wKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIGIyQ29sbGlzaW9uLnNfaW5jaWRlbnRFZGdlID0gYjJDb2xsaXNpb24uTWFrZUNsaXBQb2ludFZlY3RvcigpO1xuXG4gIGIyQ29sbGlzaW9uLnNfY2xpcFBvaW50czEgPSBiMkNvbGxpc2lvbi5NYWtlQ2xpcFBvaW50VmVjdG9yKCk7XG5cbiAgYjJDb2xsaXNpb24uc19jbGlwUG9pbnRzMiA9IGIyQ29sbGlzaW9uLk1ha2VDbGlwUG9pbnRWZWN0b3IoKTtcblxuICByZXR1cm4gYjJDb2xsaXNpb247XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29sbGlzaW9uLmpzLm1hcFxuIiwidmFyIEJveDJELCBGZWF0dXJlcztcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5GZWF0dXJlcyA9IEJveDJELkNvbGxpc2lvbi5GZWF0dXJlcztcblxuQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdElEID0gKGZ1bmN0aW9uKCkge1xuICBiMkNvbnRhY3RJRC5wcm90b3R5cGUua2V5ID0gbnVsbDtcblxuICBiMkNvbnRhY3RJRC5wcm90b3R5cGUuZmVhdHVyZXMgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdElEKCkge1xuICAgIHRoaXMuZmVhdHVyZXMgPSBuZXcgRmVhdHVyZXMoKTtcbiAgICB0aGlzLmZlYXR1cmVzLl9tX2lkID0gdGhpcztcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkNvbnRhY3RJRC5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24oaWQpIHtcbiAgICB0aGlzLmtleSA9IGlkLl9rZXk7XG4gIH07XG5cbiAgYjJDb250YWN0SUQucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaWQ7XG4gICAgaWQgPSBuZXcgYjJDb250YWN0SUQoKTtcbiAgICBpZC5rZXkgPSB0aGlzLmtleTtcbiAgICByZXR1cm4gaWQ7XG4gIH07XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYjJDb250YWN0SUQucHJvdG90eXBlLCB7XG4gICAga2V5OiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXk7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9rZXkgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5mZWF0dXJlcy5fcmVmZXJlbmNlRWRnZSA9IHRoaXMuX2tleSAmIDB4MDAwMDAwZmY7XG4gICAgICAgIHRoaXMuZmVhdHVyZXMuX2luY2lkZW50RWRnZSA9ICgodGhpcy5fa2V5ICYgMHgwMDAwZmYwMCkgPj4gOCkgJiAweDAwMDAwMGZmO1xuICAgICAgICB0aGlzLmZlYXR1cmVzLl9pbmNpZGVudFZlcnRleCA9ICgodGhpcy5fa2V5ICYgMHgwMGZmMDAwMCkgPj4gMTYpICYgMHgwMDAwMDBmZjtcbiAgICAgICAgdGhpcy5mZWF0dXJlcy5fZmxpcCA9ICgodGhpcy5fa2V5ICYgMHhmZjAwMDAwMCkgPj4gMjQpICYgMHgwMDAwMDBmZjtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBiMkNvbnRhY3RJRDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0SUQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udGFjdElELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkNvbnRhY3RJRCA9IEJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRDtcblxuQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdFBvaW50ID0gKGZ1bmN0aW9uKCkge1xuICBiMkNvbnRhY3RQb2ludC5wcm90b3R5cGUucG9zaXRpb24gPSBudWxsO1xuXG4gIGIyQ29udGFjdFBvaW50LnByb3RvdHlwZS52ZWxvY2l0eSA9IG51bGw7XG5cbiAgYjJDb250YWN0UG9pbnQucHJvdG90eXBlLm5vcm1hbCA9IG51bGw7XG5cbiAgYjJDb250YWN0UG9pbnQucHJvdG90eXBlLmlkID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkNvbnRhY3RQb2ludCgpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5pZCA9IG5ldyBiMkNvbnRhY3RJRCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkNvbnRhY3RQb2ludDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0UG9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvciwgYjJNYXRoLCBiMlNldHRpbmdzLCBiMlNpbXBsZXg7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyU2ltcGxleCA9IEJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXg7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2UgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyRGlzdGFuY2UoKSB7fVxuXG4gIGIyRGlzdGFuY2UuRGlzdGFuY2UgPSBmdW5jdGlvbihvdXRwdXQsIGNhY2hlLCBpbnB1dCkge1xuICAgIHZhciBjbG9zZXN0UG9pbnQsIGQsIGRpc3RhbmNlU3FyMSwgZGlzdGFuY2VTcXIyLCBkdXBsaWNhdGUsIGksIGl0ZXIsIGtfbWF4SXRlcnMsIG5vcm1hbCwgcCwgcHJveHlBLCBwcm94eUIsIHJBLCByQiwgc2F2ZUEsIHNhdmVCLCBzYXZlQ291bnQsIHNpbXBsZXgsIHRyYW5zZm9ybUEsIHRyYW5zZm9ybUIsIHZlcnRleCwgdmVydGljZXM7XG4gICAgcHJveHlBID0gaW5wdXQucHJveHlBO1xuICAgIHByb3h5QiA9IGlucHV0LnByb3h5QjtcbiAgICB0cmFuc2Zvcm1BID0gaW5wdXQudHJhbnNmb3JtQTtcbiAgICB0cmFuc2Zvcm1CID0gaW5wdXQudHJhbnNmb3JtQjtcbiAgICBzaW1wbGV4ID0gYjJEaXN0YW5jZS5zX3NpbXBsZXg7XG4gICAgc2ltcGxleC5SZWFkQ2FjaGUoY2FjaGUsIHByb3h5QSwgdHJhbnNmb3JtQSwgcHJveHlCLCB0cmFuc2Zvcm1CKTtcbiAgICB2ZXJ0aWNlcyA9IHNpbXBsZXgubV92ZXJ0aWNlcztcbiAgICBrX21heEl0ZXJzID0gMjA7XG4gICAgc2F2ZUEgPSBiMkRpc3RhbmNlLnNfc2F2ZUE7XG4gICAgc2F2ZUIgPSBiMkRpc3RhbmNlLnNfc2F2ZUI7XG4gICAgc2F2ZUNvdW50ID0gMDtcbiAgICBjbG9zZXN0UG9pbnQgPSBzaW1wbGV4LkdldENsb3Nlc3RQb2ludCgpO1xuICAgIGRpc3RhbmNlU3FyMSA9IGNsb3Nlc3RQb2ludC5MZW5ndGhTcXVhcmVkKCk7XG4gICAgZGlzdGFuY2VTcXIyID0gZGlzdGFuY2VTcXIxO1xuICAgIGkgPSAwO1xuICAgIHAgPSB2b2lkIDA7XG4gICAgaXRlciA9IDA7XG4gICAgd2hpbGUgKGl0ZXIgPCBrX21heEl0ZXJzKSB7XG4gICAgICBzYXZlQ291bnQgPSBzaW1wbGV4Lm1fY291bnQ7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgc2F2ZUNvdW50KSB7XG4gICAgICAgIHNhdmVBW2ldID0gdmVydGljZXNbaV0uaW5kZXhBO1xuICAgICAgICBzYXZlQltpXSA9IHZlcnRpY2VzW2ldLmluZGV4QjtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChzaW1wbGV4Lm1fY291bnQpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGkgPSBpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2ltcGxleC5Tb2x2ZTIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNpbXBsZXguU29sdmUzKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoc2ltcGxleC5tX2NvdW50ID09PSAzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcCA9IHNpbXBsZXguR2V0Q2xvc2VzdFBvaW50KCk7XG4gICAgICBkaXN0YW5jZVNxcjIgPSBwLkxlbmd0aFNxdWFyZWQoKTtcblxuICAgICAgLyoqXG4gICAgICB0b2RvOiB0aGlzIGxvb2tzIGxpa2UgYSBidWdcbiAgICAgICAqL1xuICAgICAgZGlzdGFuY2VTcXIxID0gZGlzdGFuY2VTcXIyO1xuICAgICAgZCA9IHNpbXBsZXguR2V0U2VhcmNoRGlyZWN0aW9uKCk7XG4gICAgICBpZiAoZC5MZW5ndGhTcXVhcmVkKCkgPCBOdW1iZXIuTUlOX1ZBTFVFICogTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHZlcnRleCA9IHZlcnRpY2VzW3NpbXBsZXgubV9jb3VudF07XG4gICAgICB2ZXJ0ZXguaW5kZXhBID0gcHJveHlBLkdldFN1cHBvcnQoYjJNYXRoLk11bFRNVih0cmFuc2Zvcm1BLlIsIGQuR2V0TmVnYXRpdmUoKSkpO1xuICAgICAgdmVydGV4LndBID0gYjJNYXRoLk11bFgodHJhbnNmb3JtQSwgcHJveHlBLkdldFZlcnRleCh2ZXJ0ZXguaW5kZXhBKSk7XG4gICAgICB2ZXJ0ZXguaW5kZXhCID0gcHJveHlCLkdldFN1cHBvcnQoYjJNYXRoLk11bFRNVih0cmFuc2Zvcm1CLlIsIGQpKTtcbiAgICAgIHZlcnRleC53QiA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIHByb3h5Qi5HZXRWZXJ0ZXgodmVydGV4LmluZGV4QikpO1xuICAgICAgdmVydGV4LncgPSBiMk1hdGguU3VidHJhY3RWVih2ZXJ0ZXgud0IsIHZlcnRleC53QSk7XG4gICAgICArK2l0ZXI7XG4gICAgICArK2IyRGlzdGFuY2UuYjJfZ2prSXRlcnM7XG4gICAgICBkdXBsaWNhdGUgPSBmYWxzZTtcbiAgICAgIGkgPSAwO1xuICAgICAgd2hpbGUgKGkgPCBzYXZlQ291bnQpIHtcbiAgICAgICAgaWYgKHZlcnRleC5pbmRleEEgPT09IHNhdmVBW2ldICYmIHZlcnRleC5pbmRleEIgPT09IHNhdmVCW2ldKSB7XG4gICAgICAgICAgZHVwbGljYXRlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgICB9XG4gICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgKytzaW1wbGV4Lm1fY291bnQ7XG4gICAgfVxuICAgIGIyRGlzdGFuY2UuYjJfZ2prTWF4SXRlcnMgPSBiMk1hdGguTWF4KGIyRGlzdGFuY2UuYjJfZ2prTWF4SXRlcnMsIGl0ZXIpO1xuICAgIHNpbXBsZXguR2V0V2l0bmVzc1BvaW50cyhvdXRwdXQucG9pbnRBLCBvdXRwdXQucG9pbnRCKTtcbiAgICBvdXRwdXQuZGlzdGFuY2UgPSBiMk1hdGguU3VidHJhY3RWVihvdXRwdXQucG9pbnRBLCBvdXRwdXQucG9pbnRCKS5MZW5ndGgoKTtcbiAgICBvdXRwdXQuaXRlcmF0aW9ucyA9IGl0ZXI7XG4gICAgc2ltcGxleC5Xcml0ZUNhY2hlKGNhY2hlKTtcbiAgICBpZiAoaW5wdXQudXNlUmFkaWkpIHtcbiAgICAgIHJBID0gcHJveHlBLm1fcmFkaXVzO1xuICAgICAgckIgPSBwcm94eUIubV9yYWRpdXM7XG4gICAgICBpZiAob3V0cHV0LmRpc3RhbmNlID4gckEgKyByQiAmJiBvdXRwdXQuZGlzdGFuY2UgPiBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICAgIG91dHB1dC5kaXN0YW5jZSAtPSByQSArIHJCO1xuICAgICAgICBub3JtYWwgPSBiMk1hdGguU3VidHJhY3RWVihvdXRwdXQucG9pbnRCLCBvdXRwdXQucG9pbnRBKTtcbiAgICAgICAgbm9ybWFsLk5vcm1hbGl6ZSgpO1xuICAgICAgICBvdXRwdXQucG9pbnRBLnggKz0gckEgKiBub3JtYWwueDtcbiAgICAgICAgb3V0cHV0LnBvaW50QS55ICs9IHJBICogbm9ybWFsLnk7XG4gICAgICAgIG91dHB1dC5wb2ludEIueCAtPSByQiAqIG5vcm1hbC54O1xuICAgICAgICBvdXRwdXQucG9pbnRCLnkgLT0gckIgKiBub3JtYWwueTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAgPSBuZXcgYjJWZWMyKCk7XG4gICAgICAgIHAueCA9IC41ICogKG91dHB1dC5wb2ludEEueCArIG91dHB1dC5wb2ludEIueCk7XG4gICAgICAgIHAueSA9IC41ICogKG91dHB1dC5wb2ludEEueSArIG91dHB1dC5wb2ludEIueSk7XG4gICAgICAgIG91dHB1dC5wb2ludEEueCA9IG91dHB1dC5wb2ludEIueCA9IHAueDtcbiAgICAgICAgb3V0cHV0LnBvaW50QS55ID0gb3V0cHV0LnBvaW50Qi55ID0gcC55O1xuICAgICAgICBvdXRwdXQuZGlzdGFuY2UgPSAwLjA7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGIyRGlzdGFuY2Uuc19zaW1wbGV4ID0gbmV3IGIyU2ltcGxleCgpO1xuXG4gIGIyRGlzdGFuY2Uuc19zYXZlQSA9IG5ldyBWZWN0b3IoMyk7XG5cbiAgYjJEaXN0YW5jZS5zX3NhdmVCID0gbmV3IFZlY3RvcigzKTtcblxuICByZXR1cm4gYjJEaXN0YW5jZTtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJEaXN0YW5jZS5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZUlucHV0ID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkRpc3RhbmNlSW5wdXQoKSB7fVxuXG4gIHJldHVybiBiMkRpc3RhbmNlSW5wdXQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRGlzdGFuY2VJbnB1dC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VPdXRwdXQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyRGlzdGFuY2VPdXRwdXQucHJvdG90eXBlLnBvaW50QSA9IG51bGw7XG5cbiAgYjJEaXN0YW5jZU91dHB1dC5wcm90b3R5cGUucG9pbnRCID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkRpc3RhbmNlT3V0cHV0KCkge1xuICAgIHRoaXMucG9pbnRBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMucG9pbnRCID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkRpc3RhbmNlT3V0cHV0O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkRpc3RhbmNlT3V0cHV0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNpcmNsZVNoYXBlLCBiMlBvbHlnb25TaGFwZSwgYjJTZXR0aW5ncywgYjJTaGFwZTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGU7XG5cbmIyQ2lyY2xlU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyQ2lyY2xlU2hhcGU7XG5cbmIyUG9seWdvblNoYXBlID0gQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZTtcblxuQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VQcm94eSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJEaXN0YW5jZVByb3h5KCkge31cblxuICBiMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLm1fdmVydGljZXMgPSBudWxsO1xuXG4gIGIyRGlzdGFuY2VQcm94eS5wcm90b3R5cGUubV9jb3VudCA9IDA7XG5cbiAgYjJEaXN0YW5jZVByb3h5LnByb3RvdHlwZS5tX3JhZGl1cyA9IDA7XG5cbiAgYjJEaXN0YW5jZVByb3h5LnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihzaGFwZSkge1xuICAgIHZhciBjaXJjbGUsIHBvbHlnb247XG4gICAgc3dpdGNoIChzaGFwZS5HZXRUeXBlKCkpIHtcbiAgICAgIGNhc2UgYjJTaGFwZS5lX2NpcmNsZVNoYXBlOlxuICAgICAgICBjaXJjbGUgPSAoc2hhcGUgaW5zdGFuY2VvZiBiMkNpcmNsZVNoYXBlID8gc2hhcGUgOiBudWxsKTtcbiAgICAgICAgdGhpcy5tX3ZlcnRpY2VzID0gbmV3IEFycmF5KDEsIHRydWUpO1xuICAgICAgICB0aGlzLm1fdmVydGljZXNbMF0gPSBjaXJjbGUubV9wO1xuICAgICAgICB0aGlzLm1fY291bnQgPSAxO1xuICAgICAgICB0aGlzLm1fcmFkaXVzID0gY2lyY2xlLm1fcmFkaXVzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgYjJTaGFwZS5lX3BvbHlnb25TaGFwZTpcbiAgICAgICAgcG9seWdvbiA9IChzaGFwZSBpbnN0YW5jZW9mIGIyUG9seWdvblNoYXBlID8gc2hhcGUgOiBudWxsKTtcbiAgICAgICAgdGhpcy5tX3ZlcnRpY2VzID0gcG9seWdvbi5tX3ZlcnRpY2VzO1xuICAgICAgICB0aGlzLm1fY291bnQgPSBwb2x5Z29uLm1fdmVydGV4Q291bnQ7XG4gICAgICAgIHRoaXMubV9yYWRpdXMgPSBwb2x5Z29uLm1fcmFkaXVzO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBiMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLkdldFN1cHBvcnQgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGJlc3RJbmRleCwgYmVzdFZhbHVlLCBpLCB2YWx1ZTtcbiAgICBiZXN0SW5kZXggPSAwO1xuICAgIGJlc3RWYWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1swXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzWzBdLnkgKiBkLnk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tX3ZlcnRpY2VzW2ldLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbaV0ueSAqIGQueTtcbiAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICBiZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcmV0dXJuIGJlc3RJbmRleDtcbiAgfTtcblxuICBiMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLkdldFN1cHBvcnRWZXJ0ZXggPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGJlc3RJbmRleCwgYmVzdFZhbHVlLCBpLCB2YWx1ZTtcbiAgICBiZXN0SW5kZXggPSAwO1xuICAgIGJlc3RWYWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1swXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzWzBdLnkgKiBkLnk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tX3ZlcnRpY2VzW2ldLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbaV0ueSAqIGQueTtcbiAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICBiZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubV92ZXJ0aWNlc1tiZXN0SW5kZXhdO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VQcm94eS5wcm90b3R5cGUuR2V0VmVydGV4Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvdW50O1xuICB9O1xuXG4gIGIyRGlzdGFuY2VQcm94eS5wcm90b3R5cGUuR2V0VmVydGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkge1xuICAgICAgaW5kZXggPSAwO1xuICAgIH1cbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KDAgPD0gaW5kZXggJiYgaW5kZXggPCB0aGlzLm1fY291bnQpO1xuICAgIHJldHVybiB0aGlzLm1fdmVydGljZXNbaW5kZXhdO1xuICB9O1xuXG4gIHJldHVybiBiMkRpc3RhbmNlUHJveHk7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRGlzdGFuY2VQcm94eS5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJBQUJCLCBiMkR5bmFtaWNUcmVlTm9kZSwgYjJNYXRoLCBiMlJheUNhc3RJbnB1dCwgYjJTZXR0aW5ncztcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyTWF0aCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aDtcblxuYjJBQUJCID0gQm94MkQuQ29sbGlzaW9uLmIyQUFCQjtcblxuYjJSYXlDYXN0SW5wdXQgPSBCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXQ7XG5cbmIyRHluYW1pY1RyZWVOb2RlID0gQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJEeW5hbWljVHJlZSgpIHtcbiAgICB0aGlzLm1fcm9vdCA9IG51bGw7XG4gICAgdGhpcy5tX2ZyZWVMaXN0ID0gbnVsbDtcbiAgICB0aGlzLm1fcGF0aCA9IDA7XG4gICAgdGhpcy5tX2luc2VydGlvbkNvdW50ID0gMDtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5DcmVhdGVQcm94eSA9IGZ1bmN0aW9uKGFhYmIsIHVzZXJEYXRhKSB7XG4gICAgdmFyIGV4dGVuZFgsIGV4dGVuZFksIG5vZGU7XG4gICAgbm9kZSA9IHRoaXMuQWxsb2NhdGVOb2RlKCk7XG4gICAgZXh0ZW5kWCA9IGIyU2V0dGluZ3MuYjJfYWFiYkV4dGVuc2lvbjtcbiAgICBleHRlbmRZID0gYjJTZXR0aW5ncy5iMl9hYWJiRXh0ZW5zaW9uO1xuICAgIG5vZGUuYWFiYi5sb3dlckJvdW5kLnggPSBhYWJiLmxvd2VyQm91bmQueCAtIGV4dGVuZFg7XG4gICAgbm9kZS5hYWJiLmxvd2VyQm91bmQueSA9IGFhYmIubG93ZXJCb3VuZC55IC0gZXh0ZW5kWTtcbiAgICBub2RlLmFhYmIudXBwZXJCb3VuZC54ID0gYWFiYi51cHBlckJvdW5kLnggKyBleHRlbmRYO1xuICAgIG5vZGUuYWFiYi51cHBlckJvdW5kLnkgPSBhYWJiLnVwcGVyQm91bmQueSArIGV4dGVuZFk7XG4gICAgbm9kZS51c2VyRGF0YSA9IHVzZXJEYXRhO1xuICAgIHRoaXMuSW5zZXJ0TGVhZihub2RlKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5EZXN0cm95UHJveHkgPSBmdW5jdGlvbihwcm94eSkge1xuICAgIHRoaXMuUmVtb3ZlTGVhZihwcm94eSk7XG4gICAgdGhpcy5GcmVlTm9kZShwcm94eSk7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuTW92ZVByb3h5ID0gZnVuY3Rpb24ocHJveHksIGFhYmIsIGRpc3BsYWNlbWVudCkge1xuICAgIHZhciBleHRlbmRYLCBleHRlbmRZO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQocHJveHkuSXNMZWFmKCkpO1xuICAgIGlmIChwcm94eS5hYWJiLkNvbnRhaW5zKGFhYmIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuUmVtb3ZlTGVhZihwcm94eSk7XG4gICAgZXh0ZW5kWCA9IGIyU2V0dGluZ3MuYjJfYWFiYkV4dGVuc2lvbiArIGIyU2V0dGluZ3MuYjJfYWFiYk11bHRpcGxpZXIgKiAoZGlzcGxhY2VtZW50LnggPiAwID8gZGlzcGxhY2VtZW50LnggOiAtZGlzcGxhY2VtZW50LngpO1xuICAgIGV4dGVuZFkgPSBiMlNldHRpbmdzLmIyX2FhYmJFeHRlbnNpb24gKyBiMlNldHRpbmdzLmIyX2FhYmJNdWx0aXBsaWVyICogKGRpc3BsYWNlbWVudC55ID4gMCA/IGRpc3BsYWNlbWVudC55IDogLWRpc3BsYWNlbWVudC55KTtcbiAgICBwcm94eS5hYWJiLmxvd2VyQm91bmQueCA9IGFhYmIubG93ZXJCb3VuZC54IC0gZXh0ZW5kWDtcbiAgICBwcm94eS5hYWJiLmxvd2VyQm91bmQueSA9IGFhYmIubG93ZXJCb3VuZC55IC0gZXh0ZW5kWTtcbiAgICBwcm94eS5hYWJiLnVwcGVyQm91bmQueCA9IGFhYmIudXBwZXJCb3VuZC54ICsgZXh0ZW5kWDtcbiAgICBwcm94eS5hYWJiLnVwcGVyQm91bmQueSA9IGFhYmIudXBwZXJCb3VuZC55ICsgZXh0ZW5kWTtcbiAgICB0aGlzLkluc2VydExlYWYocHJveHkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWUucHJvdG90eXBlLlJlYmFsYW5jZSA9IGZ1bmN0aW9uKGl0ZXJhdGlvbnMpIHtcbiAgICB2YXIgYml0LCBpLCBub2RlO1xuICAgIGlmIChpdGVyYXRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIGl0ZXJhdGlvbnMgPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX3Jvb3QgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGl0ZXJhdGlvbnMpIHtcbiAgICAgIG5vZGUgPSB0aGlzLm1fcm9vdDtcbiAgICAgIGJpdCA9IDA7XG4gICAgICB3aGlsZSAobm9kZS5Jc0xlYWYoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgbm9kZSA9ICgodGhpcy5tX3BhdGggPj4gYml0KSAmIDEgPyBub2RlLmNoaWxkMiA6IG5vZGUuY2hpbGQxKTtcbiAgICAgICAgYml0ID0gKGJpdCArIDEpICYgMzE7XG4gICAgICB9XG4gICAgICArK3RoaXMubV9wYXRoO1xuICAgICAgdGhpcy5SZW1vdmVMZWFmKG5vZGUpO1xuICAgICAgdGhpcy5JbnNlcnRMZWFmKG5vZGUpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5HZXRGYXRBQUJCID0gZnVuY3Rpb24ocHJveHkpIHtcbiAgICByZXR1cm4gcHJveHkuYWFiYjtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5HZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgcmV0dXJuIHByb3h5LnVzZXJEYXRhO1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWUucHJvdG90eXBlLlF1ZXJ5ID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFhYmIpIHtcbiAgICB2YXIgY291bnQsIG5vZGUsIHByb2NlZWQsIHN0YWNrO1xuICAgIGlmICh0aGlzLm1fcm9vdCA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0YWNrID0gbmV3IEFycmF5KCk7XG4gICAgY291bnQgPSAwO1xuICAgIHN0YWNrW2NvdW50KytdID0gdGhpcy5tX3Jvb3Q7XG4gICAgd2hpbGUgKGNvdW50ID4gMCkge1xuICAgICAgbm9kZSA9IHN0YWNrWy0tY291bnRdO1xuICAgICAgaWYgKG5vZGUuYWFiYi5UZXN0T3ZlcmxhcChhYWJiKSkge1xuICAgICAgICBpZiAobm9kZS5Jc0xlYWYoKSkge1xuICAgICAgICAgIHByb2NlZWQgPSBjYWxsYmFjayhub2RlKTtcbiAgICAgICAgICBpZiAoIXByb2NlZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhY2tbY291bnQrK10gPSBub2RlLmNoaWxkMTtcbiAgICAgICAgICBzdGFja1tjb3VudCsrXSA9IG5vZGUuY2hpbGQyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGIyRHluYW1pY1RyZWUucHJvdG90eXBlLlJheUNhc3QgPSBmdW5jdGlvbihjYWxsYmFjaywgaW5wdXQpIHtcbiAgICB2YXIgYWJzX3YsIGMsIGNvdW50LCBoLCBtYXhGcmFjdGlvbiwgbm9kZSwgcDEsIHAyLCByLCBzZWdtZW50QUFCQiwgc2VwYXJhdGlvbiwgc3RhY2ssIHN1YklucHV0LCB0WCwgdFksIHY7XG4gICAgaWYgKHRoaXMubV9yb290ID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcDEgPSBpbnB1dC5wMTtcbiAgICBwMiA9IGlucHV0LnAyO1xuICAgIHIgPSBiMk1hdGguU3VidHJhY3RWVihwMSwgcDIpO1xuICAgIHIuTm9ybWFsaXplKCk7XG4gICAgdiA9IGIyTWF0aC5Dcm9zc0ZWKDEuMCwgcik7XG4gICAgYWJzX3YgPSBiMk1hdGguQWJzVih2KTtcbiAgICBtYXhGcmFjdGlvbiA9IGlucHV0Lm1heEZyYWN0aW9uO1xuICAgIHNlZ21lbnRBQUJCID0gbmV3IGIyQUFCQigpO1xuICAgIHRYID0gMDtcbiAgICB0WSA9IDA7XG4gICAgdFggPSBwMS54ICsgbWF4RnJhY3Rpb24gKiAocDIueCAtIHAxLngpO1xuICAgIHRZID0gcDEueSArIG1heEZyYWN0aW9uICogKHAyLnkgLSBwMS55KTtcbiAgICBzZWdtZW50QUFCQi5sb3dlckJvdW5kLnggPSBNYXRoLm1pbihwMS54LCB0WCk7XG4gICAgc2VnbWVudEFBQkIubG93ZXJCb3VuZC55ID0gTWF0aC5taW4ocDEueSwgdFkpO1xuICAgIHNlZ21lbnRBQUJCLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHAxLngsIHRYKTtcbiAgICBzZWdtZW50QUFCQi51cHBlckJvdW5kLnkgPSBNYXRoLm1heChwMS55LCB0WSk7XG4gICAgc3RhY2sgPSBuZXcgQXJyYXkoKTtcbiAgICBjb3VudCA9IDA7XG4gICAgc3RhY2tbY291bnQrK10gPSB0aGlzLm1fcm9vdDtcbiAgICB3aGlsZSAoY291bnQgPiAwKSB7XG4gICAgICBub2RlID0gc3RhY2tbLS1jb3VudF07XG4gICAgICBpZiAobm9kZS5hYWJiLlRlc3RPdmVybGFwKHNlZ21lbnRBQUJCKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjID0gbm9kZS5hYWJiLkdldENlbnRlcigpO1xuICAgICAgaCA9IG5vZGUuYWFiYi5HZXRFeHRlbnRzKCk7XG4gICAgICBzZXBhcmF0aW9uID0gTWF0aC5hYnModi54ICogKHAxLnggLSBjLngpICsgdi55ICogKHAxLnkgLSBjLnkpKSAtIGFic192LnggKiBoLnggLSBhYnNfdi55ICogaC55O1xuICAgICAgaWYgKHNlcGFyYXRpb24gPiAwLjApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5Jc0xlYWYoKSkge1xuICAgICAgICBzdWJJbnB1dCA9IG5ldyBiMlJheUNhc3RJbnB1dCgpO1xuICAgICAgICBzdWJJbnB1dC5wMSA9IGlucHV0LnAxO1xuICAgICAgICBzdWJJbnB1dC5wMiA9IGlucHV0LnAyO1xuICAgICAgICBzdWJJbnB1dC5tYXhGcmFjdGlvbiA9IGlucHV0Lm1heEZyYWN0aW9uO1xuICAgICAgICBtYXhGcmFjdGlvbiA9IGNhbGxiYWNrKHN1YklucHV0LCBub2RlKTtcbiAgICAgICAgaWYgKG1heEZyYWN0aW9uID09PSAwLjApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heEZyYWN0aW9uID4gMC4wKSB7XG4gICAgICAgICAgdFggPSBwMS54ICsgbWF4RnJhY3Rpb24gKiAocDIueCAtIHAxLngpO1xuICAgICAgICAgIHRZID0gcDEueSArIG1heEZyYWN0aW9uICogKHAyLnkgLSBwMS55KTtcbiAgICAgICAgICBzZWdtZW50QUFCQi5sb3dlckJvdW5kLnggPSBNYXRoLm1pbihwMS54LCB0WCk7XG4gICAgICAgICAgc2VnbWVudEFBQkIubG93ZXJCb3VuZC55ID0gTWF0aC5taW4ocDEueSwgdFkpO1xuICAgICAgICAgIHNlZ21lbnRBQUJCLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHAxLngsIHRYKTtcbiAgICAgICAgICBzZWdtZW50QUFCQi51cHBlckJvdW5kLnkgPSBNYXRoLm1heChwMS55LCB0WSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrW2NvdW50KytdID0gbm9kZS5jaGlsZDE7XG4gICAgICAgIHN0YWNrW2NvdW50KytdID0gbm9kZS5jaGlsZDI7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGIyRHluYW1pY1RyZWUucHJvdG90eXBlLkFsbG9jYXRlTm9kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub2RlO1xuICAgIGlmICh0aGlzLm1fZnJlZUxpc3QpIHtcbiAgICAgIG5vZGUgPSB0aGlzLm1fZnJlZUxpc3Q7XG4gICAgICB0aGlzLm1fZnJlZUxpc3QgPSBub2RlLnBhcmVudDtcbiAgICAgIG5vZGUucGFyZW50ID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQxID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQyID0gbnVsbDtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyRHluYW1pY1RyZWVOb2RlKCk7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuRnJlZU5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgbm9kZS5wYXJlbnQgPSB0aGlzLm1fZnJlZUxpc3Q7XG4gICAgdGhpcy5tX2ZyZWVMaXN0ID0gbm9kZTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5JbnNlcnRMZWFmID0gZnVuY3Rpb24obGVhZikge1xuICAgIHZhciBjZW50ZXIsIGNoaWxkMSwgY2hpbGQyLCBub2RlMSwgbm9kZTIsIG5vcm0xLCBub3JtMiwgc2libGluZztcbiAgICArK3RoaXMubV9pbnNlcnRpb25Db3VudDtcbiAgICBpZiAodGhpcy5tX3Jvb3QgPT0gbnVsbCkge1xuICAgICAgdGhpcy5tX3Jvb3QgPSBsZWFmO1xuICAgICAgdGhpcy5tX3Jvb3QucGFyZW50ID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2VudGVyID0gbGVhZi5hYWJiLkdldENlbnRlcigpO1xuICAgIHNpYmxpbmcgPSB0aGlzLm1fcm9vdDtcbiAgICBpZiAoc2libGluZy5Jc0xlYWYoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNoaWxkMSA9IHNpYmxpbmcuY2hpbGQxO1xuICAgICAgICBjaGlsZDIgPSBzaWJsaW5nLmNoaWxkMjtcbiAgICAgICAgbm9ybTEgPSBNYXRoLmFicygoY2hpbGQxLmFhYmIubG93ZXJCb3VuZC54ICsgY2hpbGQxLmFhYmIudXBwZXJCb3VuZC54KSAvIDIgLSBjZW50ZXIueCkgKyBNYXRoLmFicygoY2hpbGQxLmFhYmIubG93ZXJCb3VuZC55ICsgY2hpbGQxLmFhYmIudXBwZXJCb3VuZC55KSAvIDIgLSBjZW50ZXIueSk7XG4gICAgICAgIG5vcm0yID0gTWF0aC5hYnMoKGNoaWxkMi5hYWJiLmxvd2VyQm91bmQueCArIGNoaWxkMi5hYWJiLnVwcGVyQm91bmQueCkgLyAyIC0gY2VudGVyLngpICsgTWF0aC5hYnMoKGNoaWxkMi5hYWJiLmxvd2VyQm91bmQueSArIGNoaWxkMi5hYWJiLnVwcGVyQm91bmQueSkgLyAyIC0gY2VudGVyLnkpO1xuICAgICAgICBpZiAobm9ybTEgPCBub3JtMikge1xuICAgICAgICAgIHNpYmxpbmcgPSBjaGlsZDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2libGluZyA9IGNoaWxkMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2libGluZy5Jc0xlYWYoKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBub2RlMSA9IHNpYmxpbmcucGFyZW50O1xuICAgIG5vZGUyID0gdGhpcy5BbGxvY2F0ZU5vZGUoKTtcbiAgICBub2RlMi5wYXJlbnQgPSBub2RlMTtcbiAgICBub2RlMi51c2VyRGF0YSA9IG51bGw7XG4gICAgbm9kZTIuYWFiYi5Db21iaW5lKGxlYWYuYWFiYiwgc2libGluZy5hYWJiKTtcbiAgICBpZiAobm9kZTEpIHtcbiAgICAgIGlmIChzaWJsaW5nLnBhcmVudC5jaGlsZDEgPT09IHNpYmxpbmcpIHtcbiAgICAgICAgbm9kZTEuY2hpbGQxID0gbm9kZTI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlMS5jaGlsZDIgPSBub2RlMjtcbiAgICAgIH1cbiAgICAgIG5vZGUyLmNoaWxkMSA9IHNpYmxpbmc7XG4gICAgICBub2RlMi5jaGlsZDIgPSBsZWFmO1xuICAgICAgc2libGluZy5wYXJlbnQgPSBub2RlMjtcbiAgICAgIGxlYWYucGFyZW50ID0gbm9kZTI7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAobm9kZTEuYWFiYi5Db250YWlucyhub2RlMi5hYWJiKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUxLmFhYmIuQ29tYmluZShub2RlMS5jaGlsZDEuYWFiYiwgbm9kZTEuY2hpbGQyLmFhYmIpO1xuICAgICAgICBub2RlMiA9IG5vZGUxO1xuICAgICAgICBub2RlMSA9IG5vZGUxLnBhcmVudDtcbiAgICAgICAgaWYgKCFub2RlMSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUyLmNoaWxkMSA9IHNpYmxpbmc7XG4gICAgICBub2RlMi5jaGlsZDIgPSBsZWFmO1xuICAgICAgc2libGluZy5wYXJlbnQgPSBub2RlMjtcbiAgICAgIGxlYWYucGFyZW50ID0gbm9kZTI7XG4gICAgICB0aGlzLm1fcm9vdCA9IG5vZGUyO1xuICAgIH1cbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5SZW1vdmVMZWFmID0gZnVuY3Rpb24obGVhZikge1xuICAgIHZhciBub2RlMSwgbm9kZTIsIG9sZEFBQkIsIHNpYmxpbmc7XG4gICAgaWYgKGxlYWYgPT09IHRoaXMubV9yb290KSB7XG4gICAgICB0aGlzLm1fcm9vdCA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG5vZGUyID0gbGVhZi5wYXJlbnQ7XG4gICAgbm9kZTEgPSBub2RlMi5wYXJlbnQ7XG4gICAgc2libGluZyA9IHZvaWQgMDtcbiAgICBpZiAobm9kZTIuY2hpbGQxID09PSBsZWFmKSB7XG4gICAgICBzaWJsaW5nID0gbm9kZTIuY2hpbGQyO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWJsaW5nID0gbm9kZTIuY2hpbGQxO1xuICAgIH1cbiAgICBpZiAobm9kZTEpIHtcbiAgICAgIGlmIChub2RlMS5jaGlsZDEgPT09IG5vZGUyKSB7XG4gICAgICAgIG5vZGUxLmNoaWxkMSA9IHNpYmxpbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlMS5jaGlsZDIgPSBzaWJsaW5nO1xuICAgICAgfVxuICAgICAgc2libGluZy5wYXJlbnQgPSBub2RlMTtcbiAgICAgIHRoaXMuRnJlZU5vZGUobm9kZTIpO1xuICAgICAgd2hpbGUgKG5vZGUxKSB7XG4gICAgICAgIG9sZEFBQkIgPSBub2RlMS5hYWJiO1xuICAgICAgICBub2RlMS5hYWJiID0gYjJBQUJCLkNvbWJpbmUobm9kZTEuY2hpbGQxLmFhYmIsIG5vZGUxLmNoaWxkMi5hYWJiKTtcbiAgICAgICAgaWYgKG9sZEFBQkIuQ29udGFpbnMobm9kZTEuYWFiYikpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBub2RlMSA9IG5vZGUxLnBhcmVudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3Jvb3QgPSBzaWJsaW5nO1xuICAgICAgc2libGluZy5wYXJlbnQgPSBudWxsO1xuICAgICAgdGhpcy5GcmVlTm9kZShub2RlMik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMkR5bmFtaWNUcmVlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkR5bmFtaWNUcmVlLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkR5bmFtaWNUcmVlLCBiMkR5bmFtaWNUcmVlUGFpcjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMkR5bmFtaWNUcmVlID0gQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWU7XG5cbmIyRHluYW1pY1RyZWVQYWlyID0gQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVQYWlyO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UgPSAoZnVuY3Rpb24oKSB7XG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5tX3RyZWUgPSBudWxsO1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5tX21vdmVCdWZmZXIgPSBudWxsO1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5tX3BhaXJCdWZmZXIgPSBudWxsO1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5tX3BhaXJDb3VudCA9IDA7XG5cbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UubV9wcm94eUNvdW50ID0gMDtcblxuICBmdW5jdGlvbiBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZSgpIHtcbiAgICB0aGlzLm1fdHJlZSA9IG5ldyBiMkR5bmFtaWNUcmVlKCk7XG4gICAgdGhpcy5tX21vdmVCdWZmZXIgPSBuZXcgQXJyYXkoKTtcbiAgICB0aGlzLm1fcGFpckJ1ZmZlciA9IG5ldyBBcnJheSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5DcmVhdGVQcm94eSA9IGZ1bmN0aW9uKGFhYmIsIHVzZXJEYXRhKSB7XG4gICAgdmFyIHByb3h5O1xuICAgIHByb3h5ID0gdGhpcy5tX3RyZWUuQ3JlYXRlUHJveHkoYWFiYiwgdXNlckRhdGEpO1xuICAgICsrdGhpcy5tX3Byb3h5Q291bnQ7XG4gICAgdGhpcy5CdWZmZXJNb3ZlKHByb3h5KTtcbiAgICByZXR1cm4gcHJveHk7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLkRlc3Ryb3lQcm94eSA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgdGhpcy5VbkJ1ZmZlck1vdmUocHJveHkpO1xuICAgIC0tdGhpcy5tX3Byb3h5Q291bnQ7XG4gICAgdGhpcy5tX3RyZWUuRGVzdHJveVByb3h5KHByb3h5KTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuTW92ZVByb3h5ID0gZnVuY3Rpb24ocHJveHksIGFhYmIsIGRpc3BsYWNlbWVudCkge1xuICAgIHZhciBidWZmZXI7XG4gICAgYnVmZmVyID0gdGhpcy5tX3RyZWUuTW92ZVByb3h5KHByb3h5LCBhYWJiLCBkaXNwbGFjZW1lbnQpO1xuICAgIGlmIChidWZmZXIpIHtcbiAgICAgIHRoaXMuQnVmZmVyTW92ZShwcm94eSk7XG4gICAgfVxuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5UZXN0T3ZlcmxhcCA9IGZ1bmN0aW9uKHByb3h5QSwgcHJveHlCKSB7XG4gICAgdmFyIGFhYmJBLCBhYWJiQjtcbiAgICBhYWJiQSA9IHRoaXMubV90cmVlLkdldEZhdEFBQkIocHJveHlBKTtcbiAgICBhYWJiQiA9IHRoaXMubV90cmVlLkdldEZhdEFBQkIocHJveHlCKTtcbiAgICByZXR1cm4gYWFiYkEuVGVzdE92ZXJsYXAoYWFiYkIpO1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5HZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgcmV0dXJuIHRoaXMubV90cmVlLkdldFVzZXJEYXRhKHByb3h5KTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuR2V0RmF0QUFCQiA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgcmV0dXJuIHRoaXMubV90cmVlLkdldEZhdEFBQkIocHJveHkpO1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5HZXRQcm94eUNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9wcm94eUNvdW50O1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5VcGRhdGVQYWlycyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIFF1ZXJ5Q2FsbGJhY2ssIGZhdEFBQkIsIGksIHBhaXIsIHByaW1hcnlQYWlyLCBxdWVyeVByb3h5LCB1c2VyRGF0YUEsIHVzZXJEYXRhQjtcbiAgICB0aGlzLm1fcGFpckNvdW50ID0gMDtcbiAgICBpID0gMDtcbiAgICBxdWVyeVByb3h5ID0gdm9pZCAwO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX21vdmVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICBRdWVyeUNhbGxiYWNrID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihwcm94eSkge1xuICAgICAgICAgIHZhciBwYWlyO1xuICAgICAgICAgIGlmIChwcm94eSA9PT0gcXVlcnlQcm94eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfdGhpcy5tX3BhaXJDb3VudCA9PT0gX3RoaXMubV9wYWlyQnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgX3RoaXMubV9wYWlyQnVmZmVyW190aGlzLm1fcGFpckNvdW50XSA9IG5ldyBiMkR5bmFtaWNUcmVlUGFpcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYWlyID0gX3RoaXMubV9wYWlyQnVmZmVyW190aGlzLm1fcGFpckNvdW50XTtcbiAgICAgICAgICBwYWlyLnByb3h5QSA9IChwcm94eSA8IHF1ZXJ5UHJveHkgPyBwcm94eSA6IHF1ZXJ5UHJveHkpO1xuICAgICAgICAgIHBhaXIucHJveHlCID0gKHByb3h5ID49IHF1ZXJ5UHJveHkgPyBwcm94eSA6IHF1ZXJ5UHJveHkpO1xuICAgICAgICAgICsrX3RoaXMubV9wYWlyQ291bnQ7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHF1ZXJ5UHJveHkgPSB0aGlzLm1fbW92ZUJ1ZmZlcltpXTtcbiAgICAgIGZhdEFBQkIgPSB0aGlzLm1fdHJlZS5HZXRGYXRBQUJCKHF1ZXJ5UHJveHkpO1xuICAgICAgdGhpcy5tX3RyZWUuUXVlcnkoUXVlcnlDYWxsYmFjaywgZmF0QUFCQik7XG4gICAgICArK2k7XG4gICAgfVxuICAgIHRoaXMubV9tb3ZlQnVmZmVyLmxlbmd0aCA9IDA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fcGFpckNvdW50KSB7XG4gICAgICBwcmltYXJ5UGFpciA9IHRoaXMubV9wYWlyQnVmZmVyW2ldO1xuICAgICAgdXNlckRhdGFBID0gdGhpcy5tX3RyZWUuR2V0VXNlckRhdGEocHJpbWFyeVBhaXIucHJveHlBKTtcbiAgICAgIHVzZXJEYXRhQiA9IHRoaXMubV90cmVlLkdldFVzZXJEYXRhKHByaW1hcnlQYWlyLnByb3h5Qik7XG4gICAgICBjYWxsYmFjayh1c2VyRGF0YUEsIHVzZXJEYXRhQik7XG4gICAgICArK2k7XG4gICAgICB3aGlsZSAoaSA8IHRoaXMubV9wYWlyQ291bnQpIHtcbiAgICAgICAgcGFpciA9IHRoaXMubV9wYWlyQnVmZmVyW2ldO1xuICAgICAgICBpZiAocGFpci5wcm94eUEgIT09IHByaW1hcnlQYWlyLnByb3h5QSB8fCBwYWlyLnByb3h5QiAhPT0gcHJpbWFyeVBhaXIucHJveHlCKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgKytpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuUXVlcnkgPSBmdW5jdGlvbihjYWxsYmFjaywgYWFiYikge1xuICAgIHRoaXMubV90cmVlLlF1ZXJ5KGNhbGxiYWNrLCBhYWJiKTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBpbnB1dCkge1xuICAgIHRoaXMubV90cmVlLlJheUNhc3QoY2FsbGJhY2ssIGlucHV0KTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuVmFsaWRhdGUgPSBmdW5jdGlvbigpIHt9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5SZWJhbGFuY2UgPSBmdW5jdGlvbihpdGVyYXRpb25zKSB7XG4gICAgaWYgKGl0ZXJhdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgaXRlcmF0aW9ucyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV90cmVlLlJlYmFsYW5jZShpdGVyYXRpb25zKTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuQnVmZmVyTW92ZSA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgdGhpcy5tX21vdmVCdWZmZXJbdGhpcy5tX21vdmVCdWZmZXIubGVuZ3RoXSA9IHByb3h5O1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5VbkJ1ZmZlck1vdmUgPSBmdW5jdGlvbihwcm94eSkge1xuICAgIHZhciBpO1xuICAgIGkgPSBwYXJzZUludCh0aGlzLm1fbW92ZUJ1ZmZlci5pbmRleE9mKHByb3h5KSk7XG4gICAgdGhpcy5tX21vdmVCdWZmZXIuc3BsaWNlKGksIDEpO1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5Db21wYXJlUGFpcnMgPSBmdW5jdGlvbihwYWlyMSwgcGFpcjIpIHtcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5fX2ltcGxlbWVudHMgPSB7XG4gICAgSUJyb2FkUGhhc2U6IHRydWVcbiAgfTtcblxuICByZXR1cm4gYjJEeW5hbWljVHJlZUJyb2FkUGhhc2U7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkFBQkI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJBQUJCID0gQm94MkQuQ29sbGlzaW9uLmIyQUFCQjtcblxuQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlID0gKGZ1bmN0aW9uKCkge1xuICBiMkR5bmFtaWNUcmVlTm9kZS5wcm90b3R5cGUuYWFiYiA9IG51bGw7XG5cbiAgYjJEeW5hbWljVHJlZU5vZGUucHJvdG90eXBlLmNoaWxkMSA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJEeW5hbWljVHJlZU5vZGUoKSB7XG4gICAgdGhpcy5hYWJiID0gbmV3IGIyQUFCQigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyRHluYW1pY1RyZWVOb2RlLnByb3RvdHlwZS5Jc0xlYWYgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZDEgPT0gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gYjJEeW5hbWljVHJlZU5vZGU7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRHluYW1pY1RyZWVOb2RlLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlUGFpciA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJEeW5hbWljVHJlZVBhaXIoKSB7fVxuXG4gIHJldHVybiBiMkR5bmFtaWNUcmVlUGFpcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJEeW5hbWljVHJlZVBhaXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyTWFuaWZvbGRQb2ludCwgYjJTZXR0aW5ncywgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMk1hbmlmb2xkUG9pbnQgPSBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZFBvaW50O1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZCA9IChmdW5jdGlvbigpIHtcbiAgYjJNYW5pZm9sZC5lX2NpcmNsZXMgPSAweDAwMDE7XG5cbiAgYjJNYW5pZm9sZC5lX2ZhY2VBID0gMHgwMDAyO1xuXG4gIGIyTWFuaWZvbGQuZV9mYWNlQiA9IDB4MDAwNDtcblxuICBiMk1hbmlmb2xkLnByb3RvdHlwZS5tX3R5cGUgPSAwO1xuXG4gIGIyTWFuaWZvbGQucHJvdG90eXBlLm1fcG9pbnRDb3VudCA9IDA7XG5cbiAgYjJNYW5pZm9sZC5wcm90b3R5cGUubV9wb2ludHMgPSBudWxsO1xuXG4gIGIyTWFuaWZvbGQucHJvdG90eXBlLm1fbG9jYWxQbGFuZU5vcm1hbCA9IG51bGw7XG5cbiAgYjJNYW5pZm9sZC5wcm90b3R5cGUubV9sb2NhbFBvaW50ID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMk1hbmlmb2xkKCkge1xuICAgIHZhciBpO1xuICAgIHRoaXMubV9wb2ludENvdW50ID0gMDtcbiAgICB0aGlzLm1fcG9pbnRzID0gbmV3IEFycmF5KGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYjJTZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50cykge1xuICAgICAgdGhpcy5tX3BvaW50c1tpXSA9IG5ldyBiMk1hbmlmb2xkUG9pbnQoKTtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgdGhpcy5tX2xvY2FsUGxhbmVOb3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsUG9pbnQgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJNYW5pZm9sZC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpIHtcbiAgICAgICh0aGlzLm1fcG9pbnRzW2ldIGluc3RhbmNlb2YgYjJNYW5pZm9sZFBvaW50ID8gdGhpcy5tX3BvaW50c1tpXSA6IG51bGwpLlJlc2V0KCk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHRoaXMubV9sb2NhbFBsYW5lTm9ybWFsLlNldFplcm8oKTtcbiAgICB0aGlzLm1fbG9jYWxQb2ludC5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX3R5cGUgPSAwO1xuICAgIHRoaXMubV9wb2ludENvdW50ID0gMDtcbiAgfTtcblxuICBiMk1hbmlmb2xkLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIGk7XG4gICAgdGhpcy5tX3BvaW50Q291bnQgPSBtLm1fcG9pbnRDb3VudDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpIHtcbiAgICAgICh0aGlzLm1fcG9pbnRzW2ldIGluc3RhbmNlb2YgYjJNYW5pZm9sZFBvaW50ID8gdGhpcy5tX3BvaW50c1tpXSA6IG51bGwpLlNldChtLm1fcG9pbnRzW2ldKTtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgdGhpcy5tX2xvY2FsUGxhbmVOb3JtYWwuU2V0VihtLm1fbG9jYWxQbGFuZU5vcm1hbCk7XG4gICAgdGhpcy5tX2xvY2FsUG9pbnQuU2V0VihtLm1fbG9jYWxQb2ludCk7XG4gICAgdGhpcy5tX3R5cGUgPSBtLm1fdHlwZTtcbiAgfTtcblxuICBiMk1hbmlmb2xkLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvcHk7XG4gICAgY29weSA9IG5ldyBiMk1hbmlmb2xkKCk7XG4gICAgY29weS5TZXQodGhpcyk7XG4gICAgcmV0dXJuIGNvcHk7XG4gIH07XG5cbiAgcmV0dXJuIGIyTWFuaWZvbGQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyTWFuaWZvbGQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udGFjdElELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkNvbnRhY3RJRCA9IEJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRDtcblxuQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGRQb2ludCA9IChmdW5jdGlvbigpIHtcbiAgYjJNYW5pZm9sZFBvaW50LnByb3RvdHlwZS5tX2xvY2FsUG9pbnQgPSBudWxsO1xuXG4gIGIyTWFuaWZvbGRQb2ludC5wcm90b3R5cGUubV9pZCA9IG51bGw7XG5cbiAgYjJNYW5pZm9sZFBvaW50LnByb3RvdHlwZS5tX2xvY2FsUG9pbnQgPSBudWxsO1xuXG4gIGIyTWFuaWZvbGRQb2ludC5wcm90b3R5cGUubV9ub3JtYWxJbXB1bHNlID0gMC4wO1xuXG4gIGIyTWFuaWZvbGRQb2ludC5wcm90b3R5cGUubV90YW5nZW50SW1wdWxzZSA9IDAuMDtcblxuICBmdW5jdGlvbiBiMk1hbmlmb2xkUG9pbnQoKSB7XG4gICAgdGhpcy5tX2xvY2FsUG9pbnQgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2lkID0gbmV3IGIyQ29udGFjdElEKCk7XG4gICAgdGhpcy5SZXNldCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyTWFuaWZvbGRQb2ludC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fbG9jYWxQb2ludC5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX25vcm1hbEltcHVsc2UgPSAwLjA7XG4gICAgdGhpcy5tX3RhbmdlbnRJbXB1bHNlID0gMC4wO1xuICAgIHRoaXMubV9pZC5rZXkgPSAwO1xuICB9O1xuXG4gIGIyTWFuaWZvbGRQb2ludC5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24obSkge1xuICAgIHRoaXMubV9sb2NhbFBvaW50LlNldFYobS5tX2xvY2FsUG9pbnQpO1xuICAgIHRoaXMubV9ub3JtYWxJbXB1bHNlID0gbS5tX25vcm1hbEltcHVsc2U7XG4gICAgdGhpcy5tX3RhbmdlbnRJbXB1bHNlID0gbS5tX3RhbmdlbnRJbXB1bHNlO1xuICAgIHRoaXMubV9pZC5TZXQobS5tX2lkKTtcbiAgfTtcblxuICByZXR1cm4gYjJNYW5pZm9sZFBvaW50O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk1hbmlmb2xkUG9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbGxpc2lvbi5iMlBvaW50ID0gKGZ1bmN0aW9uKCkge1xuICBiMlBvaW50LnByb3RvdHlwZS5wID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMlBvaW50KCkge1xuICAgIHRoaXMucCA9IG5ldyBiMlZlYzIoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlBvaW50LnByb3RvdHlwZS5TdXBwb3J0ID0gZnVuY3Rpb24oeGYsIHZYLCB2WSkge1xuICAgIGlmICh2WCA9PT0gdm9pZCAwKSB7XG4gICAgICB2WCA9IDA7XG4gICAgfVxuICAgIGlmICh2WSA9PT0gdm9pZCAwKSB7XG4gICAgICB2WSA9IDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnA7XG4gIH07XG5cbiAgYjJQb2ludC5wcm90b3R5cGUuR2V0Rmlyc3RWZXJ0ZXggPSBmdW5jdGlvbih4Zikge1xuICAgIHJldHVybiB0aGlzLnA7XG4gIH07XG5cbiAgcmV0dXJuIGIyUG9pbnQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUG9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbGxpc2lvbi5iMlJheUNhc3RJbnB1dCA9IChmdW5jdGlvbigpIHtcbiAgYjJSYXlDYXN0SW5wdXQucHJvdG90eXBlLnAxID0gbnVsbDtcblxuICBiMlJheUNhc3RJbnB1dC5wcm90b3R5cGUucDIgPSBudWxsO1xuXG4gIGIyUmF5Q2FzdElucHV0LnByb3RvdHlwZS5tYXhGcmFjdGlvbiA9IDE7XG5cbiAgZnVuY3Rpb24gYjJSYXlDYXN0SW5wdXQocDEsIHAyLCBtYXhGcmFjdGlvbikge1xuICAgIHRoaXMucDEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5wMiA9IG5ldyBiMlZlYzIoKTtcbiAgICBpZiAocDEgPT09IHZvaWQgMCkge1xuICAgICAgcDEgPSBudWxsO1xuICAgIH1cbiAgICBpZiAocDIgPT09IHZvaWQgMCkge1xuICAgICAgcDIgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobWF4RnJhY3Rpb24gPT09IHZvaWQgMCkge1xuICAgICAgbWF4RnJhY3Rpb24gPSAxO1xuICAgIH1cbiAgICBpZiAocDEpIHtcbiAgICAgIHRoaXMucDEuU2V0VihwMSk7XG4gICAgfVxuICAgIGlmIChwMikge1xuICAgICAgdGhpcy5wMi5TZXRWKHAyKTtcbiAgICB9XG4gICAgdGhpcy5tYXhGcmFjdGlvbiA9IG1heEZyYWN0aW9uO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMlJheUNhc3RJbnB1dDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJSYXlDYXN0SW5wdXQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbGxpc2lvbi5iMlJheUNhc3RPdXRwdXQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyUmF5Q2FzdE91dHB1dC5wcm90b3R5cGUubm9ybWFsID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMlJheUNhc3RPdXRwdXQoKSB7XG4gICAgdGhpcy5ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyUmF5Q2FzdE91dHB1dDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJSYXlDYXN0T3V0cHV0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJTZWdtZW50ID0gKGZ1bmN0aW9uKCkge1xuICBiMlNlZ21lbnQucHJvdG90eXBlLnAxID0gbnVsbDtcblxuICBiMlNlZ21lbnQucHJvdG90eXBlLnAyID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMlNlZ21lbnQoKSB7XG4gICAgdGhpcy5wMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnAyID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyU2VnbWVudC5wcm90b3R5cGUuVGVzdFNlZ21lbnQgPSBmdW5jdGlvbihsYW1iZGEsIG5vcm1hbCwgc2VnbWVudCwgbWF4TGFtYmRhKSB7XG4gICAgdmFyIGEsIGJYLCBiWSwgZFgsIGRZLCBkZW5vbSwga19zbG9wLCBtdTIsIG5MZW4sIG5YLCBuWSwgclgsIHJZLCBzO1xuICAgIGlmIChtYXhMYW1iZGEgPT09IHZvaWQgMCkge1xuICAgICAgbWF4TGFtYmRhID0gMDtcbiAgICB9XG4gICAgcyA9IHNlZ21lbnQucDE7XG4gICAgclggPSBzZWdtZW50LnAyLnggLSBzLng7XG4gICAgclkgPSBzZWdtZW50LnAyLnkgLSBzLnk7XG4gICAgZFggPSB0aGlzLnAyLnggLSB0aGlzLnAxLng7XG4gICAgZFkgPSB0aGlzLnAyLnkgLSB0aGlzLnAxLnk7XG4gICAgblggPSBkWTtcbiAgICBuWSA9IC1kWDtcbiAgICBrX3Nsb3AgPSAxMDAuMCAqIE51bWJlci5NSU5fVkFMVUU7XG4gICAgZGVub20gPSAtKHJYICogblggKyByWSAqIG5ZKTtcbiAgICBpZiAoZGVub20gPiBrX3Nsb3ApIHtcbiAgICAgIGJYID0gcy54IC0gdGhpcy5wMS54O1xuICAgICAgYlkgPSBzLnkgLSB0aGlzLnAxLnk7XG4gICAgICBhID0gYlggKiBuWCArIGJZICogblk7XG4gICAgICBpZiAoMC4wIDw9IGEgJiYgYSA8PSBtYXhMYW1iZGEgKiBkZW5vbSkge1xuICAgICAgICBtdTIgPSAoLXJYICogYlkpICsgclkgKiBiWDtcbiAgICAgICAgaWYgKCgta19zbG9wICogZGVub20pIDw9IG11MiAmJiBtdTIgPD0gZGVub20gKiAoMS4wICsga19zbG9wKSkge1xuICAgICAgICAgIGEgLz0gZGVub207XG4gICAgICAgICAgbkxlbiA9IE1hdGguc3FydChuWCAqIG5YICsgblkgKiBuWSk7XG4gICAgICAgICAgblggLz0gbkxlbjtcbiAgICAgICAgICBuWSAvPSBuTGVuO1xuICAgICAgICAgIGxhbWJkYVswXSA9IGE7XG4gICAgICAgICAgbm9ybWFsLlNldChuWCwgblkpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBiMlNlZ21lbnQucHJvdG90eXBlLkV4dGVuZCA9IGZ1bmN0aW9uKGFhYmIpIHtcbiAgICB0aGlzLkV4dGVuZEZvcndhcmQoYWFiYik7XG4gICAgdGhpcy5FeHRlbmRCYWNrd2FyZChhYWJiKTtcbiAgfTtcblxuICBiMlNlZ21lbnQucHJvdG90eXBlLkV4dGVuZEZvcndhcmQgPSBmdW5jdGlvbihhYWJiKSB7XG4gICAgdmFyIGRYLCBkWSwgbGFtYmRhO1xuICAgIGRYID0gdGhpcy5wMi54IC0gdGhpcy5wMS54O1xuICAgIGRZID0gdGhpcy5wMi55IC0gdGhpcy5wMS55O1xuICAgIGxhbWJkYSA9IE1hdGgubWluKChkWCA+IDAgPyAoYWFiYi51cHBlckJvdW5kLnggLSB0aGlzLnAxLngpIC8gZFggOiAoZFggPCAwID8gKGFhYmIubG93ZXJCb3VuZC54IC0gdGhpcy5wMS54KSAvIGRYIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSksIChkWSA+IDAgPyAoYWFiYi51cHBlckJvdW5kLnkgLSB0aGlzLnAxLnkpIC8gZFkgOiAoZFkgPCAwID8gKGFhYmIubG93ZXJCb3VuZC55IC0gdGhpcy5wMS55KSAvIGRZIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSkpO1xuICAgIHRoaXMucDIueCA9IHRoaXMucDEueCArIGRYICogbGFtYmRhO1xuICAgIHRoaXMucDIueSA9IHRoaXMucDEueSArIGRZICogbGFtYmRhO1xuICB9O1xuXG4gIGIyU2VnbWVudC5wcm90b3R5cGUuRXh0ZW5kQmFja3dhcmQgPSBmdW5jdGlvbihhYWJiKSB7XG4gICAgdmFyIGRYLCBkWSwgbGFtYmRhO1xuICAgIGRYID0gKC10aGlzLnAyLngpICsgdGhpcy5wMS54O1xuICAgIGRZID0gKC10aGlzLnAyLnkpICsgdGhpcy5wMS55O1xuICAgIGxhbWJkYSA9IE1hdGgubWluKChkWCA+IDAgPyAoYWFiYi51cHBlckJvdW5kLnggLSB0aGlzLnAyLngpIC8gZFggOiAoZFggPCAwID8gKGFhYmIubG93ZXJCb3VuZC54IC0gdGhpcy5wMi54KSAvIGRYIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSksIChkWSA+IDAgPyAoYWFiYi51cHBlckJvdW5kLnkgLSB0aGlzLnAyLnkpIC8gZFkgOiAoZFkgPCAwID8gKGFhYmIubG93ZXJCb3VuZC55IC0gdGhpcy5wMi55KSAvIGRZIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSkpO1xuICAgIHRoaXMucDEueCA9IHRoaXMucDIueCArIGRYICogbGFtYmRhO1xuICAgIHRoaXMucDEueSA9IHRoaXMucDIueSArIGRZICogbGFtYmRhO1xuICB9O1xuXG4gIHJldHVybiBiMlNlZ21lbnQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2VnbWVudC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJNYXRoLCBiMlNldHRpbmdzLCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29sbGlzaW9uLmIyU2VwYXJhdGlvbkZ1bmN0aW9uID0gKGZ1bmN0aW9uKCkge1xuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5wcm90b3R5cGUubV9sb2NhbFBvaW50ID0gbnVsbDtcblxuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5wcm90b3R5cGUubV9heGlzID0gbnVsbDtcblxuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5wcm90b3R5cGUubV9wcm94eUEgPSBudWxsO1xuXG4gIGIyU2VwYXJhdGlvbkZ1bmN0aW9uLnByb3RvdHlwZS5tX3Byb3h5QiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJTZXBhcmF0aW9uRnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tX2xvY2FsUG9pbnQgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2F4aXMgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJTZXBhcmF0aW9uRnVuY3Rpb24ucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihjYWNoZSwgcHJveHlBLCB0cmFuc2Zvcm1BLCBwcm94eUIsIHRyYW5zZm9ybUIpIHtcbiAgICB2YXIgYSwgYiwgYywgY291bnQsIGRBLCBkQiwgZGVub20sIGUsIGYsIGxvY2FsUG9pbnRBLCBsb2NhbFBvaW50QTEsIGxvY2FsUG9pbnRBMiwgbG9jYWxQb2ludEIsIGxvY2FsUG9pbnRCMSwgbG9jYWxQb2ludEIyLCBub3JtYWxYLCBub3JtYWxZLCBwQSwgcEIsIHBvaW50QVgsIHBvaW50QVksIHBvaW50QlgsIHBvaW50QlksIHIsIHMsIHNnbiwgdCwgdE1hdCwgdFZlYztcbiAgICB0aGlzLm1fcHJveHlBID0gcHJveHlBO1xuICAgIHRoaXMubV9wcm94eUIgPSBwcm94eUI7XG4gICAgY291bnQgPSBwYXJzZUludChjYWNoZS5jb3VudCk7XG4gICAgYjJTZXR0aW5ncy5iMkFzc2VydCgwIDwgY291bnQgJiYgY291bnQgPCAzKTtcbiAgICBsb2NhbFBvaW50QSA9IHZvaWQgMDtcbiAgICBsb2NhbFBvaW50QTEgPSB2b2lkIDA7XG4gICAgbG9jYWxQb2ludEEyID0gdm9pZCAwO1xuICAgIGxvY2FsUG9pbnRCID0gdm9pZCAwO1xuICAgIGxvY2FsUG9pbnRCMSA9IHZvaWQgMDtcbiAgICBsb2NhbFBvaW50QjIgPSB2b2lkIDA7XG4gICAgcG9pbnRBWCA9IDA7XG4gICAgcG9pbnRBWSA9IDA7XG4gICAgcG9pbnRCWCA9IDA7XG4gICAgcG9pbnRCWSA9IDA7XG4gICAgbm9ybWFsWCA9IDA7XG4gICAgbm9ybWFsWSA9IDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHMgPSAwO1xuICAgIHNnbiA9IDA7XG4gICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICB0aGlzLm1fdHlwZSA9IGIyU2VwYXJhdGlvbkZ1bmN0aW9uLmVfcG9pbnRzO1xuICAgICAgbG9jYWxQb2ludEEgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFbMF0pO1xuICAgICAgbG9jYWxQb2ludEIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChjYWNoZS5pbmRleEJbMF0pO1xuICAgICAgdFZlYyA9IGxvY2FsUG9pbnRBO1xuICAgICAgdE1hdCA9IHRyYW5zZm9ybUEuUjtcbiAgICAgIHBvaW50QVggPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICBwb2ludEFZID0gdHJhbnNmb3JtQS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgdFZlYyA9IGxvY2FsUG9pbnRCO1xuICAgICAgdE1hdCA9IHRyYW5zZm9ybUIuUjtcbiAgICAgIHBvaW50QlggPSB0cmFuc2Zvcm1CLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICBwb2ludEJZID0gdHJhbnNmb3JtQi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgdGhpcy5tX2F4aXMueCA9IHBvaW50QlggLSBwb2ludEFYO1xuICAgICAgdGhpcy5tX2F4aXMueSA9IHBvaW50QlkgLSBwb2ludEFZO1xuICAgICAgdGhpcy5tX2F4aXMuTm9ybWFsaXplKCk7XG4gICAgfSBlbHNlIGlmIChjYWNoZS5pbmRleEJbMF0gPT09IGNhY2hlLmluZGV4QlsxXSkge1xuICAgICAgdGhpcy5tX3R5cGUgPSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VBO1xuICAgICAgbG9jYWxQb2ludEExID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhBWzBdKTtcbiAgICAgIGxvY2FsUG9pbnRBMiA9IHRoaXMubV9wcm94eUEuR2V0VmVydGV4KGNhY2hlLmluZGV4QVsxXSk7XG4gICAgICBsb2NhbFBvaW50QiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlswXSk7XG4gICAgICB0aGlzLm1fbG9jYWxQb2ludC54ID0gMC41ICogKGxvY2FsUG9pbnRBMS54ICsgbG9jYWxQb2ludEEyLngpO1xuICAgICAgdGhpcy5tX2xvY2FsUG9pbnQueSA9IDAuNSAqIChsb2NhbFBvaW50QTEueSArIGxvY2FsUG9pbnRBMi55KTtcbiAgICAgIHRoaXMubV9heGlzID0gYjJNYXRoLkNyb3NzVkYoYjJNYXRoLlN1YnRyYWN0VlYobG9jYWxQb2ludEEyLCBsb2NhbFBvaW50QTEpLCAxLjApO1xuICAgICAgdGhpcy5tX2F4aXMuTm9ybWFsaXplKCk7XG4gICAgICB0VmVjID0gdGhpcy5tX2F4aXM7XG4gICAgICB0TWF0ID0gdHJhbnNmb3JtQS5SO1xuICAgICAgbm9ybWFsWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICBub3JtYWxZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgIHRWZWMgPSB0aGlzLm1fbG9jYWxQb2ludDtcbiAgICAgIHRNYXQgPSB0cmFuc2Zvcm1BLlI7XG4gICAgICBwb2ludEFYID0gdHJhbnNmb3JtQS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgcG9pbnRBWSA9IHRyYW5zZm9ybUEucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgIHRWZWMgPSBsb2NhbFBvaW50QjtcbiAgICAgIHRNYXQgPSB0cmFuc2Zvcm1CLlI7XG4gICAgICBwb2ludEJYID0gdHJhbnNmb3JtQi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgcG9pbnRCWSA9IHRyYW5zZm9ybUIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgIHMgPSAocG9pbnRCWCAtIHBvaW50QVgpICogbm9ybWFsWCArIChwb2ludEJZIC0gcG9pbnRBWSkgKiBub3JtYWxZO1xuICAgICAgaWYgKHMgPCAwLjApIHtcbiAgICAgICAgdGhpcy5tX2F4aXMuTmVnYXRpdmVTZWxmKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjYWNoZS5pbmRleEFbMF0gPT09IGNhY2hlLmluZGV4QVswXSkge1xuICAgICAgdGhpcy5tX3R5cGUgPSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VCO1xuICAgICAgbG9jYWxQb2ludEIxID0gdGhpcy5tX3Byb3h5Qi5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhCWzBdKTtcbiAgICAgIGxvY2FsUG9pbnRCMiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlsxXSk7XG4gICAgICBsb2NhbFBvaW50QSA9IHRoaXMubV9wcm94eUEuR2V0VmVydGV4KGNhY2hlLmluZGV4QVswXSk7XG4gICAgICB0aGlzLm1fbG9jYWxQb2ludC54ID0gMC41ICogKGxvY2FsUG9pbnRCMS54ICsgbG9jYWxQb2ludEIyLngpO1xuICAgICAgdGhpcy5tX2xvY2FsUG9pbnQueSA9IDAuNSAqIChsb2NhbFBvaW50QjEueSArIGxvY2FsUG9pbnRCMi55KTtcbiAgICAgIHRoaXMubV9heGlzID0gYjJNYXRoLkNyb3NzVkYoYjJNYXRoLlN1YnRyYWN0VlYobG9jYWxQb2ludEIyLCBsb2NhbFBvaW50QjEpLCAxLjApO1xuICAgICAgdGhpcy5tX2F4aXMuTm9ybWFsaXplKCk7XG4gICAgICB0VmVjID0gdGhpcy5tX2F4aXM7XG4gICAgICB0TWF0ID0gdHJhbnNmb3JtQi5SO1xuICAgICAgbm9ybWFsWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICBub3JtYWxZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgIHRWZWMgPSB0aGlzLm1fbG9jYWxQb2ludDtcbiAgICAgIHRNYXQgPSB0cmFuc2Zvcm1CLlI7XG4gICAgICBwb2ludEJYID0gdHJhbnNmb3JtQi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgcG9pbnRCWSA9IHRyYW5zZm9ybUIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgIHRWZWMgPSBsb2NhbFBvaW50QTtcbiAgICAgIHRNYXQgPSB0cmFuc2Zvcm1BLlI7XG4gICAgICBwb2ludEFYID0gdHJhbnNmb3JtQS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgcG9pbnRBWSA9IHRyYW5zZm9ybUEucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgIHMgPSAocG9pbnRBWCAtIHBvaW50QlgpICogbm9ybWFsWCArIChwb2ludEFZIC0gcG9pbnRCWSkgKiBub3JtYWxZO1xuICAgICAgaWYgKHMgPCAwLjApIHtcbiAgICAgICAgdGhpcy5tX2F4aXMuTmVnYXRpdmVTZWxmKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2FsUG9pbnRBMSA9IHRoaXMubV9wcm94eUEuR2V0VmVydGV4KGNhY2hlLmluZGV4QVswXSk7XG4gICAgICBsb2NhbFBvaW50QTIgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFbMV0pO1xuICAgICAgbG9jYWxQb2ludEIxID0gdGhpcy5tX3Byb3h5Qi5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhCWzBdKTtcbiAgICAgIGxvY2FsUG9pbnRCMiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlsxXSk7XG4gICAgICBwQSA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIGxvY2FsUG9pbnRBKTtcbiAgICAgIGRBID0gYjJNYXRoLk11bE1WKHRyYW5zZm9ybUEuUiwgYjJNYXRoLlN1YnRyYWN0VlYobG9jYWxQb2ludEEyLCBsb2NhbFBvaW50QTEpKTtcbiAgICAgIHBCID0gYjJNYXRoLk11bFgodHJhbnNmb3JtQiwgbG9jYWxQb2ludEIpO1xuICAgICAgZEIgPSBiMk1hdGguTXVsTVYodHJhbnNmb3JtQi5SLCBiMk1hdGguU3VidHJhY3RWVihsb2NhbFBvaW50QjIsIGxvY2FsUG9pbnRCMSkpO1xuICAgICAgYSA9IGRBLnggKiBkQS54ICsgZEEueSAqIGRBLnk7XG4gICAgICBlID0gZEIueCAqIGRCLnggKyBkQi55ICogZEIueTtcbiAgICAgIHIgPSBiMk1hdGguU3VidHJhY3RWVihkQiwgZEEpO1xuICAgICAgYyA9IGRBLnggKiByLnggKyBkQS55ICogci55O1xuICAgICAgZiA9IGRCLnggKiByLnggKyBkQi55ICogci55O1xuICAgICAgYiA9IGRBLnggKiBkQi54ICsgZEEueSAqIGRCLnk7XG4gICAgICBkZW5vbSA9IGEgKiBlIC0gYiAqIGI7XG4gICAgICBzID0gMC4wO1xuICAgICAgaWYgKGRlbm9tICE9PSAwLjApIHtcbiAgICAgICAgcyA9IGIyTWF0aC5DbGFtcCgoYiAqIGYgLSBjICogZSkgLyBkZW5vbSwgMC4wLCAxLjApO1xuICAgICAgfVxuICAgICAgdCA9IChiICogcyArIGYpIC8gZTtcbiAgICAgIGlmICh0IDwgMC4wKSB7XG4gICAgICAgIHQgPSAwLjA7XG4gICAgICAgIHMgPSBiMk1hdGguQ2xhbXAoKGIgLSBjKSAvIGEsIDAuMCwgMS4wKTtcbiAgICAgIH1cbiAgICAgIGxvY2FsUG9pbnRBID0gbmV3IGIyVmVjMigpO1xuICAgICAgbG9jYWxQb2ludEEueCA9IGxvY2FsUG9pbnRBMS54ICsgcyAqIChsb2NhbFBvaW50QTIueCAtIGxvY2FsUG9pbnRBMS54KTtcbiAgICAgIGxvY2FsUG9pbnRBLnkgPSBsb2NhbFBvaW50QTEueSArIHMgKiAobG9jYWxQb2ludEEyLnkgLSBsb2NhbFBvaW50QTEueSk7XG4gICAgICBsb2NhbFBvaW50QiA9IG5ldyBiMlZlYzIoKTtcbiAgICAgIGxvY2FsUG9pbnRCLnggPSBsb2NhbFBvaW50QjEueCArIHMgKiAobG9jYWxQb2ludEIyLnggLSBsb2NhbFBvaW50QjEueCk7XG4gICAgICBsb2NhbFBvaW50Qi55ID0gbG9jYWxQb2ludEIxLnkgKyBzICogKGxvY2FsUG9pbnRCMi55IC0gbG9jYWxQb2ludEIxLnkpO1xuICAgICAgaWYgKHMgPT09IDAuMCB8fCBzID09PSAxLjApIHtcbiAgICAgICAgdGhpcy5tX3R5cGUgPSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VCO1xuICAgICAgICB0aGlzLm1fYXhpcyA9IGIyTWF0aC5Dcm9zc1ZGKGIyTWF0aC5TdWJ0cmFjdFZWKGxvY2FsUG9pbnRCMiwgbG9jYWxQb2ludEIxKSwgMS4wKTtcbiAgICAgICAgdGhpcy5tX2F4aXMuTm9ybWFsaXplKCk7XG4gICAgICAgIHRoaXMubV9sb2NhbFBvaW50ID0gbG9jYWxQb2ludEI7XG4gICAgICAgIHRWZWMgPSB0aGlzLm1fYXhpcztcbiAgICAgICAgdE1hdCA9IHRyYW5zZm9ybUIuUjtcbiAgICAgICAgbm9ybWFsWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgIG5vcm1hbFkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgICB0VmVjID0gdGhpcy5tX2xvY2FsUG9pbnQ7XG4gICAgICAgIHRNYXQgPSB0cmFuc2Zvcm1CLlI7XG4gICAgICAgIHBvaW50QlggPSB0cmFuc2Zvcm1CLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICAgIHBvaW50QlkgPSB0cmFuc2Zvcm1CLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICAgIHRWZWMgPSBsb2NhbFBvaW50QTtcbiAgICAgICAgdE1hdCA9IHRyYW5zZm9ybUEuUjtcbiAgICAgICAgcG9pbnRBWCA9IHRyYW5zZm9ybUEucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgICAgcG9pbnRBWSA9IHRyYW5zZm9ybUEucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgICAgc2duID0gKHBvaW50QVggLSBwb2ludEJYKSAqIG5vcm1hbFggKyAocG9pbnRBWSAtIHBvaW50QlkpICogbm9ybWFsWTtcbiAgICAgICAgaWYgKHMgPCAwLjApIHtcbiAgICAgICAgICB0aGlzLm1fYXhpcy5OZWdhdGl2ZVNlbGYoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX3R5cGUgPSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VBO1xuICAgICAgICB0aGlzLm1fYXhpcyA9IGIyTWF0aC5Dcm9zc1ZGKGIyTWF0aC5TdWJ0cmFjdFZWKGxvY2FsUG9pbnRBMiwgbG9jYWxQb2ludEExKSwgMS4wKTtcbiAgICAgICAgdGhpcy5tX2xvY2FsUG9pbnQgPSBsb2NhbFBvaW50QTtcbiAgICAgICAgdFZlYyA9IHRoaXMubV9heGlzO1xuICAgICAgICB0TWF0ID0gdHJhbnNmb3JtQS5SO1xuICAgICAgICBub3JtYWxYID0gdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgbm9ybWFsWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICAgIHRWZWMgPSB0aGlzLm1fbG9jYWxQb2ludDtcbiAgICAgICAgdE1hdCA9IHRyYW5zZm9ybUEuUjtcbiAgICAgICAgcG9pbnRBWCA9IHRyYW5zZm9ybUEucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgICAgcG9pbnRBWSA9IHRyYW5zZm9ybUEucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgICAgdFZlYyA9IGxvY2FsUG9pbnRCO1xuICAgICAgICB0TWF0ID0gdHJhbnNmb3JtQi5SO1xuICAgICAgICBwb2ludEJYID0gdHJhbnNmb3JtQi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICBwb2ludEJZID0gdHJhbnNmb3JtQi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgICBzZ24gPSAocG9pbnRCWCAtIHBvaW50QVgpICogbm9ybWFsWCArIChwb2ludEJZIC0gcG9pbnRBWSkgKiBub3JtYWxZO1xuICAgICAgICBpZiAocyA8IDAuMCkge1xuICAgICAgICAgIHRoaXMubV9heGlzLk5lZ2F0aXZlU2VsZigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGIyU2VwYXJhdGlvbkZ1bmN0aW9uLnByb3RvdHlwZS5FdmFsdWF0ZSA9IGZ1bmN0aW9uKHRyYW5zZm9ybUEsIHRyYW5zZm9ybUIpIHtcbiAgICB2YXIgYXhpc0EsIGF4aXNCLCBsb2NhbFBvaW50QSwgbG9jYWxQb2ludEIsIG5vcm1hbCwgcG9pbnRBLCBwb2ludEIsIHNlcGVyYXRpb247XG4gICAgYXhpc0EgPSB2b2lkIDA7XG4gICAgYXhpc0IgPSB2b2lkIDA7XG4gICAgbG9jYWxQb2ludEEgPSB2b2lkIDA7XG4gICAgbG9jYWxQb2ludEIgPSB2b2lkIDA7XG4gICAgcG9pbnRBID0gdm9pZCAwO1xuICAgIHBvaW50QiA9IHZvaWQgMDtcbiAgICBzZXBlcmF0aW9uID0gMDtcbiAgICBub3JtYWwgPSB2b2lkIDA7XG4gICAgc3dpdGNoICh0aGlzLm1fdHlwZSkge1xuICAgICAgY2FzZSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX3BvaW50czpcbiAgICAgICAgYXhpc0EgPSBiMk1hdGguTXVsVE1WKHRyYW5zZm9ybUEuUiwgdGhpcy5tX2F4aXMpO1xuICAgICAgICBheGlzQiA9IGIyTWF0aC5NdWxUTVYodHJhbnNmb3JtQi5SLCB0aGlzLm1fYXhpcy5HZXROZWdhdGl2ZSgpKTtcbiAgICAgICAgbG9jYWxQb2ludEEgPSB0aGlzLm1fcHJveHlBLkdldFN1cHBvcnRWZXJ0ZXgoYXhpc0EpO1xuICAgICAgICBsb2NhbFBvaW50QiA9IHRoaXMubV9wcm94eUIuR2V0U3VwcG9ydFZlcnRleChheGlzQik7XG4gICAgICAgIHBvaW50QSA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIGxvY2FsUG9pbnRBKTtcbiAgICAgICAgcG9pbnRCID0gYjJNYXRoLk11bFgodHJhbnNmb3JtQiwgbG9jYWxQb2ludEIpO1xuICAgICAgICBzZXBlcmF0aW9uID0gKHBvaW50Qi54IC0gcG9pbnRBLngpICogdGhpcy5tX2F4aXMueCArIChwb2ludEIueSAtIHBvaW50QS55KSAqIHRoaXMubV9heGlzLnk7XG4gICAgICAgIHJldHVybiBzZXBlcmF0aW9uO1xuICAgICAgY2FzZSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VBOlxuICAgICAgICBub3JtYWwgPSBiMk1hdGguTXVsTVYodHJhbnNmb3JtQS5SLCB0aGlzLm1fYXhpcyk7XG4gICAgICAgIHBvaW50QSA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIHRoaXMubV9sb2NhbFBvaW50KTtcbiAgICAgICAgYXhpc0IgPSBiMk1hdGguTXVsVE1WKHRyYW5zZm9ybUIuUiwgbm9ybWFsLkdldE5lZ2F0aXZlKCkpO1xuICAgICAgICBsb2NhbFBvaW50QiA9IHRoaXMubV9wcm94eUIuR2V0U3VwcG9ydFZlcnRleChheGlzQik7XG4gICAgICAgIHBvaW50QiA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIGxvY2FsUG9pbnRCKTtcbiAgICAgICAgc2VwZXJhdGlvbiA9IChwb2ludEIueCAtIHBvaW50QS54KSAqIG5vcm1hbC54ICsgKHBvaW50Qi55IC0gcG9pbnRBLnkpICogbm9ybWFsLnk7XG4gICAgICAgIHJldHVybiBzZXBlcmF0aW9uO1xuICAgICAgY2FzZSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VCOlxuICAgICAgICBub3JtYWwgPSBiMk1hdGguTXVsTVYodHJhbnNmb3JtQi5SLCB0aGlzLm1fYXhpcyk7XG4gICAgICAgIHBvaW50QiA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIHRoaXMubV9sb2NhbFBvaW50KTtcbiAgICAgICAgYXhpc0EgPSBiMk1hdGguTXVsVE1WKHRyYW5zZm9ybUEuUiwgbm9ybWFsLkdldE5lZ2F0aXZlKCkpO1xuICAgICAgICBsb2NhbFBvaW50QSA9IHRoaXMubV9wcm94eUEuR2V0U3VwcG9ydFZlcnRleChheGlzQSk7XG4gICAgICAgIHBvaW50QSA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIGxvY2FsUG9pbnRBKTtcbiAgICAgICAgc2VwZXJhdGlvbiA9IChwb2ludEEueCAtIHBvaW50Qi54KSAqIG5vcm1hbC54ICsgKHBvaW50QS55IC0gcG9pbnRCLnkpICogbm9ybWFsLnk7XG4gICAgICAgIHJldHVybiBzZXBlcmF0aW9uO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiAwLjA7XG4gICAgfVxuICB9O1xuXG4gIGIyU2VwYXJhdGlvbkZ1bmN0aW9uLmVfcG9pbnRzID0gMHgwMTtcblxuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VBID0gMHgwMjtcblxuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX2ZhY2VCID0gMHgwNDtcblxuICByZXR1cm4gYjJTZXBhcmF0aW9uRnVuY3Rpb247XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2VwYXJhdGlvbkZ1bmN0aW9uLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMk1hdGgsIGIyU2V0dGluZ3MsIGIyU2ltcGxleFZlcnRleCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyU2ltcGxleFZlcnRleCA9IEJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXhWZXJ0ZXg7XG5cbkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXggPSAoZnVuY3Rpb24oKSB7XG4gIGIyU2ltcGxleC5wcm90b3R5cGUubV92MSA9IG51bGw7XG5cbiAgYjJTaW1wbGV4LnByb3RvdHlwZS5tX3YyID0gbnVsbDtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLm1fdjMgPSBudWxsO1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUubV92ZXJ0aWNlcyA9IG51bGw7XG5cbiAgYjJTaW1wbGV4LnByb3RvdHlwZS5tX2NvdW50ID0gMDtcblxuICBmdW5jdGlvbiBiMlNpbXBsZXgoKSB7XG4gICAgdGhpcy5tX3YxID0gbmV3IGIyU2ltcGxleFZlcnRleCgpO1xuICAgIHRoaXMubV92MiA9IG5ldyBiMlNpbXBsZXhWZXJ0ZXgoKTtcbiAgICB0aGlzLm1fdjMgPSBuZXcgYjJTaW1wbGV4VmVydGV4KCk7XG4gICAgdGhpcy5tX3ZlcnRpY2VzID0gbmV3IEFycmF5KDMpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1swXSA9IHRoaXMubV92MTtcbiAgICB0aGlzLm1fdmVydGljZXNbMV0gPSB0aGlzLm1fdjI7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzJdID0gdGhpcy5tX3YzO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuUmVhZENhY2hlID0gZnVuY3Rpb24oY2FjaGUsIHByb3h5QSwgdHJhbnNmb3JtQSwgcHJveHlCLCB0cmFuc2Zvcm1CKSB7XG4gICAgdmFyIGksIG1ldHJpYzEsIG1ldHJpYzIsIHYsIHZlcnRpY2VzLCB3QUxvY2FsLCB3QkxvY2FsO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoMCA8PSBjYWNoZS5jb3VudCAmJiBjYWNoZS5jb3VudCA8PSAzKTtcbiAgICB3QUxvY2FsID0gdm9pZCAwO1xuICAgIHdCTG9jYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5tX2NvdW50ID0gY2FjaGUuY291bnQ7XG4gICAgdmVydGljZXMgPSB0aGlzLm1fdmVydGljZXM7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIHYgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIHYuaW5kZXhBID0gY2FjaGUuaW5kZXhBW2ldO1xuICAgICAgdi5pbmRleEIgPSBjYWNoZS5pbmRleEJbaV07XG4gICAgICB3QUxvY2FsID0gcHJveHlBLkdldFZlcnRleCh2LmluZGV4QSk7XG4gICAgICB3QkxvY2FsID0gcHJveHlCLkdldFZlcnRleCh2LmluZGV4Qik7XG4gICAgICB2LndBID0gYjJNYXRoLk11bFgodHJhbnNmb3JtQSwgd0FMb2NhbCk7XG4gICAgICB2LndCID0gYjJNYXRoLk11bFgodHJhbnNmb3JtQiwgd0JMb2NhbCk7XG4gICAgICB2LncgPSBiMk1hdGguU3VidHJhY3RWVih2LndCLCB2LndBKTtcbiAgICAgIHYuYSA9IDA7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fY291bnQgPiAxKSB7XG4gICAgICBtZXRyaWMxID0gY2FjaGUubWV0cmljO1xuICAgICAgbWV0cmljMiA9IHRoaXMuR2V0TWV0cmljKCk7XG4gICAgICBpZiAobWV0cmljMiA8IC41ICogbWV0cmljMSB8fCAyLjAgKiBtZXRyaWMxIDwgbWV0cmljMiB8fCBtZXRyaWMyIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5tX2NvdW50ID09PSAwKSB7XG4gICAgICB2ID0gdmVydGljZXNbMF07XG4gICAgICB2LmluZGV4QSA9IDA7XG4gICAgICB2LmluZGV4QiA9IDA7XG4gICAgICB3QUxvY2FsID0gcHJveHlBLkdldFZlcnRleCgwKTtcbiAgICAgIHdCTG9jYWwgPSBwcm94eUIuR2V0VmVydGV4KDApO1xuICAgICAgdi53QSA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIHdBTG9jYWwpO1xuICAgICAgdi53QiA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIHdCTG9jYWwpO1xuICAgICAgdi53ID0gYjJNYXRoLlN1YnRyYWN0VlYodi53Qiwgdi53QSk7XG4gICAgICB0aGlzLm1fY291bnQgPSAxO1xuICAgIH1cbiAgfTtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLldyaXRlQ2FjaGUgPSBmdW5jdGlvbihjYWNoZSkge1xuICAgIHZhciBpLCB2ZXJ0aWNlcztcbiAgICBjYWNoZS5tZXRyaWMgPSB0aGlzLkdldE1ldHJpYygpO1xuICAgIGNhY2hlLmNvdW50ID0gQm94MkQucGFyc2VVSW50KHRoaXMubV9jb3VudCk7XG4gICAgdmVydGljZXMgPSB0aGlzLm1fdmVydGljZXM7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIGNhY2hlLmluZGV4QVtpXSA9IEJveDJELnBhcnNlVUludCh2ZXJ0aWNlc1tpXS5pbmRleEEpO1xuICAgICAgY2FjaGUuaW5kZXhCW2ldID0gQm94MkQucGFyc2VVSW50KHZlcnRpY2VzW2ldLmluZGV4Qik7XG4gICAgICBpKys7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuR2V0U2VhcmNoRGlyZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUxMiwgc2duO1xuICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiB0aGlzLm1fdjEudy5HZXROZWdhdGl2ZSgpO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBlMTIgPSBiMk1hdGguU3VidHJhY3RWVih0aGlzLm1fdjIudywgdGhpcy5tX3YxLncpO1xuICAgICAgICBzZ24gPSBiMk1hdGguQ3Jvc3NWVihlMTIsIHRoaXMubV92MS53LkdldE5lZ2F0aXZlKCkpO1xuICAgICAgICBpZiAoc2duID4gMC4wKSB7XG4gICAgICAgICAgcmV0dXJuIGIyTWF0aC5Dcm9zc0ZWKDEuMCwgZTEyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYjJNYXRoLkNyb3NzVkYoZTEyLCAxLjApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBuZXcgYjJWZWMyKCk7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuR2V0Q2xvc2VzdFBvaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgc3dpdGNoICh0aGlzLm1fY291bnQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBuZXcgYjJWZWMyKCk7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiB0aGlzLm1fdjEudztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIG5ldyBiMlZlYzIodGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEudy54ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIudy54LCB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53LnkgKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53LnkpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBuZXcgYjJWZWMyKCk7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuR2V0V2l0bmVzc1BvaW50cyA9IGZ1bmN0aW9uKHBBLCBwQikge1xuICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBiMlNldHRpbmdzLmIyQXNzZXJ0KGZhbHNlKTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcEEuU2V0Vih0aGlzLm1fdjEud0EpO1xuICAgICAgICByZXR1cm4gcEIuU2V0Vih0aGlzLm1fdjEud0IpO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBwQS54ID0gdGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEud0EueCArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLndBLng7XG4gICAgICAgIHBBLnkgPSB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53QS55ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIud0EueTtcbiAgICAgICAgcEIueCA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndCLnggKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53Qi54O1xuICAgICAgICByZXR1cm4gcEIueSA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndCLnkgKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53Qi55O1xuICAgICAgY2FzZSAzOlxuICAgICAgICBwQi54ID0gcEEueCA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndBLnggKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53QS54ICsgdGhpcy5tX3YzLmEgKiB0aGlzLm1fdjMud0EueDtcbiAgICAgICAgcmV0dXJuIHBCLnkgPSBwQS55ID0gdGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEud0EueSArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLndBLnkgKyB0aGlzLm1fdjMuYSAqIHRoaXMubV92My53QS55O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLkdldE1ldHJpYyA9IGZ1bmN0aW9uKCkge1xuICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gYjJNYXRoLlN1YnRyYWN0VlYodGhpcy5tX3YxLncsIHRoaXMubV92Mi53KS5MZW5ndGgoKTtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIGIyTWF0aC5Dcm9zc1ZWKGIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92Mi53LCB0aGlzLm1fdjEudyksIGIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92My53LCB0aGlzLm1fdjEudykpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiAwLjA7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuU29sdmUyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGQxMl8xLCBkMTJfMiwgZTEyLCBpbnZfZDEyLCB3MSwgdzI7XG4gICAgdzEgPSB0aGlzLm1fdjEudztcbiAgICB3MiA9IHRoaXMubV92Mi53O1xuICAgIGUxMiA9IGIyTWF0aC5TdWJ0cmFjdFZWKHcyLCB3MSk7XG4gICAgZDEyXzIgPSAtKHcxLnggKiBlMTIueCArIHcxLnkgKiBlMTIueSk7XG4gICAgaWYgKGQxMl8yIDw9IDAuMCkge1xuICAgICAgdGhpcy5tX3YxLmEgPSAxLjA7XG4gICAgICB0aGlzLm1fY291bnQgPSAxO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkMTJfMSA9IHcyLnggKiBlMTIueCArIHcyLnkgKiBlMTIueTtcbiAgICBpZiAoZDEyXzEgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjIuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Mik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGludl9kMTIgPSAxLjAgLyAoZDEyXzEgKyBkMTJfMik7XG4gICAgdGhpcy5tX3YxLmEgPSBkMTJfMSAqIGludl9kMTI7XG4gICAgdGhpcy5tX3YyLmEgPSBkMTJfMiAqIGludl9kMTI7XG4gICAgdGhpcy5tX2NvdW50ID0gMjtcbiAgfTtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLlNvbHZlMyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkMTIzXzEsIGQxMjNfMiwgZDEyM18zLCBkMTJfMSwgZDEyXzIsIGQxM18xLCBkMTNfMiwgZDIzXzEsIGQyM18yLCBlMTIsIGUxMywgZTIzLCBpbnZfZDEyLCBpbnZfZDEyMywgaW52X2QxMywgaW52X2QyMywgbjEyMywgdzEsIHcxZTEyLCB3MWUxMywgdzIsIHcyZTEyLCB3MmUyMywgdzMsIHczZTEzLCB3M2UyMztcbiAgICB3MSA9IHRoaXMubV92MS53O1xuICAgIHcyID0gdGhpcy5tX3YyLnc7XG4gICAgdzMgPSB0aGlzLm1fdjMudztcbiAgICBlMTIgPSBiMk1hdGguU3VidHJhY3RWVih3MiwgdzEpO1xuICAgIHcxZTEyID0gYjJNYXRoLkRvdCh3MSwgZTEyKTtcbiAgICB3MmUxMiA9IGIyTWF0aC5Eb3QodzIsIGUxMik7XG4gICAgZDEyXzEgPSB3MmUxMjtcbiAgICBkMTJfMiA9IC13MWUxMjtcbiAgICBlMTMgPSBiMk1hdGguU3VidHJhY3RWVih3MywgdzEpO1xuICAgIHcxZTEzID0gYjJNYXRoLkRvdCh3MSwgZTEzKTtcbiAgICB3M2UxMyA9IGIyTWF0aC5Eb3QodzMsIGUxMyk7XG4gICAgZDEzXzEgPSB3M2UxMztcbiAgICBkMTNfMiA9IC13MWUxMztcbiAgICBlMjMgPSBiMk1hdGguU3VidHJhY3RWVih3MywgdzIpO1xuICAgIHcyZTIzID0gYjJNYXRoLkRvdCh3MiwgZTIzKTtcbiAgICB3M2UyMyA9IGIyTWF0aC5Eb3QodzMsIGUyMyk7XG4gICAgZDIzXzEgPSB3M2UyMztcbiAgICBkMjNfMiA9IC13MmUyMztcbiAgICBuMTIzID0gYjJNYXRoLkNyb3NzVlYoZTEyLCBlMTMpO1xuICAgIGQxMjNfMSA9IG4xMjMgKiBiMk1hdGguQ3Jvc3NWVih3MiwgdzMpO1xuICAgIGQxMjNfMiA9IG4xMjMgKiBiMk1hdGguQ3Jvc3NWVih3MywgdzEpO1xuICAgIGQxMjNfMyA9IG4xMjMgKiBiMk1hdGguQ3Jvc3NWVih3MSwgdzIpO1xuICAgIGlmIChkMTJfMiA8PSAwLjAgJiYgZDEzXzIgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjEuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTJfMSA+IDAuMCAmJiBkMTJfMiA+IDAuMCAmJiBkMTIzXzMgPD0gMC4wKSB7XG4gICAgICBpbnZfZDEyID0gMS4wIC8gKGQxMl8xICsgZDEyXzIpO1xuICAgICAgdGhpcy5tX3YxLmEgPSBkMTJfMSAqIGludl9kMTI7XG4gICAgICB0aGlzLm1fdjIuYSA9IGQxMl8yICogaW52X2QxMjtcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTNfMSA+IDAuMCAmJiBkMTNfMiA+IDAuMCAmJiBkMTIzXzIgPD0gMC4wKSB7XG4gICAgICBpbnZfZDEzID0gMS4wIC8gKGQxM18xICsgZDEzXzIpO1xuICAgICAgdGhpcy5tX3YxLmEgPSBkMTNfMSAqIGludl9kMTM7XG4gICAgICB0aGlzLm1fdjMuYSA9IGQxM18yICogaW52X2QxMztcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICB0aGlzLm1fdjIuU2V0KHRoaXMubV92Myk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTJfMSA8PSAwLjAgJiYgZDIzXzIgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjIuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Mik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTNfMSA8PSAwLjAgJiYgZDIzXzEgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjMuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Myk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMjNfMSA+IDAuMCAmJiBkMjNfMiA+IDAuMCAmJiBkMTIzXzEgPD0gMC4wKSB7XG4gICAgICBpbnZfZDIzID0gMS4wIC8gKGQyM18xICsgZDIzXzIpO1xuICAgICAgdGhpcy5tX3YyLmEgPSBkMjNfMSAqIGludl9kMjM7XG4gICAgICB0aGlzLm1fdjMuYSA9IGQyM18yICogaW52X2QyMztcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Myk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGludl9kMTIzID0gMS4wIC8gKGQxMjNfMSArIGQxMjNfMiArIGQxMjNfMyk7XG4gICAgdGhpcy5tX3YxLmEgPSBkMTIzXzEgKiBpbnZfZDEyMztcbiAgICB0aGlzLm1fdjIuYSA9IGQxMjNfMiAqIGludl9kMTIzO1xuICAgIHRoaXMubV92My5hID0gZDEyM18zICogaW52X2QxMjM7XG4gICAgdGhpcy5tX2NvdW50ID0gMztcbiAgfTtcblxuICByZXR1cm4gYjJTaW1wbGV4O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlNpbXBsZXguanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvcjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXhDYWNoZSA9IChmdW5jdGlvbigpIHtcbiAgYjJTaW1wbGV4Q2FjaGUucHJvdG90eXBlLmluZGV4QSA9IG51bGw7XG5cbiAgYjJTaW1wbGV4Q2FjaGUucHJvdG90eXBlLmluZGV4QiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJTaW1wbGV4Q2FjaGUoKSB7XG4gICAgdGhpcy5pbmRleEEgPSBuZXcgVmVjdG9yKDMpO1xuICAgIHRoaXMuaW5kZXhCID0gbmV3IFZlY3RvcigzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJTaW1wbGV4Q2FjaGU7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2ltcGxleENhY2hlLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXhWZXJ0ZXggPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyU2ltcGxleFZlcnRleCgpIHt9XG5cbiAgYjJTaW1wbGV4VmVydGV4LnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHRoaXMud0EuU2V0VihvdGhlci53QSk7XG4gICAgdGhpcy53Qi5TZXRWKG90aGVyLndCKTtcbiAgICB0aGlzLncuU2V0VihvdGhlci53KTtcbiAgICB0aGlzLmEgPSBvdGhlci5hO1xuICAgIHRoaXMuaW5kZXhBID0gb3RoZXIuaW5kZXhBO1xuICAgIHRoaXMuaW5kZXhCID0gb3RoZXIuaW5kZXhCO1xuICB9O1xuXG4gIHJldHVybiBiMlNpbXBsZXhWZXJ0ZXg7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2ltcGxleFZlcnRleC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJEaXN0YW5jZVByb3h5LCBiMlN3ZWVwO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU3dlZXAgPSBCb3gyRC5Db21tb24uTWF0aC5iMlN3ZWVwO1xuXG5iMkRpc3RhbmNlUHJveHkgPSBCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZVByb3h5O1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJUT0lJbnB1dCA9IChmdW5jdGlvbigpIHtcbiAgYjJUT0lJbnB1dC5wcm90b3R5cGUucHJveHlBID0gbnVsbDtcblxuICBiMlRPSUlucHV0LnByb3RvdHlwZS5wcm94eUIgPSBudWxsO1xuXG4gIGIyVE9JSW5wdXQucHJvdG90eXBlLnN3ZWVwQSA9IG51bGw7XG5cbiAgYjJUT0lJbnB1dC5wcm90b3R5cGUuc3dlZXBCID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMlRPSUlucHV0KCkge1xuICAgIHRoaXMucHJveHlBID0gbmV3IGIyRGlzdGFuY2VQcm94eSgpO1xuICAgIHRoaXMucHJveHlCID0gbmV3IGIyRGlzdGFuY2VQcm94eSgpO1xuICAgIHRoaXMuc3dlZXBBID0gbmV3IGIyU3dlZXAoKTtcbiAgICB0aGlzLnN3ZWVwQiA9IG5ldyBiMlN3ZWVwKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyVE9JSW5wdXQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyVE9JSW5wdXQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyRGlzdGFuY2UsIGIyRGlzdGFuY2VJbnB1dCwgYjJEaXN0YW5jZU91dHB1dCwgYjJNYXRoLCBiMlNlcGFyYXRpb25GdW5jdGlvbiwgYjJTZXR0aW5ncywgYjJTaW1wbGV4Q2FjaGUsIGIyVHJhbnNmb3JtO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMlRyYW5zZm9ybSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtO1xuXG5iMkRpc3RhbmNlID0gQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2U7XG5cbmIyU2ltcGxleENhY2hlID0gQm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleENhY2hlO1xuXG5iMlNlcGFyYXRpb25GdW5jdGlvbiA9IEJveDJELkNvbGxpc2lvbi5iMlNlcGFyYXRpb25GdW5jdGlvbjtcblxuYjJEaXN0YW5jZU91dHB1dCA9IEJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlT3V0cHV0O1xuXG5iMkRpc3RhbmNlSW5wdXQgPSBCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZUlucHV0O1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3QgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyVGltZU9mSW1wYWN0KCkge31cblxuICBiMlRpbWVPZkltcGFjdC5iMl90b2lDYWxscyA9IDA7XG5cbiAgYjJUaW1lT2ZJbXBhY3QuYjJfdG9pSXRlcnMgPSAwO1xuXG4gIGIyVGltZU9mSW1wYWN0LmIyX3RvaU1heEl0ZXJzID0gMDtcblxuICBiMlRpbWVPZkltcGFjdC5iMl90b2lSb290SXRlcnMgPSAwO1xuXG4gIGIyVGltZU9mSW1wYWN0LmIyX3RvaU1heFJvb3RJdGVycyA9IDA7XG5cbiAgYjJUaW1lT2ZJbXBhY3Quc19jYWNoZSA9IG5ldyBiMlNpbXBsZXhDYWNoZSgpO1xuXG4gIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dCA9IG5ldyBiMkRpc3RhbmNlSW5wdXQoKTtcblxuICBiMlRpbWVPZkltcGFjdC5zX3hmQSA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuXG4gIGIyVGltZU9mSW1wYWN0LnNfeGZCID0gbmV3IGIyVHJhbnNmb3JtKCk7XG5cbiAgYjJUaW1lT2ZJbXBhY3Quc19mY24gPSBuZXcgYjJTZXBhcmF0aW9uRnVuY3Rpb24oKTtcblxuICBiMlRpbWVPZkltcGFjdC5zX2Rpc3RhbmNlT3V0cHV0ID0gbmV3IGIyRGlzdGFuY2VPdXRwdXQoKTtcblxuICBiMlRpbWVPZkltcGFjdC5UaW1lT2ZJbXBhY3QgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgIHZhciBhbHBoYSwgZiwgZjEsIGYyLCBpdGVyLCBrX21heEl0ZXJhdGlvbnMsIG5ld0FscGhhLCBwcm94eUEsIHByb3h5QiwgcmFkaXVzLCByb290SXRlckNvdW50LCBzZXBhcmF0aW9uLCBzd2VlcEEsIHN3ZWVwQiwgdGFyZ2V0LCB0b2xlcmFuY2UsIHgsIHgxLCB4MjtcbiAgICArK2IyVGltZU9mSW1wYWN0LmIyX3RvaUNhbGxzO1xuICAgIHByb3h5QSA9IGlucHV0LnByb3h5QTtcbiAgICBwcm94eUIgPSBpbnB1dC5wcm94eUI7XG4gICAgc3dlZXBBID0gaW5wdXQuc3dlZXBBO1xuICAgIHN3ZWVwQiA9IGlucHV0LnN3ZWVwQjtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KHN3ZWVwQS50MCA9PT0gc3dlZXBCLnQwKTtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KDEuMCAtIHN3ZWVwQS50MCA+IE51bWJlci5NSU5fVkFMVUUpO1xuICAgIHJhZGl1cyA9IHByb3h5QS5tX3JhZGl1cyArIHByb3h5Qi5tX3JhZGl1cztcbiAgICB0b2xlcmFuY2UgPSBpbnB1dC50b2xlcmFuY2U7XG4gICAgYWxwaGEgPSAwLjA7XG4gICAga19tYXhJdGVyYXRpb25zID0gMTAwMDtcbiAgICBpdGVyID0gMDtcbiAgICB0YXJnZXQgPSAwLjA7XG4gICAgYjJUaW1lT2ZJbXBhY3Quc19jYWNoZS5jb3VudCA9IDA7XG4gICAgYjJUaW1lT2ZJbXBhY3Quc19kaXN0YW5jZUlucHV0LnVzZVJhZGlpID0gZmFsc2U7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIHN3ZWVwQS5HZXRUcmFuc2Zvcm0oYjJUaW1lT2ZJbXBhY3Quc194ZkEsIGFscGhhKTtcbiAgICAgIHN3ZWVwQi5HZXRUcmFuc2Zvcm0oYjJUaW1lT2ZJbXBhY3Quc194ZkIsIGFscGhhKTtcbiAgICAgIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dC5wcm94eUEgPSBwcm94eUE7XG4gICAgICBiMlRpbWVPZkltcGFjdC5zX2Rpc3RhbmNlSW5wdXQucHJveHlCID0gcHJveHlCO1xuICAgICAgYjJUaW1lT2ZJbXBhY3Quc19kaXN0YW5jZUlucHV0LnRyYW5zZm9ybUEgPSBiMlRpbWVPZkltcGFjdC5zX3hmQTtcbiAgICAgIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dC50cmFuc2Zvcm1CID0gYjJUaW1lT2ZJbXBhY3Quc194ZkI7XG4gICAgICBiMkRpc3RhbmNlLkRpc3RhbmNlKGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VPdXRwdXQsIGIyVGltZU9mSW1wYWN0LnNfY2FjaGUsIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dCk7XG4gICAgICBpZiAoYjJUaW1lT2ZJbXBhY3Quc19kaXN0YW5jZU91dHB1dC5kaXN0YW5jZSA8PSAwLjApIHtcbiAgICAgICAgYWxwaGEgPSAxLjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgYjJUaW1lT2ZJbXBhY3Quc19mY24uSW5pdGlhbGl6ZShiMlRpbWVPZkltcGFjdC5zX2NhY2hlLCBwcm94eUEsIGIyVGltZU9mSW1wYWN0LnNfeGZBLCBwcm94eUIsIGIyVGltZU9mSW1wYWN0LnNfeGZCKTtcbiAgICAgIHNlcGFyYXRpb24gPSBiMlRpbWVPZkltcGFjdC5zX2Zjbi5FdmFsdWF0ZShiMlRpbWVPZkltcGFjdC5zX3hmQSwgYjJUaW1lT2ZJbXBhY3Quc194ZkIpO1xuICAgICAgaWYgKHNlcGFyYXRpb24gPD0gMC4wKSB7XG4gICAgICAgIGFscGhhID0gMS4wO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChpdGVyID09PSAwKSB7XG4gICAgICAgIGlmIChzZXBhcmF0aW9uID4gcmFkaXVzKSB7XG4gICAgICAgICAgdGFyZ2V0ID0gYjJNYXRoLk1heChyYWRpdXMgLSB0b2xlcmFuY2UsIDAuNzUgKiByYWRpdXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldCA9IGIyTWF0aC5NYXgoc2VwYXJhdGlvbiAtIHRvbGVyYW5jZSwgMC4wMiAqIHJhZGl1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzZXBhcmF0aW9uIC0gdGFyZ2V0IDwgMC41ICogdG9sZXJhbmNlKSB7XG4gICAgICAgIGlmIChpdGVyID09PSAwKSB7XG4gICAgICAgICAgYWxwaGEgPSAxLjA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBuZXdBbHBoYSA9IGFscGhhO1xuICAgICAgeDEgPSBhbHBoYTtcbiAgICAgIHgyID0gMS4wO1xuICAgICAgZjEgPSBzZXBhcmF0aW9uO1xuICAgICAgc3dlZXBBLkdldFRyYW5zZm9ybShiMlRpbWVPZkltcGFjdC5zX3hmQSwgeDIpO1xuICAgICAgc3dlZXBCLkdldFRyYW5zZm9ybShiMlRpbWVPZkltcGFjdC5zX3hmQiwgeDIpO1xuICAgICAgZjIgPSBiMlRpbWVPZkltcGFjdC5zX2Zjbi5FdmFsdWF0ZShiMlRpbWVPZkltcGFjdC5zX3hmQSwgYjJUaW1lT2ZJbXBhY3Quc194ZkIpO1xuICAgICAgaWYgKGYyID49IHRhcmdldCkge1xuICAgICAgICBhbHBoYSA9IDEuMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByb290SXRlckNvdW50ID0gMDtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHggPSAwO1xuICAgICAgICBpZiAocm9vdEl0ZXJDb3VudCAmIDEpIHtcbiAgICAgICAgICB4ID0geDEgKyAodGFyZ2V0IC0gZjEpICogKHgyIC0geDEpIC8gKGYyIC0gZjEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHggPSAwLjUgKiAoeDEgKyB4Mik7XG4gICAgICAgIH1cbiAgICAgICAgc3dlZXBBLkdldFRyYW5zZm9ybShiMlRpbWVPZkltcGFjdC5zX3hmQSwgeCk7XG4gICAgICAgIHN3ZWVwQi5HZXRUcmFuc2Zvcm0oYjJUaW1lT2ZJbXBhY3Quc194ZkIsIHgpO1xuICAgICAgICBmID0gYjJUaW1lT2ZJbXBhY3Quc19mY24uRXZhbHVhdGUoYjJUaW1lT2ZJbXBhY3Quc194ZkEsIGIyVGltZU9mSW1wYWN0LnNfeGZCKTtcbiAgICAgICAgaWYgKGIyTWF0aC5BYnMoZiAtIHRhcmdldCkgPCAwLjAyNSAqIHRvbGVyYW5jZSkge1xuICAgICAgICAgIG5ld0FscGhhID0geDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZiA+IHRhcmdldCkge1xuICAgICAgICAgIHgxID0geDtcbiAgICAgICAgICBmMSA9IGY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeDIgPSB4O1xuICAgICAgICAgIGYyID0gZjtcbiAgICAgICAgfVxuICAgICAgICArK3Jvb3RJdGVyQ291bnQ7XG4gICAgICAgICsrYjJUaW1lT2ZJbXBhY3QuYjJfdG9pUm9vdEl0ZXJzO1xuICAgICAgICBpZiAocm9vdEl0ZXJDb3VudCA9PT0gNTApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYjJUaW1lT2ZJbXBhY3QuYjJfdG9pTWF4Um9vdEl0ZXJzID0gYjJNYXRoLk1heChiMlRpbWVPZkltcGFjdC5iMl90b2lNYXhSb290SXRlcnMsIHJvb3RJdGVyQ291bnQpO1xuICAgICAgaWYgKG5ld0FscGhhIDwgKDEuMCArIDEwMC4wICogTnVtYmVyLk1JTl9WQUxVRSkgKiBhbHBoYSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGFscGhhID0gbmV3QWxwaGE7XG4gICAgICBpdGVyKys7XG4gICAgICArK2IyVGltZU9mSW1wYWN0LmIyX3RvaUl0ZXJzO1xuICAgICAgaWYgKGl0ZXIgPT09IGtfbWF4SXRlcmF0aW9ucykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgYjJUaW1lT2ZJbXBhY3QuYjJfdG9pTWF4SXRlcnMgPSBiMk1hdGguTWF4KGIyVGltZU9mSW1wYWN0LmIyX3RvaU1heEl0ZXJzLCBpdGVyKTtcbiAgICByZXR1cm4gYWxwaGE7XG4gIH07XG5cbiAgcmV0dXJuIGIyVGltZU9mSW1wYWN0O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlRpbWVPZkltcGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJNYW5pZm9sZCwgYjJTZXR0aW5ncywgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMk1hbmlmb2xkID0gQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGQ7XG5cbkJveDJELkNvbGxpc2lvbi5iMldvcmxkTWFuaWZvbGQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyV29ybGRNYW5pZm9sZC5wcm90b3R5cGUubV9ub3JtYWwgPSBudWxsO1xuXG4gIGIyV29ybGRNYW5pZm9sZC5wcm90b3R5cGUubV9wb2ludHMgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyV29ybGRNYW5pZm9sZCgpIHtcbiAgICB2YXIgaTtcbiAgICB0aGlzLm1fbm9ybWFsID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9wb2ludHMgPSBuZXcgQXJyYXkoYjJTZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50cyk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgICB0aGlzLm1fcG9pbnRzW2ldID0gbmV3IGIyVmVjMigpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBiMldvcmxkTWFuaWZvbGQucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihtYW5pZm9sZCwgeGZBLCByYWRpdXNBLCB4ZkIsIHJhZGl1c0IpIHtcbiAgICB2YXIgY0FYLCBjQVksIGNCWCwgY0JZLCBjbGlwUG9pbnRYLCBjbGlwUG9pbnRZLCBkLCBkMiwgZFgsIGRZLCBpLCBub3JtYWxYLCBub3JtYWxZLCBwbGFuZVBvaW50WCwgcGxhbmVQb2ludFksIHBvaW50QVgsIHBvaW50QVksIHBvaW50QlgsIHBvaW50QlksIHRNYXQsIHRWZWMsIF9yZXN1bHRzLCBfcmVzdWx0czE7XG4gICAgaWYgKHJhZGl1c0EgPT09IHZvaWQgMCkge1xuICAgICAgcmFkaXVzQSA9IDA7XG4gICAgfVxuICAgIGlmIChyYWRpdXNCID09PSB2b2lkIDApIHtcbiAgICAgIHJhZGl1c0IgPSAwO1xuICAgIH1cbiAgICBpZiAobWFuaWZvbGQubV9wb2ludENvdW50ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICBub3JtYWxYID0gMDtcbiAgICBub3JtYWxZID0gMDtcbiAgICBwbGFuZVBvaW50WCA9IDA7XG4gICAgcGxhbmVQb2ludFkgPSAwO1xuICAgIGNsaXBQb2ludFggPSAwO1xuICAgIGNsaXBQb2ludFkgPSAwO1xuICAgIHN3aXRjaCAobWFuaWZvbGQubV90eXBlKSB7XG4gICAgICBjYXNlIGIyTWFuaWZvbGQuZV9jaXJjbGVzOlxuICAgICAgICB0TWF0ID0geGZBLlI7XG4gICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX2xvY2FsUG9pbnQ7XG4gICAgICAgIHBvaW50QVggPSB4ZkEucG9zaXRpb24ueCArIHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgIHBvaW50QVkgPSB4ZkEucG9zaXRpb24ueSArIHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICAgIHRNYXQgPSB4ZkIuUjtcbiAgICAgICAgdFZlYyA9IG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1fbG9jYWxQb2ludDtcbiAgICAgICAgcG9pbnRCWCA9IHhmQi5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgcG9pbnRCWSA9IHhmQi5wb3NpdGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgZFggPSBwb2ludEJYIC0gcG9pbnRBWDtcbiAgICAgICAgZFkgPSBwb2ludEJZIC0gcG9pbnRBWTtcbiAgICAgICAgZDIgPSBkWCAqIGRYICsgZFkgKiBkWTtcbiAgICAgICAgaWYgKGQyID4gTnVtYmVyLk1JTl9WQUxVRSAqIE51bWJlci5NSU5fVkFMVUUpIHtcbiAgICAgICAgICBkID0gTWF0aC5zcXJ0KGQyKTtcbiAgICAgICAgICB0aGlzLm1fbm9ybWFsLnggPSBkWCAvIGQ7XG4gICAgICAgICAgdGhpcy5tX25vcm1hbC55ID0gZFkgLyBkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9ub3JtYWwueCA9IDE7XG4gICAgICAgICAgdGhpcy5tX25vcm1hbC55ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjQVggPSBwb2ludEFYICsgcmFkaXVzQSAqIHRoaXMubV9ub3JtYWwueDtcbiAgICAgICAgY0FZID0gcG9pbnRBWSArIHJhZGl1c0EgKiB0aGlzLm1fbm9ybWFsLnk7XG4gICAgICAgIGNCWCA9IHBvaW50QlggLSByYWRpdXNCICogdGhpcy5tX25vcm1hbC54O1xuICAgICAgICBjQlkgPSBwb2ludEJZIC0gcmFkaXVzQiAqIHRoaXMubV9ub3JtYWwueTtcbiAgICAgICAgdGhpcy5tX3BvaW50c1swXS54ID0gMC41ICogKGNBWCArIGNCWCk7XG4gICAgICAgIHJldHVybiB0aGlzLm1fcG9pbnRzWzBdLnkgPSAwLjUgKiAoY0FZICsgY0JZKTtcbiAgICAgIGNhc2UgYjJNYW5pZm9sZC5lX2ZhY2VBOlxuICAgICAgICB0TWF0ID0geGZBLlI7XG4gICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWw7XG4gICAgICAgIG5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgICBub3JtYWxZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgdE1hdCA9IHhmQS5SO1xuICAgICAgICB0VmVjID0gbWFuaWZvbGQubV9sb2NhbFBvaW50O1xuICAgICAgICBwbGFuZVBvaW50WCA9IHhmQS5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgcGxhbmVQb2ludFkgPSB4ZkEucG9zaXRpb24ueSArIHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueCA9IG5vcm1hbFg7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueSA9IG5vcm1hbFk7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICB3aGlsZSAoaSA8IG1hbmlmb2xkLm1fcG9pbnRDb3VudCkge1xuICAgICAgICAgIHRNYXQgPSB4ZkIuUjtcbiAgICAgICAgICB0VmVjID0gbWFuaWZvbGQubV9wb2ludHNbaV0ubV9sb2NhbFBvaW50O1xuICAgICAgICAgIGNsaXBQb2ludFggPSB4ZkIucG9zaXRpb24ueCArIHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgICAgY2xpcFBvaW50WSA9IHhmQi5wb3NpdGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgICB0aGlzLm1fcG9pbnRzW2ldLnggPSBjbGlwUG9pbnRYICsgMC41ICogKHJhZGl1c0EgLSAoY2xpcFBvaW50WCAtIHBsYW5lUG9pbnRYKSAqIG5vcm1hbFggLSAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIG5vcm1hbFkgLSByYWRpdXNCKSAqIG5vcm1hbFg7XG4gICAgICAgICAgdGhpcy5tX3BvaW50c1tpXS55ID0gY2xpcFBvaW50WSArIDAuNSAqIChyYWRpdXNBIC0gKGNsaXBQb2ludFggLSBwbGFuZVBvaW50WCkgKiBub3JtYWxYIC0gKGNsaXBQb2ludFkgLSBwbGFuZVBvaW50WSkgKiBub3JtYWxZIC0gcmFkaXVzQikgKiBub3JtYWxZO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goaSsrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMk1hbmlmb2xkLmVfZmFjZUI6XG4gICAgICAgIHRNYXQgPSB4ZkIuUjtcbiAgICAgICAgdFZlYyA9IG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbDtcbiAgICAgICAgbm9ybWFsWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgIG5vcm1hbFkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgICB0TWF0ID0geGZCLlI7XG4gICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX2xvY2FsUG9pbnQ7XG4gICAgICAgIHBsYW5lUG9pbnRYID0geGZCLnBvc2l0aW9uLnggKyB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgICBwbGFuZVBvaW50WSA9IHhmQi5wb3NpdGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgdGhpcy5tX25vcm1hbC54ID0gLW5vcm1hbFg7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueSA9IC1ub3JtYWxZO1xuICAgICAgICBpID0gMDtcbiAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgIHdoaWxlIChpIDwgbWFuaWZvbGQubV9wb2ludENvdW50KSB7XG4gICAgICAgICAgdE1hdCA9IHhmQS5SO1xuICAgICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX3BvaW50c1tpXS5tX2xvY2FsUG9pbnQ7XG4gICAgICAgICAgY2xpcFBvaW50WCA9IHhmQS5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgICBjbGlwUG9pbnRZID0geGZBLnBvc2l0aW9uLnkgKyB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgICAgIHRoaXMubV9wb2ludHNbaV0ueCA9IGNsaXBQb2ludFggKyAwLjUgKiAocmFkaXVzQiAtIChjbGlwUG9pbnRYIC0gcGxhbmVQb2ludFgpICogbm9ybWFsWCAtIChjbGlwUG9pbnRZIC0gcGxhbmVQb2ludFkpICogbm9ybWFsWSAtIHJhZGl1c0EpICogbm9ybWFsWDtcbiAgICAgICAgICB0aGlzLm1fcG9pbnRzW2ldLnkgPSBjbGlwUG9pbnRZICsgMC41ICogKHJhZGl1c0IgLSAoY2xpcFBvaW50WCAtIHBsYW5lUG9pbnRYKSAqIG5vcm1hbFggLSAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIG5vcm1hbFkgLSByYWRpdXNBKSAqIG5vcm1hbFk7XG4gICAgICAgICAgX3Jlc3VsdHMxLnB1c2goaSsrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHMxO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYjJXb3JsZE1hbmlmb2xkO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMldvcmxkTWFuaWZvbGQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyTWF0aCwgYjJTZXR0aW5ncywgYjJTaGFwZSwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJTaGFwZSA9IEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZTtcblxuQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNpcmNsZVNoYXBlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJDaXJjbGVTaGFwZSwgX3N1cGVyKTtcblxuICBiMkNpcmNsZVNoYXBlLnByb3RvdHlwZS5tX3R5cGUgPSBiMlNoYXBlLmVfY2lyY2xlU2hhcGU7XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUubV9wID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkNpcmNsZVNoYXBlKHJhZGl1cykge1xuICAgIGlmIChyYWRpdXMgPT09IHZvaWQgMCkge1xuICAgICAgcmFkaXVzID0gMDtcbiAgICB9XG4gICAgYjJDaXJjbGVTaGFwZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCByYWRpdXMpO1xuICAgIHRoaXMubV9wID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV90eXBlID0gYjJTaGFwZS5lX2NpcmNsZVNoYXBlO1xuICAgIHRoaXMubV9yYWRpdXMgPSByYWRpdXM7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzO1xuICAgIHMgPSBuZXcgYjJDaXJjbGVTaGFwZSgpO1xuICAgIHMuU2V0KHRoaXMpO1xuICAgIHJldHVybiBzO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgdmFyIG90aGVyMjtcbiAgICBiMkNpcmNsZVNoYXBlLl9fc3VwZXJfXy5TZXQuY2FsbCh0aGlzLCBvdGhlcik7XG4gICAgaWYgKEJveDJELmVxdWFscyhvdGhlciwgYjJDaXJjbGVTaGFwZSkpIHtcbiAgICAgIG90aGVyMiA9IChvdGhlciBpbnN0YW5jZW9mIGIyQ2lyY2xlU2hhcGUgPyBvdGhlciA6IG51bGwpO1xuICAgICAgdGhpcy5tX3AuU2V0VihvdGhlcjIubV9wKTtcbiAgICB9XG4gIH07XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuVGVzdFBvaW50ID0gZnVuY3Rpb24odHJhbnNmb3JtLCBwKSB7XG4gICAgdmFyIGRYLCBkWSwgdE1hdDtcbiAgICB0TWF0ID0gdHJhbnNmb3JtLlI7XG4gICAgZFggPSB0cmFuc2Zvcm0ucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV9wLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV9wLnkpO1xuICAgIGRZID0gdHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fcC55KTtcbiAgICBkWCA9IHAueCAtIGRYO1xuICAgIGRZID0gcC55IC0gZFk7XG4gICAgcmV0dXJuIChkWCAqIGRYICsgZFkgKiBkWSkgPD0gdGhpcy5tX3JhZGl1cyAqIHRoaXMubV9yYWRpdXM7XG4gIH07XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dCwgaW5wdXQsIHRyYW5zZm9ybSkge1xuICAgIHZhciBhLCBiLCBjLCBwb3NpdGlvblgsIHBvc2l0aW9uWSwgclgsIHJZLCByciwgc1gsIHNZLCBzaWdtYSwgdE1hdDtcbiAgICB0TWF0ID0gdHJhbnNmb3JtLlI7XG4gICAgcG9zaXRpb25YID0gdHJhbnNmb3JtLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fcC55KTtcbiAgICBwb3NpdGlvblkgPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV9wLnggKyB0TWF0LmNvbDIueSAqIHRoaXMubV9wLnkpO1xuICAgIHNYID0gaW5wdXQucDEueCAtIHBvc2l0aW9uWDtcbiAgICBzWSA9IGlucHV0LnAxLnkgLSBwb3NpdGlvblk7XG4gICAgYiA9IChzWCAqIHNYICsgc1kgKiBzWSkgLSB0aGlzLm1fcmFkaXVzICogdGhpcy5tX3JhZGl1cztcbiAgICByWCA9IGlucHV0LnAyLnggLSBpbnB1dC5wMS54O1xuICAgIHJZID0gaW5wdXQucDIueSAtIGlucHV0LnAxLnk7XG4gICAgYyA9IHNYICogclggKyBzWSAqIHJZO1xuICAgIHJyID0gclggKiByWCArIHJZICogclk7XG4gICAgc2lnbWEgPSBjICogYyAtIHJyICogYjtcbiAgICBpZiAoc2lnbWEgPCAwLjAgfHwgcnIgPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGEgPSAtKGMgKyBNYXRoLnNxcnQoc2lnbWEpKTtcbiAgICBpZiAoMC4wIDw9IGEgJiYgYSA8PSBpbnB1dC5tYXhGcmFjdGlvbiAqIHJyKSB7XG4gICAgICBhIC89IHJyO1xuICAgICAgb3V0cHV0LmZyYWN0aW9uID0gYTtcbiAgICAgIG91dHB1dC5ub3JtYWwueCA9IHNYICsgYSAqIHJYO1xuICAgICAgb3V0cHV0Lm5vcm1hbC55ID0gc1kgKyBhICogclk7XG4gICAgICBvdXRwdXQubm9ybWFsLk5vcm1hbGl6ZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBiMkNpcmNsZVNoYXBlLnByb3RvdHlwZS5Db21wdXRlQUFCQiA9IGZ1bmN0aW9uKGFhYmIsIHRyYW5zZm9ybSkge1xuICAgIHZhciBwWCwgcFksIHRNYXQ7XG4gICAgdE1hdCA9IHRyYW5zZm9ybS5SO1xuICAgIHBYID0gdHJhbnNmb3JtLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fcC55KTtcbiAgICBwWSA9IHRyYW5zZm9ybS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdGhpcy5tX3AueCArIHRNYXQuY29sMi55ICogdGhpcy5tX3AueSk7XG4gICAgYWFiYi5sb3dlckJvdW5kLlNldChwWCAtIHRoaXMubV9yYWRpdXMsIHBZIC0gdGhpcy5tX3JhZGl1cyk7XG4gICAgYWFiYi51cHBlckJvdW5kLlNldChwWCArIHRoaXMubV9yYWRpdXMsIHBZICsgdGhpcy5tX3JhZGl1cyk7XG4gIH07XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZU1hc3MgPSBmdW5jdGlvbihtYXNzRGF0YSwgZGVuc2l0eSkge1xuICAgIGlmIChkZW5zaXR5ID09PSB2b2lkIDApIHtcbiAgICAgIGRlbnNpdHkgPSAwO1xuICAgIH1cbiAgICBtYXNzRGF0YS5tYXNzID0gZGVuc2l0eSAqIGIyU2V0dGluZ3MuYjJfcGkgKiB0aGlzLm1fcmFkaXVzICogdGhpcy5tX3JhZGl1cztcbiAgICBtYXNzRGF0YS5jZW50ZXIuU2V0Vih0aGlzLm1fcCk7XG4gICAgbWFzc0RhdGEuSSA9IG1hc3NEYXRhLm1hc3MgKiAoMC41ICogdGhpcy5tX3JhZGl1cyAqIHRoaXMubV9yYWRpdXMgKyAodGhpcy5tX3AueCAqIHRoaXMubV9wLnggKyB0aGlzLm1fcC55ICogdGhpcy5tX3AueSkpO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLkNvbXB1dGVTdWJtZXJnZWRBcmVhID0gZnVuY3Rpb24obm9ybWFsLCBvZmZzZXQsIHhmLCBjKSB7XG4gICAgdmFyIGFyZWEsIGNvbSwgbCwgbDIsIHAsIHIyO1xuICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgcCA9IGIyTWF0aC5NdWxYKHhmLCB0aGlzLm1fcCk7XG4gICAgbCA9IC0oYjJNYXRoLkRvdChub3JtYWwsIHApIC0gb2Zmc2V0KTtcbiAgICBpZiAobCA8ICgtdGhpcy5tX3JhZGl1cykgKyBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGwgPiB0aGlzLm1fcmFkaXVzKSB7XG4gICAgICBjLlNldFYocCk7XG4gICAgICByZXR1cm4gTWF0aC5QSSAqIHRoaXMubV9yYWRpdXMgKiB0aGlzLm1fcmFkaXVzO1xuICAgIH1cbiAgICByMiA9IHRoaXMubV9yYWRpdXMgKiB0aGlzLm1fcmFkaXVzO1xuICAgIGwyID0gbCAqIGw7XG4gICAgYXJlYSA9IHIyICogKE1hdGguYXNpbihsIC8gdGhpcy5tX3JhZGl1cykgKyBNYXRoLlBJIC8gMikgKyBsICogTWF0aC5zcXJ0KHIyIC0gbDIpO1xuICAgIGNvbSA9IC0yIC8gMyAqIE1hdGgucG93KHIyIC0gbDIsIDEuNSkgLyBhcmVhO1xuICAgIGMueCA9IHAueCArIG5vcm1hbC54ICogY29tO1xuICAgIGMueSA9IHAueSArIG5vcm1hbC55ICogY29tO1xuICAgIHJldHVybiBhcmVhO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLkdldExvY2FsUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3A7XG4gIH07XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuU2V0TG9jYWxQb3NpdGlvbiA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgdGhpcy5tX3AuU2V0Vihwb3NpdGlvbik7XG4gIH07XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuR2V0UmFkaXVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9yYWRpdXM7XG4gIH07XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuU2V0UmFkaXVzID0gZnVuY3Rpb24ocmFkaXVzKSB7XG4gICAgaWYgKHJhZGl1cyA9PT0gdm9pZCAwKSB7XG4gICAgICByYWRpdXMgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fcmFkaXVzID0gcmFkaXVzO1xuICB9O1xuXG4gIHJldHVybiBiMkNpcmNsZVNoYXBlO1xuXG59KShiMlNoYXBlKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDaXJjbGVTaGFwZS5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5Cb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRnZUNoYWluRGVmID0gKGZ1bmN0aW9uKCkge1xuICBiMkVkZ2VDaGFpbkRlZi5wcm90b3R5cGUudmVydGV4Q291bnQgPSAwO1xuXG4gIGIyRWRnZUNoYWluRGVmLnByb3RvdHlwZS5pc0FMb29wID0gdHJ1ZTtcblxuICBiMkVkZ2VDaGFpbkRlZi5wcm90b3R5cGUudmVydGljZXMgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyRWRnZUNoYWluRGVmKCkge1xuICAgIHRoaXMudmVydGljZXMgPSBbXTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJFZGdlQ2hhaW5EZWY7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRWRnZUNoYWluRGVmLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlNoYXBlLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJTaGFwZSA9IEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZTtcblxuQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyRWRnZVNoYXBlLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIGIyRWRnZVNoYXBlKCkge1xuICAgIGIyRWRnZVNoYXBlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuc19zdXBwb3J0VmVjID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV92MSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdjIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2NvcmVWMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fY29yZVYyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2RpcmVjdGlvbiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fY29ybmVyRGlyMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fY29ybmVyRGlyMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdHlwZSA9IGIyU2hhcGUuZV9lZGdlU2hhcGU7XG4gICAgdGhpcy5tX3ByZXZFZGdlID0gbnVsbDtcbiAgICB0aGlzLm1fbmV4dEVkZ2UgPSBudWxsO1xuICAgIHRoaXMubV92MSA9IHYxO1xuICAgIHRoaXMubV92MiA9IHYyO1xuICAgIHRoaXMubV9kaXJlY3Rpb24uU2V0KHRoaXMubV92Mi54IC0gdGhpcy5tX3YxLngsIHRoaXMubV92Mi55IC0gdGhpcy5tX3YxLnkpO1xuICAgIHRoaXMubV9sZW5ndGggPSB0aGlzLm1fZGlyZWN0aW9uLk5vcm1hbGl6ZSgpO1xuICAgIHRoaXMubV9ub3JtYWwuU2V0KHRoaXMubV9kaXJlY3Rpb24ueSwgLXRoaXMubV9kaXJlY3Rpb24ueCk7XG4gICAgdGhpcy5tX2NvcmVWMS5TZXQoKC1iMlNldHRpbmdzLmIyX3RvaVNsb3AgKiAodGhpcy5tX25vcm1hbC54IC0gdGhpcy5tX2RpcmVjdGlvbi54KSkgKyB0aGlzLm1fdjEueCwgKC1iMlNldHRpbmdzLmIyX3RvaVNsb3AgKiAodGhpcy5tX25vcm1hbC55IC0gdGhpcy5tX2RpcmVjdGlvbi55KSkgKyB0aGlzLm1fdjEueSk7XG4gICAgdGhpcy5tX2NvcmVWMi5TZXQoKC1iMlNldHRpbmdzLmIyX3RvaVNsb3AgKiAodGhpcy5tX25vcm1hbC54ICsgdGhpcy5tX2RpcmVjdGlvbi54KSkgKyB0aGlzLm1fdjIueCwgKC1iMlNldHRpbmdzLmIyX3RvaVNsb3AgKiAodGhpcy5tX25vcm1hbC55ICsgdGhpcy5tX2RpcmVjdGlvbi55KSkgKyB0aGlzLm1fdjIueSk7XG4gICAgdGhpcy5tX2Nvcm5lckRpcjEgPSB0aGlzLm1fbm9ybWFsO1xuICAgIHRoaXMubV9jb3JuZXJEaXIyLlNldCgtdGhpcy5tX25vcm1hbC54LCAtdGhpcy5tX25vcm1hbC55KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuVGVzdFBvaW50ID0gZnVuY3Rpb24odHJhbnNmb3JtLCBwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24ob3V0cHV0LCBpbnB1dCwgdHJhbnNmb3JtKSB7XG4gICAgdmFyIGEsIGJYLCBiWSwgZGVub20sIGtfc2xvcCwgbXUyLCBuTGVuLCBuWCwgblksIHJYLCByWSwgdE1hdCwgdjFYLCB2MVk7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICByWCA9IGlucHV0LnAyLnggLSBpbnB1dC5wMS54O1xuICAgIHJZID0gaW5wdXQucDIueSAtIGlucHV0LnAxLnk7XG4gICAgdE1hdCA9IHRyYW5zZm9ybS5SO1xuICAgIHYxWCA9IHRyYW5zZm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX3YxLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV92MS55KTtcbiAgICB2MVkgPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV92MS54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fdjEueSk7XG4gICAgblggPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV92Mi54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fdjIueSkgLSB2MVk7XG4gICAgblkgPSAtKHRyYW5zZm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX3YyLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV92Mi55KSAtIHYxWCk7XG4gICAga19zbG9wID0gMTAwLjAgKiBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgIGRlbm9tID0gLShyWCAqIG5YICsgclkgKiBuWSk7XG4gICAgaWYgKGRlbm9tID4ga19zbG9wKSB7XG4gICAgICBiWCA9IGlucHV0LnAxLnggLSB2MVg7XG4gICAgICBiWSA9IGlucHV0LnAxLnkgLSB2MVk7XG4gICAgICBhID0gYlggKiBuWCArIGJZICogblk7XG4gICAgICBpZiAoMC4wIDw9IGEgJiYgYSA8PSBpbnB1dC5tYXhGcmFjdGlvbiAqIGRlbm9tKSB7XG4gICAgICAgIG11MiA9ICgtclggKiBiWSkgKyByWSAqIGJYO1xuICAgICAgICBpZiAoKC1rX3Nsb3AgKiBkZW5vbSkgPD0gbXUyICYmIG11MiA8PSBkZW5vbSAqICgxLjAgKyBrX3Nsb3ApKSB7XG4gICAgICAgICAgYSAvPSBkZW5vbTtcbiAgICAgICAgICBvdXRwdXQuZnJhY3Rpb24gPSBhO1xuICAgICAgICAgIG5MZW4gPSBNYXRoLnNxcnQoblggKiBuWCArIG5ZICogblkpO1xuICAgICAgICAgIG91dHB1dC5ub3JtYWwueCA9IG5YIC8gbkxlbjtcbiAgICAgICAgICBvdXRwdXQubm9ybWFsLnkgPSBuWSAvIG5MZW47XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5Db21wdXRlQUFCQiA9IGZ1bmN0aW9uKGFhYmIsIHRyYW5zZm9ybSkge1xuICAgIHZhciB0TWF0LCB2MVgsIHYxWSwgdjJYLCB2Mlk7XG4gICAgdE1hdCA9IHRyYW5zZm9ybS5SO1xuICAgIHYxWCA9IHRyYW5zZm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX3YxLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV92MS55KTtcbiAgICB2MVkgPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV92MS54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fdjEueSk7XG4gICAgdjJYID0gdHJhbnNmb3JtLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fdjIueCArIHRNYXQuY29sMi54ICogdGhpcy5tX3YyLnkpO1xuICAgIHYyWSA9IHRyYW5zZm9ybS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdGhpcy5tX3YyLnggKyB0TWF0LmNvbDIueSAqIHRoaXMubV92Mi55KTtcbiAgICBpZiAodjFYIDwgdjJYKSB7XG4gICAgICBhYWJiLmxvd2VyQm91bmQueCA9IHYxWDtcbiAgICAgIGFhYmIudXBwZXJCb3VuZC54ID0gdjJYO1xuICAgIH0gZWxzZSB7XG4gICAgICBhYWJiLmxvd2VyQm91bmQueCA9IHYyWDtcbiAgICAgIGFhYmIudXBwZXJCb3VuZC54ID0gdjFYO1xuICAgIH1cbiAgICBpZiAodjFZIDwgdjJZKSB7XG4gICAgICBhYWJiLmxvd2VyQm91bmQueSA9IHYxWTtcbiAgICAgIGFhYmIudXBwZXJCb3VuZC55ID0gdjJZO1xuICAgIH0gZWxzZSB7XG4gICAgICBhYWJiLmxvd2VyQm91bmQueSA9IHYyWTtcbiAgICAgIGFhYmIudXBwZXJCb3VuZC55ID0gdjFZO1xuICAgIH1cbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZU1hc3MgPSBmdW5jdGlvbihtYXNzRGF0YSwgZGVuc2l0eSkge1xuICAgIGlmIChkZW5zaXR5ID09PSB2b2lkIDApIHtcbiAgICAgIGRlbnNpdHkgPSAwO1xuICAgIH1cbiAgICBtYXNzRGF0YS5tYXNzID0gMDtcbiAgICBtYXNzRGF0YS5jZW50ZXIuU2V0Vih0aGlzLm1fdjEpO1xuICAgIG1hc3NEYXRhLkkgPSAwO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5Db21wdXRlU3VibWVyZ2VkQXJlYSA9IGZ1bmN0aW9uKG5vcm1hbCwgb2Zmc2V0LCB4ZiwgYykge1xuICAgIHZhciBkMSwgZDIsIHYwLCB2MSwgdjI7XG4gICAgaWYgKG9mZnNldCA9PT0gdm9pZCAwKSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cbiAgICB2MCA9IG5ldyBiMlZlYzIobm9ybWFsLnggKiBvZmZzZXQsIG5vcm1hbC55ICogb2Zmc2V0KTtcbiAgICB2MSA9IGIyTWF0aC5NdWxYKHhmLCB0aGlzLm1fdjEpO1xuICAgIHYyID0gYjJNYXRoLk11bFgoeGYsIHRoaXMubV92Mik7XG4gICAgZDEgPSBiMk1hdGguRG90KG5vcm1hbCwgdjEpIC0gb2Zmc2V0O1xuICAgIGQyID0gYjJNYXRoLkRvdChub3JtYWwsIHYyKSAtIG9mZnNldDtcbiAgICBpZiAoZDEgPiAwKSB7XG4gICAgICBpZiAoZDIgPiAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdjEueCA9ICgtZDIgLyAoZDEgLSBkMikgKiB2MS54KSArIGQxIC8gKGQxIC0gZDIpICogdjIueDtcbiAgICAgICAgdjEueSA9ICgtZDIgLyAoZDEgLSBkMikgKiB2MS55KSArIGQxIC8gKGQxIC0gZDIpICogdjIueTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGQyID4gMCkge1xuICAgICAgICB2Mi54ID0gKC1kMiAvIChkMSAtIGQyKSAqIHYxLngpICsgZDEgLyAoZDEgLSBkMikgKiB2Mi54O1xuICAgICAgICB2Mi55ID0gKC1kMiAvIChkMSAtIGQyKSAqIHYxLnkpICsgZDEgLyAoZDEgLSBkMikgKiB2Mi55O1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgfVxuICAgIH1cbiAgICBjLnggPSAodjAueCArIHYxLnggKyB2Mi54KSAvIDM7XG4gICAgYy55ID0gKHYwLnkgKyB2MS55ICsgdjIueSkgLyAzO1xuICAgIHJldHVybiAwLjUgKiAoKHYxLnggLSB2MC54KSAqICh2Mi55IC0gdjAueSkgLSAodjEueSAtIHYwLnkpICogKHYyLnggLSB2MC54KSk7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldExlbmd0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbGVuZ3RoO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRWZXJ0ZXgxID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV92MTtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0VmVydGV4MiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdjI7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldENvcmVWZXJ0ZXgxID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9jb3JlVjE7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldENvcmVWZXJ0ZXgyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9jb3JlVjI7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldE5vcm1hbFZlY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbm9ybWFsO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXREaXJlY3Rpb25WZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2RpcmVjdGlvbjtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0Q29ybmVyMVZlY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29ybmVyRGlyMTtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0Q29ybmVyMlZlY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29ybmVyRGlyMjtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29ybmVyMUlzQ29udmV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9jb3JuZXJDb252ZXgxO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5Db3JuZXIySXNDb252ZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2Nvcm5lckNvbnZleDI7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldEZpcnN0VmVydGV4ID0gZnVuY3Rpb24oeGYpIHtcbiAgICB2YXIgdE1hdDtcbiAgICB0TWF0ID0geGYuUjtcbiAgICByZXR1cm4gbmV3IGIyVmVjMih4Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX2NvcmVWMS54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fY29yZVYxLnkpLCB4Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdGhpcy5tX2NvcmVWMS54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fY29yZVYxLnkpKTtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0TmV4dEVkZ2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX25leHRFZGdlO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRQcmV2RWRnZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fcHJldkVkZ2U7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLlN1cHBvcnQgPSBmdW5jdGlvbih4ZiwgZFgsIGRZKSB7XG4gICAgdmFyIHRNYXQsIHYxWCwgdjFZLCB2MlgsIHYyWTtcbiAgICBpZiAoZFggPT09IHZvaWQgMCkge1xuICAgICAgZFggPSAwO1xuICAgIH1cbiAgICBpZiAoZFkgPT09IHZvaWQgMCkge1xuICAgICAgZFkgPSAwO1xuICAgIH1cbiAgICB0TWF0ID0geGYuUjtcbiAgICB2MVggPSB4Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX2NvcmVWMS54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fY29yZVYxLnkpO1xuICAgIHYxWSA9IHhmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fY29yZVYxLnggKyB0TWF0LmNvbDIueSAqIHRoaXMubV9jb3JlVjEueSk7XG4gICAgdjJYID0geGYucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV9jb3JlVjIueCArIHRNYXQuY29sMi54ICogdGhpcy5tX2NvcmVWMi55KTtcbiAgICB2MlkgPSB4Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdGhpcy5tX2NvcmVWMi54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fY29yZVYyLnkpO1xuICAgIGlmICgodjFYICogZFggKyB2MVkgKiBkWSkgPiAodjJYICogZFggKyB2MlkgKiBkWSkpIHtcbiAgICAgIHRoaXMuc19zdXBwb3J0VmVjLnggPSB2MVg7XG4gICAgICB0aGlzLnNfc3VwcG9ydFZlYy55ID0gdjFZO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNfc3VwcG9ydFZlYy54ID0gdjJYO1xuICAgICAgdGhpcy5zX3N1cHBvcnRWZWMueSA9IHYyWTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc19zdXBwb3J0VmVjO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5TZXRQcmV2RWRnZSA9IGZ1bmN0aW9uKGVkZ2UsIGNvcmUsIGNvcm5lckRpciwgY29udmV4KSB7XG4gICAgdGhpcy5tX3ByZXZFZGdlID0gZWRnZTtcbiAgICB0aGlzLm1fY29yZVYxID0gY29yZTtcbiAgICB0aGlzLm1fY29ybmVyRGlyMSA9IGNvcm5lckRpcjtcbiAgICB0aGlzLm1fY29ybmVyQ29udmV4MSA9IGNvbnZleDtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuU2V0TmV4dEVkZ2UgPSBmdW5jdGlvbihlZGdlLCBjb3JlLCBjb3JuZXJEaXIsIGNvbnZleCkge1xuICAgIHRoaXMubV9uZXh0RWRnZSA9IGVkZ2U7XG4gICAgdGhpcy5tX2NvcmVWMiA9IGNvcmU7XG4gICAgdGhpcy5tX2Nvcm5lckRpcjIgPSBjb3JuZXJEaXI7XG4gICAgdGhpcy5tX2Nvcm5lckNvbnZleDIgPSBjb252ZXg7XG4gIH07XG5cbiAgcmV0dXJuIGIyRWRnZVNoYXBlO1xuXG59KShiMlNoYXBlKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJFZGdlU2hhcGUuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyU2hhcGUsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGU7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMk1hc3NEYXRhID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJNYXNzRGF0YSwgX3N1cGVyKTtcblxuICBiMk1hc3NEYXRhLnByb3RvdHlwZS5tYXNzID0gMC4wO1xuXG4gIGIyTWFzc0RhdGEucHJvdG90eXBlLmNlbnRlciA9IG51bGw7XG5cbiAgYjJNYXNzRGF0YS5wcm90b3R5cGUuSSA9IDAuMDtcblxuICBmdW5jdGlvbiBiMk1hc3NEYXRhKCkge1xuICAgIHRoaXMuY2VudGVyID0gbmV3IGIyVmVjMigwLCAwKTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJNYXNzRGF0YTtcblxufSkoYjJTaGFwZSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyTWFzc0RhdGEuanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvciwgYjJNYXQyMiwgYjJNYXRoLCBiMlNldHRpbmdzLCBiMlNoYXBlLCBiMlRyYW5zZm9ybSwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyTWF0aCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aDtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJUcmFuc2Zvcm0gPSBCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybTtcblxuYjJTaGFwZSA9IEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZTtcblxuQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyUG9seWdvblNoYXBlLCBfc3VwZXIpO1xuXG4gIGIyUG9seWdvblNoYXBlLnNfbWF0ID0gbmV3IGIyTWF0MjIoKTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUubV90eXBlID0gYjJTaGFwZS5lX3BvbHlnb25TaGFwZTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUubV9jZW50cm9pZCA9IG51bGw7XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLm1fdmVydGljZXMgPSBudWxsO1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5tX25vcm1hbHMgPSBudWxsO1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5tX3ZlcnRleENvdW50ID0gMDtcblxuICBmdW5jdGlvbiBiMlBvbHlnb25TaGFwZSgpIHtcbiAgICB0aGlzLm1fY2VudHJvaWQgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3ZlcnRpY2VzID0gbmV3IEFycmF5KCk7XG4gICAgdGhpcy5tX25vcm1hbHMgPSBuZXcgQXJyYXkoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzO1xuICAgIHMgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcbiAgICBzLlNldCh0aGlzKTtcbiAgICByZXR1cm4gcztcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICB2YXIgaSwgb3RoZXIyO1xuICAgIGIyUG9seWdvblNoYXBlLl9fc3VwZXJfXy5TZXQuY2FsbCh0aGlzLCBvdGhlcik7XG4gICAgaWYgKEJveDJELmVxdWFscyhvdGhlciwgYjJQb2x5Z29uU2hhcGUpKSB7XG4gICAgICBvdGhlcjIgPSAob3RoZXIgaW5zdGFuY2VvZiBiMlBvbHlnb25TaGFwZSA/IG90aGVyIDogbnVsbCk7XG4gICAgICB0aGlzLm1fY2VudHJvaWQuU2V0VihvdGhlcjIubV9jZW50cm9pZCk7XG4gICAgICB0aGlzLm1fdmVydGV4Q291bnQgPSBvdGhlcjIubV92ZXJ0ZXhDb3VudDtcbiAgICAgIHRoaXMuUmVzZXJ2ZSh0aGlzLm1fdmVydGV4Q291bnQpO1xuICAgICAgaSA9IDA7XG4gICAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgICB0aGlzLm1fdmVydGljZXNbaV0uU2V0VihvdGhlcjIubV92ZXJ0aWNlc1tpXSk7XG4gICAgICAgIHRoaXMubV9ub3JtYWxzW2ldLlNldFYob3RoZXIyLm1fbm9ybWFsc1tpXSk7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlNldEFzQXJyYXkgPSBmdW5jdGlvbih2ZXJ0aWNlcywgdmVydGV4Q291bnQpIHtcbiAgICB2YXIgaSwgdFZlYywgdjtcbiAgICBpZiAodmVydGV4Q291bnQgPT09IHZvaWQgMCkge1xuICAgICAgdmVydGV4Q291bnQgPSAwO1xuICAgIH1cbiAgICB2ID0gbmV3IEFycmF5KCk7XG4gICAgaSA9IDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHZlcnRpY2VzLmxlbmd0aCkge1xuICAgICAgdFZlYyA9IHZlcnRpY2VzW2ldO1xuICAgICAgdi5wdXNoKHRWZWMpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICB0aGlzLlNldEFzVmVjdG9yKHYsIHZlcnRleENvdW50KTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5Bc0FycmF5ID0gZnVuY3Rpb24odmVydGljZXMsIHZlcnRleENvdW50KSB7XG4gICAgdmFyIHBvbHlnb25TaGFwZTtcbiAgICBpZiAodmVydGV4Q291bnQgPT09IHZvaWQgMCkge1xuICAgICAgdmVydGV4Q291bnQgPSAwO1xuICAgIH1cbiAgICBwb2x5Z29uU2hhcGUgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcbiAgICBwb2x5Z29uU2hhcGUuU2V0QXNBcnJheSh2ZXJ0aWNlcywgdmVydGV4Q291bnQpO1xuICAgIHJldHVybiBwb2x5Z29uU2hhcGU7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlNldEFzVmVjdG9yID0gZnVuY3Rpb24odmVydGljZXMsIHZlcnRleENvdW50KSB7XG4gICAgdmFyIGVkZ2UsIGksIGkxLCBpMjtcbiAgICBpZiAodmVydGV4Q291bnQgPT09IHZvaWQgMCkge1xuICAgICAgdmVydGV4Q291bnQgPSAwO1xuICAgIH1cbiAgICBpZiAodmVydGV4Q291bnQgPT09IDApIHtcbiAgICAgIHZlcnRleENvdW50ID0gdmVydGljZXMubGVuZ3RoO1xuICAgIH1cbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KDIgPD0gdmVydGV4Q291bnQpO1xuICAgIHRoaXMubV92ZXJ0ZXhDb3VudCA9IHZlcnRleENvdW50O1xuICAgIHRoaXMuUmVzZXJ2ZSh2ZXJ0ZXhDb3VudCk7XG4gICAgaSA9IDA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fdmVydGV4Q291bnQpIHtcbiAgICAgIHRoaXMubV92ZXJ0aWNlc1tpXS5TZXRWKHZlcnRpY2VzW2ldKTtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fdmVydGV4Q291bnQpIHtcbiAgICAgIGkxID0gcGFyc2VJbnQoaSk7XG4gICAgICBpMiA9IHBhcnNlSW50KChpICsgMSA8IHRoaXMubV92ZXJ0ZXhDb3VudCA/IGkgKyAxIDogMCkpO1xuICAgICAgZWRnZSA9IGIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92ZXJ0aWNlc1tpMl0sIHRoaXMubV92ZXJ0aWNlc1tpMV0pO1xuICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChlZGdlLkxlbmd0aFNxdWFyZWQoKSA+IE51bWJlci5NSU5fVkFMVUUpO1xuICAgICAgdGhpcy5tX25vcm1hbHNbaV0uU2V0VihiMk1hdGguQ3Jvc3NWRihlZGdlLCAxLjApKTtcbiAgICAgIHRoaXMubV9ub3JtYWxzW2ldLk5vcm1hbGl6ZSgpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICB0aGlzLm1fY2VudHJvaWQgPSBiMlBvbHlnb25TaGFwZS5Db21wdXRlQ2VudHJvaWQodGhpcy5tX3ZlcnRpY2VzLCB0aGlzLm1fdmVydGV4Q291bnQpO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLkFzVmVjdG9yID0gZnVuY3Rpb24odmVydGljZXMsIHZlcnRleENvdW50KSB7XG4gICAgdmFyIHBvbHlnb25TaGFwZTtcbiAgICBpZiAodmVydGV4Q291bnQgPT09IHZvaWQgMCkge1xuICAgICAgdmVydGV4Q291bnQgPSAwO1xuICAgIH1cbiAgICBwb2x5Z29uU2hhcGUgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcbiAgICBwb2x5Z29uU2hhcGUuU2V0QXNWZWN0b3IodmVydGljZXMsIHZlcnRleENvdW50KTtcbiAgICByZXR1cm4gcG9seWdvblNoYXBlO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5TZXRBc0JveCA9IGZ1bmN0aW9uKGh4LCBoeSkge1xuICAgIGlmIChoeCA9PT0gdm9pZCAwKSB7XG4gICAgICBoeCA9IDA7XG4gICAgfVxuICAgIGlmIChoeSA9PT0gdm9pZCAwKSB7XG4gICAgICBoeSA9IDA7XG4gICAgfVxuICAgIHRoaXMubV92ZXJ0ZXhDb3VudCA9IDQ7XG4gICAgdGhpcy5SZXNlcnZlKDQpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1swXS5TZXQoLWh4LCAtaHkpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1sxXS5TZXQoaHgsIC1oeSk7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzJdLlNldChoeCwgaHkpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1szXS5TZXQoLWh4LCBoeSk7XG4gICAgdGhpcy5tX25vcm1hbHNbMF0uU2V0KDAuMCwgLTEuMCk7XG4gICAgdGhpcy5tX25vcm1hbHNbMV0uU2V0KDEuMCwgMC4wKTtcbiAgICB0aGlzLm1fbm9ybWFsc1syXS5TZXQoMC4wLCAxLjApO1xuICAgIHRoaXMubV9ub3JtYWxzWzNdLlNldCgtMS4wLCAwLjApO1xuICAgIHRoaXMubV9jZW50cm9pZC5TZXRaZXJvKCk7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUuQXNCb3ggPSBmdW5jdGlvbihoeCwgaHkpIHtcbiAgICB2YXIgcG9seWdvblNoYXBlO1xuICAgIGlmIChoeCA9PT0gdm9pZCAwKSB7XG4gICAgICBoeCA9IDA7XG4gICAgfVxuICAgIGlmIChoeSA9PT0gdm9pZCAwKSB7XG4gICAgICBoeSA9IDA7XG4gICAgfVxuICAgIHBvbHlnb25TaGFwZSA9IG5ldyBiMlBvbHlnb25TaGFwZSgpO1xuICAgIHBvbHlnb25TaGFwZS5TZXRBc0JveChoeCwgaHkpO1xuICAgIHJldHVybiBwb2x5Z29uU2hhcGU7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlNldEFzT3JpZW50ZWRCb3ggPSBmdW5jdGlvbihoeCwgaHksIGNlbnRlciwgYW5nbGUpIHtcbiAgICB2YXIgaSwgeGY7XG4gICAgaWYgKGh4ID09PSB2b2lkIDApIHtcbiAgICAgIGh4ID0gMDtcbiAgICB9XG4gICAgaWYgKGh5ID09PSB2b2lkIDApIHtcbiAgICAgIGh5ID0gMDtcbiAgICB9XG4gICAgaWYgKGNlbnRlciA9PT0gdm9pZCAwKSB7XG4gICAgICBjZW50ZXIgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoYW5nbGUgPT09IHZvaWQgMCkge1xuICAgICAgYW5nbGUgPSAwLjA7XG4gICAgfVxuICAgIHRoaXMubV92ZXJ0ZXhDb3VudCA9IDQ7XG4gICAgdGhpcy5SZXNlcnZlKDQpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1swXS5TZXQoLWh4LCAtaHkpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1sxXS5TZXQoaHgsIC1oeSk7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzJdLlNldChoeCwgaHkpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1szXS5TZXQoLWh4LCBoeSk7XG4gICAgdGhpcy5tX25vcm1hbHNbMF0uU2V0KDAuMCwgLTEuMCk7XG4gICAgdGhpcy5tX25vcm1hbHNbMV0uU2V0KDEuMCwgMC4wKTtcbiAgICB0aGlzLm1fbm9ybWFsc1syXS5TZXQoMC4wLCAxLjApO1xuICAgIHRoaXMubV9ub3JtYWxzWzNdLlNldCgtMS4wLCAwLjApO1xuICAgIHRoaXMubV9jZW50cm9pZCA9IGNlbnRlcjtcbiAgICB4ZiA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuICAgIHhmLnBvc2l0aW9uID0gY2VudGVyO1xuICAgIHhmLlIuU2V0KGFuZ2xlKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgdGhpcy5tX3ZlcnRpY2VzW2ldID0gYjJNYXRoLk11bFgoeGYsIHRoaXMubV92ZXJ0aWNlc1tpXSk7XG4gICAgICB0aGlzLm1fbm9ybWFsc1tpXSA9IGIyTWF0aC5NdWxNVih4Zi5SLCB0aGlzLm1fbm9ybWFsc1tpXSk7XG4gICAgICArK2k7XG4gICAgfVxuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLkFzT3JpZW50ZWRCb3ggPSBmdW5jdGlvbihoeCwgaHksIGNlbnRlciwgYW5nbGUpIHtcbiAgICB2YXIgcG9seWdvblNoYXBlO1xuICAgIGlmIChoeCA9PT0gdm9pZCAwKSB7XG4gICAgICBoeCA9IDA7XG4gICAgfVxuICAgIGlmIChoeSA9PT0gdm9pZCAwKSB7XG4gICAgICBoeSA9IDA7XG4gICAgfVxuICAgIGlmIChjZW50ZXIgPT09IHZvaWQgMCkge1xuICAgICAgY2VudGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGFuZ2xlID09PSB2b2lkIDApIHtcbiAgICAgIGFuZ2xlID0gMC4wO1xuICAgIH1cbiAgICBwb2x5Z29uU2hhcGUgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcbiAgICBwb2x5Z29uU2hhcGUuU2V0QXNPcmllbnRlZEJveChoeCwgaHksIGNlbnRlciwgYW5nbGUpO1xuICAgIHJldHVybiBwb2x5Z29uU2hhcGU7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlNldEFzRWRnZSA9IGZ1bmN0aW9uKHYxLCB2Mikge1xuICAgIHRoaXMubV92ZXJ0ZXhDb3VudCA9IDI7XG4gICAgdGhpcy5SZXNlcnZlKDIpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1swXS5TZXRWKHYxKTtcbiAgICB0aGlzLm1fdmVydGljZXNbMV0uU2V0Vih2Mik7XG4gICAgdGhpcy5tX2NlbnRyb2lkLnggPSAwLjUgKiAodjEueCArIHYyLngpO1xuICAgIHRoaXMubV9jZW50cm9pZC55ID0gMC41ICogKHYxLnkgKyB2Mi55KTtcbiAgICB0aGlzLm1fbm9ybWFsc1swXSA9IGIyTWF0aC5Dcm9zc1ZGKGIyTWF0aC5TdWJ0cmFjdFZWKHYyLCB2MSksIDEuMCk7XG4gICAgdGhpcy5tX25vcm1hbHNbMF0uTm9ybWFsaXplKCk7XG4gICAgdGhpcy5tX25vcm1hbHNbMV0ueCA9IC10aGlzLm1fbm9ybWFsc1swXS54O1xuICAgIHRoaXMubV9ub3JtYWxzWzFdLnkgPSAtdGhpcy5tX25vcm1hbHNbMF0ueTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5Bc0VkZ2UgPSBmdW5jdGlvbih2MSwgdjIpIHtcbiAgICB2YXIgcG9seWdvblNoYXBlO1xuICAgIHBvbHlnb25TaGFwZSA9IG5ldyBiMlBvbHlnb25TaGFwZSgpO1xuICAgIHBvbHlnb25TaGFwZS5TZXRBc0VkZ2UodjEsIHYyKTtcbiAgICByZXR1cm4gcG9seWdvblNoYXBlO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5UZXN0UG9pbnQgPSBmdW5jdGlvbih4ZiwgcCkge1xuICAgIHZhciBkb3QsIGksIHBMb2NhbFgsIHBMb2NhbFksIHRNYXQsIHRWZWMsIHRYLCB0WTtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHRNYXQgPSB4Zi5SO1xuICAgIHRYID0gcC54IC0geGYucG9zaXRpb24ueDtcbiAgICB0WSA9IHAueSAtIHhmLnBvc2l0aW9uLnk7XG4gICAgcExvY2FsWCA9IHRYICogdE1hdC5jb2wxLnggKyB0WSAqIHRNYXQuY29sMS55O1xuICAgIHBMb2NhbFkgPSB0WCAqIHRNYXQuY29sMi54ICsgdFkgKiB0TWF0LmNvbDIueTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgdFZlYyA9IHRoaXMubV92ZXJ0aWNlc1tpXTtcbiAgICAgIHRYID0gcExvY2FsWCAtIHRWZWMueDtcbiAgICAgIHRZID0gcExvY2FsWSAtIHRWZWMueTtcbiAgICAgIHRWZWMgPSB0aGlzLm1fbm9ybWFsc1tpXTtcbiAgICAgIGRvdCA9IHRWZWMueCAqIHRYICsgdFZlYy55ICogdFk7XG4gICAgICBpZiAoZG90ID4gMC4wKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlJheUNhc3QgPSBmdW5jdGlvbihvdXRwdXQsIGlucHV0LCB0cmFuc2Zvcm0pIHtcbiAgICB2YXIgZFgsIGRZLCBkZW5vbWluYXRvciwgaSwgaW5kZXgsIGxvd2VyLCBudW1lcmF0b3IsIHAxWCwgcDFZLCBwMlgsIHAyWSwgdE1hdCwgdFZlYywgdFgsIHRZLCB1cHBlcjtcbiAgICBsb3dlciA9IDAuMDtcbiAgICB1cHBlciA9IGlucHV0Lm1heEZyYWN0aW9uO1xuICAgIHRYID0gMDtcbiAgICB0WSA9IDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHRYID0gaW5wdXQucDEueCAtIHRyYW5zZm9ybS5wb3NpdGlvbi54O1xuICAgIHRZID0gaW5wdXQucDEueSAtIHRyYW5zZm9ybS5wb3NpdGlvbi55O1xuICAgIHRNYXQgPSB0cmFuc2Zvcm0uUjtcbiAgICBwMVggPSB0WCAqIHRNYXQuY29sMS54ICsgdFkgKiB0TWF0LmNvbDEueTtcbiAgICBwMVkgPSB0WCAqIHRNYXQuY29sMi54ICsgdFkgKiB0TWF0LmNvbDIueTtcbiAgICB0WCA9IGlucHV0LnAyLnggLSB0cmFuc2Zvcm0ucG9zaXRpb24ueDtcbiAgICB0WSA9IGlucHV0LnAyLnkgLSB0cmFuc2Zvcm0ucG9zaXRpb24ueTtcbiAgICB0TWF0ID0gdHJhbnNmb3JtLlI7XG4gICAgcDJYID0gdFggKiB0TWF0LmNvbDEueCArIHRZICogdE1hdC5jb2wxLnk7XG4gICAgcDJZID0gdFggKiB0TWF0LmNvbDIueCArIHRZICogdE1hdC5jb2wyLnk7XG4gICAgZFggPSBwMlggLSBwMVg7XG4gICAgZFkgPSBwMlkgLSBwMVk7XG4gICAgaW5kZXggPSBwYXJzZUludCgtMS4pO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX3ZlcnRleENvdW50KSB7XG4gICAgICB0VmVjID0gdGhpcy5tX3ZlcnRpY2VzW2ldO1xuICAgICAgdFggPSB0VmVjLnggLSBwMVg7XG4gICAgICB0WSA9IHRWZWMueSAtIHAxWTtcbiAgICAgIHRWZWMgPSB0aGlzLm1fbm9ybWFsc1tpXTtcbiAgICAgIG51bWVyYXRvciA9IHRWZWMueCAqIHRYICsgdFZlYy55ICogdFk7XG4gICAgICBkZW5vbWluYXRvciA9IHRWZWMueCAqIGRYICsgdFZlYy55ICogZFk7XG4gICAgICBpZiAoZGVub21pbmF0b3IgPT09IDAuMCkge1xuICAgICAgICBpZiAobnVtZXJhdG9yIDwgMC4wKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVub21pbmF0b3IgPCAwLjAgJiYgbnVtZXJhdG9yIDwgbG93ZXIgKiBkZW5vbWluYXRvcikge1xuICAgICAgICAgIGxvd2VyID0gbnVtZXJhdG9yIC8gZGVub21pbmF0b3I7XG4gICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChkZW5vbWluYXRvciA+IDAuMCAmJiBudW1lcmF0b3IgPCB1cHBlciAqIGRlbm9taW5hdG9yKSB7XG4gICAgICAgICAgICB1cHBlciA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHVwcGVyIDwgbG93ZXIgLSBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgIG91dHB1dC5mcmFjdGlvbiA9IGxvd2VyO1xuICAgICAgdE1hdCA9IHRyYW5zZm9ybS5SO1xuICAgICAgdFZlYyA9IHRoaXMubV9ub3JtYWxzW2luZGV4XTtcbiAgICAgIG91dHB1dC5ub3JtYWwueCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICBvdXRwdXQubm9ybWFsLnkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuQ29tcHV0ZUFBQkIgPSBmdW5jdGlvbihhYWJiLCB4Zikge1xuICAgIHZhciBpLCBsb3dlclgsIGxvd2VyWSwgdE1hdCwgdFZlYywgdXBwZXJYLCB1cHBlclksIHZYLCB2WTtcbiAgICB0TWF0ID0geGYuUjtcbiAgICB0VmVjID0gdGhpcy5tX3ZlcnRpY2VzWzBdO1xuICAgIGxvd2VyWCA9IHhmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgbG93ZXJZID0geGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICB1cHBlclggPSBsb3dlclg7XG4gICAgdXBwZXJZID0gbG93ZXJZO1xuICAgIGkgPSAxO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX3ZlcnRleENvdW50KSB7XG4gICAgICB0VmVjID0gdGhpcy5tX3ZlcnRpY2VzW2ldO1xuICAgICAgdlggPSB4Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgdlkgPSB4Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgbG93ZXJYID0gKGxvd2VyWCA8IHZYID8gbG93ZXJYIDogdlgpO1xuICAgICAgbG93ZXJZID0gKGxvd2VyWSA8IHZZID8gbG93ZXJZIDogdlkpO1xuICAgICAgdXBwZXJYID0gKHVwcGVyWCA+IHZYID8gdXBwZXJYIDogdlgpO1xuICAgICAgdXBwZXJZID0gKHVwcGVyWSA+IHZZID8gdXBwZXJZIDogdlkpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBhYWJiLmxvd2VyQm91bmQueCA9IGxvd2VyWCAtIHRoaXMubV9yYWRpdXM7XG4gICAgYWFiYi5sb3dlckJvdW5kLnkgPSBsb3dlclkgLSB0aGlzLm1fcmFkaXVzO1xuICAgIGFhYmIudXBwZXJCb3VuZC54ID0gdXBwZXJYICsgdGhpcy5tX3JhZGl1cztcbiAgICBhYWJiLnVwcGVyQm91bmQueSA9IHVwcGVyWSArIHRoaXMubV9yYWRpdXM7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLkNvbXB1dGVNYXNzID0gZnVuY3Rpb24obWFzc0RhdGEsIGRlbnNpdHkpIHtcbiAgICB2YXIgRCwgSSwgYXJlYSwgY2VudGVyWCwgY2VudGVyWSwgZTFYLCBlMVksIGUyWCwgZTJZLCBleDEsIGV4MiwgZXkxLCBleTIsIGksIGludHgyLCBpbnR5Miwga19pbnYzLCBwMVgsIHAxWSwgcDIsIHAzLCBweCwgcHksIHRyaWFuZ2xlQXJlYTtcbiAgICBpZiAoZGVuc2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZW5zaXR5ID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV92ZXJ0ZXhDb3VudCA9PT0gMikge1xuICAgICAgbWFzc0RhdGEuY2VudGVyLnggPSAwLjUgKiAodGhpcy5tX3ZlcnRpY2VzWzBdLnggKyB0aGlzLm1fdmVydGljZXNbMV0ueCk7XG4gICAgICBtYXNzRGF0YS5jZW50ZXIueSA9IDAuNSAqICh0aGlzLm1fdmVydGljZXNbMF0ueSArIHRoaXMubV92ZXJ0aWNlc1sxXS55KTtcbiAgICAgIG1hc3NEYXRhLm1hc3MgPSAwLjA7XG4gICAgICBtYXNzRGF0YS5JID0gMC4wO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjZW50ZXJYID0gMC4wO1xuICAgIGNlbnRlclkgPSAwLjA7XG4gICAgYXJlYSA9IDAuMDtcbiAgICBJID0gMC4wO1xuICAgIHAxWCA9IDAuMDtcbiAgICBwMVkgPSAwLjA7XG4gICAga19pbnYzID0gMS4wIC8gMy4wO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX3ZlcnRleENvdW50KSB7XG4gICAgICBwMiA9IHRoaXMubV92ZXJ0aWNlc1tpXTtcbiAgICAgIHAzID0gKGkgKyAxIDwgdGhpcy5tX3ZlcnRleENvdW50ID8gdGhpcy5tX3ZlcnRpY2VzW3BhcnNlSW50KGkgKyAxKV0gOiB0aGlzLm1fdmVydGljZXNbMF0pO1xuICAgICAgZTFYID0gcDIueCAtIHAxWDtcbiAgICAgIGUxWSA9IHAyLnkgLSBwMVk7XG4gICAgICBlMlggPSBwMy54IC0gcDFYO1xuICAgICAgZTJZID0gcDMueSAtIHAxWTtcbiAgICAgIEQgPSBlMVggKiBlMlkgLSBlMVkgKiBlMlg7XG4gICAgICB0cmlhbmdsZUFyZWEgPSAwLjUgKiBEO1xuICAgICAgYXJlYSArPSB0cmlhbmdsZUFyZWE7XG4gICAgICBjZW50ZXJYICs9IHRyaWFuZ2xlQXJlYSAqIGtfaW52MyAqIChwMVggKyBwMi54ICsgcDMueCk7XG4gICAgICBjZW50ZXJZICs9IHRyaWFuZ2xlQXJlYSAqIGtfaW52MyAqIChwMVkgKyBwMi55ICsgcDMueSk7XG4gICAgICBweCA9IHAxWDtcbiAgICAgIHB5ID0gcDFZO1xuICAgICAgZXgxID0gZTFYO1xuICAgICAgZXkxID0gZTFZO1xuICAgICAgZXgyID0gZTJYO1xuICAgICAgZXkyID0gZTJZO1xuICAgICAgaW50eDIgPSBrX2ludjMgKiAoMC4yNSAqIChleDEgKiBleDEgKyBleDIgKiBleDEgKyBleDIgKiBleDIpICsgKHB4ICogZXgxICsgcHggKiBleDIpKSArIDAuNSAqIHB4ICogcHg7XG4gICAgICBpbnR5MiA9IGtfaW52MyAqICgwLjI1ICogKGV5MSAqIGV5MSArIGV5MiAqIGV5MSArIGV5MiAqIGV5MikgKyAocHkgKiBleTEgKyBweSAqIGV5MikpICsgMC41ICogcHkgKiBweTtcbiAgICAgIEkgKz0gRCAqIChpbnR4MiArIGludHkyKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgbWFzc0RhdGEubWFzcyA9IGRlbnNpdHkgKiBhcmVhO1xuICAgIGNlbnRlclggKj0gMS4wIC8gYXJlYTtcbiAgICBjZW50ZXJZICo9IDEuMCAvIGFyZWE7XG4gICAgbWFzc0RhdGEuY2VudGVyLlNldChjZW50ZXJYLCBjZW50ZXJZKTtcbiAgICBtYXNzRGF0YS5JID0gZGVuc2l0eSAqIEk7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLkNvbXB1dGVTdWJtZXJnZWRBcmVhID0gZnVuY3Rpb24obm9ybWFsLCBvZmZzZXQsIHhmLCBjKSB7XG4gICAgdmFyIGFyZWEsIGNlbnRlciwgZGVwdGhzLCBkaXZlQ291bnQsIGksIGludG9JbmRleCwgaW50b0luZGV4MiwgaW50b0xhbWRkYSwgaW50b1ZlYywgaXNTdWJtZXJnZWQsIGxhc3RTdWJtZXJnZWQsIG1kLCBub3JtYWxMLCBvZmZzZXRMLCBvdXRvSW5kZXgsIG91dG9JbmRleDIsIG91dG9MYW1kZGEsIG91dG9WZWMsIHAyLCBwMywgdHJpYW5nbGVBcmVhO1xuICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgbm9ybWFsTCA9IGIyTWF0aC5NdWxUTVYoeGYuUiwgbm9ybWFsKTtcbiAgICBvZmZzZXRMID0gb2Zmc2V0IC0gYjJNYXRoLkRvdChub3JtYWwsIHhmLnBvc2l0aW9uKTtcbiAgICBkZXB0aHMgPSBuZXcgVmVjdG9yKCk7XG4gICAgZGl2ZUNvdW50ID0gMDtcbiAgICBpbnRvSW5kZXggPSBwYXJzZUludCgtMS4pO1xuICAgIG91dG9JbmRleCA9IHBhcnNlSW50KC0xLik7XG4gICAgbGFzdFN1Ym1lcmdlZCA9IGZhbHNlO1xuICAgIGkgPSAwO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX3ZlcnRleENvdW50KSB7XG4gICAgICBkZXB0aHNbaV0gPSBiMk1hdGguRG90KG5vcm1hbEwsIHRoaXMubV92ZXJ0aWNlc1tpXSkgLSBvZmZzZXRMO1xuICAgICAgaXNTdWJtZXJnZWQgPSBkZXB0aHNbaV0gPCAoLU51bWJlci5NSU5fVkFMVUUpO1xuICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgIGlmIChpc1N1Ym1lcmdlZCkge1xuICAgICAgICAgIGlmICghbGFzdFN1Ym1lcmdlZCkge1xuICAgICAgICAgICAgaW50b0luZGV4ID0gaSAtIDE7XG4gICAgICAgICAgICBkaXZlQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGxhc3RTdWJtZXJnZWQpIHtcbiAgICAgICAgICAgIG91dG9JbmRleCA9IGkgLSAxO1xuICAgICAgICAgICAgZGl2ZUNvdW50Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsYXN0U3VibWVyZ2VkID0gaXNTdWJtZXJnZWQ7XG4gICAgICArK2k7XG4gICAgfVxuICAgIHN3aXRjaCAoZGl2ZUNvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGlmIChsYXN0U3VibWVyZ2VkKSB7XG4gICAgICAgICAgbWQgPSBuZXcgYjJNYXNzRGF0YSgpO1xuICAgICAgICAgIHRoaXMuQ29tcHV0ZU1hc3MobWQsIDEpO1xuICAgICAgICAgIGMuU2V0VihiMk1hdGguTXVsWCh4ZiwgbWQuY2VudGVyKSk7XG4gICAgICAgICAgcmV0dXJuIG1kLm1hc3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGlmIChpbnRvSW5kZXggPT09ICgtMSkpIHtcbiAgICAgICAgICBpbnRvSW5kZXggPSB0aGlzLm1fdmVydGV4Q291bnQgLSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dG9JbmRleCA9IHRoaXMubV92ZXJ0ZXhDb3VudCAtIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW50b0luZGV4MiA9IHBhcnNlSW50KChpbnRvSW5kZXggKyAxKSAlIHRoaXMubV92ZXJ0ZXhDb3VudCk7XG4gICAgb3V0b0luZGV4MiA9IHBhcnNlSW50KChvdXRvSW5kZXggKyAxKSAlIHRoaXMubV92ZXJ0ZXhDb3VudCk7XG4gICAgaW50b0xhbWRkYSA9ICgwIC0gZGVwdGhzW2ludG9JbmRleF0pIC8gKGRlcHRoc1tpbnRvSW5kZXgyXSAtIGRlcHRoc1tpbnRvSW5kZXhdKTtcbiAgICBvdXRvTGFtZGRhID0gKDAgLSBkZXB0aHNbb3V0b0luZGV4XSkgLyAoZGVwdGhzW291dG9JbmRleDJdIC0gZGVwdGhzW291dG9JbmRleF0pO1xuICAgIGludG9WZWMgPSBuZXcgYjJWZWMyKHRoaXMubV92ZXJ0aWNlc1tpbnRvSW5kZXhdLnggKiAoMSAtIGludG9MYW1kZGEpICsgdGhpcy5tX3ZlcnRpY2VzW2ludG9JbmRleDJdLnggKiBpbnRvTGFtZGRhLCB0aGlzLm1fdmVydGljZXNbaW50b0luZGV4XS55ICogKDEgLSBpbnRvTGFtZGRhKSArIHRoaXMubV92ZXJ0aWNlc1tpbnRvSW5kZXgyXS55ICogaW50b0xhbWRkYSk7XG4gICAgb3V0b1ZlYyA9IG5ldyBiMlZlYzIodGhpcy5tX3ZlcnRpY2VzW291dG9JbmRleF0ueCAqICgxIC0gb3V0b0xhbWRkYSkgKyB0aGlzLm1fdmVydGljZXNbb3V0b0luZGV4Ml0ueCAqIG91dG9MYW1kZGEsIHRoaXMubV92ZXJ0aWNlc1tvdXRvSW5kZXhdLnkgKiAoMSAtIG91dG9MYW1kZGEpICsgdGhpcy5tX3ZlcnRpY2VzW291dG9JbmRleDJdLnkgKiBvdXRvTGFtZGRhKTtcbiAgICBhcmVhID0gMDtcbiAgICBjZW50ZXIgPSBuZXcgYjJWZWMyKCk7XG4gICAgcDIgPSB0aGlzLm1fdmVydGljZXNbaW50b0luZGV4Ml07XG4gICAgcDMgPSB2b2lkIDA7XG4gICAgaSA9IGludG9JbmRleDI7XG4gICAgd2hpbGUgKGkgIT09IG91dG9JbmRleDIpIHtcbiAgICAgIGkgPSAoaSArIDEpICUgdGhpcy5tX3ZlcnRleENvdW50O1xuICAgICAgaWYgKGkgPT09IG91dG9JbmRleDIpIHtcbiAgICAgICAgcDMgPSBvdXRvVmVjO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcDMgPSB0aGlzLm1fdmVydGljZXNbaV07XG4gICAgICB9XG4gICAgICB0cmlhbmdsZUFyZWEgPSAwLjUgKiAoKHAyLnggLSBpbnRvVmVjLngpICogKHAzLnkgLSBpbnRvVmVjLnkpIC0gKHAyLnkgLSBpbnRvVmVjLnkpICogKHAzLnggLSBpbnRvVmVjLngpKTtcbiAgICAgIGFyZWEgKz0gdHJpYW5nbGVBcmVhO1xuICAgICAgY2VudGVyLnggKz0gdHJpYW5nbGVBcmVhICogKGludG9WZWMueCArIHAyLnggKyBwMy54KSAvIDM7XG4gICAgICBjZW50ZXIueSArPSB0cmlhbmdsZUFyZWEgKiAoaW50b1ZlYy55ICsgcDIueSArIHAzLnkpIC8gMztcbiAgICAgIHAyID0gcDM7XG4gICAgfVxuICAgIGNlbnRlci5NdWx0aXBseSgxIC8gYXJlYSk7XG4gICAgYy5TZXRWKGIyTWF0aC5NdWxYKHhmLCBjZW50ZXIpKTtcbiAgICByZXR1cm4gYXJlYTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuR2V0VmVydGV4Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3ZlcnRleENvdW50O1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5HZXRWZXJ0aWNlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdmVydGljZXM7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLkdldE5vcm1hbHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX25vcm1hbHM7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLkdldFN1cHBvcnQgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGJlc3RJbmRleCwgYmVzdFZhbHVlLCBpLCB2YWx1ZTtcbiAgICBiZXN0SW5kZXggPSAwO1xuICAgIGJlc3RWYWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1swXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzWzBdLnkgKiBkLnk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fdmVydGV4Q291bnQpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tX3ZlcnRpY2VzW2ldLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbaV0ueSAqIGQueTtcbiAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICBiZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcmV0dXJuIGJlc3RJbmRleDtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuR2V0U3VwcG9ydFZlcnRleCA9IGZ1bmN0aW9uKGQpIHtcbiAgICB2YXIgYmVzdEluZGV4LCBiZXN0VmFsdWUsIGksIHZhbHVlO1xuICAgIGJlc3RJbmRleCA9IDA7XG4gICAgYmVzdFZhbHVlID0gdGhpcy5tX3ZlcnRpY2VzWzBdLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbMF0ueSAqIGQueTtcbiAgICBpID0gMTtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgdmFsdWUgPSB0aGlzLm1fdmVydGljZXNbaV0ueCAqIGQueCArIHRoaXMubV92ZXJ0aWNlc1tpXS55ICogZC55O1xuICAgICAgaWYgKHZhbHVlID4gYmVzdFZhbHVlKSB7XG4gICAgICAgIGJlc3RJbmRleCA9IGk7XG4gICAgICAgIGJlc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgKytpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tX3ZlcnRpY2VzW2Jlc3RJbmRleF07XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlZhbGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5SZXNlcnZlID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICB2YXIgaTtcbiAgICBpZiAoY291bnQgPT09IHZvaWQgMCkge1xuICAgICAgY291bnQgPSAwO1xuICAgIH1cbiAgICBpID0gcGFyc2VJbnQodGhpcy5tX3ZlcnRpY2VzLmxlbmd0aCk7XG4gICAgd2hpbGUgKGkgPCBjb3VudCkge1xuICAgICAgdGhpcy5tX3ZlcnRpY2VzW2ldID0gbmV3IGIyVmVjMigpO1xuICAgICAgdGhpcy5tX25vcm1hbHNbaV0gPSBuZXcgYjJWZWMyKCk7XG4gICAgICBpKys7XG4gICAgfVxuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLkNvbXB1dGVDZW50cm9pZCA9IGZ1bmN0aW9uKHZzLCBjb3VudCkge1xuICAgIHZhciBELCBhcmVhLCBjLCBlMVgsIGUxWSwgZTJYLCBlMlksIGksIGludjMsIHAxWCwgcDFZLCBwMiwgcDMsIHRyaWFuZ2xlQXJlYTtcbiAgICBpZiAoY291bnQgPT09IHZvaWQgMCkge1xuICAgICAgY291bnQgPSAwO1xuICAgIH1cbiAgICBjID0gbmV3IGIyVmVjMigpO1xuICAgIGFyZWEgPSAwLjA7XG4gICAgcDFYID0gMC4wO1xuICAgIHAxWSA9IDAuMDtcbiAgICBpbnYzID0gMS4wIC8gMy4wO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY291bnQpIHtcbiAgICAgIHAyID0gdnNbaV07XG4gICAgICBwMyA9IChpICsgMSA8IGNvdW50ID8gdnNbcGFyc2VJbnQoaSArIDEpXSA6IHZzWzBdKTtcbiAgICAgIGUxWCA9IHAyLnggLSBwMVg7XG4gICAgICBlMVkgPSBwMi55IC0gcDFZO1xuICAgICAgZTJYID0gcDMueCAtIHAxWDtcbiAgICAgIGUyWSA9IHAzLnkgLSBwMVk7XG4gICAgICBEID0gZTFYICogZTJZIC0gZTFZICogZTJYO1xuICAgICAgdHJpYW5nbGVBcmVhID0gMC41ICogRDtcbiAgICAgIGFyZWEgKz0gdHJpYW5nbGVBcmVhO1xuICAgICAgYy54ICs9IHRyaWFuZ2xlQXJlYSAqIGludjMgKiAocDFYICsgcDIueCArIHAzLngpO1xuICAgICAgYy55ICs9IHRyaWFuZ2xlQXJlYSAqIGludjMgKiAocDFZICsgcDIueSArIHAzLnkpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBjLnggKj0gMS4wIC8gYXJlYTtcbiAgICBjLnkgKj0gMS4wIC8gYXJlYTtcbiAgICByZXR1cm4gYztcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5Db21wdXRlT0JCID0gZnVuY3Rpb24ob2JiLCB2cywgY291bnQpIHtcbiAgICB2YXIgYXJlYSwgY2VudGVyWCwgY2VudGVyWSwgZFgsIGRZLCBpLCBqLCBsZW5ndGgsIGxvd2VyWCwgbG93ZXJZLCBtaW5BcmVhLCBwLCByWCwgclksIHJvb3QsIHRNYXQsIHVwcGVyWCwgdXBwZXJZLCB1eFgsIHV4WSwgdXlYLCB1eVk7XG4gICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIGNvdW50ID0gMDtcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgcCA9IG5ldyBBcnJheShjb3VudCArIDEpO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY291bnQpIHtcbiAgICAgIHBbaV0gPSB2c1tpXTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgcFtjb3VudF0gPSBwWzBdO1xuICAgIG1pbkFyZWEgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGkgPSAxO1xuICAgIHdoaWxlIChpIDw9IGNvdW50KSB7XG4gICAgICByb290ID0gcFtwYXJzZUludChpIC0gMSldO1xuICAgICAgdXhYID0gcFtpXS54IC0gcm9vdC54O1xuICAgICAgdXhZID0gcFtpXS55IC0gcm9vdC55O1xuICAgICAgbGVuZ3RoID0gTWF0aC5zcXJ0KHV4WCAqIHV4WCArIHV4WSAqIHV4WSk7XG4gICAgICB1eFggLz0gbGVuZ3RoO1xuICAgICAgdXhZIC89IGxlbmd0aDtcbiAgICAgIHV5WCA9IC11eFk7XG4gICAgICB1eVkgPSB1eFg7XG4gICAgICBsb3dlclggPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgbG93ZXJZID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgIHVwcGVyWCA9IC1OdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgdXBwZXJZID0gLU51bWJlci5NQVhfVkFMVUU7XG4gICAgICBqID0gMDtcbiAgICAgIHdoaWxlIChqIDwgY291bnQpIHtcbiAgICAgICAgZFggPSBwW2pdLnggLSByb290Lng7XG4gICAgICAgIGRZID0gcFtqXS55IC0gcm9vdC55O1xuICAgICAgICByWCA9IHV4WCAqIGRYICsgdXhZICogZFk7XG4gICAgICAgIHJZID0gdXlYICogZFggKyB1eVkgKiBkWTtcbiAgICAgICAgaWYgKHJYIDwgbG93ZXJYKSB7XG4gICAgICAgICAgbG93ZXJYID0gclg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJZIDwgbG93ZXJZKSB7XG4gICAgICAgICAgbG93ZXJZID0gclk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJYID4gdXBwZXJYKSB7XG4gICAgICAgICAgdXBwZXJYID0gclg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJZID4gdXBwZXJZKSB7XG4gICAgICAgICAgdXBwZXJZID0gclk7XG4gICAgICAgIH1cbiAgICAgICAgKytqO1xuICAgICAgfVxuICAgICAgYXJlYSA9ICh1cHBlclggLSBsb3dlclgpICogKHVwcGVyWSAtIGxvd2VyWSk7XG4gICAgICBpZiAoYXJlYSA8IDAuOTUgKiBtaW5BcmVhKSB7XG4gICAgICAgIG1pbkFyZWEgPSBhcmVhO1xuICAgICAgICBvYmIuUi5jb2wxLnggPSB1eFg7XG4gICAgICAgIG9iYi5SLmNvbDEueSA9IHV4WTtcbiAgICAgICAgb2JiLlIuY29sMi54ID0gdXlYO1xuICAgICAgICBvYmIuUi5jb2wyLnkgPSB1eVk7XG4gICAgICAgIGNlbnRlclggPSAwLjUgKiAobG93ZXJYICsgdXBwZXJYKTtcbiAgICAgICAgY2VudGVyWSA9IDAuNSAqIChsb3dlclkgKyB1cHBlclkpO1xuICAgICAgICB0TWF0ID0gb2JiLlI7XG4gICAgICAgIG9iYi5jZW50ZXIueCA9IHJvb3QueCArICh0TWF0LmNvbDEueCAqIGNlbnRlclggKyB0TWF0LmNvbDIueCAqIGNlbnRlclkpO1xuICAgICAgICBvYmIuY2VudGVyLnkgPSByb290LnkgKyAodE1hdC5jb2wxLnkgKiBjZW50ZXJYICsgdE1hdC5jb2wyLnkgKiBjZW50ZXJZKTtcbiAgICAgICAgb2JiLmV4dGVudHMueCA9IDAuNSAqICh1cHBlclggLSBsb3dlclgpO1xuICAgICAgICBvYmIuZXh0ZW50cy55ID0gMC41ICogKHVwcGVyWSAtIGxvd2VyWSk7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMlBvbHlnb25TaGFwZTtcblxufSkoYjJTaGFwZSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUG9seWdvblNoYXBlLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkRpc3RhbmNlLCBiMkRpc3RhbmNlSW5wdXQsIGIyRGlzdGFuY2VPdXRwdXQsIGIyRGlzdGFuY2VQcm94eSwgYjJTZXR0aW5ncywgYjJTaW1wbGV4Q2FjaGU7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5iMlNpbXBsZXhDYWNoZSA9IEJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXhDYWNoZTtcblxuYjJEaXN0YW5jZSA9IEJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlO1xuXG5iMkRpc3RhbmNlT3V0cHV0ID0gQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VPdXRwdXQ7XG5cbmIyRGlzdGFuY2VJbnB1dCA9IEJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlSW5wdXQ7XG5cbmIyRGlzdGFuY2VQcm94eSA9IEJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlUHJveHk7XG5cbkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJTaGFwZSgpIHt9XG5cbiAgYjJTaGFwZS5lX3Vua25vd25TaGFwZSA9IHBhcnNlSW50KC0xLik7XG5cbiAgYjJTaGFwZS5lX2NpcmNsZVNoYXBlID0gMDtcblxuICBiMlNoYXBlLmVfcG9seWdvblNoYXBlID0gMTtcblxuICBiMlNoYXBlLmVfZWRnZVNoYXBlID0gMjtcblxuICBiMlNoYXBlLmVfc2hhcGVUeXBlQ291bnQgPSAzO1xuXG4gIGIyU2hhcGUuZV9oaXRDb2xsaWRlID0gMTtcblxuICBiMlNoYXBlLmVfbWlzc0NvbGxpZGUgPSAwO1xuXG4gIGIyU2hhcGUuZV9zdGFydHNJbnNpZGVDb2xsaWRlID0gcGFyc2VJbnQoLTEuKTtcblxuICBiMlNoYXBlLnByb3RvdHlwZS5tX3R5cGUgPSBiMlNoYXBlLmVfdW5rbm93blNoYXBlO1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLm1fcmFkaXVzID0gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wO1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBiMlNoYXBlLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHRoaXMubV9yYWRpdXMgPSBvdGhlci5tX3JhZGl1cztcbiAgfTtcblxuICBiMlNoYXBlLnByb3RvdHlwZS5HZXRUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV90eXBlO1xuICB9O1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLlRlc3RQb2ludCA9IGZ1bmN0aW9uKHhmLCBwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLlJheUNhc3QgPSBmdW5jdGlvbihvdXRwdXQsIGlucHV0LCB0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgYjJTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZUFBQkIgPSBmdW5jdGlvbihhYWJiLCB4Zikge307XG5cbiAgYjJTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZU1hc3MgPSBmdW5jdGlvbihtYXNzRGF0YSwgZGVuc2l0eSkge1xuICAgIGlmIChkZW5zaXR5ID09PSB2b2lkIDApIHtcbiAgICAgIGRlbnNpdHkgPSAwO1xuICAgIH1cbiAgfTtcblxuICBiMlNoYXBlLnByb3RvdHlwZS5Db21wdXRlU3VibWVyZ2VkQXJlYSA9IGZ1bmN0aW9uKG5vcm1hbCwgb2Zmc2V0LCB4ZiwgYykge1xuICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH07XG5cbiAgYjJTaGFwZS5UZXN0T3ZlcmxhcCA9IGZ1bmN0aW9uKHNoYXBlMSwgdHJhbnNmb3JtMSwgc2hhcGUyLCB0cmFuc2Zvcm0yKSB7XG4gICAgdmFyIGlucHV0LCBvdXRwdXQsIHNpbXBsZXhDYWNoZTtcbiAgICBpbnB1dCA9IG5ldyBiMkRpc3RhbmNlSW5wdXQoKTtcbiAgICBpbnB1dC5wcm94eUEgPSBuZXcgYjJEaXN0YW5jZVByb3h5KCk7XG4gICAgaW5wdXQucHJveHlBLlNldChzaGFwZTEpO1xuICAgIGlucHV0LnByb3h5QiA9IG5ldyBiMkRpc3RhbmNlUHJveHkoKTtcbiAgICBpbnB1dC5wcm94eUIuU2V0KHNoYXBlMik7XG4gICAgaW5wdXQudHJhbnNmb3JtQSA9IHRyYW5zZm9ybTE7XG4gICAgaW5wdXQudHJhbnNmb3JtQiA9IHRyYW5zZm9ybTI7XG4gICAgaW5wdXQudXNlUmFkaWkgPSB0cnVlO1xuICAgIHNpbXBsZXhDYWNoZSA9IG5ldyBiMlNpbXBsZXhDYWNoZSgpO1xuICAgIHNpbXBsZXhDYWNoZS5jb3VudCA9IDA7XG4gICAgb3V0cHV0ID0gbmV3IGIyRGlzdGFuY2VPdXRwdXQoKTtcbiAgICBiMkRpc3RhbmNlLkRpc3RhbmNlKG91dHB1dCwgc2ltcGxleENhY2hlLCBpbnB1dCk7XG4gICAgcmV0dXJuIG91dHB1dC5kaXN0YW5jZSA8IDEwLjAgKiBOdW1iZXIuTUlOX1ZBTFVFO1xuICB9O1xuXG4gIHJldHVybiBiMlNoYXBlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlNoYXBlLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMk1hdGgsIHBhcnNlVUludDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbnBhcnNlVUludCA9IGZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIE1hdGguYWJzKHBhcnNlSW50KHYpKTtcbn07XG5cbkJveDJELkNvbW1vbi5iMkNvbG9yID0gKGZ1bmN0aW9uKCkge1xuICBiMkNvbG9yLnByb3RvdHlwZS5fciA9IDA7XG5cbiAgYjJDb2xvci5wcm90b3R5cGUuX2cgPSAwO1xuXG4gIGIyQ29sb3IucHJvdG90eXBlLl9iID0gMDtcblxuICBmdW5jdGlvbiBiMkNvbG9yKHJyLCBnZywgYmIpIHtcbiAgICBpZiAocnIgPT09IHZvaWQgMCkge1xuICAgICAgcnIgPSAwO1xuICAgIH1cbiAgICBpZiAoZ2cgPT09IHZvaWQgMCkge1xuICAgICAgZ2cgPSAwO1xuICAgIH1cbiAgICBpZiAoYmIgPT09IHZvaWQgMCkge1xuICAgICAgYmIgPSAwO1xuICAgIH1cbiAgICB0aGlzLl9yID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChyciwgMC4wLCAxLjApKTtcbiAgICB0aGlzLl9nID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChnZywgMC4wLCAxLjApKTtcbiAgICB0aGlzLl9iID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChiYiwgMC4wLCAxLjApKTtcbiAgfVxuXG4gIGIyQ29sb3IucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKHJyLCBnZywgYmIpIHtcbiAgICBpZiAocnIgPT09IHZvaWQgMCkge1xuICAgICAgcnIgPSAwO1xuICAgIH1cbiAgICBpZiAoZ2cgPT09IHZvaWQgMCkge1xuICAgICAgZ2cgPSAwO1xuICAgIH1cbiAgICBpZiAoYmIgPT09IHZvaWQgMCkge1xuICAgICAgYmIgPSAwO1xuICAgIH1cbiAgICB0aGlzLl9yID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChyciwgMC4wLCAxLjApKTtcbiAgICB0aGlzLl9nID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChnZywgMC4wLCAxLjApKTtcbiAgICB0aGlzLl9iID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChiYiwgMC4wLCAxLjApKTtcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhiMkNvbG9yLnByb3RvdHlwZSwge1xuICAgIHI6IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3I7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbihycikge1xuICAgICAgICBpZiAocnIgPT0gbnVsbCkge1xuICAgICAgICAgIHJyID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fciA9IHBhcnNlVUludCgyNTUgKiBiMk1hdGguQ2xhbXAocnIsIDAuMCwgMS4wKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24oZ2cpIHtcbiAgICAgICAgaWYgKGdnID09IG51bGwpIHtcbiAgICAgICAgICBnZyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2cgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKGdnLCAwLjAsIDEuMCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgYjoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYjtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKGJiKSB7XG4gICAgICAgIGlmIChiYiA9PSBudWxsKSB7XG4gICAgICAgICAgYmIgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9iID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChiYiwgMC4wLCAxLjApKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fciA8PCAxNikgfCAodGhpcy5fZyA8PCA4KSB8IHRoaXMuX2I7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYjJDb2xvcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb2xvci5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5Db21tb24uYjJTZXR0aW5ncyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJTZXR0aW5ncygpIHt9XG5cbiAgYjJTZXR0aW5ncy5WRVJTSU9OID0gXCIyLjFhbHBoYVwiO1xuXG4gIGIyU2V0dGluZ3MuVVNIUlRfTUFYID0gMHgwMDAwZmZmZjtcblxuICBiMlNldHRpbmdzLmIyX3BpID0gTWF0aC5QSTtcblxuICBiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzID0gMjtcblxuICBiMlNldHRpbmdzLmIyX2FhYmJFeHRlbnNpb24gPSAwLjE7XG5cbiAgYjJTZXR0aW5ncy5iMl9hYWJiTXVsdGlwbGllciA9IDIuMDtcblxuICBiMlNldHRpbmdzLmIyX3BvbHlnb25SYWRpdXMgPSAyLjAgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7XG5cbiAgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wID0gMC4wMDU7XG5cbiAgYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcCA9IDIuMCAvIDE4MC4wICogYjJTZXR0aW5ncy5iMl9waTtcblxuICBiMlNldHRpbmdzLmIyX3RvaVNsb3AgPSA4LjAgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7XG5cbiAgYjJTZXR0aW5ncy5iMl9tYXhUT0lDb250YWN0c1BlcklzbGFuZCA9IDMyO1xuXG4gIGIyU2V0dGluZ3MuYjJfbWF4VE9JSm9pbnRzUGVySXNsYW5kID0gMzI7XG5cbiAgYjJTZXR0aW5ncy5iMl92ZWxvY2l0eVRocmVzaG9sZCA9IDEuMDtcblxuICBiMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24gPSAwLjI7XG5cbiAgYjJTZXR0aW5ncy5iMl9tYXhBbmd1bGFyQ29ycmVjdGlvbiA9IDguMCAvIDE4MC4wICogYjJTZXR0aW5ncy5iMl9waTtcblxuICBiMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uID0gMi4wO1xuXG4gIGIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb25TcXVhcmVkID0gYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvbiAqIGIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb247XG5cbiAgYjJTZXR0aW5ncy5iMl9tYXhSb3RhdGlvbiA9IDAuNSAqIGIyU2V0dGluZ3MuYjJfcGk7XG5cbiAgYjJTZXR0aW5ncy5iMl9tYXhSb3RhdGlvblNxdWFyZWQgPSBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uICogYjJTZXR0aW5ncy5iMl9tYXhSb3RhdGlvbjtcblxuICBiMlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUgPSAwLjI7XG5cbiAgYjJTZXR0aW5ncy5iMl90aW1lVG9TbGVlcCA9IDAuNTtcblxuICBiMlNldHRpbmdzLmIyX2xpbmVhclNsZWVwVG9sZXJhbmNlID0gMC4wMTtcblxuICBiMlNldHRpbmdzLmIyX2FuZ3VsYXJTbGVlcFRvbGVyYW5jZSA9IDIuMCAvIDE4MC4wICogYjJTZXR0aW5ncy5iMl9waTtcblxuICBiMlNldHRpbmdzLmIyTWl4RnJpY3Rpb24gPSBmdW5jdGlvbihmcmljdGlvbjEsIGZyaWN0aW9uMikge1xuICAgIGlmIChmcmljdGlvbjEgPT09IHZvaWQgMCkge1xuICAgICAgZnJpY3Rpb24xID0gMDtcbiAgICB9XG4gICAgaWYgKGZyaWN0aW9uMiA9PT0gdm9pZCAwKSB7XG4gICAgICBmcmljdGlvbjIgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5zcXJ0KGZyaWN0aW9uMSAqIGZyaWN0aW9uMik7XG4gIH07XG5cbiAgYjJTZXR0aW5ncy5iMk1peFJlc3RpdHV0aW9uID0gZnVuY3Rpb24ocmVzdGl0dXRpb24xLCByZXN0aXR1dGlvbjIpIHtcbiAgICB2YXIgX3JlZjtcbiAgICBpZiAocmVzdGl0dXRpb24xID09PSB2b2lkIDApIHtcbiAgICAgIHJlc3RpdHV0aW9uMSA9IDA7XG4gICAgfVxuICAgIGlmIChyZXN0aXR1dGlvbjIgPT09IHZvaWQgMCkge1xuICAgICAgcmVzdGl0dXRpb24yID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIChfcmVmID0gcmVzdGl0dXRpb24xID4gcmVzdGl0dXRpb24yKSAhPSBudWxsID8gX3JlZiA6IHtcbiAgICAgIHJlc3RpdHV0aW9uMTogcmVzdGl0dXRpb24yXG4gICAgfTtcbiAgfTtcblxuICBiMlNldHRpbmdzLmIyQXNzZXJ0ID0gZnVuY3Rpb24oYSkge1xuICAgIGlmICghYSkge1xuICAgICAgdGhyb3cgXCJBc3NlcnRpb24gRmFpbGVkXCI7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMlNldHRpbmdzO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlNldHRpbmdzLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyID0gKGZ1bmN0aW9uKCkge1xuICBiMk1hdDIyLnByb3RvdHlwZS5jb2wxID0gbnVsbDtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5jb2wyID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMk1hdDIyKCkge1xuICAgIHRoaXMuY29sMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmNvbDIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5TZXRJZGVudGl0eSgpO1xuICB9XG5cbiAgYjJNYXQyMi5Gcm9tQW5nbGUgPSBmdW5jdGlvbihhbmdsZSkge1xuICAgIHZhciBtYXQ7XG4gICAgaWYgKGFuZ2xlID09IG51bGwpIHtcbiAgICAgIGFuZ2xlID0gMDtcbiAgICB9XG4gICAgbWF0ID0gbmV3IGIyTWF0MjIoKTtcbiAgICBtYXQuU2V0KGFuZ2xlKTtcbiAgICByZXR1cm4gbWF0O1xuICB9O1xuXG4gIGIyTWF0MjIuRnJvbVZWID0gZnVuY3Rpb24oYzEsIGMyKSB7XG4gICAgdmFyIG1hdDtcbiAgICBtYXQgPSBuZXcgYjJNYXQyMigpO1xuICAgIG1hdC5TZXRWVihjMSwgYzIpO1xuICAgIHJldHVybiBtYXQ7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24oYW5nbGUpIHtcbiAgICB2YXIgYywgcztcbiAgICBpZiAoYW5nbGUgPT0gbnVsbCkge1xuICAgICAgYW5nbGUgPSAwO1xuICAgIH1cbiAgICBjID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHMgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdGhpcy5jb2wxLnggPSBjO1xuICAgIHRoaXMuY29sMi54ID0gLXM7XG4gICAgdGhpcy5jb2wxLnkgPSBzO1xuICAgIHRoaXMuY29sMi55ID0gYztcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5TZXRWViA9IGZ1bmN0aW9uKGMxLCBjMikge1xuICAgIHRoaXMuY29sMS5TZXRWKGMxKTtcbiAgICB0aGlzLmNvbDIuU2V0VihjMik7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtYXQ7XG4gICAgbWF0ID0gbmV3IGIyTWF0MjIoKTtcbiAgICBtYXQuU2V0TSh0aGlzKTtcbiAgICByZXR1cm4gbWF0O1xuICB9O1xuXG4gIGIyTWF0MjIucHJvdG90eXBlLlNldE0gPSBmdW5jdGlvbihtKSB7XG4gICAgdGhpcy5jb2wxLlNldFYobS5jb2wxKTtcbiAgICB0aGlzLmNvbDIuU2V0VihtLmNvbDIpO1xuICB9O1xuXG4gIGIyTWF0MjIucHJvdG90eXBlLkFkZE0gPSBmdW5jdGlvbihtKSB7XG4gICAgdGhpcy5jb2wxLnggKz0gbS5jb2wxLng7XG4gICAgdGhpcy5jb2wxLnkgKz0gbS5jb2wxLnk7XG4gICAgdGhpcy5jb2wyLnggKz0gbS5jb2wyLng7XG4gICAgdGhpcy5jb2wyLnkgKz0gbS5jb2wyLnk7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuU2V0SWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbDEueCA9IDEuMDtcbiAgICB0aGlzLmNvbDIueCA9IDAuMDtcbiAgICB0aGlzLmNvbDEueSA9IDAuMDtcbiAgICB0aGlzLmNvbDIueSA9IDEuMDtcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5TZXRaZXJvID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb2wxLnggPSAwLjA7XG4gICAgdGhpcy5jb2wyLnggPSAwLjA7XG4gICAgdGhpcy5jb2wxLnkgPSAwLjA7XG4gICAgdGhpcy5jb2wyLnkgPSAwLjA7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuR2V0QW5nbGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLmNvbDEueSwgdGhpcy5jb2wxLngpO1xuICB9O1xuXG4gIGIyTWF0MjIucHJvdG90eXBlLkdldEludmVyc2UgPSBmdW5jdGlvbihvdXQpIHtcbiAgICB2YXIgYSwgYiwgYywgZCwgZGV0O1xuICAgIGEgPSB0aGlzLmNvbDEueDtcbiAgICBiID0gdGhpcy5jb2wyLng7XG4gICAgYyA9IHRoaXMuY29sMS55O1xuICAgIGQgPSB0aGlzLmNvbDIueTtcbiAgICBkZXQgPSBhICogZCAtIGIgKiBjO1xuICAgIGlmIChkZXQgIT09IDAuMCkge1xuICAgICAgZGV0ID0gMS4wIC8gZGV0O1xuICAgIH1cbiAgICBvdXQuY29sMS54ID0gZGV0ICogZDtcbiAgICBvdXQuY29sMi54ID0gLWRldCAqIGI7XG4gICAgb3V0LmNvbDEueSA9IC1kZXQgKiBjO1xuICAgIG91dC5jb2wyLnkgPSBkZXQgKiBhO1xuICAgIHJldHVybiBvdXQ7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuU29sdmUgPSBmdW5jdGlvbihvdXQsIGJYLCBiWSkge1xuICAgIHZhciBhMTEsIGExMiwgYTIxLCBhMjIsIGRldDtcbiAgICBpZiAoYlggPT0gbnVsbCkge1xuICAgICAgYlggPSAwO1xuICAgIH1cbiAgICBpZiAoYlkgPT0gbnVsbCkge1xuICAgICAgYlkgPSAwO1xuICAgIH1cbiAgICBhMTEgPSB0aGlzLmNvbDEueDtcbiAgICBhMTIgPSB0aGlzLmNvbDIueDtcbiAgICBhMjEgPSB0aGlzLmNvbDEueTtcbiAgICBhMjIgPSB0aGlzLmNvbDIueTtcbiAgICBkZXQgPSBhMTEgKiBhMjIgLSBhMTIgKiBhMjE7XG4gICAgaWYgKGRldCAhPT0gMC4wKSB7XG4gICAgICBkZXQgPSAxLjAgLyBkZXQ7XG4gICAgfVxuICAgIG91dC54ID0gZGV0ICogKGEyMiAqIGJYIC0gYTEyICogYlkpO1xuICAgIG91dC55ID0gZGV0ICogKGExMSAqIGJZIC0gYTIxICogYlgpO1xuICAgIHJldHVybiBvdXQ7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuQWJzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb2wxLkFicygpO1xuICAgIHRoaXMuY29sMi5BYnMoKTtcbiAgfTtcblxuICByZXR1cm4gYjJNYXQyMjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJNYXQyMi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29tbW9uLk1hdGguYjJNYXQzMyA9IChmdW5jdGlvbigpIHtcbiAgYjJNYXQzMy5wcm90b3R5cGUuY29sMSA9IG51bGw7XG5cbiAgYjJNYXQzMy5wcm90b3R5cGUuY29sMiA9IG51bGw7XG5cbiAgYjJNYXQzMy5wcm90b3R5cGUuY29sMyA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJNYXQzMyhjMSwgYzIsIGMzKSB7XG4gICAgaWYgKGMxID09PSB2b2lkIDApIHtcbiAgICAgIGMxID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGMyID09PSB2b2lkIDApIHtcbiAgICAgIGMyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGMzID09PSB2b2lkIDApIHtcbiAgICAgIGMzID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5jb2wxID0gbmV3IGIyVmVjMygpO1xuICAgIHRoaXMuY29sMiA9IG5ldyBiMlZlYzMoKTtcbiAgICB0aGlzLmNvbDMgPSBuZXcgYjJWZWMzKCk7XG4gICAgaWYgKCFjMSAmJiAhYzIgJiYgIWMzKSB7XG4gICAgICB0aGlzLmNvbDEuU2V0WmVybygpO1xuICAgICAgdGhpcy5jb2wyLlNldFplcm8oKTtcbiAgICAgIHRoaXMuY29sMy5TZXRaZXJvKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29sMS5TZXRWKGMxKTtcbiAgICAgIHRoaXMuY29sMi5TZXRWKGMyKTtcbiAgICAgIHRoaXMuY29sMy5TZXRWKGMzKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJNYXQzMy5wcm90b3R5cGUuU2V0VlZWID0gZnVuY3Rpb24oYzEsIGMyLCBjMykge1xuICAgIHRoaXMuY29sMS5TZXRWKGMxKTtcbiAgICB0aGlzLmNvbDIuU2V0VihjMik7XG4gICAgdGhpcy5jb2wzLlNldFYoYzMpO1xuICB9O1xuXG4gIGIyTWF0MzMucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICBuZXcgYjJNYXQzMyh0aGlzLmNvbDEsIHRoaXMuY29sMiwgdGhpcy5jb2wzKTtcbiAgfTtcblxuICBiMk1hdDMzLnByb3RvdHlwZS5TZXRNID0gZnVuY3Rpb24obSkge1xuICAgIHRoaXMuY29sMS5TZXRWKG0uY29sMSk7XG4gICAgdGhpcy5jb2wyLlNldFYobS5jb2wyKTtcbiAgICB0aGlzLmNvbDMuU2V0VihtLmNvbDMpO1xuICB9O1xuXG4gIGIyTWF0MzMucHJvdG90eXBlLkFkZE0gPSBmdW5jdGlvbihtKSB7XG4gICAgdGhpcy5jb2wxLnggKz0gbS5jb2wxLng7XG4gICAgdGhpcy5jb2wxLnkgKz0gbS5jb2wxLnk7XG4gICAgdGhpcy5jb2wxLnogKz0gbS5jb2wxLno7XG4gICAgdGhpcy5jb2wyLnggKz0gbS5jb2wyLng7XG4gICAgdGhpcy5jb2wyLnkgKz0gbS5jb2wyLnk7XG4gICAgdGhpcy5jb2wyLnogKz0gbS5jb2wyLno7XG4gICAgdGhpcy5jb2wzLnggKz0gbS5jb2wzLng7XG4gICAgdGhpcy5jb2wzLnkgKz0gbS5jb2wzLnk7XG4gICAgdGhpcy5jb2wzLnogKz0gbS5jb2wzLno7XG4gIH07XG5cbiAgYjJNYXQzMy5wcm90b3R5cGUuU2V0SWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbDEueCA9IDEuMDtcbiAgICB0aGlzLmNvbDIueCA9IDAuMDtcbiAgICB0aGlzLmNvbDMueCA9IDAuMDtcbiAgICB0aGlzLmNvbDEueSA9IDAuMDtcbiAgICB0aGlzLmNvbDIueSA9IDEuMDtcbiAgICB0aGlzLmNvbDMueSA9IDAuMDtcbiAgICB0aGlzLmNvbDEueiA9IDAuMDtcbiAgICB0aGlzLmNvbDIueiA9IDAuMDtcbiAgICB0aGlzLmNvbDMueiA9IDEuMDtcbiAgfTtcblxuICBiMk1hdDMzLnByb3RvdHlwZS5TZXRaZXJvID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb2wxLnggPSAwLjA7XG4gICAgdGhpcy5jb2wyLnggPSAwLjA7XG4gICAgdGhpcy5jb2wzLnggPSAwLjA7XG4gICAgdGhpcy5jb2wxLnkgPSAwLjA7XG4gICAgdGhpcy5jb2wyLnkgPSAwLjA7XG4gICAgdGhpcy5jb2wzLnkgPSAwLjA7XG4gICAgdGhpcy5jb2wxLnogPSAwLjA7XG4gICAgdGhpcy5jb2wyLnogPSAwLjA7XG4gICAgdGhpcy5jb2wzLnogPSAwLjA7XG4gIH07XG5cbiAgYjJNYXQzMy5wcm90b3R5cGUuU29sdmUyMiA9IGZ1bmN0aW9uKG91dCwgYlgsIGJZKSB7XG4gICAgdmFyIGExMSwgYTEyLCBhMjEsIGEyMiwgZGV0O1xuICAgIGlmIChiWCA9PT0gdm9pZCAwKSB7XG4gICAgICBiWCA9IDA7XG4gICAgfVxuICAgIGlmIChiWSA9PT0gdm9pZCAwKSB7XG4gICAgICBiWSA9IDA7XG4gICAgfVxuICAgIGExMSA9IHRoaXMuY29sMS54O1xuICAgIGExMiA9IHRoaXMuY29sMi54O1xuICAgIGEyMSA9IHRoaXMuY29sMS55O1xuICAgIGEyMiA9IHRoaXMuY29sMi55O1xuICAgIGRldCA9IGExMSAqIGEyMiAtIGExMiAqIGEyMTtcbiAgICBpZiAoZGV0ICE9PSAwLjApIHtcbiAgICAgIGRldCA9IDEuMCAvIGRldDtcbiAgICB9XG4gICAgb3V0LnggPSBkZXQgKiAoYTIyICogYlggLSBhMTIgKiBiWSk7XG4gICAgb3V0LnkgPSBkZXQgKiAoYTExICogYlkgLSBhMjEgKiBiWCk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcblxuICBiMk1hdDMzLnByb3RvdHlwZS5Tb2x2ZTMzID0gZnVuY3Rpb24ob3V0LCBiWCwgYlksIGJaKSB7XG4gICAgdmFyIGExMSwgYTEyLCBhMTMsIGEyMSwgYTIyLCBhMjMsIGEzMSwgYTMyLCBhMzMsIGRldDtcbiAgICBpZiAoYlggPT09IHZvaWQgMCkge1xuICAgICAgYlggPSAwO1xuICAgIH1cbiAgICBpZiAoYlkgPT09IHZvaWQgMCkge1xuICAgICAgYlkgPSAwO1xuICAgIH1cbiAgICBpZiAoYlogPT09IHZvaWQgMCkge1xuICAgICAgYlogPSAwO1xuICAgIH1cbiAgICBhMTEgPSB0aGlzLmNvbDEueDtcbiAgICBhMjEgPSB0aGlzLmNvbDEueTtcbiAgICBhMzEgPSB0aGlzLmNvbDEuejtcbiAgICBhMTIgPSB0aGlzLmNvbDIueDtcbiAgICBhMjIgPSB0aGlzLmNvbDIueTtcbiAgICBhMzIgPSB0aGlzLmNvbDIuejtcbiAgICBhMTMgPSB0aGlzLmNvbDMueDtcbiAgICBhMjMgPSB0aGlzLmNvbDMueTtcbiAgICBhMzMgPSB0aGlzLmNvbDMuejtcbiAgICBkZXQgPSBhMTEgKiAoYTIyICogYTMzIC0gYTMyICogYTIzKSArIGEyMSAqIChhMzIgKiBhMTMgLSBhMTIgKiBhMzMpICsgYTMxICogKGExMiAqIGEyMyAtIGEyMiAqIGExMyk7XG4gICAgaWYgKGRldCAhPT0gMC4wKSB7XG4gICAgICBkZXQgPSAxLjAgLyBkZXQ7XG4gICAgfVxuICAgIG91dC54ID0gZGV0ICogKGJYICogKGEyMiAqIGEzMyAtIGEzMiAqIGEyMykgKyBiWSAqIChhMzIgKiBhMTMgLSBhMTIgKiBhMzMpICsgYlogKiAoYTEyICogYTIzIC0gYTIyICogYTEzKSk7XG4gICAgb3V0LnkgPSBkZXQgKiAoYTExICogKGJZICogYTMzIC0gYlogKiBhMjMpICsgYTIxICogKGJaICogYTEzIC0gYlggKiBhMzMpICsgYTMxICogKGJYICogYTIzIC0gYlkgKiBhMTMpKTtcbiAgICBvdXQueiA9IGRldCAqIChhMTEgKiAoYTIyICogYlogLSBhMzIgKiBiWSkgKyBhMjEgKiAoYTMyICogYlggLSBhMTIgKiBiWikgKyBhMzEgKiAoYTEyICogYlkgLSBhMjIgKiBiWCkpO1xuICAgIHJldHVybiBvdXQ7XG4gIH07XG5cbiAgcmV0dXJuIGIyTWF0MzM7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyTWF0MzMuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyTWF0MjIsIGIyTWF0aCwgYjJUcmFuc2Zvcm0sIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMk1hdDIyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMjtcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMlRyYW5zZm9ybSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbW1vbi5NYXRoLmIyTWF0aCA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJNYXRoKCkge31cblxuICBiMk1hdGguSXNWYWxpZCA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gdm9pZCAwKSB7XG4gICAgICB4ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGlzRmluaXRlKHgpO1xuICB9O1xuXG4gIGIyTWF0aC5Eb3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGEueCAqIGIueCArIGEueSAqIGIueTtcbiAgfTtcblxuICBiMk1hdGguQ3Jvc3NWViA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYS54ICogYi55IC0gYS55ICogYi54O1xuICB9O1xuXG4gIGIyTWF0aC5Dcm9zc1ZGID0gZnVuY3Rpb24oYSwgcykge1xuICAgIHZhciB2O1xuICAgIGlmIChzID09PSB2b2lkIDApIHtcbiAgICAgIHMgPSAwO1xuICAgIH1cbiAgICB2ID0gbmV3IGIyVmVjMihzICogYS55LCAtcyAqIGEueCk7XG4gICAgcmV0dXJuIHY7XG4gIH07XG5cbiAgYjJNYXRoLkNyb3NzRlYgPSBmdW5jdGlvbihzLCBhKSB7XG4gICAgdmFyIHY7XG4gICAgaWYgKHMgPT09IHZvaWQgMCkge1xuICAgICAgcyA9IDA7XG4gICAgfVxuICAgIHYgPSBuZXcgYjJWZWMyKC1zICogYS55LCBzICogYS54KTtcbiAgICByZXR1cm4gdjtcbiAgfTtcblxuICBiMk1hdGguTXVsTVYgPSBmdW5jdGlvbihBLCB2KSB7XG4gICAgdmFyIHU7XG4gICAgdSA9IG5ldyBiMlZlYzIoQS5jb2wxLnggKiB2LnggKyBBLmNvbDIueCAqIHYueSwgQS5jb2wxLnkgKiB2LnggKyBBLmNvbDIueSAqIHYueSk7XG4gICAgcmV0dXJuIHU7XG4gIH07XG5cbiAgYjJNYXRoLk11bFRNViA9IGZ1bmN0aW9uKEEsIHYpIHtcbiAgICB2YXIgdTtcbiAgICB1ID0gbmV3IGIyVmVjMihiMk1hdGguRG90KHYsIEEuY29sMSksIGIyTWF0aC5Eb3QodiwgQS5jb2wyKSk7XG4gICAgcmV0dXJuIHU7XG4gIH07XG5cbiAgYjJNYXRoLk11bFggPSBmdW5jdGlvbihULCB2KSB7XG4gICAgdmFyIGE7XG4gICAgYSA9IGIyTWF0aC5NdWxNVihULlIsIHYpO1xuICAgIGEueCArPSBULnBvc2l0aW9uLng7XG4gICAgYS55ICs9IFQucG9zaXRpb24ueTtcbiAgICByZXR1cm4gYTtcbiAgfTtcblxuICBiMk1hdGguTXVsWFQgPSBmdW5jdGlvbihULCB2KSB7XG4gICAgdmFyIGEsIHRYO1xuICAgIGEgPSBiMk1hdGguU3VidHJhY3RWVih2LCBULnBvc2l0aW9uKTtcbiAgICB0WCA9IGEueCAqIFQuUi5jb2wxLnggKyBhLnkgKiBULlIuY29sMS55O1xuICAgIGEueSA9IGEueCAqIFQuUi5jb2wyLnggKyBhLnkgKiBULlIuY29sMi55O1xuICAgIGEueCA9IHRYO1xuICAgIHJldHVybiBhO1xuICB9O1xuXG4gIGIyTWF0aC5BZGRWViA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgdjtcbiAgICB2ID0gbmV3IGIyVmVjMihhLnggKyBiLngsIGEueSArIGIueSk7XG4gICAgcmV0dXJuIHY7XG4gIH07XG5cbiAgYjJNYXRoLlN1YnRyYWN0VlYgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHY7XG4gICAgdiA9IG5ldyBiMlZlYzIoYS54IC0gYi54LCBhLnkgLSBiLnkpO1xuICAgIHJldHVybiB2O1xuICB9O1xuXG4gIGIyTWF0aC5EaXN0YW5jZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgY1gsIGNZO1xuICAgIGNYID0gYS54IC0gYi54O1xuICAgIGNZID0gYS55IC0gYi55O1xuICAgIHJldHVybiBNYXRoLnNxcnQoY1ggKiBjWCArIGNZICogY1kpO1xuICB9O1xuXG4gIGIyTWF0aC5EaXN0YW5jZVNxdWFyZWQgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIGNYLCBjWTtcbiAgICBjWCA9IGEueCAtIGIueDtcbiAgICBjWSA9IGEueSAtIGIueTtcbiAgICByZXR1cm4gY1ggKiBjWCArIGNZICogY1k7XG4gIH07XG5cbiAgYjJNYXRoLk11bEZWID0gZnVuY3Rpb24ocywgYSkge1xuICAgIHZhciB2O1xuICAgIGlmIChzID09PSB2b2lkIDApIHtcbiAgICAgIHMgPSAwO1xuICAgIH1cbiAgICB2ID0gbmV3IGIyVmVjMihzICogYS54LCBzICogYS55KTtcbiAgICByZXR1cm4gdjtcbiAgfTtcblxuICBiMk1hdGguQWRkTU0gPSBmdW5jdGlvbihBLCBCKSB7XG4gICAgdmFyIEM7XG4gICAgQyA9IGIyTWF0MjIuRnJvbVZWKGIyTWF0aC5BZGRWVihBLmNvbDEsIEIuY29sMSksIGIyTWF0aC5BZGRWVihBLmNvbDIsIEIuY29sMikpO1xuICAgIHJldHVybiBDO1xuICB9O1xuXG4gIGIyTWF0aC5NdWxNTSA9IGZ1bmN0aW9uKEEsIEIpIHtcbiAgICB2YXIgQztcbiAgICBDID0gYjJNYXQyMi5Gcm9tVlYoYjJNYXRoLk11bE1WKEEsIEIuY29sMSksIGIyTWF0aC5NdWxNVihBLCBCLmNvbDIpKTtcbiAgICByZXR1cm4gQztcbiAgfTtcblxuICBiMk1hdGguTXVsVE1NID0gZnVuY3Rpb24oQSwgQikge1xuICAgIHZhciBDLCBjMSwgYzI7XG4gICAgYzEgPSBuZXcgYjJWZWMyKGIyTWF0aC5Eb3QoQS5jb2wxLCBCLmNvbDEpLCBiMk1hdGguRG90KEEuY29sMiwgQi5jb2wxKSk7XG4gICAgYzIgPSBuZXcgYjJWZWMyKGIyTWF0aC5Eb3QoQS5jb2wxLCBCLmNvbDIpLCBiMk1hdGguRG90KEEuY29sMiwgQi5jb2wyKSk7XG4gICAgQyA9IGIyTWF0MjIuRnJvbVZWKGMxLCBjMik7XG4gICAgcmV0dXJuIEM7XG4gIH07XG5cbiAgYjJNYXRoLkFicyA9IGZ1bmN0aW9uKGEpIHtcbiAgICBpZiAoYSA9PT0gdm9pZCAwKSB7XG4gICAgICBhID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIChhID4gMC4wID8gYSA6IC1hKTtcbiAgfTtcblxuICBiMk1hdGguQWJzViA9IGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgYjtcbiAgICBiID0gbmV3IGIyVmVjMihiMk1hdGguQWJzKGEueCksIGIyTWF0aC5BYnMoYS55KSk7XG4gICAgcmV0dXJuIGI7XG4gIH07XG5cbiAgYjJNYXRoLkFic00gPSBmdW5jdGlvbihBKSB7XG4gICAgdmFyIEI7XG4gICAgQiA9IGIyTWF0MjIuRnJvbVZWKGIyTWF0aC5BYnNWKEEuY29sMSksIGIyTWF0aC5BYnNWKEEuY29sMikpO1xuICAgIHJldHVybiBCO1xuICB9O1xuXG4gIGIyTWF0aC5NaW4gPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgaWYgKGEgPT09IHZvaWQgMCkge1xuICAgICAgYSA9IDA7XG4gICAgfVxuICAgIGlmIChiID09PSB2b2lkIDApIHtcbiAgICAgIGIgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gKGEgPCBiID8gYSA6IGIpO1xuICB9O1xuXG4gIGIyTWF0aC5NaW5WID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciBjO1xuICAgIGMgPSBuZXcgYjJWZWMyKGIyTWF0aC5NaW4oYS54LCBiLngpLCBiMk1hdGguTWluKGEueSwgYi55KSk7XG4gICAgcmV0dXJuIGM7XG4gIH07XG5cbiAgYjJNYXRoLk1heCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gdm9pZCAwKSB7XG4gICAgICBhID0gMDtcbiAgICB9XG4gICAgaWYgKGIgPT09IHZvaWQgMCkge1xuICAgICAgYiA9IDA7XG4gICAgfVxuICAgIHJldHVybiAoYSA+IGIgPyBhIDogYik7XG4gIH07XG5cbiAgYjJNYXRoLk1heFYgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIGM7XG4gICAgYyA9IG5ldyBiMlZlYzIoYjJNYXRoLk1heChhLngsIGIueCksIGIyTWF0aC5NYXgoYS55LCBiLnkpKTtcbiAgICByZXR1cm4gYztcbiAgfTtcblxuICBiMk1hdGguQ2xhbXAgPSBmdW5jdGlvbihhLCBsb3csIGhpZ2gpIHtcbiAgICBpZiAoYSA9PT0gdm9pZCAwKSB7XG4gICAgICBhID0gMDtcbiAgICB9XG4gICAgaWYgKGxvdyA9PT0gdm9pZCAwKSB7XG4gICAgICBsb3cgPSAwO1xuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gdm9pZCAwKSB7XG4gICAgICBoaWdoID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIChhIDwgbG93ID8gbG93IDogKGEgPiBoaWdoID8gaGlnaCA6IGEpKTtcbiAgfTtcblxuICBiMk1hdGguQ2xhbXBWID0gZnVuY3Rpb24oYSwgbG93LCBoaWdoKSB7XG4gICAgcmV0dXJuIGIyTWF0aC5NYXhWKGxvdywgYjJNYXRoLk1pblYoYSwgaGlnaCkpO1xuICB9O1xuXG4gIGIyTWF0aC5Td2FwID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciB0bXA7XG4gICAgdG1wID0gYVswXTtcbiAgICBhWzBdID0gYlswXTtcbiAgICBiWzBdID0gdG1wO1xuICB9O1xuXG4gIGIyTWF0aC5SYW5kb20gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIDIgLSAxO1xuICB9O1xuXG4gIGIyTWF0aC5SYW5kb21SYW5nZSA9IGZ1bmN0aW9uKGxvLCBoaSkge1xuICAgIHZhciByO1xuICAgIGlmIChsbyA9PT0gdm9pZCAwKSB7XG4gICAgICBsbyA9IDA7XG4gICAgfVxuICAgIGlmIChoaSA9PT0gdm9pZCAwKSB7XG4gICAgICBoaSA9IDA7XG4gICAgfVxuICAgIHIgPSBNYXRoLnJhbmRvbSgpO1xuICAgIHIgPSAoaGkgLSBsbykgKiByICsgbG87XG4gICAgcmV0dXJuIHI7XG4gIH07XG5cbiAgYjJNYXRoLk5leHRQb3dlck9mVHdvID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSB2b2lkIDApIHtcbiAgICAgIHggPSAwO1xuICAgIH1cbiAgICB4IHw9ICh4ID4+IDEpICYgMHg3RkZGRkZGRjtcbiAgICB4IHw9ICh4ID4+IDIpICYgMHgzRkZGRkZGRjtcbiAgICB4IHw9ICh4ID4+IDQpICYgMHgwRkZGRkZGRjtcbiAgICB4IHw9ICh4ID4+IDgpICYgMHgwMEZGRkZGRjtcbiAgICB4IHw9ICh4ID4+IDE2KSAmIDB4MDAwMEZGRkY7XG4gICAgcmV0dXJuIHggKyAxO1xuICB9O1xuXG4gIGIyTWF0aC5Jc1Bvd2VyT2ZUd28gPSBmdW5jdGlvbih4KSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoeCA9PT0gdm9pZCAwKSB7XG4gICAgICB4ID0gMDtcbiAgICB9XG4gICAgcmVzdWx0ID0geCA+IDAgJiYgKHggJiAoeCAtIDEpKSA9PT0gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGIyTWF0aC5iMlZlYzJfemVybyA9IG5ldyBiMlZlYzIoMC4wLCAwLjApO1xuXG4gIGIyTWF0aC5iMk1hdDIyX2lkZW50aXR5ID0gYjJNYXQyMi5Gcm9tVlYobmV3IGIyVmVjMigxLjAsIDAuMCksIG5ldyBiMlZlYzIoMC4wLCAxLjApKTtcblxuICBiMk1hdGguYjJUcmFuc2Zvcm1faWRlbnRpdHkgPSBuZXcgYjJUcmFuc2Zvcm0oYjJNYXRoLmIyVmVjMl96ZXJvLCBiMk1hdGguYjJNYXQyMl9pZGVudGl0eSk7XG5cbiAgcmV0dXJuIGIyTWF0aDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJNYXRoLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db21tb24uTWF0aC5iMlN3ZWVwID0gKGZ1bmN0aW9uKCkge1xuICBiMlN3ZWVwLnByb3RvdHlwZS5sb2NhbENlbnRlciA9IG51bGw7XG5cbiAgYjJTd2VlcC5wcm90b3R5cGUuYzAgPSBudWxsO1xuXG4gIGIyU3dlZXAucHJvdG90eXBlLmMgPSBudWxsO1xuXG4gIGIyU3dlZXAucHJvdG90eXBlLmEwID0gbnVsbDtcblxuICBiMlN3ZWVwLnByb3RvdHlwZS5hID0gbnVsbDtcblxuICBiMlN3ZWVwLnByb3RvdHlwZS50MCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJTd2VlcCgpIHtcbiAgICB0aGlzLmxvY2FsQ2VudGVyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMuYzAgPSBuZXcgYjJWZWMyO1xuICAgIHRoaXMuYyA9IG5ldyBiMlZlYzIoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlN3ZWVwLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHRoaXMubG9jYWxDZW50ZXIuU2V0VihvdGhlci5sb2NhbENlbnRlcik7XG4gICAgdGhpcy5jMC5TZXRWKG90aGVyLmMwKTtcbiAgICB0aGlzLmMuU2V0VihvdGhlci5jKTtcbiAgICB0aGlzLmEwID0gb3RoZXIuYTA7XG4gICAgdGhpcy5hID0gb3RoZXIuYTtcbiAgICB0aGlzLnQwID0gb3RoZXIudDA7XG4gIH07XG5cbiAgYjJTd2VlcC5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb3B5O1xuICAgIGNvcHkgPSBuZXcgYjJTd2VlcCgpO1xuICAgIGNvcHkubG9jYWxDZW50ZXIuU2V0Vih0aGlzLmxvY2FsQ2VudGVyKTtcbiAgICBjb3B5LmMwLlNldFYodGhpcy5jMCk7XG4gICAgY29weS5jLlNldFYodGhpcy5jKTtcbiAgICBjb3B5LmEwID0gdGhpcy5hMDtcbiAgICBjb3B5LmEgPSB0aGlzLmE7XG4gICAgY29weS50MCA9IHRoaXMudDA7XG4gICAgcmV0dXJuIGNvcHk7XG4gIH07XG5cbiAgYjJTd2VlcC5wcm90b3R5cGUuR2V0VHJhbnNmb3JtID0gZnVuY3Rpb24oeGYsIGFscGhhKSB7XG4gICAgdmFyIGFuZ2xlLCB0TWF0O1xuICAgIGlmIChhbHBoYSA9PT0gdm9pZCAwKSB7XG4gICAgICBhbHBoYSA9IDA7XG4gICAgfVxuICAgIHhmLnBvc2l0aW9uLnggPSAoMS4wIC0gYWxwaGEpICogdGhpcy5jMC54ICsgYWxwaGEgKiB0aGlzLmMueDtcbiAgICB4Zi5wb3NpdGlvbi55ID0gKDEuMCAtIGFscGhhKSAqIHRoaXMuYzAueSArIGFscGhhICogdGhpcy5jLnk7XG4gICAgYW5nbGUgPSAoMS4wIC0gYWxwaGEpICogdGhpcy5hMCArIGFscGhhICogdGhpcy5hO1xuICAgIHhmLlIuU2V0KGFuZ2xlKTtcbiAgICB0TWF0ID0geGYuUjtcbiAgICB4Zi5wb3NpdGlvbi54IC09IHRNYXQuY29sMS54ICogdGhpcy5sb2NhbENlbnRlci54ICsgdE1hdC5jb2wyLnggKiB0aGlzLmxvY2FsQ2VudGVyLnk7XG4gICAgeGYucG9zaXRpb24ueSAtPSB0TWF0LmNvbDEueSAqIHRoaXMubG9jYWxDZW50ZXIueCArIHRNYXQuY29sMi55ICogdGhpcy5sb2NhbENlbnRlci55O1xuICB9O1xuXG4gIGIyU3dlZXAucHJvdG90eXBlLkFkdmFuY2UgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIGFscGhhO1xuICAgIGlmICh0ID09PSB2b2lkIDApIHtcbiAgICAgIHQgPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy50MCA8IHQgJiYgMS4wIC0gdGhpcy50MCA+IE51bWJlci5NSU5fVkFMVUUpIHtcbiAgICAgIGFscGhhID0gKHQgLSB0aGlzLnQwKSAvICgxLjAgLSB0aGlzLnQwKTtcbiAgICAgIHRoaXMuYzAueCA9ICgxLjAgLSBhbHBoYSkgKiB0aGlzLmMwLnggKyBhbHBoYSAqIHRoaXMuYy54O1xuICAgICAgdGhpcy5jMC55ID0gKDEuMCAtIGFscGhhKSAqIHRoaXMuYzAueSArIGFscGhhICogdGhpcy5jLnk7XG4gICAgICB0aGlzLmEwID0gKDEuMCAtIGFscGhhKSAqIHRoaXMuYTAgKyBhbHBoYSAqIHRoaXMuYTtcbiAgICAgIHRoaXMudDAgPSB0O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYjJTd2VlcDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJTd2VlcC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJNYXQyMiwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyTWF0MjIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtID0gKGZ1bmN0aW9uKCkge1xuICBiMlRyYW5zZm9ybS5wcm90b3R5cGUucG9zaXRpb24gPSBudWxsO1xuXG4gIGIyVHJhbnNmb3JtLnByb3RvdHlwZS5SID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMlRyYW5zZm9ybShwb3MsIHIpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IGIyVmVjMjtcbiAgICB0aGlzLlIgPSBuZXcgYjJNYXQyMigpO1xuICAgIGlmIChwb3MgPT09IHZvaWQgMCkge1xuICAgICAgcG9zID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHIgPT09IHZvaWQgMCkge1xuICAgICAgciA9IG51bGw7XG4gICAgfVxuICAgIGlmIChwb3MpIHtcbiAgICAgIHRoaXMucG9zaXRpb24uU2V0Vihwb3MpO1xuICAgICAgdGhpcy5SLlNldE0ocik7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyVHJhbnNmb3JtLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24ocG9zLCByKSB7XG4gICAgdGhpcy5wb3NpdGlvbi5TZXRWKHBvcyk7XG4gICAgdGhpcy5SLlNldE0ocik7XG4gIH07XG5cbiAgYjJUcmFuc2Zvcm0ucHJvdG90eXBlLlNldElkZW50aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wb3NpdGlvbi5TZXRaZXJvKCk7XG4gICAgdGhpcy5SLlNldElkZW50aXR5KCk7XG4gIH07XG5cbiAgYjJUcmFuc2Zvcm0ucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKHgpIHtcbiAgICB0aGlzLnBvc2l0aW9uLlNldFYoeC5wb3NpdGlvbik7XG4gICAgdGhpcy5SLlNldE0oeC5SKTtcbiAgfTtcblxuICBiMlRyYW5zZm9ybS5wcm90b3R5cGUuR2V0QW5nbGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLlIuY29sMS55LCB0aGlzLlIuY29sMS54KTtcbiAgfTtcblxuICByZXR1cm4gYjJUcmFuc2Zvcm07XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyVHJhbnNmb3JtLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMk1hdGg7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5Cb3gyRC5Db21tb24uTWF0aC5iMlZlYzIgPSAoZnVuY3Rpb24oKSB7XG4gIGIyVmVjMi5wcm90b3R5cGUueCA9IDA7XG5cbiAgYjJWZWMyLnByb3RvdHlwZS55ID0gMDtcblxuICBmdW5jdGlvbiBiMlZlYzIoeF8sIHlfKSB7XG4gICAgaWYgKHhfID09PSB2b2lkIDApIHtcbiAgICAgIHhfID0gMDtcbiAgICB9XG4gICAgaWYgKHlfID09PSB2b2lkIDApIHtcbiAgICAgIHlfID0gMDtcbiAgICB9XG4gICAgdGhpcy54ID0geF87XG4gICAgdGhpcy55ID0geV87XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5TZXRaZXJvID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy54ID0gMC4wO1xuICAgIHRoaXMueSA9IDAuMDtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKHhfLCB5Xykge1xuICAgIGlmICh4XyA9PT0gdm9pZCAwKSB7XG4gICAgICB4XyA9IDA7XG4gICAgfVxuICAgIGlmICh5XyA9PT0gdm9pZCAwKSB7XG4gICAgICB5XyA9IDA7XG4gICAgfVxuICAgIHRoaXMueCA9IHhfO1xuICAgIHRoaXMueSA9IHlfO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuU2V0ViA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0aGlzLnggPSB2Lng7XG4gICAgdGhpcy55ID0gdi55O1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuR2V0TmVnYXRpdmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IGIyVmVjMigtdGhpcy54LCAtdGhpcy55KTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLk5lZ2F0aXZlU2VsZiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgdGhpcy55ID0gLXRoaXMueTtcbiAgfTtcblxuICBiMlZlYzIuTWFrZSA9IGZ1bmN0aW9uKHhfLCB5Xykge1xuICAgIGlmICh4XyA9PT0gdm9pZCAwKSB7XG4gICAgICB4XyA9IDA7XG4gICAgfVxuICAgIGlmICh5XyA9PT0gdm9pZCAwKSB7XG4gICAgICB5XyA9IDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgYjJWZWMyKHhfLCB5Xyk7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIodGhpcy54LCB0aGlzLnkpO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuQWRkID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMueCArPSB2Lng7XG4gICAgdGhpcy55ICs9IHYueTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLlN1YnRyYWN0ID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMueCAtPSB2Lng7XG4gICAgdGhpcy55IC09IHYueTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLk11bHRpcGx5ID0gZnVuY3Rpb24oYSkge1xuICAgIGlmIChhID09PSB2b2lkIDApIHtcbiAgICAgIGEgPSAwO1xuICAgIH1cbiAgICB0aGlzLnggKj0gYTtcbiAgICB0aGlzLnkgKj0gYTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLk11bE0gPSBmdW5jdGlvbihBKSB7XG4gICAgdmFyIHRYO1xuICAgIHRYID0gdGhpcy54O1xuICAgIHRoaXMueCA9IEEuY29sMS54ICogdFggKyBBLmNvbDIueCAqIHRoaXMueTtcbiAgICB0aGlzLnkgPSBBLmNvbDEueSAqIHRYICsgQS5jb2wyLnkgKiB0aGlzLnk7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5NdWxUTSA9IGZ1bmN0aW9uKEEpIHtcbiAgICB2YXIgdFg7XG4gICAgdFggPSBiMk1hdGguRG90KHRoaXMsIEEuY29sMSk7XG4gICAgdGhpcy55ID0gYjJNYXRoLkRvdCh0aGlzLCBBLmNvbDIpO1xuICAgIHRoaXMueCA9IHRYO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuQ3Jvc3NWRiA9IGZ1bmN0aW9uKHMpIHtcbiAgICB2YXIgdFg7XG4gICAgaWYgKHMgPT09IHZvaWQgMCkge1xuICAgICAgcyA9IDA7XG4gICAgfVxuICAgIHRYID0gdGhpcy54O1xuICAgIHRoaXMueCA9IHMgKiB0aGlzLnk7XG4gICAgdGhpcy55ID0gLXMgKiB0WDtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLkNyb3NzRlYgPSBmdW5jdGlvbihzKSB7XG4gICAgdmFyIHRYO1xuICAgIGlmIChzID09PSB2b2lkIDApIHtcbiAgICAgIHMgPSAwO1xuICAgIH1cbiAgICB0WCA9IHRoaXMueDtcbiAgICB0aGlzLnggPSAtcyAqIHRoaXMueTtcbiAgICB0aGlzLnkgPSBzICogdFg7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5NaW5WID0gZnVuY3Rpb24oYikge1xuICAgIHRoaXMueCA9ICh0aGlzLnggPCBiLnggPyB0aGlzLnggOiBiLngpO1xuICAgIHRoaXMueSA9ICh0aGlzLnkgPCBiLnkgPyB0aGlzLnkgOiBiLnkpO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuTWF4ViA9IGZ1bmN0aW9uKGIpIHtcbiAgICB0aGlzLnggPSAodGhpcy54ID4gYi54ID8gdGhpcy54IDogYi54KTtcbiAgICB0aGlzLnkgPSAodGhpcy55ID4gYi55ID8gdGhpcy55IDogYi55KTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLkFicyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnggPCAwKSB7XG4gICAgICB0aGlzLnggPSAtdGhpcy54O1xuICAgIH1cbiAgICBpZiAodGhpcy55IDwgMCkge1xuICAgICAgdGhpcy55ID0gLXRoaXMueTtcbiAgICB9XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5MZW5ndGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5MZW5ndGhTcXVhcmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLk5vcm1hbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbnZMZW5ndGgsIGxlbmd0aDtcbiAgICBsZW5ndGggPSBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55KTtcbiAgICBpZiAobGVuZ3RoIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgcmV0dXJuIDAuMDtcbiAgICB9XG4gICAgaW52TGVuZ3RoID0gMS4wIC8gbGVuZ3RoO1xuICAgIHRoaXMueCAqPSBpbnZMZW5ndGg7XG4gICAgdGhpcy55ICo9IGludkxlbmd0aDtcbiAgICByZXR1cm4gbGVuZ3RoO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuSXNWYWxpZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBiMk1hdGguSXNWYWxpZCh0aGlzLngpICYmIGIyTWF0aC5Jc1ZhbGlkKHRoaXMueSk7XG4gIH07XG5cbiAgcmV0dXJuIGIyVmVjMjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJWZWMyLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMyA9IChmdW5jdGlvbigpIHtcbiAgYjJWZWMzLnByb3RvdHlwZS54ID0gMDtcblxuICBiMlZlYzMucHJvdG90eXBlLnkgPSAwO1xuXG4gIGIyVmVjMy5wcm90b3R5cGUueiA9IDA7XG5cbiAgZnVuY3Rpb24gYjJWZWMzKHgsIHksIHopIHtcbiAgICBpZiAoeCA9PT0gdm9pZCAwKSB7XG4gICAgICB4ID0gMDtcbiAgICB9XG4gICAgaWYgKHkgPT09IHZvaWQgMCkge1xuICAgICAgeSA9IDA7XG4gICAgfVxuICAgIGlmICh6ID09PSB2b2lkIDApIHtcbiAgICAgIHogPSAwO1xuICAgIH1cbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlZlYzMucHJvdG90eXBlLlNldFplcm8gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwLjA7XG4gIH07XG5cbiAgYjJWZWMzLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgaWYgKHggPT09IHZvaWQgMCkge1xuICAgICAgeCA9IDA7XG4gICAgfVxuICAgIGlmICh5ID09PSB2b2lkIDApIHtcbiAgICAgIHkgPSAwO1xuICAgIH1cbiAgICBpZiAoeiA9PT0gdm9pZCAwKSB7XG4gICAgICB6ID0gMDtcbiAgICB9XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gIH07XG5cbiAgYjJWZWMzLnByb3RvdHlwZS5TZXRWID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMueCA9IHYueDtcbiAgICB0aGlzLnkgPSB2Lnk7XG4gICAgdGhpcy56ID0gdi56O1xuICB9O1xuXG4gIGIyVmVjMy5wcm90b3R5cGUuR2V0TmVnYXRpdmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IGIyVmVjMygtdGhpcy54LCAtdGhpcy55LCAtdGhpcy56KTtcbiAgfTtcblxuICBiMlZlYzMucHJvdG90eXBlLk5lZ2F0aXZlU2VsZiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgdGhpcy55ID0gLXRoaXMueTtcbiAgICB0aGlzLnogPSAtdGhpcy56O1xuICB9O1xuXG4gIGIyVmVjMy5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgYjJWZWMzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopO1xuICB9O1xuXG4gIGIyVmVjMy5wcm90b3R5cGUuQWRkID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMueCArPSB2Lng7XG4gICAgdGhpcy55ICs9IHYueTtcbiAgICB0aGlzLnogKz0gdi56O1xuICB9O1xuXG4gIGIyVmVjMy5wcm90b3R5cGUuU3VidHJhY3QgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy54IC09IHYueDtcbiAgICB0aGlzLnkgLT0gdi55O1xuICAgIHRoaXMueiAtPSB2Lno7XG4gIH07XG5cbiAgYjJWZWMzLnByb3RvdHlwZS5NdWx0aXBseSA9IGZ1bmN0aW9uKGEpIHtcbiAgICBpZiAoYSA9PT0gdm9pZCAwKSB7XG4gICAgICBhID0gMDtcbiAgICB9XG4gICAgdGhpcy54ICo9IGE7XG4gICAgdGhpcy55ICo9IGE7XG4gICAgdGhpcy56ICo9IGE7XG4gIH07XG5cbiAgcmV0dXJuIGIyVmVjMztcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJWZWMzLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkJvZHlEZWYsIGIyRml4dHVyZSwgYjJGaXh0dXJlRGVmLCBiMk1hdGgsIGIyU2V0dGluZ3MsIGIyU3dlZXAsIGIyVHJhbnNmb3JtLCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMlN3ZWVwID0gQm94MkQuQ29tbW9uLk1hdGguYjJTd2VlcDtcblxuYjJUcmFuc2Zvcm0gPSBCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyRml4dHVyZSA9IEJveDJELkR5bmFtaWNzLmIyRml4dHVyZTtcblxuYjJGaXh0dXJlRGVmID0gQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlRGVmO1xuXG5iMkJvZHlEZWYgPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWY7XG5cbkJveDJELkR5bmFtaWNzLmIyQm9keSA9IChmdW5jdGlvbigpIHtcbiAgYjJCb2R5LnNfeGYxID0gbmV3IGIyVHJhbnNmb3JtKCk7XG5cbiAgYjJCb2R5LmVfaXNsYW5kRmxhZyA9IDB4MDAwMTtcblxuICBiMkJvZHkuZV9hd2FrZUZsYWcgPSAweDAwMDI7XG5cbiAgYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWcgPSAweDAwMDQ7XG5cbiAgYjJCb2R5LmVfYnVsbGV0RmxhZyA9IDB4MDAwODtcblxuICBiMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZyA9IDB4MDAxMDtcblxuICBiMkJvZHkuZV9hY3RpdmVGbGFnID0gMHgwMDIwO1xuXG4gIGIyQm9keS5iMl9zdGF0aWNCb2R5ID0gMDtcblxuICBiMkJvZHkuYjJfa2luZW1hdGljQm9keSA9IDE7XG5cbiAgYjJCb2R5LmIyX2R5bmFtaWNCb2R5ID0gMjtcblxuICBiMkJvZHkucHJvdG90eXBlLm1feGYgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9zd2VlcCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX2xpbmVhclZlbG9jaXR5ID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fZm9yY2UgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9mbGFncyA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3dvcmxkID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fam9pbnRMaXN0ID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fY29udHJvbGxlckxpc3QgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9jb250YWN0TGlzdCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX2NvbnRyb2xsZXJDb3VudCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3ByZXYgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9uZXh0ID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fbGluZWFyVmVsb2NpdHkgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9hbmd1bGFyVmVsb2NpdHkgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9saW5lYXJEYW1waW5nID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fYW5ndWxhckRhbXBpbmcgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9mb3JjZSA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3RvcnF1ZSA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3NsZWVwVGltZSA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3R5cGUgPSAwO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9tYXNzID0gMDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1faW52TWFzcyA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX0kgPSAwO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9pbnZJID0gMDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1faW5lcnRpYVNjYWxlID0gMDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fdXNlckRhdGEgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9maXh0dXJlTGlzdCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX2ZpeHR1cmVDb3VudCA9IDA7XG5cbiAgZnVuY3Rpb24gYjJCb2R5KGJkLCB3b3JsZCkge1xuICAgIHZhciB0TWF0LCB0VmVjO1xuICAgIHRoaXMubV94ZiA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuICAgIHRoaXMubV9zd2VlcCA9IG5ldyBiMlN3ZWVwKCk7XG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9mb3JjZSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fZmxhZ3MgPSAwO1xuICAgIGlmIChiZC5idWxsZXQpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9idWxsZXRGbGFnO1xuICAgIH1cbiAgICBpZiAoYmQuZml4ZWRSb3RhdGlvbikge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQm9keS5lX2ZpeGVkUm90YXRpb25GbGFnO1xuICAgIH1cbiAgICBpZiAoYmQuYWxsb3dTbGVlcCkge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQm9keS5lX2FsbG93U2xlZXBGbGFnO1xuICAgIH1cbiAgICBpZiAoYmQuYXdha2UpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9hd2FrZUZsYWc7XG4gICAgfVxuICAgIGlmIChiZC5hY3RpdmUpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9hY3RpdmVGbGFnO1xuICAgIH1cbiAgICB0aGlzLm1fd29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLm1feGYucG9zaXRpb24uU2V0VihiZC5wb3NpdGlvbik7XG4gICAgdGhpcy5tX3hmLlIuU2V0KGJkLmFuZ2xlKTtcbiAgICB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIuU2V0WmVybygpO1xuICAgIHRoaXMubV9zd2VlcC50MCA9IDEuMDtcbiAgICB0aGlzLm1fc3dlZXAuYTAgPSB0aGlzLm1fc3dlZXAuYSA9IGJkLmFuZ2xlO1xuICAgIHRNYXQgPSB0aGlzLm1feGYuUjtcbiAgICB0VmVjID0gdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgIHRoaXMubV9zd2VlcC5jLnggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgIHRoaXMubV9zd2VlcC5jLnkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgIHRoaXMubV9zd2VlcC5jLnggKz0gdGhpcy5tX3hmLnBvc2l0aW9uLng7XG4gICAgdGhpcy5tX3N3ZWVwLmMueSArPSB0aGlzLm1feGYucG9zaXRpb24ueTtcbiAgICB0aGlzLm1fc3dlZXAuYzAuU2V0Vih0aGlzLm1fc3dlZXAuYyk7XG4gICAgdGhpcy5tX2pvaW50TGlzdCA9IG51bGw7XG4gICAgdGhpcy5tX2NvbnRyb2xsZXJMaXN0ID0gbnVsbDtcbiAgICB0aGlzLm1fY29udGFjdExpc3QgPSBudWxsO1xuICAgIHRoaXMubV9jb250cm9sbGVyQ291bnQgPSAwO1xuICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbmV4dCA9IG51bGw7XG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LlNldFYoYmQubGluZWFyVmVsb2NpdHkpO1xuICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSBiZC5hbmd1bGFyVmVsb2NpdHk7XG4gICAgdGhpcy5tX2xpbmVhckRhbXBpbmcgPSBiZC5saW5lYXJEYW1waW5nO1xuICAgIHRoaXMubV9hbmd1bGFyRGFtcGluZyA9IGJkLmFuZ3VsYXJEYW1waW5nO1xuICAgIHRoaXMubV9mb3JjZS5TZXQoMC4wLCAwLjApO1xuICAgIHRoaXMubV90b3JxdWUgPSAwLjA7XG4gICAgdGhpcy5tX3NsZWVwVGltZSA9IDAuMDtcbiAgICB0aGlzLm1fdHlwZSA9IGJkLnR5cGU7XG4gICAgaWYgKHRoaXMubV90eXBlID09PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgIHRoaXMubV9tYXNzID0gMS4wO1xuICAgICAgdGhpcy5tX2ludk1hc3MgPSAxLjA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9tYXNzID0gMC4wO1xuICAgICAgdGhpcy5tX2ludk1hc3MgPSAwLjA7XG4gICAgfVxuICAgIHRoaXMubV9JID0gMC4wO1xuICAgIHRoaXMubV9pbnZJID0gMC4wO1xuICAgIHRoaXMubV9pbmVydGlhU2NhbGUgPSBiZC5pbmVydGlhU2NhbGU7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gYmQudXNlckRhdGE7XG4gICAgdGhpcy5tX2ZpeHR1cmVMaXN0ID0gbnVsbDtcbiAgICB0aGlzLm1fZml4dHVyZUNvdW50ID0gMDtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkJvZHkucHJvdG90eXBlLkNvbm5lY3RFZGdlcyA9IGZ1bmN0aW9uKHMxLCBzMiwgYW5nbGUxKSB7XG4gICAgdmFyIGFuZ2xlMiwgY29udmV4LCBjb3JlLCBjb3JlT2Zmc2V0LCBjb3JuZXJEaXI7XG4gICAgaWYgKGFuZ2xlMSA9PT0gdm9pZCAwKSB7XG4gICAgICBhbmdsZTEgPSAwO1xuICAgIH1cbiAgICBhbmdsZTIgPSBNYXRoLmF0YW4yKHMyLkdldERpcmVjdGlvblZlY3RvcigpLnksIHMyLkdldERpcmVjdGlvblZlY3RvcigpLngpO1xuICAgIGNvcmVPZmZzZXQgPSBNYXRoLnRhbigoYW5nbGUyIC0gYW5nbGUxKSAqIDAuNSk7XG4gICAgY29yZSA9IGIyTWF0aC5NdWxGVihjb3JlT2Zmc2V0LCBzMi5HZXREaXJlY3Rpb25WZWN0b3IoKSk7XG4gICAgY29yZSA9IGIyTWF0aC5TdWJ0cmFjdFZWKGNvcmUsIHMyLkdldE5vcm1hbFZlY3RvcigpKTtcbiAgICBjb3JlID0gYjJNYXRoLk11bEZWKGIyU2V0dGluZ3MuYjJfdG9pU2xvcCwgY29yZSk7XG4gICAgY29yZSA9IGIyTWF0aC5BZGRWVihjb3JlLCBzMi5HZXRWZXJ0ZXgxKCkpO1xuICAgIGNvcm5lckRpciA9IGIyTWF0aC5BZGRWVihzMS5HZXREaXJlY3Rpb25WZWN0b3IoKSwgczIuR2V0RGlyZWN0aW9uVmVjdG9yKCkpO1xuICAgIGNvcm5lckRpci5Ob3JtYWxpemUoKTtcbiAgICBjb252ZXggPSBiMk1hdGguRG90KHMxLkdldERpcmVjdGlvblZlY3RvcigpLCBzMi5HZXROb3JtYWxWZWN0b3IoKSkgPiAwLjA7XG4gICAgczEuU2V0TmV4dEVkZ2UoczIsIGNvcmUsIGNvcm5lckRpciwgY29udmV4KTtcbiAgICBzMi5TZXRQcmV2RWRnZShzMSwgY29yZSwgY29ybmVyRGlyLCBjb252ZXgpO1xuICAgIHJldHVybiBhbmdsZTI7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5DcmVhdGVGaXh0dXJlID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgdmFyIGJyb2FkUGhhc2UsIGZpeHR1cmU7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZml4dHVyZSA9IG5ldyBiMkZpeHR1cmUoKTtcbiAgICBmaXh0dXJlLkNyZWF0ZSh0aGlzLCB0aGlzLm1feGYsIGRlZik7XG4gICAgaWYgKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2FjdGl2ZUZsYWcpIHtcbiAgICAgIGJyb2FkUGhhc2UgPSB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgICBmaXh0dXJlLkNyZWF0ZVByb3h5KGJyb2FkUGhhc2UsIHRoaXMubV94Zik7XG4gICAgfVxuICAgIGZpeHR1cmUubV9uZXh0ID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgIHRoaXMubV9maXh0dXJlTGlzdCA9IGZpeHR1cmU7XG4gICAgKyt0aGlzLm1fZml4dHVyZUNvdW50O1xuICAgIGZpeHR1cmUubV9ib2R5ID0gdGhpcztcbiAgICBpZiAoZml4dHVyZS5tX2RlbnNpdHkgPiAwLjApIHtcbiAgICAgIHRoaXMuUmVzZXRNYXNzRGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLm1fd29ybGQubV9mbGFncyB8PSAweDAwMDE7XG4gICAgcmV0dXJuIGZpeHR1cmU7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5DcmVhdGVGaXh0dXJlMiA9IGZ1bmN0aW9uKHNoYXBlLCBkZW5zaXR5KSB7XG4gICAgdmFyIGRlZjtcbiAgICBpZiAoZGVuc2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZW5zaXR5ID0gMC4wO1xuICAgIH1cbiAgICBkZWYgPSBuZXcgYjJGaXh0dXJlRGVmKCk7XG4gICAgZGVmLnNoYXBlID0gc2hhcGU7XG4gICAgZGVmLmRlbnNpdHkgPSBkZW5zaXR5O1xuICAgIHJldHVybiB0aGlzLkNyZWF0ZUZpeHR1cmUoZGVmKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkRlc3Ryb3lGaXh0dXJlID0gZnVuY3Rpb24oZml4dHVyZSkge1xuICAgIHZhciBicm9hZFBoYXNlLCBjLCBlZGdlLCBmaXh0dXJlQSwgZml4dHVyZUIsIGZvdW5kLCBub2RlLCBwcEY7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpID09PSB0cnVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG5vZGUgPSB0aGlzLm1fZml4dHVyZUxpc3Q7XG4gICAgcHBGID0gbnVsbDtcbiAgICBmb3VuZCA9IGZhbHNlO1xuICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcbiAgICAgIGlmIChub2RlID09PSBmaXh0dXJlKSB7XG4gICAgICAgIGlmIChwcEYpIHtcbiAgICAgICAgICBwcEYubV9uZXh0ID0gZml4dHVyZS5tX25leHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX2ZpeHR1cmVMaXN0ID0gZml4dHVyZS5tX25leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHBwRiA9IG5vZGU7XG4gICAgICBub2RlID0gbm9kZS5tX25leHQ7XG4gICAgfVxuICAgIGVkZ2UgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgd2hpbGUgKGVkZ2UpIHtcbiAgICAgIGMgPSBlZGdlLmNvbnRhY3Q7XG4gICAgICBlZGdlID0gZWRnZS5uZXh0O1xuICAgICAgZml4dHVyZUEgPSBjLkdldEZpeHR1cmVBKCk7XG4gICAgICBmaXh0dXJlQiA9IGMuR2V0Rml4dHVyZUIoKTtcbiAgICAgIGlmIChmaXh0dXJlID09PSBmaXh0dXJlQSB8fCBmaXh0dXJlID09PSBmaXh0dXJlQikge1xuICAgICAgICB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5EZXN0cm95KGMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfYWN0aXZlRmxhZykge1xuICAgICAgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICAgIGZpeHR1cmUuRGVzdHJveVByb3h5KGJyb2FkUGhhc2UpO1xuICAgIH0gZWxzZSB7XG5cbiAgICB9XG4gICAgZml4dHVyZS5EZXN0cm95KCk7XG4gICAgZml4dHVyZS5tX2JvZHkgPSBudWxsO1xuICAgIGZpeHR1cmUubV9uZXh0ID0gbnVsbDtcbiAgICAtLXRoaXMubV9maXh0dXJlQ291bnQ7XG4gICAgdGhpcy5SZXNldE1hc3NEYXRhKCk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRQb3NpdGlvbkFuZEFuZ2xlID0gZnVuY3Rpb24ocG9zaXRpb24sIGFuZ2xlKSB7XG4gICAgdmFyIGJyb2FkUGhhc2UsIGYsIHRNYXQsIHRWZWM7XG4gICAgaWYgKGFuZ2xlID09PSB2b2lkIDApIHtcbiAgICAgIGFuZ2xlID0gMDtcbiAgICB9XG4gICAgZiA9IHZvaWQgMDtcbiAgICBpZiAodGhpcy5tX3dvcmxkLklzTG9ja2VkKCkgPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tX3hmLlIuU2V0KGFuZ2xlKTtcbiAgICB0aGlzLm1feGYucG9zaXRpb24uU2V0Vihwb3NpdGlvbik7XG4gICAgdE1hdCA9IHRoaXMubV94Zi5SO1xuICAgIHRWZWMgPSB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgdGhpcy5tX3N3ZWVwLmMueCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgdGhpcy5tX3N3ZWVwLmMueSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgdGhpcy5tX3N3ZWVwLmMueCArPSB0aGlzLm1feGYucG9zaXRpb24ueDtcbiAgICB0aGlzLm1fc3dlZXAuYy55ICs9IHRoaXMubV94Zi5wb3NpdGlvbi55O1xuICAgIHRoaXMubV9zd2VlcC5jMC5TZXRWKHRoaXMubV9zd2VlcC5jKTtcbiAgICB0aGlzLm1fc3dlZXAuYTAgPSB0aGlzLm1fc3dlZXAuYSA9IGFuZ2xlO1xuICAgIGJyb2FkUGhhc2UgPSB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgZiA9IHRoaXMubV9maXh0dXJlTGlzdDtcbiAgICB3aGlsZSAoZikge1xuICAgICAgZi5TeW5jaHJvbml6ZShicm9hZFBoYXNlLCB0aGlzLm1feGYsIHRoaXMubV94Zik7XG4gICAgICBmID0gZi5tX25leHQ7XG4gICAgfVxuICAgIHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLkZpbmROZXdDb250YWN0cygpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0VHJhbnNmb3JtID0gZnVuY3Rpb24oeGYpIHtcbiAgICB0aGlzLlNldFBvc2l0aW9uQW5kQW5nbGUoeGYucG9zaXRpb24sIHhmLkdldEFuZ2xlKCkpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0VHJhbnNmb3JtID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV94ZjtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV94Zi5wb3NpdGlvbjtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldFBvc2l0aW9uID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICB0aGlzLlNldFBvc2l0aW9uQW5kQW5nbGUocG9zaXRpb24sIHRoaXMuR2V0QW5nbGUoKSk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fc3dlZXAuYTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldEFuZ2xlID0gZnVuY3Rpb24oYW5nbGUpIHtcbiAgICBpZiAoYW5nbGUgPT09IHZvaWQgMCkge1xuICAgICAgYW5nbGUgPSAwO1xuICAgIH1cbiAgICB0aGlzLlNldFBvc2l0aW9uQW5kQW5nbGUodGhpcy5HZXRQb3NpdGlvbigpLCBhbmdsZSk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRXb3JsZENlbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fc3dlZXAuYztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldExvY2FsQ2VudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldExpbmVhclZlbG9jaXR5ID0gZnVuY3Rpb24odikge1xuICAgIGlmICh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5LmIyX3N0YXRpY0JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LlNldFYodik7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRMaW5lYXJWZWxvY2l0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbGluZWFyVmVsb2NpdHk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRBbmd1bGFyVmVsb2NpdHkgPSBmdW5jdGlvbihvbWVnYSkge1xuICAgIGlmIChvbWVnYSA9PT0gdm9pZCAwKSB7XG4gICAgICBvbWVnYSA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5LmIyX3N0YXRpY0JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IG9tZWdhO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0QW5ndWxhclZlbG9jaXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9hbmd1bGFyVmVsb2NpdHk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXREZWZpbml0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJkO1xuICAgIGJkID0gbmV3IGIyQm9keURlZigpO1xuICAgIGJkLnR5cGUgPSB0aGlzLkdldFR5cGUoKTtcbiAgICBiZC5hbGxvd1NsZWVwID0gKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2FsbG93U2xlZXBGbGFnKSA9PT0gYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWc7XG4gICAgYmQuYW5nbGUgPSB0aGlzLkdldEFuZ2xlKCk7XG4gICAgYmQuYW5ndWxhckRhbXBpbmcgPSB0aGlzLm1fYW5ndWxhckRhbXBpbmc7XG4gICAgYmQuYW5ndWxhclZlbG9jaXR5ID0gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICBiZC5maXhlZFJvdGF0aW9uID0gKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2ZpeGVkUm90YXRpb25GbGFnKSA9PT0gYjJCb2R5LmVfZml4ZWRSb3RhdGlvbkZsYWc7XG4gICAgYmQuYnVsbGV0ID0gKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2J1bGxldEZsYWcpID09PSBiMkJvZHkuZV9idWxsZXRGbGFnO1xuICAgIGJkLmF3YWtlID0gKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2F3YWtlRmxhZykgPT09IGIyQm9keS5lX2F3YWtlRmxhZztcbiAgICBiZC5saW5lYXJEYW1waW5nID0gdGhpcy5tX2xpbmVhckRhbXBpbmc7XG4gICAgYmQubGluZWFyVmVsb2NpdHkuU2V0Vih0aGlzLkdldExpbmVhclZlbG9jaXR5KCkpO1xuICAgIGJkLnBvc2l0aW9uID0gdGhpcy5HZXRQb3NpdGlvbigpO1xuICAgIGJkLnVzZXJEYXRhID0gdGhpcy5HZXRVc2VyRGF0YSgpO1xuICAgIHJldHVybiBiZDtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkFwcGx5Rm9yY2UgPSBmdW5jdGlvbihmb3JjZSwgcG9pbnQpIHtcbiAgICBpZiAodGhpcy5tX3R5cGUgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLlNldEF3YWtlKHRydWUpO1xuICAgIH1cbiAgICB0aGlzLm1fZm9yY2UueCArPSBmb3JjZS54O1xuICAgIHRoaXMubV9mb3JjZS55ICs9IGZvcmNlLnk7XG4gICAgdGhpcy5tX3RvcnF1ZSArPSAocG9pbnQueCAtIHRoaXMubV9zd2VlcC5jLngpICogZm9yY2UueSAtIChwb2ludC55IC0gdGhpcy5tX3N3ZWVwLmMueSkgKiBmb3JjZS54O1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuQXBwbHlUb3JxdWUgPSBmdW5jdGlvbih0b3JxdWUpIHtcbiAgICBpZiAodG9ycXVlID09PSB2b2lkIDApIHtcbiAgICAgIHRvcnF1ZSA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fdHlwZSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLklzQXdha2UoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMubV90b3JxdWUgKz0gdG9ycXVlO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuQXBwbHlJbXB1bHNlID0gZnVuY3Rpb24oaW1wdWxzZSwgcG9pbnQpIHtcbiAgICBpZiAodGhpcy5tX3R5cGUgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLlNldEF3YWtlKHRydWUpO1xuICAgIH1cbiAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkueCArPSB0aGlzLm1faW52TWFzcyAqIGltcHVsc2UueDtcbiAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkueSArPSB0aGlzLm1faW52TWFzcyAqIGltcHVsc2UueTtcbiAgICB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICs9IHRoaXMubV9pbnZJICogKChwb2ludC54IC0gdGhpcy5tX3N3ZWVwLmMueCkgKiBpbXB1bHNlLnkgLSAocG9pbnQueSAtIHRoaXMubV9zd2VlcC5jLnkpICogaW1wdWxzZS54KTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNwbGl0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgYW5ndWxhclZlbG9jaXR5LCBib2R5MSwgYm9keTIsIGNlbnRlciwgY2VudGVyMSwgY2VudGVyMiwgZiwgbGluZWFyVmVsb2NpdHksIG5leHQsIHByZXYsIHZlbG9jaXR5MSwgdmVsb2NpdHkyO1xuICAgIGxpbmVhclZlbG9jaXR5ID0gdGhpcy5HZXRMaW5lYXJWZWxvY2l0eSgpLkNvcHkoKTtcbiAgICBhbmd1bGFyVmVsb2NpdHkgPSB0aGlzLkdldEFuZ3VsYXJWZWxvY2l0eSgpO1xuICAgIGNlbnRlciA9IHRoaXMuR2V0V29ybGRDZW50ZXIoKTtcbiAgICBib2R5MSA9IHRoaXM7XG4gICAgYm9keTIgPSB0aGlzLm1fd29ybGQuQ3JlYXRlQm9keSh0aGlzLkdldERlZmluaXRpb24oKSk7XG4gICAgcHJldiA9IHZvaWQgMDtcbiAgICBmID0gYm9keTEubV9maXh0dXJlTGlzdDtcbiAgICB3aGlsZSAoZikge1xuICAgICAgaWYgKGNhbGxiYWNrKGYpKSB7XG4gICAgICAgIG5leHQgPSBmLm1fbmV4dDtcbiAgICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgICBwcmV2Lm1fbmV4dCA9IG5leHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYm9keTEubV9maXh0dXJlTGlzdCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgYm9keTEubV9maXh0dXJlQ291bnQtLTtcbiAgICAgICAgZi5tX25leHQgPSBib2R5Mi5tX2ZpeHR1cmVMaXN0O1xuICAgICAgICBib2R5Mi5tX2ZpeHR1cmVMaXN0ID0gZjtcbiAgICAgICAgYm9keTIubV9maXh0dXJlQ291bnQrKztcbiAgICAgICAgZi5tX2JvZHkgPSBib2R5MjtcbiAgICAgICAgZiA9IG5leHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2ID0gZjtcbiAgICAgICAgZiA9IGYubV9uZXh0O1xuICAgICAgfVxuICAgIH1cbiAgICBib2R5MS5SZXNldE1hc3NEYXRhKCk7XG4gICAgYm9keTIuUmVzZXRNYXNzRGF0YSgpO1xuICAgIGNlbnRlcjEgPSBib2R5MS5HZXRXb3JsZENlbnRlcigpO1xuICAgIGNlbnRlcjIgPSBib2R5Mi5HZXRXb3JsZENlbnRlcigpO1xuICAgIHZlbG9jaXR5MSA9IGIyTWF0aC5BZGRWVihsaW5lYXJWZWxvY2l0eSwgYjJNYXRoLkNyb3NzRlYoYW5ndWxhclZlbG9jaXR5LCBiMk1hdGguU3VidHJhY3RWVihjZW50ZXIxLCBjZW50ZXIpKSk7XG4gICAgdmVsb2NpdHkyID0gYjJNYXRoLkFkZFZWKGxpbmVhclZlbG9jaXR5LCBiMk1hdGguQ3Jvc3NGVihhbmd1bGFyVmVsb2NpdHksIGIyTWF0aC5TdWJ0cmFjdFZWKGNlbnRlcjIsIGNlbnRlcikpKTtcbiAgICBib2R5MS5TZXRMaW5lYXJWZWxvY2l0eSh2ZWxvY2l0eTEpO1xuICAgIGJvZHkyLlNldExpbmVhclZlbG9jaXR5KHZlbG9jaXR5Mik7XG4gICAgYm9keTEuU2V0QW5ndWxhclZlbG9jaXR5KGFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgYm9keTIuU2V0QW5ndWxhclZlbG9jaXR5KGFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgYm9keTEuU3luY2hyb25pemVGaXh0dXJlcygpO1xuICAgIGJvZHkyLlN5bmNocm9uaXplRml4dHVyZXMoKTtcbiAgICByZXR1cm4gYm9keTI7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5NZXJnZSA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgdmFyIGFuZ3VsYXIsIGFuZ3VsYXIxLCBib2R5MSwgYm9keTIsIGNlbnRlcjEsIGNlbnRlcjIsIGYsIG5leHQsIHZlbG9jaXR5MSwgdmVsb2NpdHkyO1xuICAgIGYgPSB2b2lkIDA7XG4gICAgZiA9IG90aGVyLm1fZml4dHVyZUxpc3Q7XG4gICAgd2hpbGUgKGYpIHtcbiAgICAgIG5leHQgPSBmLm1fbmV4dDtcbiAgICAgIG90aGVyLm1fZml4dHVyZUNvdW50LS07XG4gICAgICBmLm1fbmV4dCA9IHRoaXMubV9maXh0dXJlTGlzdDtcbiAgICAgIHRoaXMubV9maXh0dXJlTGlzdCA9IGY7XG4gICAgICB0aGlzLm1fZml4dHVyZUNvdW50Kys7XG4gICAgICBmLm1fYm9keSA9IGJvZHkyO1xuICAgICAgZiA9IG5leHQ7XG4gICAgfVxuICAgIGJvZHkxLm1fZml4dHVyZUNvdW50ID0gMDtcbiAgICBib2R5MSA9IHRoaXM7XG4gICAgYm9keTIgPSBvdGhlcjtcbiAgICBjZW50ZXIxID0gYm9keTEuR2V0V29ybGRDZW50ZXIoKTtcbiAgICBjZW50ZXIyID0gYm9keTIuR2V0V29ybGRDZW50ZXIoKTtcbiAgICB2ZWxvY2l0eTEgPSBib2R5MS5HZXRMaW5lYXJWZWxvY2l0eSgpLkNvcHkoKTtcbiAgICB2ZWxvY2l0eTIgPSBib2R5Mi5HZXRMaW5lYXJWZWxvY2l0eSgpLkNvcHkoKTtcbiAgICBhbmd1bGFyMSA9IGJvZHkxLkdldEFuZ3VsYXJWZWxvY2l0eSgpO1xuICAgIGFuZ3VsYXIgPSBib2R5Mi5HZXRBbmd1bGFyVmVsb2NpdHkoKTtcbiAgICBib2R5MS5SZXNldE1hc3NEYXRhKCk7XG4gICAgdGhpcy5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRNYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9tYXNzO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0SW5lcnRpYSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fSTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldE1hc3NEYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIGRhdGEubWFzcyA9IHRoaXMubV9tYXNzO1xuICAgIGRhdGEuSSA9IHRoaXMubV9JO1xuICAgIGRhdGEuY2VudGVyLlNldFYodGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldE1hc3NEYXRhID0gZnVuY3Rpb24obWFzc0RhdGEpIHtcbiAgICB2YXIgb2xkQ2VudGVyO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQodGhpcy5tX3dvcmxkLklzTG9ja2VkKCkgPT09IGZhbHNlKTtcbiAgICBpZiAodGhpcy5tX3dvcmxkLklzTG9ja2VkKCkgPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMubV90eXBlICE9PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tX2ludk1hc3MgPSAwLjA7XG4gICAgdGhpcy5tX0kgPSAwLjA7XG4gICAgdGhpcy5tX2ludkkgPSAwLjA7XG4gICAgdGhpcy5tX21hc3MgPSBtYXNzRGF0YS5tYXNzO1xuICAgIGlmICh0aGlzLm1fbWFzcyA8PSAwLjApIHtcbiAgICAgIHRoaXMubV9tYXNzID0gMS4wO1xuICAgIH1cbiAgICB0aGlzLm1faW52TWFzcyA9IDEuMCAvIHRoaXMubV9tYXNzO1xuICAgIGlmIChtYXNzRGF0YS5JID4gMC4wICYmICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZykgPT09IDApIHtcbiAgICAgIHRoaXMubV9JID0gbWFzc0RhdGEuSSAtIHRoaXMubV9tYXNzICogKG1hc3NEYXRhLmNlbnRlci54ICogbWFzc0RhdGEuY2VudGVyLnggKyBtYXNzRGF0YS5jZW50ZXIueSAqIG1hc3NEYXRhLmNlbnRlci55KTtcbiAgICAgIHRoaXMubV9pbnZJID0gMS4wIC8gdGhpcy5tX0k7XG4gICAgfVxuICAgIG9sZENlbnRlciA9IHRoaXMubV9zd2VlcC5jLkNvcHkoKTtcbiAgICB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIuU2V0VihtYXNzRGF0YS5jZW50ZXIpO1xuICAgIHRoaXMubV9zd2VlcC5jMC5TZXRWKGIyTWF0aC5NdWxYKHRoaXMubV94ZiwgdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyKSk7XG4gICAgdGhpcy5tX3N3ZWVwLmMuU2V0Vih0aGlzLm1fc3dlZXAuYzApO1xuICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS54ICs9IHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKiAoLSh0aGlzLm1fc3dlZXAuYy55IC0gb2xkQ2VudGVyLnkpKTtcbiAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkueSArPSB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKCsodGhpcy5tX3N3ZWVwLmMueCAtIG9sZENlbnRlci54KSk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5SZXNldE1hc3NEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNlbnRlciwgZiwgbWFzc0RhdGEsIG9sZENlbnRlcjtcbiAgICB0aGlzLm1fbWFzcyA9IDAuMDtcbiAgICB0aGlzLm1faW52TWFzcyA9IDAuMDtcbiAgICB0aGlzLm1fSSA9IDAuMDtcbiAgICB0aGlzLm1faW52SSA9IDAuMDtcbiAgICB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIuU2V0WmVybygpO1xuICAgIGlmICh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5LmIyX3N0YXRpY0JvZHkgfHwgdGhpcy5tX3R5cGUgPT09IGIyQm9keS5iMl9raW5lbWF0aWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNlbnRlciA9IGIyVmVjMi5NYWtlKDAsIDApO1xuICAgIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7XG4gICAgd2hpbGUgKGYpIHtcbiAgICAgIGlmIChmLm1fZGVuc2l0eSA9PT0gMC4wKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgbWFzc0RhdGEgPSBmLkdldE1hc3NEYXRhKCk7XG4gICAgICB0aGlzLm1fbWFzcyArPSBtYXNzRGF0YS5tYXNzO1xuICAgICAgY2VudGVyLnggKz0gbWFzc0RhdGEuY2VudGVyLnggKiBtYXNzRGF0YS5tYXNzO1xuICAgICAgY2VudGVyLnkgKz0gbWFzc0RhdGEuY2VudGVyLnkgKiBtYXNzRGF0YS5tYXNzO1xuICAgICAgdGhpcy5tX0kgKz0gbWFzc0RhdGEuSTtcbiAgICAgIGYgPSBmLm1fbmV4dDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9tYXNzID4gMC4wKSB7XG4gICAgICB0aGlzLm1faW52TWFzcyA9IDEuMCAvIHRoaXMubV9tYXNzO1xuICAgICAgY2VudGVyLnggKj0gdGhpcy5tX2ludk1hc3M7XG4gICAgICBjZW50ZXIueSAqPSB0aGlzLm1faW52TWFzcztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX21hc3MgPSAxLjA7XG4gICAgICB0aGlzLm1faW52TWFzcyA9IDEuMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9JID4gMC4wICYmICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZykgPT09IDApIHtcbiAgICAgIHRoaXMubV9JIC09IHRoaXMubV9tYXNzICogKGNlbnRlci54ICogY2VudGVyLnggKyBjZW50ZXIueSAqIGNlbnRlci55KTtcbiAgICAgIHRoaXMubV9JICo9IHRoaXMubV9pbmVydGlhU2NhbGU7XG4gICAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KHRoaXMubV9JID4gMCk7XG4gICAgICB0aGlzLm1faW52SSA9IDEuMCAvIHRoaXMubV9JO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fSSA9IDAuMDtcbiAgICAgIHRoaXMubV9pbnZJID0gMC4wO1xuICAgIH1cbiAgICBvbGRDZW50ZXIgPSB0aGlzLm1fc3dlZXAuYy5Db3B5KCk7XG4gICAgdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyLlNldFYoY2VudGVyKTtcbiAgICB0aGlzLm1fc3dlZXAuYzAuU2V0VihiMk1hdGguTXVsWCh0aGlzLm1feGYsIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcikpO1xuICAgIHRoaXMubV9zd2VlcC5jLlNldFYodGhpcy5tX3N3ZWVwLmMwKTtcbiAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkueCArPSB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKC0odGhpcy5tX3N3ZWVwLmMueSAtIG9sZENlbnRlci55KSk7XG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LnkgKz0gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSAqICgrKHRoaXMubV9zd2VlcC5jLnggLSBvbGRDZW50ZXIueCkpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0V29ybGRQb2ludCA9IGZ1bmN0aW9uKGxvY2FsUG9pbnQpIHtcbiAgICB2YXIgQSwgdTtcbiAgICBBID0gdGhpcy5tX3hmLlI7XG4gICAgdSA9IG5ldyBiMlZlYzIoQS5jb2wxLnggKiBsb2NhbFBvaW50LnggKyBBLmNvbDIueCAqIGxvY2FsUG9pbnQueSwgQS5jb2wxLnkgKiBsb2NhbFBvaW50LnggKyBBLmNvbDIueSAqIGxvY2FsUG9pbnQueSk7XG4gICAgdS54ICs9IHRoaXMubV94Zi5wb3NpdGlvbi54O1xuICAgIHUueSArPSB0aGlzLm1feGYucG9zaXRpb24ueTtcbiAgICByZXR1cm4gdTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldFdvcmxkVmVjdG9yID0gZnVuY3Rpb24obG9jYWxWZWN0b3IpIHtcbiAgICByZXR1cm4gYjJNYXRoLk11bE1WKHRoaXMubV94Zi5SLCBsb2NhbFZlY3Rvcik7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRMb2NhbFBvaW50ID0gZnVuY3Rpb24od29ybGRQb2ludCkge1xuICAgIHJldHVybiBiMk1hdGguTXVsWFQodGhpcy5tX3hmLCB3b3JsZFBvaW50KTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldExvY2FsVmVjdG9yID0gZnVuY3Rpb24od29ybGRWZWN0b3IpIHtcbiAgICByZXR1cm4gYjJNYXRoLk11bFRNVih0aGlzLm1feGYuUiwgd29ybGRWZWN0b3IpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludCA9IGZ1bmN0aW9uKHdvcmxkUG9pbnQpIHtcbiAgICByZXR1cm4gbmV3IGIyVmVjMih0aGlzLm1fbGluZWFyVmVsb2NpdHkueCAtIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKiAod29ybGRQb2ludC55IC0gdGhpcy5tX3N3ZWVwLmMueSksIHRoaXMubV9saW5lYXJWZWxvY2l0eS55ICsgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSAqICh3b3JsZFBvaW50LnggLSB0aGlzLm1fc3dlZXAuYy54KSk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRMaW5lYXJWZWxvY2l0eUZyb21Mb2NhbFBvaW50ID0gZnVuY3Rpb24obG9jYWxQb2ludCkge1xuICAgIHZhciBBLCB3b3JsZFBvaW50O1xuICAgIEEgPSB0aGlzLm1feGYuUjtcbiAgICB3b3JsZFBvaW50ID0gbmV3IGIyVmVjMihBLmNvbDEueCAqIGxvY2FsUG9pbnQueCArIEEuY29sMi54ICogbG9jYWxQb2ludC55LCBBLmNvbDEueSAqIGxvY2FsUG9pbnQueCArIEEuY29sMi55ICogbG9jYWxQb2ludC55KTtcbiAgICB3b3JsZFBvaW50LnggKz0gdGhpcy5tX3hmLnBvc2l0aW9uLng7XG4gICAgd29ybGRQb2ludC55ICs9IHRoaXMubV94Zi5wb3NpdGlvbi55O1xuICAgIHJldHVybiBuZXcgYjJWZWMyKHRoaXMubV9saW5lYXJWZWxvY2l0eS54IC0gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSAqICh3b3JsZFBvaW50LnkgLSB0aGlzLm1fc3dlZXAuYy55KSwgdGhpcy5tX2xpbmVhclZlbG9jaXR5LnkgKyB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKHdvcmxkUG9pbnQueCAtIHRoaXMubV9zd2VlcC5jLngpKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldExpbmVhckRhbXBpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xpbmVhckRhbXBpbmc7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRMaW5lYXJEYW1waW5nID0gZnVuY3Rpb24obGluZWFyRGFtcGluZykge1xuICAgIGlmIChsaW5lYXJEYW1waW5nID09PSB2b2lkIDApIHtcbiAgICAgIGxpbmVhckRhbXBpbmcgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fbGluZWFyRGFtcGluZyA9IGxpbmVhckRhbXBpbmc7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRBbmd1bGFyRGFtcGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYW5ndWxhckRhbXBpbmc7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRBbmd1bGFyRGFtcGluZyA9IGZ1bmN0aW9uKGFuZ3VsYXJEYW1waW5nKSB7XG4gICAgaWYgKGFuZ3VsYXJEYW1waW5nID09PSB2b2lkIDApIHtcbiAgICAgIGFuZ3VsYXJEYW1waW5nID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2FuZ3VsYXJEYW1waW5nID0gYW5ndWxhckRhbXBpbmc7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRUeXBlID0gZnVuY3Rpb24odHlwZSkge1xuICAgIHZhciBjZTtcbiAgICBpZiAodHlwZSA9PT0gdm9pZCAwKSB7XG4gICAgICB0eXBlID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV90eXBlID09PSB0eXBlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubV90eXBlID0gdHlwZTtcbiAgICB0aGlzLlJlc2V0TWFzc0RhdGEoKTtcbiAgICBpZiAodGhpcy5tX3R5cGUgPT09IGIyQm9keS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IDAuMDtcbiAgICB9XG4gICAgdGhpcy5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fZm9yY2UuU2V0WmVybygpO1xuICAgIHRoaXMubV90b3JxdWUgPSAwLjA7XG4gICAgY2UgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgd2hpbGUgKGNlKSB7XG4gICAgICBjZS5jb250YWN0LkZsYWdGb3JGaWx0ZXJpbmcoKTtcbiAgICAgIGNlID0gY2UubmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV90eXBlO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0QnVsbGV0ID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChmbGFnKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJCb2R5LmVfYnVsbGV0RmxhZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ZsYWdzICY9IH5iMkJvZHkuZV9idWxsZXRGbGFnO1xuICAgIH1cbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLklzQnVsbGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9idWxsZXRGbGFnKSA9PT0gYjJCb2R5LmVfYnVsbGV0RmxhZztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldFNsZWVwaW5nQWxsb3dlZCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICBpZiAoZmxhZykge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQm9keS5lX2FsbG93U2xlZXBGbGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyQm9keS5lX2FsbG93U2xlZXBGbGFnO1xuICAgICAgdGhpcy5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRBd2FrZSA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICBpZiAoZmxhZykge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQm9keS5lX2F3YWtlRmxhZztcbiAgICAgIHRoaXMubV9zbGVlcFRpbWUgPSAwLjA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJCb2R5LmVfYXdha2VGbGFnO1xuICAgICAgdGhpcy5tX3NsZWVwVGltZSA9IDAuMDtcbiAgICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ID0gMC4wO1xuICAgICAgdGhpcy5tX2ZvcmNlLlNldFplcm8oKTtcbiAgICAgIHRoaXMubV90b3JxdWUgPSAwLjA7XG4gICAgfVxuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuSXNBd2FrZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfYXdha2VGbGFnKSA9PT0gYjJCb2R5LmVfYXdha2VGbGFnO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0Rml4ZWRSb3RhdGlvbiA9IGZ1bmN0aW9uKGZpeGVkKSB7XG4gICAgaWYgKGZpeGVkKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJCb2R5LmVfZml4ZWRSb3RhdGlvbkZsYWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJCb2R5LmVfZml4ZWRSb3RhdGlvbkZsYWc7XG4gICAgfVxuICAgIHRoaXMuUmVzZXRNYXNzRGF0YSgpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuSXNGaXhlZFJvdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZykgPT09IGIyQm9keS5lX2ZpeGVkUm90YXRpb25GbGFnO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0QWN0aXZlID0gZnVuY3Rpb24oZmxhZykge1xuICAgIHZhciBicm9hZFBoYXNlLCBjZSwgY2UwLCBmO1xuICAgIGlmIChmbGFnID09PSB0aGlzLklzQWN0aXZlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYnJvYWRQaGFzZSA9IHZvaWQgMDtcbiAgICBmID0gdm9pZCAwO1xuICAgIGlmIChmbGFnKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJCb2R5LmVfYWN0aXZlRmxhZztcbiAgICAgIGJyb2FkUGhhc2UgPSB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgICBmID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgICAgd2hpbGUgKGYpIHtcbiAgICAgICAgZi5DcmVhdGVQcm94eShicm9hZFBoYXNlLCB0aGlzLm1feGYpO1xuICAgICAgICBmID0gZi5tX25leHQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJCb2R5LmVfYWN0aXZlRmxhZztcbiAgICAgIGJyb2FkUGhhc2UgPSB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgICBmID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgICAgd2hpbGUgKGYpIHtcbiAgICAgICAgZi5EZXN0cm95UHJveHkoYnJvYWRQaGFzZSk7XG4gICAgICAgIGYgPSBmLm1fbmV4dDtcbiAgICAgIH1cbiAgICAgIGNlID0gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICAgICAgd2hpbGUgKGNlKSB7XG4gICAgICAgIGNlMCA9IGNlO1xuICAgICAgICBjZSA9IGNlLm5leHQ7XG4gICAgICAgIHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLkRlc3Ryb3koY2UwLmNvbnRhY3QpO1xuICAgICAgfVxuICAgICAgdGhpcy5tX2NvbnRhY3RMaXN0ID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5Jc0FjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfYWN0aXZlRmxhZykgPT09IGIyQm9keS5lX2FjdGl2ZUZsYWc7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5Jc1NsZWVwaW5nQWxsb3dlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWcpID09PSBiMkJvZHkuZV9hbGxvd1NsZWVwRmxhZztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldEZpeHR1cmVMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maXh0dXJlTGlzdDtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldEpvaW50TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fam9pbnRMaXN0O1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0Q29udHJvbGxlckxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRyb2xsZXJMaXN0O1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0Q29udGFjdExpc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0TmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldFVzZXJEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV91c2VyRGF0YTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldFVzZXJEYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMubV91c2VyRGF0YSA9IGRhdGE7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRXb3JsZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fd29ybGQ7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TeW5jaHJvbml6ZUZpeHR1cmVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJyb2FkUGhhc2UsIGYsIHRNYXQsIHRWZWMsIHhmMTtcbiAgICB4ZjEgPSBiMkJvZHkuc194ZjE7XG4gICAgeGYxLlIuU2V0KHRoaXMubV9zd2VlcC5hMCk7XG4gICAgdE1hdCA9IHhmMS5SO1xuICAgIHRWZWMgPSB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgeGYxLnBvc2l0aW9uLnggPSB0aGlzLm1fc3dlZXAuYzAueCAtICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICB4ZjEucG9zaXRpb24ueSA9IHRoaXMubV9zd2VlcC5jMC55IC0gKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgIGYgPSB2b2lkIDA7XG4gICAgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICBmID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgIHdoaWxlIChmKSB7XG4gICAgICBmLlN5bmNocm9uaXplKGJyb2FkUGhhc2UsIHhmMSwgdGhpcy5tX3hmKTtcbiAgICAgIGYgPSBmLm1fbmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TeW5jaHJvbml6ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0TWF0LCB0VmVjO1xuICAgIHRoaXMubV94Zi5SLlNldCh0aGlzLm1fc3dlZXAuYSk7XG4gICAgdE1hdCA9IHRoaXMubV94Zi5SO1xuICAgIHRWZWMgPSB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgdGhpcy5tX3hmLnBvc2l0aW9uLnggPSB0aGlzLm1fc3dlZXAuYy54IC0gKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIHRoaXMubV94Zi5wb3NpdGlvbi55ID0gdGhpcy5tX3N3ZWVwLmMueSAtICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNob3VsZENvbGxpZGUgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHZhciBqbjtcbiAgICBpZiAodGhpcy5tX3R5cGUgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSAmJiBvdGhlci5tX3R5cGUgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBqbiA9IHRoaXMubV9qb2ludExpc3Q7XG4gICAgd2hpbGUgKGpuKSB7XG4gICAgICBpZiAoam4ub3RoZXIgPT09IG90aGVyKSB7XG4gICAgICAgIGlmIChqbi5qb2ludC5tX2NvbGxpZGVDb25uZWN0ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBqbiA9IGpuLm5leHQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuQWR2YW5jZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICBpZiAodCA9PT0gdm9pZCAwKSB7XG4gICAgICB0ID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX3N3ZWVwLkFkdmFuY2UodCk7XG4gICAgdGhpcy5tX3N3ZWVwLmMuU2V0Vih0aGlzLm1fc3dlZXAuYzApO1xuICAgIHRoaXMubV9zd2VlcC5hID0gdGhpcy5tX3N3ZWVwLmEwO1xuICAgIHRoaXMuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgfTtcblxuICByZXR1cm4gYjJCb2R5O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkJvZHkuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQm9keSwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJCb2R5ID0gQm94MkQuRHluYW1pY3MuYjJCb2R5O1xuXG5Cb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQm9keURlZi5wcm90b3R5cGUucG9zaXRpb24gPSBudWxsO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUubGluZWFyVmVsb2NpdHkgPSBudWxsO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUudXNlckRhdGEgPSBudWxsO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUuYW5nbGUgPSAwLjA7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5saW5lYXJWZWxvY2l0eSA9IG51bGw7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5hbmd1bGFyVmVsb2NpdHkgPSAwLjA7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5saW5lYXJEYW1waW5nID0gMC4wO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUuYW5ndWxhckRhbXBpbmcgPSAwLjA7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5hbGxvd1NsZWVwID0gdHJ1ZTtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmF3YWtlID0gdHJ1ZTtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmZpeGVkUm90YXRpb24gPSBmYWxzZTtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmJ1bGxldCA9IGZhbHNlO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUudHlwZSA9IGIyQm9keS5iMl9zdGF0aWNCb2R5O1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUuYWN0aXZlID0gdHJ1ZTtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmluZXJ0aWFTY2FsZSA9IDEuMDtcblxuICBmdW5jdGlvbiBiMkJvZHlEZWYoKSB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnBvc2l0aW9uLlNldCgwLjAsIDAuMCk7XG4gICAgdGhpcy5saW5lYXJWZWxvY2l0eSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxpbmVhclZlbG9jaXR5LlNldCgwLCAwKTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJCb2R5RGVmO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkJvZHlEZWYuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuQm94MkQuRHluYW1pY3MuYjJDb250YWN0RmlsdGVyID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkNvbnRhY3RGaWx0ZXIoKSB7fVxuXG4gIGIyQ29udGFjdEZpbHRlci5wcm90b3R5cGUuU2hvdWxkQ29sbGlkZSA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikge1xuICAgIHZhciBjb2xsaWRlLCBmaWx0ZXIxLCBmaWx0ZXIyO1xuICAgIGZpbHRlcjEgPSBmaXh0dXJlQS5HZXRGaWx0ZXJEYXRhKCk7XG4gICAgZmlsdGVyMiA9IGZpeHR1cmVCLkdldEZpbHRlckRhdGEoKTtcbiAgICBpZiAoZmlsdGVyMS5ncm91cEluZGV4ID09PSBmaWx0ZXIyLmdyb3VwSW5kZXggJiYgZmlsdGVyMS5ncm91cEluZGV4ICE9PSAwKSB7XG4gICAgICByZXR1cm4gZmlsdGVyMS5ncm91cEluZGV4ID4gMDtcbiAgICB9XG4gICAgY29sbGlkZSA9IChmaWx0ZXIxLm1hc2tCaXRzICYgZmlsdGVyMi5jYXRlZ29yeUJpdHMpICE9PSAwICYmIChmaWx0ZXIxLmNhdGVnb3J5Qml0cyAmIGZpbHRlcjIubWFza0JpdHMpICE9PSAwO1xuICAgIHJldHVybiBjb2xsaWRlO1xuICB9O1xuXG4gIGIyQ29udGFjdEZpbHRlci5wcm90b3R5cGUuUmF5Q29sbGlkZSA9IGZ1bmN0aW9uKHVzZXJEYXRhLCBmaXh0dXJlKSB7XG4gICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLlNob3VsZENvbGxpZGUoKHVzZXJEYXRhIGluc3RhbmNlb2YgYjJGaXh0dXJlID8gdXNlckRhdGEgOiBudWxsKSwgZml4dHVyZSk7XG4gIH07XG5cbiAgYjJDb250YWN0RmlsdGVyLmIyX2RlZmF1bHRGaWx0ZXIgPSBuZXcgYjJDb250YWN0RmlsdGVyKCk7XG5cbiAgcmV0dXJuIGIyQ29udGFjdEZpbHRlcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0RmlsdGVyLmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3IsIGIyU2V0dGluZ3M7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbkJveDJELkR5bmFtaWNzLmIyQ29udGFjdEltcHVsc2UgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyQ29udGFjdEltcHVsc2UoKSB7fVxuXG4gIGIyQ29udGFjdEltcHVsc2UucHJvdG90eXBlLm5vcm1hbEltcHVsc2VzID0gbnVsbDtcblxuICBiMkNvbnRhY3RJbXB1bHNlLnByb3RvdHlwZS50YW5nZW50SW1wdWxzZXMgPSBudWxsO1xuXG4gIGIyQ29udGFjdEltcHVsc2UuYjJDb250YWN0SW1wdWxzZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubm9ybWFsSW1wdWxzZXMgPSBuZXcgVmVjdG9yKGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICAgIHRoaXMudGFuZ2VudEltcHVsc2VzID0gbmV3IFZlY3RvcihiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKTtcbiAgfTtcblxuICByZXR1cm4gYjJDb250YWN0SW1wdWxzZTtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0SW1wdWxzZS5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RMaXN0ZW5lciA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJDb250YWN0TGlzdGVuZXIoKSB7fVxuXG4gIGIyQ29udGFjdExpc3RlbmVyLnByb3RvdHlwZS5CZWdpbkNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7fTtcblxuICBiMkNvbnRhY3RMaXN0ZW5lci5wcm90b3R5cGUuRW5kQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHt9O1xuXG4gIGIyQ29udGFjdExpc3RlbmVyLnByb3RvdHlwZS5QcmVTb2x2ZSA9IGZ1bmN0aW9uKGNvbnRhY3QsIG9sZE1hbmlmb2xkKSB7fTtcblxuICBiMkNvbnRhY3RMaXN0ZW5lci5wcm90b3R5cGUuUG9zdFNvbHZlID0gZnVuY3Rpb24oY29udGFjdCwgaW1wdWxzZSkge307XG5cbiAgYjJDb250YWN0TGlzdGVuZXIuYjJfZGVmYXVsdExpc3RlbmVyID0gbmV3IGIyQ29udGFjdExpc3RlbmVyKCk7XG5cbiAgcmV0dXJuIGIyQ29udGFjdExpc3RlbmVyO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RMaXN0ZW5lci5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0RmFjdG9yeSwgYjJDb250YWN0RmlsdGVyLCBiMkNvbnRhY3RMaXN0ZW5lciwgYjJDb250YWN0UG9pbnQsIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLCBiMkZpeHR1cmU7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJGaXh0dXJlID0gQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlO1xuXG5iMkNvbnRhY3RGaWx0ZXIgPSBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXI7XG5cbmIyQ29udGFjdExpc3RlbmVyID0gQm94MkQuRHluYW1pY3MuYjJDb250YWN0TGlzdGVuZXI7XG5cbmIyQ29udGFjdEZhY3RvcnkgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RGYWN0b3J5O1xuXG5iMkNvbnRhY3RQb2ludCA9IEJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RQb2ludDtcblxuYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UgPSBCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2U7XG5cbkJveDJELkR5bmFtaWNzLmIyQ29udGFjdE1hbmFnZXIgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdE1hbmFnZXIucHJvdG90eXBlLm1fd29ybGQgPSBudWxsO1xuXG4gIGIyQ29udGFjdE1hbmFnZXIucHJvdG90eXBlLm1fY29udGFjdENvdW50ID0gbnVsbDtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5tX2NvbnRhY3RGaWx0ZXIgPSBudWxsO1xuXG4gIGIyQ29udGFjdE1hbmFnZXIucHJvdG90eXBlLm1fY29udGFjdExpc3RlbmVyID0gbnVsbDtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5tX2NvbnRhY3RGYWN0b3J5ID0gbnVsbDtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5tX2Jyb2FkUGhhc2UgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdE1hbmFnZXIoKSB7XG4gICAgdGhpcy5tX3dvcmxkID0gbnVsbDtcbiAgICB0aGlzLm1fY29udGFjdENvdW50ID0gMDtcbiAgICB0aGlzLm1fY29udGFjdEZpbHRlciA9IGIyQ29udGFjdEZpbHRlci5iMl9kZWZhdWx0RmlsdGVyO1xuICAgIHRoaXMubV9jb250YWN0TGlzdGVuZXIgPSBiMkNvbnRhY3RMaXN0ZW5lci5iMl9kZWZhdWx0TGlzdGVuZXI7XG4gICAgdGhpcy5tX2NvbnRhY3RGYWN0b3J5ID0gbmV3IGIyQ29udGFjdEZhY3RvcnkodGhpcy5tX2FsbG9jYXRvcik7XG4gICAgdGhpcy5tX2Jyb2FkUGhhc2UgPSBuZXcgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5BZGRQYWlyID0gZnVuY3Rpb24ocHJveHlVc2VyRGF0YUEsIHByb3h5VXNlckRhdGFCKSB7XG4gICAgdmFyIGJvZHlBLCBib2R5QiwgYywgZWRnZSwgZkEsIGZCLCBmaXh0dXJlQSwgZml4dHVyZUI7XG4gICAgZml4dHVyZUEgPSAocHJveHlVc2VyRGF0YUEgaW5zdGFuY2VvZiBiMkZpeHR1cmUgPyBwcm94eVVzZXJEYXRhQSA6IG51bGwpO1xuICAgIGZpeHR1cmVCID0gKHByb3h5VXNlckRhdGFCIGluc3RhbmNlb2YgYjJGaXh0dXJlID8gcHJveHlVc2VyRGF0YUIgOiBudWxsKTtcbiAgICBib2R5QSA9IGZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBib2R5QiA9IGZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICBpZiAoYm9keUEgPT09IGJvZHlCKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkZ2UgPSBib2R5Qi5HZXRDb250YWN0TGlzdCgpO1xuICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICBpZiAoZWRnZS5vdGhlciA9PT0gYm9keUEpIHtcbiAgICAgICAgZkEgPSBlZGdlLmNvbnRhY3QuR2V0Rml4dHVyZUEoKTtcbiAgICAgICAgZkIgPSBlZGdlLmNvbnRhY3QuR2V0Rml4dHVyZUIoKTtcbiAgICAgICAgaWYgKGZBID09PSBmaXh0dXJlQSAmJiBmQiA9PT0gZml4dHVyZUIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZBID09PSBmaXh0dXJlQiAmJiBmQiA9PT0gZml4dHVyZUEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgfVxuICAgIGlmIChib2R5Qi5TaG91bGRDb2xsaWRlKGJvZHlBKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9jb250YWN0RmlsdGVyLlNob3VsZENvbGxpZGUoZml4dHVyZUEsIGZpeHR1cmVCKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYyA9IHRoaXMubV9jb250YWN0RmFjdG9yeS5DcmVhdGUoZml4dHVyZUEsIGZpeHR1cmVCKTtcbiAgICBmaXh0dXJlQSA9IGMuR2V0Rml4dHVyZUEoKTtcbiAgICBmaXh0dXJlQiA9IGMuR2V0Rml4dHVyZUIoKTtcbiAgICBib2R5QSA9IGZpeHR1cmVBLm1fYm9keTtcbiAgICBib2R5QiA9IGZpeHR1cmVCLm1fYm9keTtcbiAgICBjLm1fcHJldiA9IG51bGw7XG4gICAgYy5tX25leHQgPSB0aGlzLm1fd29ybGQubV9jb250YWN0TGlzdDtcbiAgICBpZiAodGhpcy5tX3dvcmxkLm1fY29udGFjdExpc3QgIT0gbnVsbCkge1xuICAgICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdExpc3QubV9wcmV2ID0gYztcbiAgICB9XG4gICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdExpc3QgPSBjO1xuICAgIGMubV9ub2RlQS5jb250YWN0ID0gYztcbiAgICBjLm1fbm9kZUEub3RoZXIgPSBib2R5QjtcbiAgICBjLm1fbm9kZUEucHJldiA9IG51bGw7XG4gICAgYy5tX25vZGVBLm5leHQgPSBib2R5QS5tX2NvbnRhY3RMaXN0O1xuICAgIGlmIChib2R5QS5tX2NvbnRhY3RMaXN0ICE9IG51bGwpIHtcbiAgICAgIGJvZHlBLm1fY29udGFjdExpc3QucHJldiA9IGMubV9ub2RlQTtcbiAgICB9XG4gICAgYm9keUEubV9jb250YWN0TGlzdCA9IGMubV9ub2RlQTtcbiAgICBjLm1fbm9kZUIuY29udGFjdCA9IGM7XG4gICAgYy5tX25vZGVCLm90aGVyID0gYm9keUE7XG4gICAgYy5tX25vZGVCLnByZXYgPSBudWxsO1xuICAgIGMubV9ub2RlQi5uZXh0ID0gYm9keUIubV9jb250YWN0TGlzdDtcbiAgICBpZiAoYm9keUIubV9jb250YWN0TGlzdCAhPSBudWxsKSB7XG4gICAgICBib2R5Qi5tX2NvbnRhY3RMaXN0LnByZXYgPSBjLm1fbm9kZUI7XG4gICAgfVxuICAgIGJvZHlCLm1fY29udGFjdExpc3QgPSBjLm1fbm9kZUI7XG4gICAgKyt0aGlzLm1fd29ybGQubV9jb250YWN0Q291bnQ7XG4gIH07XG5cbiAgYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUuRmluZE5ld0NvbnRhY3RzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tX2Jyb2FkUGhhc2UuVXBkYXRlUGFpcnMoQm94MkQuZ2VuZXJhdGVDYWxsYmFjayh0aGlzLCB0aGlzLkFkZFBhaXIpKTtcbiAgfTtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5EZXN0cm95ID0gZnVuY3Rpb24oYykge1xuICAgIHZhciBib2R5QSwgYm9keUIsIGZpeHR1cmVBLCBmaXh0dXJlQjtcbiAgICBmaXh0dXJlQSA9IGMuR2V0Rml4dHVyZUEoKTtcbiAgICBmaXh0dXJlQiA9IGMuR2V0Rml4dHVyZUIoKTtcbiAgICBib2R5QSA9IGZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBib2R5QiA9IGZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICBpZiAoYy5Jc1RvdWNoaW5nKCkpIHtcbiAgICAgIHRoaXMubV9jb250YWN0TGlzdGVuZXIuRW5kQ29udGFjdChjKTtcbiAgICB9XG4gICAgaWYgKGMubV9wcmV2KSB7XG4gICAgICBjLm1fcHJldi5tX25leHQgPSBjLm1fbmV4dDtcbiAgICB9XG4gICAgaWYgKGMubV9uZXh0KSB7XG4gICAgICBjLm1fbmV4dC5tX3ByZXYgPSBjLm1fcHJldjtcbiAgICB9XG4gICAgaWYgKGMgPT09IHRoaXMubV93b3JsZC5tX2NvbnRhY3RMaXN0KSB7XG4gICAgICB0aGlzLm1fd29ybGQubV9jb250YWN0TGlzdCA9IGMubV9uZXh0O1xuICAgIH1cbiAgICBpZiAoYy5tX25vZGVBLnByZXYpIHtcbiAgICAgIGMubV9ub2RlQS5wcmV2Lm5leHQgPSBjLm1fbm9kZUEubmV4dDtcbiAgICB9XG4gICAgaWYgKGMubV9ub2RlQS5uZXh0KSB7XG4gICAgICBjLm1fbm9kZUEubmV4dC5wcmV2ID0gYy5tX25vZGVBLnByZXY7XG4gICAgfVxuICAgIGlmIChjLm1fbm9kZUEgPT09IGJvZHlBLm1fY29udGFjdExpc3QpIHtcbiAgICAgIGJvZHlBLm1fY29udGFjdExpc3QgPSBjLm1fbm9kZUEubmV4dDtcbiAgICB9XG4gICAgaWYgKGMubV9ub2RlQi5wcmV2KSB7XG4gICAgICBjLm1fbm9kZUIucHJldi5uZXh0ID0gYy5tX25vZGVCLm5leHQ7XG4gICAgfVxuICAgIGlmIChjLm1fbm9kZUIubmV4dCkge1xuICAgICAgYy5tX25vZGVCLm5leHQucHJldiA9IGMubV9ub2RlQi5wcmV2O1xuICAgIH1cbiAgICBpZiAoYy5tX25vZGVCID09PSBib2R5Qi5tX2NvbnRhY3RMaXN0KSB7XG4gICAgICBib2R5Qi5tX2NvbnRhY3RMaXN0ID0gYy5tX25vZGVCLm5leHQ7XG4gICAgfVxuICAgIHRoaXMubV9jb250YWN0RmFjdG9yeS5EZXN0cm95KGMpO1xuICAgIC0tdGhpcy5tX2NvbnRhY3RDb3VudDtcbiAgfTtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5Db2xsaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvZHlBLCBib2R5QiwgYywgY051a2UsIGZpeHR1cmVBLCBmaXh0dXJlQiwgb3ZlcmxhcCwgcHJveHlBLCBwcm94eUI7XG4gICAgYyA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RMaXN0O1xuICAgIHdoaWxlIChjKSB7XG4gICAgICBmaXh0dXJlQSA9IGMuR2V0Rml4dHVyZUEoKTtcbiAgICAgIGZpeHR1cmVCID0gYy5HZXRGaXh0dXJlQigpO1xuICAgICAgYm9keUEgPSBmaXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgICBib2R5QiA9IGZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICAgIGlmIChib2R5QS5Jc0F3YWtlKCkgPT09IGZhbHNlICYmIGJvZHlCLklzQXdha2UoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYyA9IGMuR2V0TmV4dCgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChjLm1fZmxhZ3MgJiAweDAwNDApIHtcbiAgICAgICAgaWYgKGJvZHlCLlNob3VsZENvbGxpZGUoYm9keUEpID09PSBmYWxzZSkge1xuICAgICAgICAgIGNOdWtlID0gYztcbiAgICAgICAgICBjID0gY051a2UuR2V0TmV4dCgpO1xuICAgICAgICAgIHRoaXMuRGVzdHJveShjTnVrZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubV9jb250YWN0RmlsdGVyLlNob3VsZENvbGxpZGUoZml4dHVyZUEsIGZpeHR1cmVCKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjTnVrZSA9IGM7XG4gICAgICAgICAgYyA9IGNOdWtlLkdldE5leHQoKTtcbiAgICAgICAgICB0aGlzLkRlc3Ryb3koY051a2UpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGMubV9mbGFncyAmPSAweDAwNDA7XG4gICAgICB9XG4gICAgICBwcm94eUEgPSBmaXh0dXJlQS5tX3Byb3h5O1xuICAgICAgcHJveHlCID0gZml4dHVyZUIubV9wcm94eTtcbiAgICAgIG92ZXJsYXAgPSB0aGlzLm1fYnJvYWRQaGFzZS5UZXN0T3ZlcmxhcChwcm94eUEsIHByb3h5Qik7XG4gICAgICBpZiAob3ZlcmxhcCA9PT0gZmFsc2UpIHtcbiAgICAgICAgY051a2UgPSBjO1xuICAgICAgICBjID0gY051a2UuR2V0TmV4dCgpO1xuICAgICAgICB0aGlzLkRlc3Ryb3koY051a2UpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGMuVXBkYXRlKHRoaXMubV9jb250YWN0TGlzdGVuZXIpO1xuICAgICAgYyA9IGMuR2V0TmV4dCgpO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnNfZXZhbENQID0gbmV3IGIyQ29udGFjdFBvaW50KCk7XG5cbiAgcmV0dXJuIGIyQ29udGFjdE1hbmFnZXI7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udGFjdE1hbmFnZXIuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuQm94MkQuRHluYW1pY3MuYjJEZWJ1Z0RyYXcgPSAoZnVuY3Rpb24oKSB7XG4gIGIyRGVidWdEcmF3LmVfc2hhcGVCaXQgPSAweDAwMDE7XG5cbiAgYjJEZWJ1Z0RyYXcuZV9qb2ludEJpdCA9IDB4MDAwMjtcblxuICBiMkRlYnVnRHJhdy5lX2FhYmJCaXQgPSAweDAwMDQ7XG5cbiAgYjJEZWJ1Z0RyYXcuZV9wYWlyQml0ID0gMHgwMDA4O1xuXG4gIGIyRGVidWdEcmF3LmVfY2VudGVyT2ZNYXNzQml0ID0gMHgwMDEwO1xuXG4gIGIyRGVidWdEcmF3LmVfY29udHJvbGxlckJpdCA9IDB4MDAyMDtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUubV9kcmF3U2NhbGUgPSAxLjA7XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLm1fbGluZVRoaWNrbmVzcyA9IDEuMDtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUubV9hbHBoYSA9IDEuMDtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUubV9maWxsQWxwaGEgPSAxLjA7XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLm1feGZvcm1TY2FsZSA9IDEuMDtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUubV9kcmF3RmxhZ3MgPSAwO1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5tX2N0eCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJEZWJ1Z0RyYXcoKSB7XG4gICAgdGhpcy5tX3Nwcml0ZSA9IHtcbiAgICAgIGdyYXBoaWNzOiB7XG4gICAgICAgIGNsZWFyOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5tX2N0eC5jbGVhclJlY3QoMCwgMCwgX3RoaXMubV9jdHguY2FudmFzLndpZHRoLCBfdGhpcy5tX2N0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KSh0aGlzKVxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLl9jb2xvciA9IGZ1bmN0aW9uKGNvbG9yLCBhbHBoYSkge1xuICAgIHJldHVybiBcInJnYmEoXCIgKyAoKGNvbG9yICYgMHhGRjAwMDApID4+IDE2KSArIFwiLFwiICsgKChjb2xvciAmIDB4RkYwMCkgPj4gOCkgKyBcIixcIiArIChjb2xvciAmIDB4RkYpICsgXCIsXCIgKyBhbHBoYSArIFwiKVwiO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5TZXRGbGFncyA9IGZ1bmN0aW9uKGZsYWdzKSB7XG4gICAgaWYgKGZsYWdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZsYWdzID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2RyYXdGbGFncyA9IGZsYWdzO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5HZXRGbGFncyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZHJhd0ZsYWdzO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5BcHBlbmRGbGFncyA9IGZ1bmN0aW9uKGZsYWdzKSB7XG4gICAgaWYgKGZsYWdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZsYWdzID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2RyYXdGbGFncyB8PSBmbGFncztcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuQ2xlYXJGbGFncyA9IGZ1bmN0aW9uKGZsYWdzKSB7XG4gICAgaWYgKGZsYWdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZsYWdzID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2RyYXdGbGFncyAmPSB+ZmxhZ3M7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLlNldFNwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSkge1xuICAgIHRoaXMubV9jdHggPSBzcHJpdGU7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkdldFNwcml0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY3R4O1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5TZXREcmF3U2NhbGUgPSBmdW5jdGlvbihkcmF3U2NhbGUpIHtcbiAgICBpZiAoZHJhd1NjYWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRyYXdTY2FsZSA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9kcmF3U2NhbGUgPSBkcmF3U2NhbGU7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkdldERyYXdTY2FsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZHJhd1NjYWxlO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5TZXRMaW5lVGhpY2tuZXNzID0gZnVuY3Rpb24obGluZVRoaWNrbmVzcykge1xuICAgIGlmIChsaW5lVGhpY2tuZXNzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpbmVUaGlja25lc3MgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fbGluZVRoaWNrbmVzcyA9IGxpbmVUaGlja25lc3M7XG4gICAgdGhpcy5tX2N0eC5zdHJva2VXaWR0aCA9IGxpbmVUaGlja25lc3M7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkdldExpbmVUaGlja25lc3MgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xpbmVUaGlja25lc3M7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLlNldEFscGhhID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICBpZiAoYWxwaGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYWxwaGEgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fYWxwaGEgPSBhbHBoYTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuR2V0QWxwaGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2FscGhhO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5TZXRGaWxsQWxwaGEgPSBmdW5jdGlvbihhbHBoYSkge1xuICAgIGlmIChhbHBoYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBhbHBoYSA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9maWxsQWxwaGEgPSBhbHBoYTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuR2V0RmlsbEFscGhhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maWxsQWxwaGE7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLlNldFhGb3JtU2NhbGUgPSBmdW5jdGlvbih4Zm9ybVNjYWxlKSB7XG4gICAgaWYgKHhmb3JtU2NhbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgeGZvcm1TY2FsZSA9IDA7XG4gICAgfVxuICAgIHRoaXMubV94Zm9ybVNjYWxlID0geGZvcm1TY2FsZTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuR2V0WEZvcm1TY2FsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1feGZvcm1TY2FsZTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuRHJhd1BvbHlnb24gPSBmdW5jdGlvbih2ZXJ0aWNlcywgdmVydGV4Q291bnQsIGNvbG9yKSB7XG4gICAgdmFyIGRyYXdTY2FsZSwgaSwgcztcbiAgICBpZiAoIXZlcnRleENvdW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHMgPSB0aGlzLm1fY3R4O1xuICAgIGRyYXdTY2FsZSA9IHRoaXMubV9kcmF3U2NhbGU7XG4gICAgcy5iZWdpblBhdGgoKTtcbiAgICBzLnN0cm9rZVN0eWxlID0gdGhpcy5fY29sb3IoY29sb3IuY29sb3IsIHRoaXMubV9hbHBoYSk7XG4gICAgcy5tb3ZlVG8odmVydGljZXNbMF0ueCAqIGRyYXdTY2FsZSwgdmVydGljZXNbMF0ueSAqIGRyYXdTY2FsZSk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB2ZXJ0ZXhDb3VudCkge1xuICAgICAgcy5saW5lVG8odmVydGljZXNbaV0ueCAqIGRyYXdTY2FsZSwgdmVydGljZXNbaV0ueSAqIGRyYXdTY2FsZSk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHMubGluZVRvKHZlcnRpY2VzWzBdLnggKiBkcmF3U2NhbGUsIHZlcnRpY2VzWzBdLnkgKiBkcmF3U2NhbGUpO1xuICAgIHMuY2xvc2VQYXRoKCk7XG4gICAgcy5zdHJva2UoKTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuRHJhd1NvbGlkUG9seWdvbiA9IGZ1bmN0aW9uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCwgY29sb3IpIHtcbiAgICB2YXIgZHJhd1NjYWxlLCBpLCBzO1xuICAgIGlmICghdmVydGV4Q291bnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcyA9IHRoaXMubV9jdHg7XG4gICAgZHJhd1NjYWxlID0gdGhpcy5tX2RyYXdTY2FsZTtcbiAgICBzLmJlZ2luUGF0aCgpO1xuICAgIHMuc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcihjb2xvci5jb2xvciwgdGhpcy5tX2FscGhhKTtcbiAgICBzLmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9yKGNvbG9yLmNvbG9yLCB0aGlzLm1fZmlsbEFscGhhKTtcbiAgICBzLm1vdmVUbyh2ZXJ0aWNlc1swXS54ICogZHJhd1NjYWxlLCB2ZXJ0aWNlc1swXS55ICogZHJhd1NjYWxlKTtcbiAgICBpID0gMTtcbiAgICB3aGlsZSAoaSA8IHZlcnRleENvdW50KSB7XG4gICAgICBzLmxpbmVUbyh2ZXJ0aWNlc1tpXS54ICogZHJhd1NjYWxlLCB2ZXJ0aWNlc1tpXS55ICogZHJhd1NjYWxlKTtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgcy5saW5lVG8odmVydGljZXNbMF0ueCAqIGRyYXdTY2FsZSwgdmVydGljZXNbMF0ueSAqIGRyYXdTY2FsZSk7XG4gICAgcy5jbG9zZVBhdGgoKTtcbiAgICBzLmZpbGwoKTtcbiAgICBzLnN0cm9rZSgpO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5EcmF3Q2lyY2xlID0gZnVuY3Rpb24oY2VudGVyLCByYWRpdXMsIGNvbG9yKSB7XG4gICAgdmFyIGRyYXdTY2FsZSwgcztcbiAgICBpZiAoIXJhZGl1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzID0gdGhpcy5tX2N0eDtcbiAgICBkcmF3U2NhbGUgPSB0aGlzLm1fZHJhd1NjYWxlO1xuICAgIHMuYmVnaW5QYXRoKCk7XG4gICAgcy5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9yKGNvbG9yLmNvbG9yLCB0aGlzLm1fYWxwaGEpO1xuICAgIHMuYXJjKGNlbnRlci54ICogZHJhd1NjYWxlLCBjZW50ZXIueSAqIGRyYXdTY2FsZSwgcmFkaXVzICogZHJhd1NjYWxlLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgcy5jbG9zZVBhdGgoKTtcbiAgICBzLnN0cm9rZSgpO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5EcmF3U29saWRDaXJjbGUgPSBmdW5jdGlvbihjZW50ZXIsIHJhZGl1cywgYXhpcywgY29sb3IpIHtcbiAgICB2YXIgY3gsIGN5LCBkcmF3U2NhbGUsIHM7XG4gICAgaWYgKCFyYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcyA9IHRoaXMubV9jdHg7XG4gICAgZHJhd1NjYWxlID0gdGhpcy5tX2RyYXdTY2FsZTtcbiAgICBjeCA9IGNlbnRlci54ICogZHJhd1NjYWxlO1xuICAgIGN5ID0gY2VudGVyLnkgKiBkcmF3U2NhbGU7XG4gICAgcy5tb3ZlVG8oMCwgMCk7XG4gICAgcy5iZWdpblBhdGgoKTtcbiAgICBzLnN0cm9rZVN0eWxlID0gdGhpcy5fY29sb3IoY29sb3IuY29sb3IsIHRoaXMubV9hbHBoYSk7XG4gICAgcy5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcihjb2xvci5jb2xvciwgdGhpcy5tX2ZpbGxBbHBoYSk7XG4gICAgcy5hcmMoY3gsIGN5LCByYWRpdXMgKiBkcmF3U2NhbGUsIDAsIE1hdGguUEkgKiAyLCB0cnVlKTtcbiAgICBzLm1vdmVUbyhjeCwgY3kpO1xuICAgIHMubGluZVRvKChjZW50ZXIueCArIGF4aXMueCAqIHJhZGl1cykgKiBkcmF3U2NhbGUsIChjZW50ZXIueSArIGF4aXMueSAqIHJhZGl1cykgKiBkcmF3U2NhbGUpO1xuICAgIHMuY2xvc2VQYXRoKCk7XG4gICAgcy5maWxsKCk7XG4gICAgcy5zdHJva2UoKTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuRHJhd1NlZ21lbnQgPSBmdW5jdGlvbihwMSwgcDIsIGNvbG9yKSB7XG4gICAgdmFyIGRyYXdTY2FsZSwgcztcbiAgICBzID0gdGhpcy5tX2N0eDtcbiAgICBkcmF3U2NhbGUgPSB0aGlzLm1fZHJhd1NjYWxlO1xuICAgIHMuc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcihjb2xvci5jb2xvciwgdGhpcy5tX2FscGhhKTtcbiAgICBzLmJlZ2luUGF0aCgpO1xuICAgIHMubW92ZVRvKHAxLnggKiBkcmF3U2NhbGUsIHAxLnkgKiBkcmF3U2NhbGUpO1xuICAgIHMubGluZVRvKHAyLnggKiBkcmF3U2NhbGUsIHAyLnkgKiBkcmF3U2NhbGUpO1xuICAgIHMuY2xvc2VQYXRoKCk7XG4gICAgcy5zdHJva2UoKTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuRHJhd1RyYW5zZm9ybSA9IGZ1bmN0aW9uKHhmKSB7XG4gICAgdmFyIGRyYXdTY2FsZSwgcztcbiAgICBzID0gdGhpcy5tX2N0eDtcbiAgICBkcmF3U2NhbGUgPSB0aGlzLm1fZHJhd1NjYWxlO1xuICAgIHMuYmVnaW5QYXRoKCk7XG4gICAgcy5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9yKDB4ZmYwMDAwLCB0aGlzLm1fYWxwaGEpO1xuICAgIHMubW92ZVRvKHhmLnBvc2l0aW9uLnggKiBkcmF3U2NhbGUsIHhmLnBvc2l0aW9uLnkgKiBkcmF3U2NhbGUpO1xuICAgIHMubGluZVRvKCh4Zi5wb3NpdGlvbi54ICsgdGhpcy5tX3hmb3JtU2NhbGUgKiB4Zi5SLmNvbDEueCkgKiBkcmF3U2NhbGUsICh4Zi5wb3NpdGlvbi55ICsgdGhpcy5tX3hmb3JtU2NhbGUgKiB4Zi5SLmNvbDEueSkgKiBkcmF3U2NhbGUpO1xuICAgIHMuc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcigweGZmMDAsIHRoaXMubV9hbHBoYSk7XG4gICAgcy5tb3ZlVG8oeGYucG9zaXRpb24ueCAqIGRyYXdTY2FsZSwgeGYucG9zaXRpb24ueSAqIGRyYXdTY2FsZSk7XG4gICAgcy5saW5lVG8oKHhmLnBvc2l0aW9uLnggKyB0aGlzLm1feGZvcm1TY2FsZSAqIHhmLlIuY29sMi54KSAqIGRyYXdTY2FsZSwgKHhmLnBvc2l0aW9uLnkgKyB0aGlzLm1feGZvcm1TY2FsZSAqIHhmLlIuY29sMi55KSAqIGRyYXdTY2FsZSk7XG4gICAgcy5jbG9zZVBhdGgoKTtcbiAgICBzLnN0cm9rZSgpO1xuICB9O1xuXG4gIHJldHVybiBiMkRlYnVnRHJhdztcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJEZWJ1Z0RyYXcuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuQm94MkQuRHluYW1pY3MuYjJEZXN0cnVjdGlvbkxpc3RlbmVyID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkRlc3RydWN0aW9uTGlzdGVuZXIoKSB7fVxuXG4gIGIyRGVzdHJ1Y3Rpb25MaXN0ZW5lci5wcm90b3R5cGUuU2F5R29vZGJ5ZUpvaW50ID0gZnVuY3Rpb24oam9pbnQpIHt9O1xuXG4gIGIyRGVzdHJ1Y3Rpb25MaXN0ZW5lci5wcm90b3R5cGUuU2F5R29vZGJ5ZUZpeHR1cmUgPSBmdW5jdGlvbihmaXh0dXJlKSB7fTtcblxuICByZXR1cm4gYjJEZXN0cnVjdGlvbkxpc3RlbmVyO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkRlc3RydWN0aW9uTGlzdGVuZXIuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuQm94MkQuRHluYW1pY3MuYjJGaWx0ZXJEYXRhID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkZpbHRlckRhdGEoKSB7fVxuXG4gIGIyRmlsdGVyRGF0YS5wcm90b3R5cGUuY2F0ZWdvcnlCaXRzID0gMHgwMDAxO1xuXG4gIGIyRmlsdGVyRGF0YS5wcm90b3R5cGUubWFza0JpdHMgPSAweEZGRkY7XG5cbiAgYjJGaWx0ZXJEYXRhLnByb3RvdHlwZS5ncm91cEluZGV4ID0gMDtcblxuICBiMkZpbHRlckRhdGEucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29weTtcbiAgICBjb3B5ID0gbmV3IGIyRmlsdGVyRGF0YSgpO1xuICAgIGNvcHkuY2F0ZWdvcnlCaXRzID0gdGhpcy5jYXRlZ29yeUJpdHM7XG4gICAgY29weS5tYXNrQml0cyA9IHRoaXMubWFza0JpdHM7XG4gICAgY29weS5ncm91cEluZGV4ID0gdGhpcy5ncm91cEluZGV4O1xuICAgIHJldHVybiBjb3B5O1xuICB9O1xuXG4gIHJldHVybiBiMkZpbHRlckRhdGE7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRmlsdGVyRGF0YS5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJBQUJCLCBiMkZpbHRlckRhdGEsIGIyTWFzc0RhdGEsIGIyTWF0aCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyTWF0aCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkZpbHRlckRhdGEgPSBCb3gyRC5EeW5hbWljcy5iMkZpbHRlckRhdGE7XG5cbmIyQUFCQiA9IEJveDJELkNvbGxpc2lvbi5iMkFBQkI7XG5cbmIyTWFzc0RhdGEgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyTWFzc0RhdGE7XG5cbkJveDJELkR5bmFtaWNzLmIyRml4dHVyZSA9IChmdW5jdGlvbigpIHtcbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX2ZpbHRlciA9IG51bGw7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX3NoYXBlID0gbnVsbDtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLm1faXNTZW5zb3IgPSBmYWxzZTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLm1fYm9keSA9IG51bGw7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX25leHQgPSBudWxsO1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV91c2VyRGF0YSA9IG51bGw7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX2RlbnNpdHkgPSAwLjA7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX2ZyaWN0aW9uID0gMC4wO1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV9yZXN0aXR1dGlvbiA9IDAuMDtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLm1fYWFiYiA9IG51bGw7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX3Byb3h5ID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkZpeHR1cmUoKSB7XG4gICAgdGhpcy5tX2ZpbHRlciA9IG5ldyBiMkZpbHRlckRhdGEoKTtcbiAgICB0aGlzLm1fYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgfVxuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuR2V0VHlwZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fc2hhcGUuR2V0VHlwZSgpO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuR2V0U2hhcGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3NoYXBlO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuU2V0U2Vuc29yID0gZnVuY3Rpb24oc2Vuc29yKSB7XG4gICAgdmFyIGNvbnRhY3QsIGVkZ2UsIGZpeHR1cmVBLCBmaXh0dXJlQjtcbiAgICBpZiAodGhpcy5tX2lzU2Vuc29yID09PSBzZW5zb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tX2lzU2Vuc29yID0gc2Vuc29yO1xuICAgIGlmICh0aGlzLm1fYm9keSA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkZ2UgPSB0aGlzLm1fYm9keS5HZXRDb250YWN0TGlzdCgpO1xuICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICBjb250YWN0ID0gZWRnZS5jb250YWN0O1xuICAgICAgZml4dHVyZUEgPSBjb250YWN0LkdldEZpeHR1cmVBKCk7XG4gICAgICBmaXh0dXJlQiA9IGNvbnRhY3QuR2V0Rml4dHVyZUIoKTtcbiAgICAgIGlmIChmaXh0dXJlQSA9PT0gdGhpcyB8fCBmaXh0dXJlQiA9PT0gdGhpcykge1xuICAgICAgICBjb250YWN0LlNldFNlbnNvcihmaXh0dXJlQS5Jc1NlbnNvcigpIHx8IGZpeHR1cmVCLklzU2Vuc29yKCkpO1xuICAgICAgfVxuICAgICAgZWRnZSA9IGVkZ2UubmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5Jc1NlbnNvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1faXNTZW5zb3I7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5TZXRGaWx0ZXJEYXRhID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgdmFyIGNvbnRhY3QsIGVkZ2UsIGZpeHR1cmVBLCBmaXh0dXJlQjtcbiAgICB0aGlzLm1fZmlsdGVyID0gZmlsdGVyLkNvcHkoKTtcbiAgICBpZiAodGhpcy5tX2JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWRnZSA9IHRoaXMubV9ib2R5LkdldENvbnRhY3RMaXN0KCk7XG4gICAgd2hpbGUgKGVkZ2UpIHtcbiAgICAgIGNvbnRhY3QgPSBlZGdlLmNvbnRhY3Q7XG4gICAgICBmaXh0dXJlQSA9IGNvbnRhY3QuR2V0Rml4dHVyZUEoKTtcbiAgICAgIGZpeHR1cmVCID0gY29udGFjdC5HZXRGaXh0dXJlQigpO1xuICAgICAgaWYgKGZpeHR1cmVBID09PSB0aGlzIHx8IGZpeHR1cmVCID09PSB0aGlzKSB7XG4gICAgICAgIGNvbnRhY3QuRmxhZ0ZvckZpbHRlcmluZygpO1xuICAgICAgfVxuICAgICAgZWRnZSA9IGVkZ2UubmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5HZXRGaWx0ZXJEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maWx0ZXIuQ29weSgpO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuR2V0Qm9keSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldE5leHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX25leHQ7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5HZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdXNlckRhdGE7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5TZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLlRlc3RQb2ludCA9IGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gdGhpcy5tX3NoYXBlLlRlc3RQb2ludCh0aGlzLm1fYm9keS5HZXRUcmFuc2Zvcm0oKSwgcCk7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24ob3V0cHV0LCBpbnB1dCkge1xuICAgIHJldHVybiB0aGlzLm1fc2hhcGUuUmF5Q2FzdChvdXRwdXQsIGlucHV0LCB0aGlzLm1fYm9keS5HZXRUcmFuc2Zvcm0oKSk7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5HZXRNYXNzRGF0YSA9IGZ1bmN0aW9uKG1hc3NEYXRhKSB7XG4gICAgaWYgKG1hc3NEYXRhID09PSB2b2lkIDApIHtcbiAgICAgIG1hc3NEYXRhID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG1hc3NEYXRhID09IG51bGwpIHtcbiAgICAgIG1hc3NEYXRhID0gbmV3IGIyTWFzc0RhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5tX3NoYXBlLkNvbXB1dGVNYXNzKG1hc3NEYXRhLCB0aGlzLm1fZGVuc2l0eSk7XG4gICAgcmV0dXJuIG1hc3NEYXRhO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuU2V0RGVuc2l0eSA9IGZ1bmN0aW9uKGRlbnNpdHkpIHtcbiAgICBpZiAoZGVuc2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZW5zaXR5ID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2RlbnNpdHkgPSBkZW5zaXR5O1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuR2V0RGVuc2l0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZGVuc2l0eTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldEZyaWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9mcmljdGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLlNldEZyaWN0aW9uID0gZnVuY3Rpb24oZnJpY3Rpb24pIHtcbiAgICBpZiAoZnJpY3Rpb24gPT09IHZvaWQgMCkge1xuICAgICAgZnJpY3Rpb24gPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fZnJpY3Rpb24gPSBmcmljdGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldFJlc3RpdHV0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9yZXN0aXR1dGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLlNldFJlc3RpdHV0aW9uID0gZnVuY3Rpb24ocmVzdGl0dXRpb24pIHtcbiAgICBpZiAocmVzdGl0dXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgcmVzdGl0dXRpb24gPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSByZXN0aXR1dGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldEFBQkIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2FhYmI7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5DcmVhdGUgPSBmdW5jdGlvbihib2R5LCB4ZiwgZGVmKSB7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gZGVmLnVzZXJEYXRhO1xuICAgIHRoaXMubV9mcmljdGlvbiA9IGRlZi5mcmljdGlvbjtcbiAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSBkZWYucmVzdGl0dXRpb247XG4gICAgdGhpcy5tX2JvZHkgPSBib2R5O1xuICAgIHRoaXMubV9uZXh0ID0gbnVsbDtcbiAgICB0aGlzLm1fZmlsdGVyID0gZGVmLmZpbHRlci5Db3B5KCk7XG4gICAgdGhpcy5tX2lzU2Vuc29yID0gZGVmLmlzU2Vuc29yO1xuICAgIHRoaXMubV9zaGFwZSA9IGRlZi5zaGFwZS5Db3B5KCk7XG4gICAgdGhpcy5tX2RlbnNpdHkgPSBkZWYuZGVuc2l0eTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fc2hhcGUgPSBudWxsO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuQ3JlYXRlUHJveHkgPSBmdW5jdGlvbihicm9hZFBoYXNlLCB4Zikge1xuICAgIHRoaXMubV9zaGFwZS5Db21wdXRlQUFCQih0aGlzLm1fYWFiYiwgeGYpO1xuICAgIHRoaXMubV9wcm94eSA9IGJyb2FkUGhhc2UuQ3JlYXRlUHJveHkodGhpcy5tX2FhYmIsIHRoaXMpO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuRGVzdHJveVByb3h5ID0gZnVuY3Rpb24oYnJvYWRQaGFzZSkge1xuICAgIGlmICh0aGlzLm1fcHJveHkgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBicm9hZFBoYXNlLkRlc3Ryb3lQcm94eSh0aGlzLm1fcHJveHkpO1xuICAgIHRoaXMubV9wcm94eSA9IG51bGw7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5TeW5jaHJvbml6ZSA9IGZ1bmN0aW9uKGJyb2FkUGhhc2UsIHRyYW5zZm9ybTEsIHRyYW5zZm9ybTIpIHtcbiAgICB2YXIgYWFiYjEsIGFhYmIyLCBkaXNwbGFjZW1lbnQ7XG4gICAgaWYgKCF0aGlzLm1fcHJveHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWFiYjEgPSBuZXcgYjJBQUJCKCk7XG4gICAgYWFiYjIgPSBuZXcgYjJBQUJCKCk7XG4gICAgdGhpcy5tX3NoYXBlLkNvbXB1dGVBQUJCKGFhYmIxLCB0cmFuc2Zvcm0xKTtcbiAgICB0aGlzLm1fc2hhcGUuQ29tcHV0ZUFBQkIoYWFiYjIsIHRyYW5zZm9ybTIpO1xuICAgIHRoaXMubV9hYWJiLkNvbWJpbmUoYWFiYjEsIGFhYmIyKTtcbiAgICBkaXNwbGFjZW1lbnQgPSBiMk1hdGguU3VidHJhY3RWVih0cmFuc2Zvcm0yLnBvc2l0aW9uLCB0cmFuc2Zvcm0xLnBvc2l0aW9uKTtcbiAgICBicm9hZFBoYXNlLk1vdmVQcm94eSh0aGlzLm1fcHJveHksIHRoaXMubV9hYWJiLCBkaXNwbGFjZW1lbnQpO1xuICB9O1xuXG4gIHJldHVybiBiMkZpeHR1cmU7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRml4dHVyZS5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJGaWx0ZXJEYXRhO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyRmlsdGVyRGF0YSA9IEJveDJELkR5bmFtaWNzLmIyRmlsdGVyRGF0YTtcblxuQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlRGVmID0gKGZ1bmN0aW9uKCkge1xuICBiMkZpeHR1cmVEZWYucHJvdG90eXBlLnNoYXBlID0gbnVsbDtcblxuICBiMkZpeHR1cmVEZWYucHJvdG90eXBlLnVzZXJEYXRhID0gbnVsbDtcblxuICBiMkZpeHR1cmVEZWYucHJvdG90eXBlLmZyaWN0aW9uID0gMC4yO1xuXG4gIGIyRml4dHVyZURlZi5wcm90b3R5cGUucmVzdGl0dXRpb24gPSAwLjA7XG5cbiAgYjJGaXh0dXJlRGVmLnByb3RvdHlwZS5kZW5zaXR5ID0gMC4wO1xuXG4gIGIyRml4dHVyZURlZi5wcm90b3R5cGUuaXNTZW5zb3IgPSBmYWxzZTtcblxuICBiMkZpeHR1cmVEZWYucHJvdG90eXBlLmZpbHRlciA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJGaXh0dXJlRGVmKCkge1xuICAgIHRoaXMuZmlsdGVyID0gbmV3IGIyRmlsdGVyRGF0YSgpO1xuICAgIHRoaXMuZmlsdGVyLmNhdGVnb3J5Qml0cyA9IDB4MDAwMTtcbiAgICB0aGlzLmZpbHRlci5tYXNrQml0cyA9IDB4RkZGRjtcbiAgICB0aGlzLmZpbHRlci5ncm91cEluZGV4ID0gMDtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJGaXh0dXJlRGVmO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkZpeHR1cmVEZWYuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQm9keSwgYjJDb250YWN0SW1wdWxzZSwgYjJNYXRoLCBiMlNldHRpbmdzO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMkNvbnRhY3RJbXB1bHNlID0gQm94MkQuRHluYW1pY3MuYjJDb250YWN0SW1wdWxzZTtcblxuYjJCb2R5ID0gQm94MkQuRHluYW1pY3MuYjJCb2R5O1xuXG5Cb3gyRC5EeW5hbWljcy5iMklzbGFuZCA9IChmdW5jdGlvbigpIHtcbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fYm9kaWVzID0gbnVsbDtcblxuICBiMklzbGFuZC5wcm90b3R5cGUubV9jb250YWN0cyA9IG51bGw7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fam9pbnRzID0gbnVsbDtcblxuICBiMklzbGFuZC5wcm90b3R5cGUubV9ib2R5Q2FwYWNpdHkgPSAwO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2NvbnRhY3RDYXBhY2l0eSA9IDA7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fam9pbnRDYXBhY2l0eSA9IDA7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fYm9keUNvdW50ID0gMDtcblxuICBiMklzbGFuZC5wcm90b3R5cGUubV9jb250YWN0Q291bnQgPSAwO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2pvaW50Q291bnQgPSAwO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2FsbG9jYXRvciA9IG51bGw7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fbGlzdGVuZXIgPSBudWxsO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2NvbnRhY3RTb2x2ZXIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIySXNsYW5kKCkge1xuICAgIHRoaXMubV9ib2RpZXMgPSBuZXcgQXJyYXkoKTtcbiAgICB0aGlzLm1fY29udGFjdHMgPSBuZXcgQXJyYXkoKTtcbiAgICB0aGlzLm1fam9pbnRzID0gbmV3IEFycmF5KCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihib2R5Q2FwYWNpdHksIGNvbnRhY3RDYXBhY2l0eSwgam9pbnRDYXBhY2l0eSwgYWxsb2NhdG9yLCBsaXN0ZW5lciwgY29udGFjdFNvbHZlcikge1xuICAgIHZhciBpO1xuICAgIGlmIChib2R5Q2FwYWNpdHkgPT09IHZvaWQgMCkge1xuICAgICAgYm9keUNhcGFjaXR5ID0gMDtcbiAgICB9XG4gICAgaWYgKGNvbnRhY3RDYXBhY2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBjb250YWN0Q2FwYWNpdHkgPSAwO1xuICAgIH1cbiAgICBpZiAoam9pbnRDYXBhY2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBqb2ludENhcGFjaXR5ID0gMDtcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgdGhpcy5tX2JvZHlDYXBhY2l0eSA9IGJvZHlDYXBhY2l0eTtcbiAgICB0aGlzLm1fY29udGFjdENhcGFjaXR5ID0gY29udGFjdENhcGFjaXR5O1xuICAgIHRoaXMubV9qb2ludENhcGFjaXR5ID0gam9pbnRDYXBhY2l0eTtcbiAgICB0aGlzLm1fYm9keUNvdW50ID0gMDtcbiAgICB0aGlzLm1fY29udGFjdENvdW50ID0gMDtcbiAgICB0aGlzLm1fam9pbnRDb3VudCA9IDA7XG4gICAgdGhpcy5tX2FsbG9jYXRvciA9IGFsbG9jYXRvcjtcbiAgICB0aGlzLm1fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB0aGlzLm1fY29udGFjdFNvbHZlciA9IGNvbnRhY3RTb2x2ZXI7XG4gICAgaSA9IHRoaXMubV9ib2RpZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpIDwgYm9keUNhcGFjaXR5KSB7XG4gICAgICB0aGlzLm1fYm9kaWVzW2ldID0gbnVsbDtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgaSA9IHRoaXMubV9jb250YWN0cy5sZW5ndGg7XG4gICAgd2hpbGUgKGkgPCBjb250YWN0Q2FwYWNpdHkpIHtcbiAgICAgIHRoaXMubV9jb250YWN0c1tpXSA9IG51bGw7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGkgPSB0aGlzLm1fam9pbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoaSA8IGpvaW50Q2FwYWNpdHkpIHtcbiAgICAgIHRoaXMubV9qb2ludHNbaV0gPSBudWxsO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfTtcblxuICBiMklzbGFuZC5wcm90b3R5cGUuQ2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fYm9keUNvdW50ID0gMDtcbiAgICB0aGlzLm1fY29udGFjdENvdW50ID0gMDtcbiAgICB0aGlzLm1fam9pbnRDb3VudCA9IDA7XG4gIH07XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLlNvbHZlID0gZnVuY3Rpb24oc3RlcCwgZ3Jhdml0eSwgYWxsb3dTbGVlcCkge1xuICAgIHZhciBhbmdUb2xTcXIsIGIsIGNvbnRhY3RTb2x2ZXIsIGNvbnRhY3RzT2theSwgaSwgaiwgam9pbnQsIGpvaW50T2theSwgam9pbnRzT2theSwgbGluVG9sU3FyLCBtaW5TbGVlcFRpbWUsIHJvdGF0aW9uLCB0cmFuc2xhdGlvblgsIHRyYW5zbGF0aW9uWTtcbiAgICBpID0gMDtcbiAgICBqID0gMDtcbiAgICBiID0gdm9pZCAwO1xuICAgIGpvaW50ID0gdm9pZCAwO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2JvZHlDb3VudCkge1xuICAgICAgYiA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBpZiAoYi5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGIubV9saW5lYXJWZWxvY2l0eS54ICs9IHN0ZXAuZHQgKiAoZ3Jhdml0eS54ICsgYi5tX2ludk1hc3MgKiBiLm1fZm9yY2UueCk7XG4gICAgICBiLm1fbGluZWFyVmVsb2NpdHkueSArPSBzdGVwLmR0ICogKGdyYXZpdHkueSArIGIubV9pbnZNYXNzICogYi5tX2ZvcmNlLnkpO1xuICAgICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBzdGVwLmR0ICogYi5tX2ludkkgKiBiLm1fdG9ycXVlO1xuICAgICAgYi5tX2xpbmVhclZlbG9jaXR5Lk11bHRpcGx5KGIyTWF0aC5DbGFtcCgxLjAgLSBzdGVwLmR0ICogYi5tX2xpbmVhckRhbXBpbmcsIDAuMCwgMS4wKSk7XG4gICAgICBiLm1fYW5ndWxhclZlbG9jaXR5ICo9IGIyTWF0aC5DbGFtcCgxLjAgLSBzdGVwLmR0ICogYi5tX2FuZ3VsYXJEYW1waW5nLCAwLjAsIDEuMCk7XG4gICAgICArK2k7XG4gICAgfVxuICAgIHRoaXMubV9jb250YWN0U29sdmVyLkluaXRpYWxpemUoc3RlcCwgdGhpcy5tX2NvbnRhY3RzLCB0aGlzLm1fY29udGFjdENvdW50LCB0aGlzLm1fYWxsb2NhdG9yKTtcbiAgICBjb250YWN0U29sdmVyID0gdGhpcy5tX2NvbnRhY3RTb2x2ZXI7XG4gICAgY29udGFjdFNvbHZlci5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyhzdGVwKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICBqb2ludCA9IHRoaXMubV9qb2ludHNbaV07XG4gICAgICBqb2ludC5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyhzdGVwKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBzdGVwLnZlbG9jaXR5SXRlcmF0aW9ucykge1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICAgIGpvaW50ID0gdGhpcy5tX2pvaW50c1tqXTtcbiAgICAgICAgam9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKHN0ZXApO1xuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgICBjb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cygpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICBqb2ludCA9IHRoaXMubV9qb2ludHNbaV07XG4gICAgICBqb2ludC5GaW5hbGl6ZVZlbG9jaXR5Q29uc3RyYWludHMoKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgY29udGFjdFNvbHZlci5GaW5hbGl6ZVZlbG9jaXR5Q29uc3RyYWludHMoKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9ib2R5Q291bnQpIHtcbiAgICAgIGIgPSB0aGlzLm1fYm9kaWVzW2ldO1xuICAgICAgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRyYW5zbGF0aW9uWCA9IHN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueDtcbiAgICAgIHRyYW5zbGF0aW9uWSA9IHN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueTtcbiAgICAgIGlmICgodHJhbnNsYXRpb25YICogdHJhbnNsYXRpb25YICsgdHJhbnNsYXRpb25ZICogdHJhbnNsYXRpb25ZKSA+IGIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb25TcXVhcmVkKSB7XG4gICAgICAgIGIubV9saW5lYXJWZWxvY2l0eS5Ob3JtYWxpemUoKTtcbiAgICAgICAgYi5tX2xpbmVhclZlbG9jaXR5LnggKj0gYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvbiAqIHN0ZXAuaW52X2R0O1xuICAgICAgICBiLm1fbGluZWFyVmVsb2NpdHkueSAqPSBiMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uICogc3RlcC5pbnZfZHQ7XG4gICAgICB9XG4gICAgICByb3RhdGlvbiA9IHN0ZXAuZHQgKiBiLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgaWYgKHJvdGF0aW9uICogcm90YXRpb24gPiBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uU3F1YXJlZCkge1xuICAgICAgICBpZiAoYi5tX2FuZ3VsYXJWZWxvY2l0eSA8IDAuMCkge1xuICAgICAgICAgIGIubV9hbmd1bGFyVmVsb2NpdHkgPSAtYjJTZXR0aW5ncy5iMl9tYXhSb3RhdGlvbiAqIHN0ZXAuaW52X2R0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGIubV9hbmd1bGFyVmVsb2NpdHkgPSBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uICogc3RlcC5pbnZfZHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGIubV9zd2VlcC5jMC5TZXRWKGIubV9zd2VlcC5jKTtcbiAgICAgIGIubV9zd2VlcC5hMCA9IGIubV9zd2VlcC5hO1xuICAgICAgYi5tX3N3ZWVwLmMueCArPSBzdGVwLmR0ICogYi5tX2xpbmVhclZlbG9jaXR5Lng7XG4gICAgICBiLm1fc3dlZXAuYy55ICs9IHN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueTtcbiAgICAgIGIubV9zd2VlcC5hICs9IHN0ZXAuZHQgKiBiLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgYi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHN0ZXAucG9zaXRpb25JdGVyYXRpb25zKSB7XG4gICAgICBjb250YWN0c09rYXkgPSBjb250YWN0U29sdmVyLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhiMlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUpO1xuICAgICAgam9pbnRzT2theSA9IHRydWU7XG4gICAgICBqID0gMDtcbiAgICAgIHdoaWxlIChqIDwgdGhpcy5tX2pvaW50Q291bnQpIHtcbiAgICAgICAgam9pbnQgPSB0aGlzLm1fam9pbnRzW2pdO1xuICAgICAgICBqb2ludE9rYXkgPSBqb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMoYjJTZXR0aW5ncy5iMl9jb250YWN0QmF1bWdhcnRlKTtcbiAgICAgICAgam9pbnRzT2theSA9IGpvaW50c09rYXkgJiYgam9pbnRPa2F5O1xuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgICBpZiAoY29udGFjdHNPa2F5ICYmIGpvaW50c09rYXkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHRoaXMuUmVwb3J0KGNvbnRhY3RTb2x2ZXIubV9jb25zdHJhaW50cyk7XG4gICAgaWYgKGFsbG93U2xlZXApIHtcbiAgICAgIG1pblNsZWVwVGltZSA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICBsaW5Ub2xTcXIgPSBiMlNldHRpbmdzLmIyX2xpbmVhclNsZWVwVG9sZXJhbmNlICogYjJTZXR0aW5ncy5iMl9saW5lYXJTbGVlcFRvbGVyYW5jZTtcbiAgICAgIGFuZ1RvbFNxciA9IGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsZWVwVG9sZXJhbmNlICogYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xlZXBUb2xlcmFuY2U7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgdGhpcy5tX2JvZHlDb3VudCkge1xuICAgICAgICBiID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgICAgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoYi5tX2ZsYWdzICYgYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWcpID09PSAwKSB7XG4gICAgICAgICAgYi5tX3NsZWVwVGltZSA9IDAuMDtcbiAgICAgICAgICBtaW5TbGVlcFRpbWUgPSAwLjA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChiLm1fZmxhZ3MgJiBiMkJvZHkuZV9hbGxvd1NsZWVwRmxhZykgPT09IDAgfHwgYi5tX2FuZ3VsYXJWZWxvY2l0eSAqIGIubV9hbmd1bGFyVmVsb2NpdHkgPiBhbmdUb2xTcXIgfHwgYjJNYXRoLkRvdChiLm1fbGluZWFyVmVsb2NpdHksIGIubV9saW5lYXJWZWxvY2l0eSkgPiBsaW5Ub2xTcXIpIHtcbiAgICAgICAgICBiLm1fc2xlZXBUaW1lID0gMC4wO1xuICAgICAgICAgIG1pblNsZWVwVGltZSA9IDAuMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiLm1fc2xlZXBUaW1lICs9IHN0ZXAuZHQ7XG4gICAgICAgICAgbWluU2xlZXBUaW1lID0gYjJNYXRoLk1pbihtaW5TbGVlcFRpbWUsIGIubV9zbGVlcFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgICsraTtcbiAgICAgIH1cbiAgICAgIGlmIChtaW5TbGVlcFRpbWUgPj0gYjJTZXR0aW5ncy5iMl90aW1lVG9TbGVlcCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLm1fYm9keUNvdW50KSB7XG4gICAgICAgICAgYiA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICAgICAgYi5TZXRBd2FrZShmYWxzZSk7XG4gICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5Tb2x2ZVRPSSA9IGZ1bmN0aW9uKHN1YlN0ZXApIHtcbiAgICB2YXIgYiwgY29udGFjdFNvbHZlciwgY29udGFjdHNPa2F5LCBpLCBqLCBqb2ludE9rYXksIGpvaW50c09rYXksIGtfdG9pQmF1bWdhcnRlLCByb3RhdGlvbiwgdHJhbnNsYXRpb25YLCB0cmFuc2xhdGlvblk7XG4gICAgaSA9IDA7XG4gICAgaiA9IDA7XG4gICAgdGhpcy5tX2NvbnRhY3RTb2x2ZXIuSW5pdGlhbGl6ZShzdWJTdGVwLCB0aGlzLm1fY29udGFjdHMsIHRoaXMubV9jb250YWN0Q291bnQsIHRoaXMubV9hbGxvY2F0b3IpO1xuICAgIGNvbnRhY3RTb2x2ZXIgPSB0aGlzLm1fY29udGFjdFNvbHZlcjtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICB0aGlzLm1fam9pbnRzW2ldLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKHN1YlN0ZXApO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHN1YlN0ZXAudmVsb2NpdHlJdGVyYXRpb25zKSB7XG4gICAgICBjb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cygpO1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICAgIHRoaXMubV9qb2ludHNbal0uU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKHN1YlN0ZXApO1xuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2JvZHlDb3VudCkge1xuICAgICAgYiA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdHJhbnNsYXRpb25YID0gc3ViU3RlcC5kdCAqIGIubV9saW5lYXJWZWxvY2l0eS54O1xuICAgICAgdHJhbnNsYXRpb25ZID0gc3ViU3RlcC5kdCAqIGIubV9saW5lYXJWZWxvY2l0eS55O1xuICAgICAgaWYgKCh0cmFuc2xhdGlvblggKiB0cmFuc2xhdGlvblggKyB0cmFuc2xhdGlvblkgKiB0cmFuc2xhdGlvblkpID4gYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvblNxdWFyZWQpIHtcbiAgICAgICAgYi5tX2xpbmVhclZlbG9jaXR5Lk5vcm1hbGl6ZSgpO1xuICAgICAgICBiLm1fbGluZWFyVmVsb2NpdHkueCAqPSBiMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uICogc3ViU3RlcC5pbnZfZHQ7XG4gICAgICAgIGIubV9saW5lYXJWZWxvY2l0eS55ICo9IGIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb24gKiBzdWJTdGVwLmludl9kdDtcbiAgICAgIH1cbiAgICAgIHJvdGF0aW9uID0gc3ViU3RlcC5kdCAqIGIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICBpZiAocm90YXRpb24gKiByb3RhdGlvbiA+IGIyU2V0dGluZ3MuYjJfbWF4Um90YXRpb25TcXVhcmVkKSB7XG4gICAgICAgIGlmIChiLm1fYW5ndWxhclZlbG9jaXR5IDwgMC4wKSB7XG4gICAgICAgICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSA9IC1iMlNldHRpbmdzLmIyX21heFJvdGF0aW9uICogc3ViU3RlcC5pbnZfZHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSA9IGIyU2V0dGluZ3MuYjJfbWF4Um90YXRpb24gKiBzdWJTdGVwLmludl9kdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYi5tX3N3ZWVwLmMwLlNldFYoYi5tX3N3ZWVwLmMpO1xuICAgICAgYi5tX3N3ZWVwLmEwID0gYi5tX3N3ZWVwLmE7XG4gICAgICBiLm1fc3dlZXAuYy54ICs9IHN1YlN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueDtcbiAgICAgIGIubV9zd2VlcC5jLnkgKz0gc3ViU3RlcC5kdCAqIGIubV9saW5lYXJWZWxvY2l0eS55O1xuICAgICAgYi5tX3N3ZWVwLmEgKz0gc3ViU3RlcC5kdCAqIGIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICBiLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICArK2k7XG4gICAgfVxuICAgIGtfdG9pQmF1bWdhcnRlID0gMC43NTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHN1YlN0ZXAucG9zaXRpb25JdGVyYXRpb25zKSB7XG4gICAgICBjb250YWN0c09rYXkgPSBjb250YWN0U29sdmVyLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhrX3RvaUJhdW1nYXJ0ZSk7XG4gICAgICBqb2ludHNPa2F5ID0gdHJ1ZTtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCB0aGlzLm1fam9pbnRDb3VudCkge1xuICAgICAgICBqb2ludE9rYXkgPSB0aGlzLm1fam9pbnRzW2pdLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhiMlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUpO1xuICAgICAgICBqb2ludHNPa2F5ID0gam9pbnRzT2theSAmJiBqb2ludE9rYXk7XG4gICAgICAgICsrajtcbiAgICAgIH1cbiAgICAgIGlmIChjb250YWN0c09rYXkgJiYgam9pbnRzT2theSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgdGhpcy5SZXBvcnQoY29udGFjdFNvbHZlci5tX2NvbnN0cmFpbnRzKTtcbiAgfTtcblxuICBiMklzbGFuZC5wcm90b3R5cGUuUmVwb3J0ID0gZnVuY3Rpb24oY29uc3RyYWludHMpIHtcbiAgICB2YXIgYywgY2MsIGksIGo7XG4gICAgaWYgKHRoaXMubV9saXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2NvbnRhY3RDb3VudCkge1xuICAgICAgYyA9IHRoaXMubV9jb250YWN0c1tpXTtcbiAgICAgIGNjID0gY29uc3RyYWludHNbaV07XG4gICAgICBqID0gMDtcbiAgICAgIHdoaWxlIChqIDwgY2MucG9pbnRDb3VudCkge1xuICAgICAgICBiMklzbGFuZC5zX2ltcHVsc2Uubm9ybWFsSW1wdWxzZXNbal0gPSBjYy5wb2ludHNbal0ubm9ybWFsSW1wdWxzZTtcbiAgICAgICAgYjJJc2xhbmQuc19pbXB1bHNlLnRhbmdlbnRJbXB1bHNlc1tqXSA9IGNjLnBvaW50c1tqXS50YW5nZW50SW1wdWxzZTtcbiAgICAgICAgKytqO1xuICAgICAgfVxuICAgICAgdGhpcy5tX2xpc3RlbmVyLlBvc3RTb2x2ZShjLCBiMklzbGFuZC5zX2ltcHVsc2UpO1xuICAgICAgKytpO1xuICAgIH1cbiAgfTtcblxuICBiMklzbGFuZC5wcm90b3R5cGUuQWRkQm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICBib2R5Lm1faXNsYW5kSW5kZXggPSB0aGlzLm1fYm9keUNvdW50O1xuICAgIHRoaXMubV9ib2RpZXNbdGhpcy5tX2JvZHlDb3VudCsrXSA9IGJvZHk7XG4gIH07XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLkFkZENvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG4gICAgdGhpcy5tX2NvbnRhY3RzW3RoaXMubV9jb250YWN0Q291bnQrK10gPSBjb250YWN0O1xuICB9O1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5BZGRKb2ludCA9IGZ1bmN0aW9uKGpvaW50KSB7XG4gICAgdGhpcy5tX2pvaW50c1t0aGlzLm1fam9pbnRDb3VudCsrXSA9IGpvaW50O1xuICB9O1xuXG4gIGIySXNsYW5kLnNfaW1wdWxzZSA9IG5ldyBiMkNvbnRhY3RJbXB1bHNlKCk7XG5cbiAgcmV0dXJuIGIySXNsYW5kO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMklzbGFuZC5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMlRpbWVTdGVwKCkge31cblxuICBiMlRpbWVTdGVwLnByb3RvdHlwZS5kdCA9IDA7XG5cbiAgYjJUaW1lU3RlcC5wcm90b3R5cGUuaW52X2R0ID0gMDtcblxuICBiMlRpbWVTdGVwLnByb3RvdHlwZS5wb3NpdGlvbkl0ZXJhdGlvbnMgPSAwO1xuXG4gIGIyVGltZVN0ZXAucHJvdG90eXBlLnZlbG9jaXR5SXRlcmF0aW9ucyA9IDA7XG5cbiAgYjJUaW1lU3RlcC5wcm90b3R5cGUud2FybVN0YXJ0aW5nID0gMDtcblxuICBiMlRpbWVTdGVwLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdGhpcy5kdCA9IHN0ZXAuZHQ7XG4gICAgdGhpcy5pbnZfZHQgPSBzdGVwLmludl9kdDtcbiAgICB0aGlzLnBvc2l0aW9uSXRlcmF0aW9ucyA9IHN0ZXAucG9zaXRpb25JdGVyYXRpb25zO1xuICAgIHRoaXMudmVsb2NpdHlJdGVyYXRpb25zID0gc3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnM7XG4gICAgdGhpcy53YXJtU3RhcnRpbmcgPSBzdGVwLndhcm1TdGFydGluZztcbiAgfTtcblxuICByZXR1cm4gYjJUaW1lU3RlcDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJUaW1lU3RlcC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJBQUJCLCBiMkJvZHksIGIyQm9keURlZiwgYjJDb2xvciwgYjJDb250YWN0LCBiMkNvbnRhY3RNYW5hZ2VyLCBiMkNvbnRhY3RTb2x2ZXIsIGIyRGVidWdEcmF3LCBiMkVkZ2VTaGFwZSwgYjJJc2xhbmQsIGIySm9pbnQsIGIyTWF0aCwgYjJQb2x5Z29uU2hhcGUsIGIyUmF5Q2FzdElucHV0LCBiMlJheUNhc3RPdXRwdXQsIGIyU2V0dGluZ3MsIGIyU2hhcGUsIGIyU3dlZXAsIGIyVGltZVN0ZXAsIGIyVHJhbnNmb3JtLCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJBQUJCID0gQm94MkQuQ29sbGlzaW9uLmIyQUFCQjtcblxuYjJDb2xvciA9IEJveDJELkNvbW1vbi5iMkNvbG9yO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyTWF0aCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aDtcblxuYjJTd2VlcCA9IEJveDJELkNvbW1vbi5NYXRoLmIyU3dlZXA7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJUcmFuc2Zvcm0gPSBCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybTtcblxuYjJCb2R5ID0gQm94MkQuRHluYW1pY3MuYjJCb2R5O1xuXG5iMkJvZHlEZWYgPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWY7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJDb250YWN0ID0gQm94MkQuRHluYW1pY3MuYjJDb250YWN0O1xuXG5iMkNvbnRhY3RNYW5hZ2VyID0gQm94MkQuRHluYW1pY3MuYjJDb250YWN0TWFuYWdlcjtcblxuYjJDb250YWN0U29sdmVyID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29sdmVyO1xuXG5iMklzbGFuZCA9IEJveDJELkR5bmFtaWNzLmIySXNsYW5kO1xuXG5iMlRpbWVTdGVwID0gQm94MkQuRHluYW1pY3MuYjJUaW1lU3RlcDtcblxuYjJEZWJ1Z0RyYXcgPSBCb3gyRC5EeW5hbWljcy5iMkRlYnVnRHJhdztcblxuYjJSYXlDYXN0SW5wdXQgPSBCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXQ7XG5cbmIyUmF5Q2FzdE91dHB1dCA9IEJveDJELkNvbGxpc2lvbi5iMlJheUNhc3RPdXRwdXQ7XG5cbmIyU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGU7XG5cbmIyUG9seWdvblNoYXBlID0gQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZTtcblxuYjJFZGdlU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRnZVNoYXBlO1xuXG5Cb3gyRC5EeW5hbWljcy5iMldvcmxkID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgYjJCb2R5X2FjdGl2ZUZsYWcsIGIyQm9keV9hbGxvd1NsZWVwRmxhZywgYjJCb2R5X2F3YWtlRmxhZywgYjJCb2R5X2J1bGxldEZsYWcsIGIyQm9keV9keW5hbWljQm9keSwgYjJCb2R5X2ZpeGVkUm90YXRpb25GbGFnLCBiMkJvZHlfaXNsYW5kRmxhZywgYjJCb2R5X2tpbmVtYXRpY0JvZHksIGIyQm9keV9zdGF0aWNCb2R5LCBiMkNvbnRhY3RfY29udGludW91c0ZsYWcsIGIyQ29udGFjdF9lbmFibGVkRmxhZywgYjJDb250YWN0X2ZpbHRlckZsYWcsIGIyQ29udGFjdF9pc2xhbmRGbGFnLCBiMkNvbnRhY3Rfc2Vuc29yRmxhZywgYjJDb250YWN0X3RvaUZsYWcsIGIyQ29udGFjdF90b3VjaGluZ0ZsYWc7XG5cbiAgYjJDb250YWN0X3NlbnNvckZsYWcgPSAweDAwMDE7XG5cbiAgYjJDb250YWN0X2NvbnRpbnVvdXNGbGFnID0gMHgwMDAyO1xuXG4gIGIyQ29udGFjdF9pc2xhbmRGbGFnID0gMHgwMDA0O1xuXG4gIGIyQ29udGFjdF90b2lGbGFnID0gMHgwMDA4O1xuXG4gIGIyQ29udGFjdF90b3VjaGluZ0ZsYWcgPSAweDAwMTA7XG5cbiAgYjJDb250YWN0X2VuYWJsZWRGbGFnID0gMHgwMDIwO1xuXG4gIGIyQ29udGFjdF9maWx0ZXJGbGFnID0gMHgwMDQwO1xuXG4gIGIyQm9keV9pc2xhbmRGbGFnID0gMHgwMDAxO1xuXG4gIGIyQm9keV9hd2FrZUZsYWcgPSAweDAwMDI7XG5cbiAgYjJCb2R5X2FsbG93U2xlZXBGbGFnID0gMHgwMDA0O1xuXG4gIGIyQm9keV9idWxsZXRGbGFnID0gMHgwMDA4O1xuXG4gIGIyQm9keV9maXhlZFJvdGF0aW9uRmxhZyA9IDB4MDAxMDtcblxuICBiMkJvZHlfYWN0aXZlRmxhZyA9IDB4MDAyMDtcblxuICBiMkJvZHlfc3RhdGljQm9keSA9IDA7XG5cbiAgYjJCb2R5X2tpbmVtYXRpY0JvZHkgPSAxO1xuXG4gIGIyQm9keV9keW5hbWljQm9keSA9IDI7XG5cbiAgYjJXb3JsZC5zX3RpbWVzdGVwMiA9IG5ldyBiMlRpbWVTdGVwKCk7XG5cbiAgYjJXb3JsZC5zX3hmID0gbmV3IGIyVHJhbnNmb3JtKCk7XG5cbiAgYjJXb3JsZC5zX2JhY2t1cEEgPSBuZXcgYjJTd2VlcCgpO1xuXG4gIGIyV29ybGQuc19iYWNrdXBCID0gbmV3IGIyU3dlZXAoKTtcblxuICBiMldvcmxkLnNfdGltZXN0ZXAgPSBuZXcgYjJUaW1lU3RlcCgpO1xuXG4gIGIyV29ybGQuc19xdWV1ZSA9IG5ldyBBcnJheSgpO1xuXG4gIGIyV29ybGQuc19qb2ludENvbG9yID0gbmV3IGIyQ29sb3IoMC41LCAwLjgsIDAuOCk7XG5cbiAgYjJXb3JsZC5lX25ld0ZpeHR1cmUgPSAweDAwMDE7XG5cbiAgYjJXb3JsZC5lX2xvY2tlZCA9IDB4MDAwMjtcblxuICBiMldvcmxkLnByb3RvdHlwZS5zX3N0YWNrID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2NvbnRhY3RNYW5hZ2VyID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2NvbnRhY3RTb2x2ZXIgPSBudWxsO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1faXNsYW5kID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2Rlc3RydWN0aW9uTGlzdGVuZXIgPSBudWxsO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1fZGVidWdEcmF3ID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2JvZHlMaXN0ID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2NvbnRhY3RMaXN0ID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2pvaW50TGlzdCA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9jb250cm9sbGVyTGlzdCA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9ib2R5Q291bnQgPSAwO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1fY29udGFjdENvdW50ID0gMDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2pvaW50Q291bnQgPSAwO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1fY29udHJvbGxlckNvdW50ID0gMDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2FsbG93U2xlZXAgPSBudWxsO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1fZ3Jhdml0eSA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9pbnZfZHQwID0gMC4wO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1fZ3JvdW5kQm9keSA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJXb3JsZChncmF2aXR5LCBkb1NsZWVwKSB7XG4gICAgdmFyIGJkO1xuICAgIHRoaXMuc19zdGFjayA9IG5ldyBBcnJheSgpO1xuICAgIHRoaXMubV9jb250YWN0TWFuYWdlciA9IG5ldyBiMkNvbnRhY3RNYW5hZ2VyKCk7XG4gICAgdGhpcy5tX2NvbnRhY3RTb2x2ZXIgPSBuZXcgYjJDb250YWN0U29sdmVyKCk7XG4gICAgdGhpcy5tX2lzbGFuZCA9IG5ldyBiMklzbGFuZCgpO1xuICAgIGIyV29ybGQubV93YXJtU3RhcnRpbmcgPSB0cnVlO1xuICAgIGIyV29ybGQubV9jb250aW51b3VzUGh5c2ljcyA9IHRydWU7XG4gICAgdGhpcy5tX2FsbG93U2xlZXAgPSBkb1NsZWVwO1xuICAgIHRoaXMubV9ncmF2aXR5ID0gZ3Jhdml0eTtcbiAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIubV93b3JsZCA9IHRoaXM7XG4gICAgYmQgPSBuZXcgYjJCb2R5RGVmKCk7XG4gICAgdGhpcy5tX2dyb3VuZEJvZHkgPSB0aGlzLkNyZWF0ZUJvZHkoYmQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyV29ybGQucHJvdG90eXBlLlNldERlc3RydWN0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU2V0Q29udGFjdEZpbHRlciA9IGZ1bmN0aW9uKGZpbHRlcikge1xuICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RGaWx0ZXIgPSBmaWx0ZXI7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU2V0Q29udGFjdExpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5TZXREZWJ1Z0RyYXcgPSBmdW5jdGlvbihkZWJ1Z0RyYXcpIHtcbiAgICB0aGlzLm1fZGVidWdEcmF3ID0gZGVidWdEcmF3O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlNldEJyb2FkUGhhc2UgPSBmdW5jdGlvbihicm9hZFBoYXNlKSB7XG4gICAgdmFyIGIsIGYsIG9sZEJyb2FkUGhhc2U7XG4gICAgb2xkQnJvYWRQaGFzZSA9IHRoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZSA9IGJyb2FkUGhhc2U7XG4gICAgYiA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICB3aGlsZSAoYikge1xuICAgICAgZiA9IGIubV9maXh0dXJlTGlzdDtcbiAgICAgIHdoaWxlIChmKSB7XG4gICAgICAgIGYubV9wcm94eSA9IGJyb2FkUGhhc2UuQ3JlYXRlUHJveHkob2xkQnJvYWRQaGFzZS5HZXRGYXRBQUJCKGYubV9wcm94eSksIGYpO1xuICAgICAgICBmID0gZi5tX25leHQ7XG4gICAgICB9XG4gICAgICBiID0gYi5tX25leHQ7XG4gICAgfVxuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlZhbGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5WYWxpZGF0ZSgpO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkdldFByb3h5Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZS5HZXRQcm94eUNvdW50KCk7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuQ3JlYXRlQm9keSA9IGZ1bmN0aW9uKGRlZikge1xuICAgIHZhciBiO1xuICAgIGlmICh0aGlzLklzTG9ja2VkKCkgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBiID0gbmV3IGIyQm9keShkZWYsIHRoaXMpO1xuICAgIGIubV9wcmV2ID0gbnVsbDtcbiAgICBiLm1fbmV4dCA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICBpZiAodGhpcy5tX2JvZHlMaXN0KSB7XG4gICAgICB0aGlzLm1fYm9keUxpc3QubV9wcmV2ID0gYjtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlMaXN0ID0gYjtcbiAgICArK3RoaXMubV9ib2R5Q291bnQ7XG4gICAgcmV0dXJuIGI7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuRGVzdHJveUJvZHkgPSBmdW5jdGlvbihiKSB7XG4gICAgdmFyIGNlLCBjZTAsIGNvZSwgY29lMCwgZiwgZjAsIGpuLCBqbjA7XG4gICAgaWYgKHRoaXMuSXNMb2NrZWQoKSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBqbiA9IGIubV9qb2ludExpc3Q7XG4gICAgd2hpbGUgKGpuKSB7XG4gICAgICBqbjAgPSBqbjtcbiAgICAgIGpuID0gam4ubmV4dDtcbiAgICAgIGlmICh0aGlzLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lcikge1xuICAgICAgICB0aGlzLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lci5TYXlHb29kYnllSm9pbnQoam4wLmpvaW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuRGVzdHJveUpvaW50KGpuMC5qb2ludCk7XG4gICAgfVxuICAgIGNvZSA9IGIubV9jb250cm9sbGVyTGlzdDtcbiAgICB3aGlsZSAoY29lKSB7XG4gICAgICBjb2UwID0gY29lO1xuICAgICAgY29lID0gY29lLm5leHRDb250cm9sbGVyO1xuICAgICAgY29lMC5jb250cm9sbGVyLlJlbW92ZUJvZHkoYik7XG4gICAgfVxuICAgIGNlID0gYi5tX2NvbnRhY3RMaXN0O1xuICAgIHdoaWxlIChjZSkge1xuICAgICAgY2UwID0gY2U7XG4gICAgICBjZSA9IGNlLm5leHQ7XG4gICAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIuRGVzdHJveShjZTAuY29udGFjdCk7XG4gICAgfVxuICAgIGIubV9jb250YWN0TGlzdCA9IG51bGw7XG4gICAgZiA9IGIubV9maXh0dXJlTGlzdDtcbiAgICB3aGlsZSAoZikge1xuICAgICAgZjAgPSBmO1xuICAgICAgZiA9IGYubV9uZXh0O1xuICAgICAgaWYgKHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyLlNheUdvb2RieWVGaXh0dXJlKGYwKTtcbiAgICAgIH1cbiAgICAgIGYwLkRlc3Ryb3lQcm94eSh0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlKTtcbiAgICAgIGYwLkRlc3Ryb3koKTtcbiAgICB9XG4gICAgYi5tX2ZpeHR1cmVMaXN0ID0gbnVsbDtcbiAgICBiLm1fZml4dHVyZUNvdW50ID0gMDtcbiAgICBpZiAoYi5tX3ByZXYpIHtcbiAgICAgIGIubV9wcmV2Lm1fbmV4dCA9IGIubV9uZXh0O1xuICAgIH1cbiAgICBpZiAoYi5tX25leHQpIHtcbiAgICAgIGIubV9uZXh0Lm1fcHJldiA9IGIubV9wcmV2O1xuICAgIH1cbiAgICBpZiAoYiA9PT0gdGhpcy5tX2JvZHlMaXN0KSB7XG4gICAgICB0aGlzLm1fYm9keUxpc3QgPSBiLm1fbmV4dDtcbiAgICB9XG4gICAgLS10aGlzLm1fYm9keUNvdW50O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkNyZWF0ZUpvaW50ID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgdmFyIGJvZHlBLCBib2R5QiwgZWRnZSwgajtcbiAgICBqID0gYjJKb2ludC5DcmVhdGUoZGVmLCBudWxsKTtcbiAgICBqLm1fcHJldiA9IG51bGw7XG4gICAgai5tX25leHQgPSB0aGlzLm1fam9pbnRMaXN0O1xuICAgIGlmICh0aGlzLm1fam9pbnRMaXN0KSB7XG4gICAgICB0aGlzLm1fam9pbnRMaXN0Lm1fcHJldiA9IGo7XG4gICAgfVxuICAgIHRoaXMubV9qb2ludExpc3QgPSBqO1xuICAgICsrdGhpcy5tX2pvaW50Q291bnQ7XG4gICAgai5tX2VkZ2VBLmpvaW50ID0gajtcbiAgICBqLm1fZWRnZUEub3RoZXIgPSBqLm1fYm9keUI7XG4gICAgai5tX2VkZ2VBLnByZXYgPSBudWxsO1xuICAgIGoubV9lZGdlQS5uZXh0ID0gai5tX2JvZHlBLm1fam9pbnRMaXN0O1xuICAgIGlmIChqLm1fYm9keUEubV9qb2ludExpc3QpIHtcbiAgICAgIGoubV9ib2R5QS5tX2pvaW50TGlzdC5wcmV2ID0gai5tX2VkZ2VBO1xuICAgIH1cbiAgICBqLm1fYm9keUEubV9qb2ludExpc3QgPSBqLm1fZWRnZUE7XG4gICAgai5tX2VkZ2VCLmpvaW50ID0gajtcbiAgICBqLm1fZWRnZUIub3RoZXIgPSBqLm1fYm9keUE7XG4gICAgai5tX2VkZ2VCLnByZXYgPSBudWxsO1xuICAgIGoubV9lZGdlQi5uZXh0ID0gai5tX2JvZHlCLm1fam9pbnRMaXN0O1xuICAgIGlmIChqLm1fYm9keUIubV9qb2ludExpc3QpIHtcbiAgICAgIGoubV9ib2R5Qi5tX2pvaW50TGlzdC5wcmV2ID0gai5tX2VkZ2VCO1xuICAgIH1cbiAgICBqLm1fYm9keUIubV9qb2ludExpc3QgPSBqLm1fZWRnZUI7XG4gICAgYm9keUEgPSBkZWYuYm9keUE7XG4gICAgYm9keUIgPSBkZWYuYm9keUI7XG4gICAgaWYgKGRlZi5jb2xsaWRlQ29ubmVjdGVkID09PSBmYWxzZSkge1xuICAgICAgZWRnZSA9IGJvZHlCLkdldENvbnRhY3RMaXN0KCk7XG4gICAgICB3aGlsZSAoZWRnZSkge1xuICAgICAgICBpZiAoZWRnZS5vdGhlciA9PT0gYm9keUEpIHtcbiAgICAgICAgICBlZGdlLmNvbnRhY3QuRmxhZ0ZvckZpbHRlcmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkRlc3Ryb3lKb2ludCA9IGZ1bmN0aW9uKGopIHtcbiAgICB2YXIgYm9keUEsIGJvZHlCLCBjb2xsaWRlQ29ubmVjdGVkLCBlZGdlO1xuICAgIGNvbGxpZGVDb25uZWN0ZWQgPSBqLm1fY29sbGlkZUNvbm5lY3RlZDtcbiAgICBpZiAoai5tX3ByZXYpIHtcbiAgICAgIGoubV9wcmV2Lm1fbmV4dCA9IGoubV9uZXh0O1xuICAgIH1cbiAgICBpZiAoai5tX25leHQpIHtcbiAgICAgIGoubV9uZXh0Lm1fcHJldiA9IGoubV9wcmV2O1xuICAgIH1cbiAgICBpZiAoaiA9PT0gdGhpcy5tX2pvaW50TGlzdCkge1xuICAgICAgdGhpcy5tX2pvaW50TGlzdCA9IGoubV9uZXh0O1xuICAgIH1cbiAgICBib2R5QSA9IGoubV9ib2R5QTtcbiAgICBib2R5QiA9IGoubV9ib2R5QjtcbiAgICBib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICBib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICBpZiAoai5tX2VkZ2VBLnByZXYpIHtcbiAgICAgIGoubV9lZGdlQS5wcmV2Lm5leHQgPSBqLm1fZWRnZUEubmV4dDtcbiAgICB9XG4gICAgaWYgKGoubV9lZGdlQS5uZXh0KSB7XG4gICAgICBqLm1fZWRnZUEubmV4dC5wcmV2ID0gai5tX2VkZ2VBLnByZXY7XG4gICAgfVxuICAgIGlmIChqLm1fZWRnZUEgPT09IGJvZHlBLm1fam9pbnRMaXN0KSB7XG4gICAgICBib2R5QS5tX2pvaW50TGlzdCA9IGoubV9lZGdlQS5uZXh0O1xuICAgIH1cbiAgICBqLm1fZWRnZUEucHJldiA9IG51bGw7XG4gICAgai5tX2VkZ2VBLm5leHQgPSBudWxsO1xuICAgIGlmIChqLm1fZWRnZUIucHJldikge1xuICAgICAgai5tX2VkZ2VCLnByZXYubmV4dCA9IGoubV9lZGdlQi5uZXh0O1xuICAgIH1cbiAgICBpZiAoai5tX2VkZ2VCLm5leHQpIHtcbiAgICAgIGoubV9lZGdlQi5uZXh0LnByZXYgPSBqLm1fZWRnZUIucHJldjtcbiAgICB9XG4gICAgaWYgKGoubV9lZGdlQiA9PT0gYm9keUIubV9qb2ludExpc3QpIHtcbiAgICAgIGJvZHlCLm1fam9pbnRMaXN0ID0gai5tX2VkZ2VCLm5leHQ7XG4gICAgfVxuICAgIGoubV9lZGdlQi5wcmV2ID0gbnVsbDtcbiAgICBqLm1fZWRnZUIubmV4dCA9IG51bGw7XG4gICAgYjJKb2ludC5EZXN0cm95KGosIG51bGwpO1xuICAgIC0tdGhpcy5tX2pvaW50Q291bnQ7XG4gICAgaWYgKGNvbGxpZGVDb25uZWN0ZWQgPT09IGZhbHNlKSB7XG4gICAgICBlZGdlID0gYm9keUIuR2V0Q29udGFjdExpc3QoKTtcbiAgICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICAgIGlmIChlZGdlLm90aGVyID09PSBib2R5QSkge1xuICAgICAgICAgIGVkZ2UuY29udGFjdC5GbGFnRm9yRmlsdGVyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWRnZSA9IGVkZ2UubmV4dDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuQWRkQ29udHJvbGxlciA9IGZ1bmN0aW9uKGMpIHtcbiAgICBjLm1fbmV4dCA9IHRoaXMubV9jb250cm9sbGVyTGlzdDtcbiAgICBjLm1fcHJldiA9IG51bGw7XG4gICAgdGhpcy5tX2NvbnRyb2xsZXJMaXN0ID0gYztcbiAgICBjLm1fd29ybGQgPSB0aGlzO1xuICAgIHRoaXMubV9jb250cm9sbGVyQ291bnQrKztcbiAgICByZXR1cm4gYztcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5SZW1vdmVDb250cm9sbGVyID0gZnVuY3Rpb24oYykge1xuICAgIGlmIChjLm1fcHJldikge1xuICAgICAgYy5tX3ByZXYubV9uZXh0ID0gYy5tX25leHQ7XG4gICAgfVxuICAgIGlmIChjLm1fbmV4dCkge1xuICAgICAgYy5tX25leHQubV9wcmV2ID0gYy5tX3ByZXY7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fY29udHJvbGxlckxpc3QgPT09IGMpIHtcbiAgICAgIHRoaXMubV9jb250cm9sbGVyTGlzdCA9IGMubV9uZXh0O1xuICAgIH1cbiAgICB0aGlzLm1fY29udHJvbGxlckNvdW50LS07XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuQ3JlYXRlQ29udHJvbGxlciA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICBpZiAoY29udHJvbGxlci5tX3dvcmxkICE9PSB0aGlzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250cm9sbGVyIGNhbiBvbmx5IGJlIGEgbWVtYmVyIG9mIG9uZSB3b3JsZFwiKTtcbiAgICB9XG4gICAgY29udHJvbGxlci5tX25leHQgPSB0aGlzLm1fY29udHJvbGxlckxpc3Q7XG4gICAgY29udHJvbGxlci5tX3ByZXYgPSBudWxsO1xuICAgIGlmICh0aGlzLm1fY29udHJvbGxlckxpc3QpIHtcbiAgICAgIHRoaXMubV9jb250cm9sbGVyTGlzdC5tX3ByZXYgPSBjb250cm9sbGVyO1xuICAgIH1cbiAgICB0aGlzLm1fY29udHJvbGxlckxpc3QgPSBjb250cm9sbGVyO1xuICAgICsrdGhpcy5tX2NvbnRyb2xsZXJDb3VudDtcbiAgICBjb250cm9sbGVyLm1fd29ybGQgPSB0aGlzO1xuICAgIHJldHVybiBjb250cm9sbGVyO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkRlc3Ryb3lDb250cm9sbGVyID0gZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgIGNvbnRyb2xsZXIuQ2xlYXIoKTtcbiAgICBpZiAoY29udHJvbGxlci5tX25leHQpIHtcbiAgICAgIGNvbnRyb2xsZXIubV9uZXh0Lm1fcHJldiA9IGNvbnRyb2xsZXIubV9wcmV2O1xuICAgIH1cbiAgICBpZiAoY29udHJvbGxlci5tX3ByZXYpIHtcbiAgICAgIGNvbnRyb2xsZXIubV9wcmV2Lm1fbmV4dCA9IGNvbnRyb2xsZXIubV9uZXh0O1xuICAgIH1cbiAgICBpZiAoY29udHJvbGxlciA9PT0gdGhpcy5tX2NvbnRyb2xsZXJMaXN0KSB7XG4gICAgICB0aGlzLm1fY29udHJvbGxlckxpc3QgPSBjb250cm9sbGVyLm1fbmV4dDtcbiAgICB9XG4gICAgLS10aGlzLm1fY29udHJvbGxlckNvdW50O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlNldFdhcm1TdGFydGluZyA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICBiMldvcmxkLm1fd2FybVN0YXJ0aW5nID0gZmxhZztcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5TZXRDb250aW51b3VzUGh5c2ljcyA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICBiMldvcmxkLm1fY29udGludW91c1BoeXNpY3MgPSBmbGFnO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkdldEJvZHlDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUNvdW50O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkdldEpvaW50Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2pvaW50Q291bnQ7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0Q29udGFjdENvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9jb250YWN0Q291bnQ7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU2V0R3Jhdml0eSA9IGZ1bmN0aW9uKGdyYXZpdHkpIHtcbiAgICB0aGlzLm1fZ3Jhdml0eSA9IGdyYXZpdHk7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0R3Jhdml0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZ3Jhdml0eTtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5HZXRHcm91bmRCb2R5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ncm91bmRCb2R5O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihkdCwgdmVsb2NpdHlJdGVyYXRpb25zLCBwb3NpdGlvbkl0ZXJhdGlvbnMpIHtcbiAgICB2YXIgc3RlcDtcbiAgICBpZiAoZHQgPT09IHZvaWQgMCkge1xuICAgICAgZHQgPSAwO1xuICAgIH1cbiAgICBpZiAodmVsb2NpdHlJdGVyYXRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIHZlbG9jaXR5SXRlcmF0aW9ucyA9IDA7XG4gICAgfVxuICAgIGlmIChwb3NpdGlvbkl0ZXJhdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgcG9zaXRpb25JdGVyYXRpb25zID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9mbGFncyAmIGIyV29ybGQuZV9uZXdGaXh0dXJlKSB7XG4gICAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIuRmluZE5ld0NvbnRhY3RzKCk7XG4gICAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyV29ybGQuZV9uZXdGaXh0dXJlO1xuICAgIH1cbiAgICB0aGlzLm1fZmxhZ3MgfD0gYjJXb3JsZC5lX2xvY2tlZDtcbiAgICBzdGVwID0gYjJXb3JsZC5zX3RpbWVzdGVwMjtcbiAgICBzdGVwLmR0ID0gZHQ7XG4gICAgc3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnMgPSB2ZWxvY2l0eUl0ZXJhdGlvbnM7XG4gICAgc3RlcC5wb3NpdGlvbkl0ZXJhdGlvbnMgPSBwb3NpdGlvbkl0ZXJhdGlvbnM7XG4gICAgaWYgKGR0ID4gMC4wKSB7XG4gICAgICBzdGVwLmludl9kdCA9IDEuMCAvIGR0O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGVwLmludl9kdCA9IDAuMDtcbiAgICB9XG4gICAgc3RlcC5kdFJhdGlvID0gdGhpcy5tX2ludl9kdDAgKiBkdDtcbiAgICBzdGVwLndhcm1TdGFydGluZyA9IGIyV29ybGQubV93YXJtU3RhcnRpbmc7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLkNvbGxpZGUoKTtcbiAgICBpZiAoc3RlcC5kdCA+IDAuMCkge1xuICAgICAgdGhpcy5Tb2x2ZShzdGVwKTtcbiAgICB9XG4gICAgaWYgKGIyV29ybGQubV9jb250aW51b3VzUGh5c2ljcyAmJiBzdGVwLmR0ID4gMC4wKSB7XG4gICAgICB0aGlzLlNvbHZlVE9JKHN0ZXApO1xuICAgIH1cbiAgICBpZiAoc3RlcC5kdCA+IDAuMCkge1xuICAgICAgdGhpcy5tX2ludl9kdDAgPSBzdGVwLmludl9kdDtcbiAgICB9XG4gICAgdGhpcy5tX2ZsYWdzICY9IH5iMldvcmxkLmVfbG9ja2VkO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkNsZWFyRm9yY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvZHk7XG4gICAgYm9keSA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICB3aGlsZSAoYm9keSkge1xuICAgICAgYm9keS5tX2ZvcmNlLlNldFplcm8oKTtcbiAgICAgIGJvZHkubV90b3JxdWUgPSAwLjA7XG4gICAgICBib2R5ID0gYm9keS5tX25leHQ7XG4gICAgfVxuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkRyYXdEZWJ1Z0RhdGEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYWFiYiwgYiwgYjEsIGIyLCBicCwgYywgY0EsIGNCLCBjb2xvciwgY29udGFjdCwgZiwgZml4dHVyZUEsIGZpeHR1cmVCLCBmbGFncywgaSwgaW52USwgaiwgcywgdnMsIHgxLCB4MiwgeGY7XG4gICAgaWYgKHRoaXMubV9kZWJ1Z0RyYXcgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1fZGVidWdEcmF3Lm1fc3ByaXRlLmdyYXBoaWNzLmNsZWFyKCk7XG4gICAgZmxhZ3MgPSB0aGlzLm1fZGVidWdEcmF3LkdldEZsYWdzKCk7XG4gICAgaSA9IDA7XG4gICAgYiA9IHZvaWQgMDtcbiAgICBmID0gdm9pZCAwO1xuICAgIHMgPSB2b2lkIDA7XG4gICAgaiA9IHZvaWQgMDtcbiAgICBicCA9IHZvaWQgMDtcbiAgICBpbnZRID0gbmV3IGIyVmVjMjtcbiAgICB4MSA9IG5ldyBiMlZlYzI7XG4gICAgeDIgPSBuZXcgYjJWZWMyO1xuICAgIHhmID0gdm9pZCAwO1xuICAgIGIxID0gbmV3IGIyQUFCQigpO1xuICAgIGIyID0gbmV3IGIyQUFCQigpO1xuICAgIHZzID0gW25ldyBiMlZlYzIoKSwgbmV3IGIyVmVjMigpLCBuZXcgYjJWZWMyKCksIG5ldyBiMlZlYzIoKV07XG4gICAgY29sb3IgPSBuZXcgYjJDb2xvcigwLCAwLCAwKTtcbiAgICBpZiAoZmxhZ3MgJiBiMkRlYnVnRHJhdy5lX3NoYXBlQml0KSB7XG4gICAgICBiID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgICAgd2hpbGUgKGIpIHtcbiAgICAgICAgeGYgPSBiLm1feGY7XG4gICAgICAgIGYgPSBiLkdldEZpeHR1cmVMaXN0KCk7XG4gICAgICAgIHdoaWxlIChmKSB7XG4gICAgICAgICAgcyA9IGYuR2V0U2hhcGUoKTtcbiAgICAgICAgICBpZiAoYi5Jc0FjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29sb3IuU2V0KDAuNSwgMC41LCAwLjMpO1xuICAgICAgICAgICAgdGhpcy5EcmF3U2hhcGUocywgeGYsIGNvbG9yKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHlfc3RhdGljQm9keSkge1xuICAgICAgICAgICAgY29sb3IuU2V0KDAuNSwgMC45LCAwLjUpO1xuICAgICAgICAgICAgdGhpcy5EcmF3U2hhcGUocywgeGYsIGNvbG9yKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHlfa2luZW1hdGljQm9keSkge1xuICAgICAgICAgICAgY29sb3IuU2V0KDAuNSwgMC41LCAwLjkpO1xuICAgICAgICAgICAgdGhpcy5EcmF3U2hhcGUocywgeGYsIGNvbG9yKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGIuSXNBd2FrZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29sb3IuU2V0KDAuNiwgMC42LCAwLjYpO1xuICAgICAgICAgICAgdGhpcy5EcmF3U2hhcGUocywgeGYsIGNvbG9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3IuU2V0KDAuOSwgMC43LCAwLjcpO1xuICAgICAgICAgICAgdGhpcy5EcmF3U2hhcGUocywgeGYsIGNvbG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZiA9IGYubV9uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGIgPSBiLm1fbmV4dDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZsYWdzICYgYjJEZWJ1Z0RyYXcuZV9qb2ludEJpdCkge1xuICAgICAgaiA9IHRoaXMubV9qb2ludExpc3Q7XG4gICAgICB3aGlsZSAoaikge1xuICAgICAgICB0aGlzLkRyYXdKb2ludChqKTtcbiAgICAgICAgaiA9IGoubV9uZXh0O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiBiMkRlYnVnRHJhdy5lX2NvbnRyb2xsZXJCaXQpIHtcbiAgICAgIGMgPSB0aGlzLm1fY29udHJvbGxlckxpc3Q7XG4gICAgICB3aGlsZSAoYykge1xuICAgICAgICBjLkRyYXcodGhpcy5tX2RlYnVnRHJhdyk7XG4gICAgICAgIGMgPSBjLm1fbmV4dDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZsYWdzICYgYjJEZWJ1Z0RyYXcuZV9wYWlyQml0KSB7XG4gICAgICBjb2xvci5TZXQoMC4zLCAwLjksIDAuOSk7XG4gICAgICBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3Q7XG4gICAgICB3aGlsZSAoY29udGFjdCkge1xuICAgICAgICBmaXh0dXJlQSA9IGNvbnRhY3QuR2V0Rml4dHVyZUEoKTtcbiAgICAgICAgZml4dHVyZUIgPSBjb250YWN0LkdldEZpeHR1cmVCKCk7XG4gICAgICAgIGNBID0gZml4dHVyZUEuR2V0QUFCQigpLkdldENlbnRlcigpO1xuICAgICAgICBjQiA9IGZpeHR1cmVCLkdldEFBQkIoKS5HZXRDZW50ZXIoKTtcbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudChjQSwgY0IsIGNvbG9yKTtcbiAgICAgICAgY29udGFjdCA9IGNvbnRhY3QuR2V0TmV4dCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiBiMkRlYnVnRHJhdy5lX2FhYmJCaXQpIHtcbiAgICAgIGJwID0gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICAgIHZzID0gW25ldyBiMlZlYzIoKSwgbmV3IGIyVmVjMigpLCBuZXcgYjJWZWMyKCksIG5ldyBiMlZlYzIoKV07XG4gICAgICBiID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgICAgd2hpbGUgKGIpIHtcbiAgICAgICAgaWYgKGIuSXNBY3RpdmUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmID0gYi5HZXRGaXh0dXJlTGlzdCgpO1xuICAgICAgICB3aGlsZSAoZikge1xuICAgICAgICAgIGFhYmIgPSBicC5HZXRGYXRBQUJCKGYubV9wcm94eSk7XG4gICAgICAgICAgdnNbMF0uU2V0KGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSk7XG4gICAgICAgICAgdnNbMV0uU2V0KGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSk7XG4gICAgICAgICAgdnNbMl0uU2V0KGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSk7XG4gICAgICAgICAgdnNbM10uU2V0KGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSk7XG4gICAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3UG9seWdvbih2cywgNCwgY29sb3IpO1xuICAgICAgICAgIGYgPSBmLkdldE5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBiID0gYi5HZXROZXh0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmbGFncyAmIGIyRGVidWdEcmF3LmVfY2VudGVyT2ZNYXNzQml0KSB7XG4gICAgICBiID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgICAgd2hpbGUgKGIpIHtcbiAgICAgICAgeGYgPSBiMldvcmxkLnNfeGY7XG4gICAgICAgIHhmLlIgPSBiLm1feGYuUjtcbiAgICAgICAgeGYucG9zaXRpb24gPSBiLkdldFdvcmxkQ2VudGVyKCk7XG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1RyYW5zZm9ybSh4Zik7XG4gICAgICAgIGIgPSBiLm1fbmV4dDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuUXVlcnlBQUJCID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFhYmIpIHtcbiAgICB2YXIgV29ybGRRdWVyeVdyYXBwZXIsIGJyb2FkUGhhc2UsIF9fdGhpcztcbiAgICBXb3JsZFF1ZXJ5V3JhcHBlciA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soYnJvYWRQaGFzZS5HZXRVc2VyRGF0YShwcm94eSkpO1xuICAgIH07XG4gICAgX190aGlzID0gdGhpcztcbiAgICBicm9hZFBoYXNlID0gX190aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlO1xuICAgIGJyb2FkUGhhc2UuUXVlcnkoV29ybGRRdWVyeVdyYXBwZXIsIGFhYmIpO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlF1ZXJ5U2hhcGUgPSBmdW5jdGlvbihjYWxsYmFjaywgc2hhcGUsIHRyYW5zZm9ybSkge1xuICAgIHZhciBXb3JsZFF1ZXJ5V3JhcHBlciwgYWFiYiwgYnJvYWRQaGFzZSwgX190aGlzO1xuICAgIFdvcmxkUXVlcnlXcmFwcGVyID0gZnVuY3Rpb24ocHJveHkpIHtcbiAgICAgIHZhciBmaXh0dXJlO1xuICAgICAgZml4dHVyZSA9IChicm9hZFBoYXNlLkdldFVzZXJEYXRhKHByb3h5KSBpbnN0YW5jZW9mIGIyRml4dHVyZSA/IGJyb2FkUGhhc2UuR2V0VXNlckRhdGEocHJveHkpIDogbnVsbCk7XG4gICAgICBpZiAoYjJTaGFwZS5UZXN0T3ZlcmxhcChzaGFwZSwgdHJhbnNmb3JtLCBmaXh0dXJlLkdldFNoYXBlKCksIGZpeHR1cmUuR2V0Qm9keSgpLkdldFRyYW5zZm9ybSgpKSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZml4dHVyZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIF9fdGhpcyA9IHRoaXM7XG4gICAgaWYgKHRyYW5zZm9ybSA9PT0gdm9pZCAwKSB7XG4gICAgICB0cmFuc2Zvcm0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodHJhbnNmb3JtID09IG51bGwpIHtcbiAgICAgIHRyYW5zZm9ybSA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuICAgICAgdHJhbnNmb3JtLlNldElkZW50aXR5KCk7XG4gICAgfVxuICAgIGJyb2FkUGhhc2UgPSBfX3RoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgICBzaGFwZS5Db21wdXRlQUFCQihhYWJiLCB0cmFuc2Zvcm0pO1xuICAgIGJyb2FkUGhhc2UuUXVlcnkoV29ybGRRdWVyeVdyYXBwZXIsIGFhYmIpO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlF1ZXJ5UG9pbnQgPSBmdW5jdGlvbihjYWxsYmFjaywgcCkge1xuICAgIHZhciBXb3JsZFF1ZXJ5V3JhcHBlciwgYWFiYiwgYnJvYWRQaGFzZSwgX190aGlzO1xuICAgIFdvcmxkUXVlcnlXcmFwcGVyID0gZnVuY3Rpb24ocHJveHkpIHtcbiAgICAgIHZhciBmaXh0dXJlO1xuICAgICAgZml4dHVyZSA9IChicm9hZFBoYXNlLkdldFVzZXJEYXRhKHByb3h5KSBpbnN0YW5jZW9mIGIyRml4dHVyZSA/IGJyb2FkUGhhc2UuR2V0VXNlckRhdGEocHJveHkpIDogbnVsbCk7XG4gICAgICBpZiAoZml4dHVyZS5UZXN0UG9pbnQocCkpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZpeHR1cmUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBfX3RoaXMgPSB0aGlzO1xuICAgIGJyb2FkUGhhc2UgPSBfX3RoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgICBhYWJiLmxvd2VyQm91bmQuU2V0KHAueCAtIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgcC55IC0gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKTtcbiAgICBhYWJiLnVwcGVyQm91bmQuU2V0KHAueCArIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgcC55ICsgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKTtcbiAgICBicm9hZFBoYXNlLlF1ZXJ5KFdvcmxkUXVlcnlXcmFwcGVyLCBhYWJiKTtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24oY2FsbGJhY2ssIHBvaW50MSwgcG9pbnQyKSB7XG4gICAgdmFyIFJheUNhc3RXcmFwcGVyLCBicm9hZFBoYXNlLCBpbnB1dCwgb3V0cHV0LCBfX3RoaXM7XG4gICAgUmF5Q2FzdFdyYXBwZXIgPSBmdW5jdGlvbihpbnB1dCwgcHJveHkpIHtcbiAgICAgIHZhciBmaXh0dXJlLCBmcmFjdGlvbiwgaGl0LCBwb2ludCwgdXNlckRhdGE7XG4gICAgICB1c2VyRGF0YSA9IGJyb2FkUGhhc2UuR2V0VXNlckRhdGEocHJveHkpO1xuICAgICAgZml4dHVyZSA9ICh1c2VyRGF0YSBpbnN0YW5jZW9mIGIyRml4dHVyZSA/IHVzZXJEYXRhIDogbnVsbCk7XG4gICAgICBoaXQgPSBmaXh0dXJlLlJheUNhc3Qob3V0cHV0LCBpbnB1dCk7XG4gICAgICBpZiAoaGl0KSB7XG4gICAgICAgIGZyYWN0aW9uID0gb3V0cHV0LmZyYWN0aW9uO1xuICAgICAgICBwb2ludCA9IG5ldyBiMlZlYzIoKDEuMCAtIGZyYWN0aW9uKSAqIHBvaW50MS54ICsgZnJhY3Rpb24gKiBwb2ludDIueCwgKDEuMCAtIGZyYWN0aW9uKSAqIHBvaW50MS55ICsgZnJhY3Rpb24gKiBwb2ludDIueSk7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhmaXh0dXJlLCBwb2ludCwgb3V0cHV0Lm5vcm1hbCwgZnJhY3Rpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0Lm1heEZyYWN0aW9uO1xuICAgIH07XG4gICAgX190aGlzID0gdGhpcztcbiAgICBicm9hZFBoYXNlID0gX190aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlO1xuICAgIG91dHB1dCA9IG5ldyBiMlJheUNhc3RPdXRwdXQ7XG4gICAgaW5wdXQgPSBuZXcgYjJSYXlDYXN0SW5wdXQocG9pbnQxLCBwb2ludDIpO1xuICAgIGJyb2FkUGhhc2UuUmF5Q2FzdChSYXlDYXN0V3JhcHBlciwgaW5wdXQpO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlJheUNhc3RPbmUgPSBmdW5jdGlvbihwb2ludDEsIHBvaW50Mikge1xuICAgIHZhciBSYXlDYXN0T25lV3JhcHBlciwgcmVzdWx0LCBfX3RoaXM7XG4gICAgUmF5Q2FzdE9uZVdyYXBwZXIgPSBmdW5jdGlvbihmaXh0dXJlLCBwb2ludCwgbm9ybWFsLCBmcmFjdGlvbikge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGlmIChmcmFjdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGZyYWN0aW9uID0gMDtcbiAgICAgIH1cbiAgICAgIHJlc3VsdCA9IGZpeHR1cmU7XG4gICAgICByZXR1cm4gZnJhY3Rpb247XG4gICAgfTtcbiAgICBfX3RoaXMgPSB0aGlzO1xuICAgIHJlc3VsdCA9IHZvaWQgMDtcbiAgICBfX3RoaXMuUmF5Q2FzdChSYXlDYXN0T25lV3JhcHBlciwgcG9pbnQxLCBwb2ludDIpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuUmF5Q2FzdEFsbCA9IGZ1bmN0aW9uKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgdmFyIFJheUNhc3RBbGxXcmFwcGVyLCByZXN1bHQsIF9fdGhpcztcbiAgICBSYXlDYXN0QWxsV3JhcHBlciA9IGZ1bmN0aW9uKGZpeHR1cmUsIHBvaW50LCBub3JtYWwsIGZyYWN0aW9uKSB7XG4gICAgICBpZiAoZnJhY3Rpb24gPT09IHZvaWQgMCkge1xuICAgICAgICBmcmFjdGlvbiA9IDA7XG4gICAgICB9XG4gICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBmaXh0dXJlO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfTtcbiAgICBfX3RoaXMgPSB0aGlzO1xuICAgIHJlc3VsdCA9IG5ldyBBcnJheSgpO1xuICAgIF9fdGhpcy5SYXlDYXN0KFJheUNhc3RBbGxXcmFwcGVyLCBwb2ludDEsIHBvaW50Mik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5HZXRCb2R5TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUxpc3Q7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0Sm9pbnRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9qb2ludExpc3Q7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0Q29udGFjdExpc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLklzTG9ja2VkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMldvcmxkLmVfbG9ja2VkKSA+IDA7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU29sdmUgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGIsIGMsIGNlLCBjb250cm9sbGVyLCBpLCBpc2xhbmQsIGosIGpuLCBvdGhlciwgc2VlZCwgc3RhY2ssIHN0YWNrQ291bnQsIHN0YWNrU2l6ZTtcbiAgICBiID0gdm9pZCAwO1xuICAgIGNvbnRyb2xsZXIgPSB0aGlzLm1fY29udHJvbGxlckxpc3Q7XG4gICAgd2hpbGUgKGNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnRyb2xsZXIuU3RlcChzdGVwKTtcbiAgICAgIGNvbnRyb2xsZXIgPSBjb250cm9sbGVyLm1fbmV4dDtcbiAgICB9XG4gICAgaXNsYW5kID0gdGhpcy5tX2lzbGFuZDtcbiAgICBpc2xhbmQuSW5pdGlhbGl6ZSh0aGlzLm1fYm9keUNvdW50LCB0aGlzLm1fY29udGFjdENvdW50LCB0aGlzLm1fam9pbnRDb3VudCwgbnVsbCwgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3RlbmVyLCB0aGlzLm1fY29udGFjdFNvbHZlcik7XG4gICAgYiA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICB3aGlsZSAoYikge1xuICAgICAgYi5tX2ZsYWdzICY9IH5iMkJvZHlfaXNsYW5kRmxhZztcbiAgICAgIGIgPSBiLm1fbmV4dDtcbiAgICB9XG4gICAgYyA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICB3aGlsZSAoYykge1xuICAgICAgYy5tX2ZsYWdzICY9IH5iMkNvbnRhY3RfaXNsYW5kRmxhZztcbiAgICAgIGMgPSBjLm1fbmV4dDtcbiAgICB9XG4gICAgaiA9IHRoaXMubV9qb2ludExpc3Q7XG4gICAgd2hpbGUgKGopIHtcbiAgICAgIGoubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICBqID0gai5tX25leHQ7XG4gICAgfVxuICAgIHN0YWNrU2l6ZSA9IHBhcnNlSW50KHRoaXMubV9ib2R5Q291bnQpO1xuICAgIHN0YWNrID0gdGhpcy5zX3N0YWNrO1xuICAgIHNlZWQgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgd2hpbGUgKHNlZWQpIHtcbiAgICAgIGlmIChzZWVkLm1fZmxhZ3MgJiBiMkJvZHlfaXNsYW5kRmxhZykge1xuICAgICAgICBzZWVkID0gc2VlZC5tX25leHQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNlZWQuSXNBd2FrZSgpID09PSBmYWxzZSB8fCBzZWVkLklzQWN0aXZlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHNlZWQgPSBzZWVkLm1fbmV4dDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoc2VlZC5HZXRUeXBlKCkgPT09IGIyQm9keV9zdGF0aWNCb2R5KSB7XG4gICAgICAgIHNlZWQgPSBzZWVkLm1fbmV4dDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpc2xhbmQuQ2xlYXIoKTtcbiAgICAgIHN0YWNrQ291bnQgPSAwO1xuICAgICAgc3RhY2tbc3RhY2tDb3VudCsrXSA9IHNlZWQ7XG4gICAgICBzZWVkLm1fZmxhZ3MgfD0gYjJCb2R5X2lzbGFuZEZsYWc7XG4gICAgICB3aGlsZSAoc3RhY2tDb3VudCA+IDApIHtcbiAgICAgICAgYiA9IHN0YWNrWy0tc3RhY2tDb3VudF07XG4gICAgICAgIGlzbGFuZC5BZGRCb2R5KGIpO1xuICAgICAgICBpZiAoYi5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keV9zdGF0aWNCb2R5KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgb3RoZXIgPSB2b2lkIDA7XG4gICAgICAgIGNlID0gYi5tX2NvbnRhY3RMaXN0O1xuICAgICAgICB3aGlsZSAoY2UpIHtcbiAgICAgICAgICBpZiAoY2UuY29udGFjdC5tX2ZsYWdzICYgYjJDb250YWN0X2lzbGFuZEZsYWcpIHtcbiAgICAgICAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2UuY29udGFjdC5Jc1NlbnNvcigpID09PSB0cnVlIHx8IGNlLmNvbnRhY3QuSXNFbmFibGVkKCkgPT09IGZhbHNlIHx8IGNlLmNvbnRhY3QuSXNUb3VjaGluZygpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY2UgPSBjZS5uZXh0O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzbGFuZC5BZGRDb250YWN0KGNlLmNvbnRhY3QpO1xuICAgICAgICAgIGNlLmNvbnRhY3QubV9mbGFncyB8PSBiMkNvbnRhY3RfaXNsYW5kRmxhZztcbiAgICAgICAgICBvdGhlciA9IGNlLm90aGVyO1xuICAgICAgICAgIGlmIChvdGhlci5tX2ZsYWdzICYgYjJCb2R5X2lzbGFuZEZsYWcpIHtcbiAgICAgICAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdGFja1tzdGFja0NvdW50KytdID0gb3RoZXI7XG4gICAgICAgICAgb3RoZXIubV9mbGFncyB8PSBiMkJvZHlfaXNsYW5kRmxhZztcbiAgICAgICAgICBjZSA9IGNlLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgam4gPSBiLm1fam9pbnRMaXN0O1xuICAgICAgICB3aGlsZSAoam4pIHtcbiAgICAgICAgICBpZiAoam4uam9pbnQubV9pc2xhbmRGbGFnID09PSB0cnVlKSB7XG4gICAgICAgICAgICBqbiA9IGpuLm5leHQ7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3RoZXIgPSBqbi5vdGhlcjtcbiAgICAgICAgICBpZiAob3RoZXIuSXNBY3RpdmUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGpuID0gam4ubmV4dDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc2xhbmQuQWRkSm9pbnQoam4uam9pbnQpO1xuICAgICAgICAgIGpuLmpvaW50Lm1faXNsYW5kRmxhZyA9IHRydWU7XG4gICAgICAgICAgaWYgKG90aGVyLm1fZmxhZ3MgJiBiMkJvZHlfaXNsYW5kRmxhZykge1xuICAgICAgICAgICAgam4gPSBqbi5uZXh0O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YWNrW3N0YWNrQ291bnQrK10gPSBvdGhlcjtcbiAgICAgICAgICBvdGhlci5tX2ZsYWdzIHw9IGIyQm9keV9pc2xhbmRGbGFnO1xuICAgICAgICAgIGpuID0gam4ubmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXNsYW5kLlNvbHZlKHN0ZXAsIHRoaXMubV9ncmF2aXR5LCB0aGlzLm1fYWxsb3dTbGVlcCk7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgaXNsYW5kLm1fYm9keUNvdW50KSB7XG4gICAgICAgIGIgPSBpc2xhbmQubV9ib2RpZXNbaV07XG4gICAgICAgIGlmIChiLkdldFR5cGUoKSA9PT0gYjJCb2R5X3N0YXRpY0JvZHkpIHtcbiAgICAgICAgICBiLm1fZmxhZ3MgJj0gfmIyQm9keV9pc2xhbmRGbGFnO1xuICAgICAgICB9XG4gICAgICAgICsraTtcbiAgICAgIH1cbiAgICAgIHNlZWQgPSBzZWVkLm1fbmV4dDtcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBzdGFjay5sZW5ndGgpIHtcbiAgICAgIGlmICghc3RhY2tbaV0pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGFja1tpXSA9IG51bGw7XG4gICAgICArK2k7XG4gICAgfVxuICAgIGIgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgd2hpbGUgKGIpIHtcbiAgICAgIGlmIChiLklzQXdha2UoKSA9PT0gZmFsc2UgfHwgYi5Jc0FjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICBiID0gYi5tX25leHQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHlfc3RhdGljQm9keSkge1xuICAgICAgICBiID0gYi5tX25leHQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgYi5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7XG4gICAgICBiID0gYi5tX25leHQ7XG4gICAgfVxuICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5GaW5kTmV3Q29udGFjdHMoKTtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5Tb2x2ZVRPSSA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgYiwgYkEsIGJCLCBjLCBjRWRnZSwgZkEsIGZCLCBpLCBpc2xhbmQsIGosIGpFZGdlLCBtaW5Db250YWN0LCBtaW5UT0ksIG90aGVyLCBxdWV1ZSwgcXVldWVTaXplLCBxdWV1ZVN0YXJ0LCBzZWVkLCBzdWJTdGVwLCB0MCwgdG9pO1xuICAgIGIgPSB2b2lkIDA7XG4gICAgZkEgPSB2b2lkIDA7XG4gICAgZkIgPSB2b2lkIDA7XG4gICAgYkEgPSB2b2lkIDA7XG4gICAgYkIgPSB2b2lkIDA7XG4gICAgY0VkZ2UgPSB2b2lkIDA7XG4gICAgaiA9IHZvaWQgMDtcbiAgICBpc2xhbmQgPSB0aGlzLm1faXNsYW5kO1xuICAgIGlzbGFuZC5Jbml0aWFsaXplKHRoaXMubV9ib2R5Q291bnQsIGIyU2V0dGluZ3MuYjJfbWF4VE9JQ29udGFjdHNQZXJJc2xhbmQsIGIyU2V0dGluZ3MuYjJfbWF4VE9JSm9pbnRzUGVySXNsYW5kLCBudWxsLCB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIsIHRoaXMubV9jb250YWN0U29sdmVyKTtcbiAgICBxdWV1ZSA9IGIyV29ybGQuc19xdWV1ZTtcbiAgICBiID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChiKSB7XG4gICAgICBiLm1fZmxhZ3MgJj0gfmIyQm9keV9pc2xhbmRGbGFnO1xuICAgICAgYi5tX3N3ZWVwLnQwID0gMC4wO1xuICAgICAgYiA9IGIubV9uZXh0O1xuICAgIH1cbiAgICBjID0gdm9pZCAwO1xuICAgIGMgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgd2hpbGUgKGMpIHtcbiAgICAgIGMubV9mbGFncyAmPSB+KGIyQ29udGFjdF90b2lGbGFnIHwgYjJDb250YWN0X2lzbGFuZEZsYWcpO1xuICAgICAgYyA9IGMubV9uZXh0O1xuICAgIH1cbiAgICBqID0gdGhpcy5tX2pvaW50TGlzdDtcbiAgICB3aGlsZSAoaikge1xuICAgICAgai5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICAgIGogPSBqLm1fbmV4dDtcbiAgICB9XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIG1pbkNvbnRhY3QgPSBudWxsO1xuICAgICAgbWluVE9JID0gMS4wO1xuICAgICAgYyA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICAgIHdoaWxlIChjKSB7XG4gICAgICAgIGlmIChjLklzU2Vuc29yKCkgPT09IHRydWUgfHwgYy5Jc0VuYWJsZWQoKSA9PT0gZmFsc2UgfHwgYy5Jc0NvbnRpbnVvdXMoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b2kgPSAxLjA7XG4gICAgICAgIGlmIChjLm1fZmxhZ3MgJiBiMkNvbnRhY3RfdG9pRmxhZykge1xuICAgICAgICAgIHRvaSA9IGMubV90b2k7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZkEgPSBjLm1fZml4dHVyZUE7XG4gICAgICAgICAgZkIgPSBjLm1fZml4dHVyZUI7XG4gICAgICAgICAgYkEgPSBmQS5tX2JvZHk7XG4gICAgICAgICAgYkIgPSBmQi5tX2JvZHk7XG4gICAgICAgICAgaWYgKChiQS5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSB8fCBiQS5Jc0F3YWtlKCkgPT09IGZhbHNlKSAmJiAoYkIuR2V0VHlwZSgpICE9PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkgfHwgYkIuSXNBd2FrZSgpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0MCA9IGJBLm1fc3dlZXAudDA7XG4gICAgICAgICAgaWYgKGJBLm1fc3dlZXAudDAgPCBiQi5tX3N3ZWVwLnQwKSB7XG4gICAgICAgICAgICB0MCA9IGJCLm1fc3dlZXAudDA7XG4gICAgICAgICAgICBiQS5tX3N3ZWVwLkFkdmFuY2UodDApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYkIubV9zd2VlcC50MCA8IGJBLm1fc3dlZXAudDApIHtcbiAgICAgICAgICAgIHQwID0gYkEubV9zd2VlcC50MDtcbiAgICAgICAgICAgIGJCLm1fc3dlZXAuQWR2YW5jZSh0MCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRvaSA9IGMuQ29tcHV0ZVRPSShiQS5tX3N3ZWVwLCBiQi5tX3N3ZWVwKTtcbiAgICAgICAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KDAuMCA8PSB0b2kgJiYgdG9pIDw9IDEuMCk7XG4gICAgICAgICAgaWYgKHRvaSA+IDAuMCAmJiB0b2kgPCAxLjApIHtcbiAgICAgICAgICAgIHRvaSA9ICgxLjAgLSB0b2kpICogdDAgKyB0b2k7XG4gICAgICAgICAgICBpZiAodG9pID4gMSkge1xuICAgICAgICAgICAgICB0b2kgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjLm1fdG9pID0gdG9pO1xuICAgICAgICAgIGMubV9mbGFncyB8PSBiMkNvbnRhY3RfdG9pRmxhZztcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLk1JTl9WQUxVRSA8IHRvaSAmJiB0b2kgPCBtaW5UT0kpIHtcbiAgICAgICAgICBtaW5Db250YWN0ID0gYztcbiAgICAgICAgICBtaW5UT0kgPSB0b2k7XG4gICAgICAgIH1cbiAgICAgICAgYyA9IGMubV9uZXh0O1xuICAgICAgfVxuICAgICAgaWYgKChtaW5Db250YWN0ID09IG51bGwpIHx8IDEuMCAtIDEwMC4wICogTnVtYmVyLk1JTl9WQUxVRSA8IG1pblRPSSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGZBID0gbWluQ29udGFjdC5tX2ZpeHR1cmVBO1xuICAgICAgZkIgPSBtaW5Db250YWN0Lm1fZml4dHVyZUI7XG4gICAgICBiQSA9IGZBLm1fYm9keTtcbiAgICAgIGJCID0gZkIubV9ib2R5O1xuICAgICAgYjJXb3JsZC5zX2JhY2t1cEEuU2V0KGJBLm1fc3dlZXApO1xuICAgICAgYjJXb3JsZC5zX2JhY2t1cEIuU2V0KGJCLm1fc3dlZXApO1xuICAgICAgYkEuQWR2YW5jZShtaW5UT0kpO1xuICAgICAgYkIuQWR2YW5jZShtaW5UT0kpO1xuICAgICAgbWluQ29udGFjdC5VcGRhdGUodGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3RlbmVyKTtcbiAgICAgIG1pbkNvbnRhY3QubV9mbGFncyAmPSB+YjJDb250YWN0X3RvaUZsYWc7XG4gICAgICBpZiAobWluQ29udGFjdC5Jc1NlbnNvcigpID09PSB0cnVlIHx8IG1pbkNvbnRhY3QuSXNFbmFibGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJBLm1fc3dlZXAuU2V0KGIyV29ybGQuc19iYWNrdXBBKTtcbiAgICAgICAgYkIubV9zd2VlcC5TZXQoYjJXb3JsZC5zX2JhY2t1cEIpO1xuICAgICAgICBiQS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChtaW5Db250YWN0LklzVG91Y2hpbmcoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzZWVkID0gYkE7XG4gICAgICBpZiAoc2VlZC5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgICBzZWVkID0gYkI7XG4gICAgICB9XG4gICAgICBpc2xhbmQuQ2xlYXIoKTtcbiAgICAgIHF1ZXVlU3RhcnQgPSAwO1xuICAgICAgcXVldWVTaXplID0gMDtcbiAgICAgIHF1ZXVlW3F1ZXVlU3RhcnQgKyBxdWV1ZVNpemUrK10gPSBzZWVkO1xuICAgICAgc2VlZC5tX2ZsYWdzIHw9IGIyQm9keV9pc2xhbmRGbGFnO1xuICAgICAgd2hpbGUgKHF1ZXVlU2l6ZSA+IDApIHtcbiAgICAgICAgYiA9IHF1ZXVlW3F1ZXVlU3RhcnQrK107XG4gICAgICAgIC0tcXVldWVTaXplO1xuICAgICAgICBpc2xhbmQuQWRkQm9keShiKTtcbiAgICAgICAgaWYgKGIuSXNBd2FrZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgIGIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGIuR2V0VHlwZSgpICE9PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjRWRnZSA9IGIubV9jb250YWN0TGlzdDtcbiAgICAgICAgd2hpbGUgKGNFZGdlKSB7XG4gICAgICAgICAgaWYgKGlzbGFuZC5tX2NvbnRhY3RDb3VudCA9PT0gaXNsYW5kLm1fY29udGFjdENhcGFjaXR5KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNFZGdlLmNvbnRhY3QubV9mbGFncyAmIGIyQ29udGFjdF9pc2xhbmRGbGFnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNFZGdlLmNvbnRhY3QuSXNTZW5zb3IoKSA9PT0gdHJ1ZSB8fCBjRWRnZS5jb250YWN0LklzRW5hYmxlZCgpID09PSBmYWxzZSB8fCBjRWRnZS5jb250YWN0LklzVG91Y2hpbmcoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc2xhbmQuQWRkQ29udGFjdChjRWRnZS5jb250YWN0KTtcbiAgICAgICAgICBjRWRnZS5jb250YWN0Lm1fZmxhZ3MgfD0gYjJDb250YWN0X2lzbGFuZEZsYWc7XG4gICAgICAgICAgb3RoZXIgPSBjRWRnZS5vdGhlcjtcbiAgICAgICAgICBpZiAob3RoZXIubV9mbGFncyAmIGIyQm9keV9pc2xhbmRGbGFnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG90aGVyLkdldFR5cGUoKSAhPT0gYjJCb2R5X3N0YXRpY0JvZHkpIHtcbiAgICAgICAgICAgIG90aGVyLkFkdmFuY2UobWluVE9JKTtcbiAgICAgICAgICAgIG90aGVyLlNldEF3YWtlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBxdWV1ZVtxdWV1ZVN0YXJ0ICsgcXVldWVTaXplXSA9IG90aGVyO1xuICAgICAgICAgICsrcXVldWVTaXplO1xuICAgICAgICAgIG90aGVyLm1fZmxhZ3MgfD0gYjJCb2R5X2lzbGFuZEZsYWc7XG4gICAgICAgICAgY0VkZ2UgPSBjRWRnZS5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGpFZGdlID0gYi5tX2pvaW50TGlzdDtcbiAgICAgICAgd2hpbGUgKGpFZGdlKSB7XG4gICAgICAgICAgaWYgKGlzbGFuZC5tX2pvaW50Q291bnQgPT09IGlzbGFuZC5tX2pvaW50Q2FwYWNpdHkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoakVkZ2Uuam9pbnQubV9pc2xhbmRGbGFnID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3RoZXIgPSBqRWRnZS5vdGhlcjtcbiAgICAgICAgICBpZiAob3RoZXIuSXNBY3RpdmUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc2xhbmQuQWRkSm9pbnQoakVkZ2Uuam9pbnQpO1xuICAgICAgICAgIGpFZGdlLmpvaW50Lm1faXNsYW5kRmxhZyA9IHRydWU7XG4gICAgICAgICAgaWYgKG90aGVyLm1fZmxhZ3MgJiBiMkJvZHlfaXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvdGhlci5HZXRUeXBlKCkgIT09IGIyQm9keV9zdGF0aWNCb2R5KSB7XG4gICAgICAgICAgICBvdGhlci5BZHZhbmNlKG1pblRPSSk7XG4gICAgICAgICAgICBvdGhlci5TZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcXVldWVbcXVldWVTdGFydCArIHF1ZXVlU2l6ZV0gPSBvdGhlcjtcbiAgICAgICAgICArK3F1ZXVlU2l6ZTtcbiAgICAgICAgICBvdGhlci5tX2ZsYWdzIHw9IGIyQm9keV9pc2xhbmRGbGFnO1xuICAgICAgICAgIGpFZGdlID0gakVkZ2UubmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3ViU3RlcCA9IGIyV29ybGQuc190aW1lc3RlcDtcbiAgICAgIHN1YlN0ZXAud2FybVN0YXJ0aW5nID0gZmFsc2U7XG4gICAgICBzdWJTdGVwLmR0ID0gKDEuMCAtIG1pblRPSSkgKiBzdGVwLmR0O1xuICAgICAgc3ViU3RlcC5pbnZfZHQgPSAxLjAgLyBzdWJTdGVwLmR0O1xuICAgICAgc3ViU3RlcC5kdFJhdGlvID0gMC4wO1xuICAgICAgc3ViU3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnMgPSBzdGVwLnZlbG9jaXR5SXRlcmF0aW9ucztcbiAgICAgIHN1YlN0ZXAucG9zaXRpb25JdGVyYXRpb25zID0gc3RlcC5wb3NpdGlvbkl0ZXJhdGlvbnM7XG4gICAgICBpc2xhbmQuU29sdmVUT0koc3ViU3RlcCk7XG4gICAgICBpID0gMDtcbiAgICAgIGkgPSAwO1xuICAgICAgd2hpbGUgKGkgPCBpc2xhbmQubV9ib2R5Q291bnQpIHtcbiAgICAgICAgYiA9IGlzbGFuZC5tX2JvZGllc1tpXTtcbiAgICAgICAgYi5tX2ZsYWdzICY9IH5iMkJvZHlfaXNsYW5kRmxhZztcbiAgICAgICAgaWYgKGIuSXNBd2FrZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiLkdldFR5cGUoKSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYi5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7XG4gICAgICAgIGNFZGdlID0gYi5tX2NvbnRhY3RMaXN0O1xuICAgICAgICB3aGlsZSAoY0VkZ2UpIHtcbiAgICAgICAgICBjRWRnZS5jb250YWN0Lm1fZmxhZ3MgJj0gfmIyQ29udGFjdF90b2lGbGFnO1xuICAgICAgICAgIGNFZGdlID0gY0VkZ2UubmV4dDtcbiAgICAgICAgfVxuICAgICAgICArK2k7XG4gICAgICB9XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgaXNsYW5kLm1fY29udGFjdENvdW50KSB7XG4gICAgICAgIGMgPSBpc2xhbmQubV9jb250YWN0c1tpXTtcbiAgICAgICAgYy5tX2ZsYWdzICY9IH4oYjJDb250YWN0X3RvaUZsYWcgfCBiMkNvbnRhY3RfaXNsYW5kRmxhZyk7XG4gICAgICAgICsraTtcbiAgICAgIH1cbiAgICAgIGkgPSAwO1xuICAgICAgd2hpbGUgKGkgPCBpc2xhbmQubV9qb2ludENvdW50KSB7XG4gICAgICAgIGogPSBpc2xhbmQubV9qb2ludHNbaV07XG4gICAgICAgIGoubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgICsraTtcbiAgICAgIH1cbiAgICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5GaW5kTmV3Q29udGFjdHMoKTtcbiAgICB9XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuRHJhd0pvaW50ID0gZnVuY3Rpb24oam9pbnQpIHtcbiAgICB2YXIgYjEsIGIyLCBjb2xvciwgcDEsIHAyLCBwdWxsZXksIHMxLCBzMiwgeDEsIHgyLCB4ZjEsIHhmMjtcbiAgICBiMSA9IGpvaW50LkdldEJvZHlBKCk7XG4gICAgYjIgPSBqb2ludC5HZXRCb2R5QigpO1xuICAgIHhmMSA9IGIxLm1feGY7XG4gICAgeGYyID0gYjIubV94ZjtcbiAgICB4MSA9IHhmMS5wb3NpdGlvbjtcbiAgICB4MiA9IHhmMi5wb3NpdGlvbjtcbiAgICBwMSA9IGpvaW50LkdldEFuY2hvckEoKTtcbiAgICBwMiA9IGpvaW50LkdldEFuY2hvckIoKTtcbiAgICBjb2xvciA9IGIyV29ybGQuc19qb2ludENvbG9yO1xuICAgIHN3aXRjaCAoam9pbnQubV90eXBlKSB7XG4gICAgICBjYXNlIGIySm9pbnQuZV9kaXN0YW5jZUpvaW50OlxuICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdTZWdtZW50KHAxLCBwMiwgY29sb3IpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgYjJKb2ludC5lX3B1bGxleUpvaW50OlxuICAgICAgICBwdWxsZXkgPSAoam9pbnQgaW5zdGFuY2VvZiBiMlB1bGxleUpvaW50ID8gam9pbnQgOiBudWxsKTtcbiAgICAgICAgczEgPSBwdWxsZXkuR2V0R3JvdW5kQW5jaG9yQSgpO1xuICAgICAgICBzMiA9IHB1bGxleS5HZXRHcm91bmRBbmNob3JCKCk7XG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQoczEsIHAxLCBjb2xvcik7XG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQoczIsIHAyLCBjb2xvcik7XG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQoczEsIHMyLCBjb2xvcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfbW91c2VKb2ludDpcbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudChwMSwgcDIsIGNvbG9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoYjEgIT09IHRoaXMubV9ncm91bmRCb2R5KSB7XG4gICAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudCh4MSwgcDEsIGNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdTZWdtZW50KHAxLCBwMiwgY29sb3IpO1xuICAgICAgICBpZiAoYjIgIT09IHRoaXMubV9ncm91bmRCb2R5KSB7XG4gICAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudCh4MiwgcDIsIGNvbG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5EcmF3U2hhcGUgPSBmdW5jdGlvbihzaGFwZSwgeGYsIGNvbG9yKSB7XG4gICAgdmFyIGF4aXMsIGNlbnRlciwgY2lyY2xlLCBlZGdlLCBpLCBsb2NhbFZlcnRpY2VzLCBwb2x5LCByYWRpdXMsIHZlcnRleENvdW50LCB2ZXJ0aWNlcztcbiAgICBzd2l0Y2ggKHNoYXBlLm1fdHlwZSkge1xuICAgICAgY2FzZSBiMlNoYXBlLmVfY2lyY2xlU2hhcGU6XG4gICAgICAgIGNpcmNsZSA9IChzaGFwZSBpbnN0YW5jZW9mIGIyQ2lyY2xlU2hhcGUgPyBzaGFwZSA6IG51bGwpO1xuICAgICAgICBjZW50ZXIgPSBiMk1hdGguTXVsWCh4ZiwgY2lyY2xlLm1fcCk7XG4gICAgICAgIHJhZGl1cyA9IGNpcmNsZS5tX3JhZGl1cztcbiAgICAgICAgYXhpcyA9IHhmLlIuY29sMTtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NvbGlkQ2lyY2xlKGNlbnRlciwgcmFkaXVzLCBheGlzLCBjb2xvcik7XG4gICAgICBjYXNlIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGU6XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBwb2x5ID0gKHNoYXBlIGluc3RhbmNlb2YgYjJQb2x5Z29uU2hhcGUgPyBzaGFwZSA6IG51bGwpO1xuICAgICAgICB2ZXJ0ZXhDb3VudCA9IHBhcnNlSW50KHBvbHkuR2V0VmVydGV4Q291bnQoKSk7XG4gICAgICAgIGxvY2FsVmVydGljZXMgPSBwb2x5LkdldFZlcnRpY2VzKCk7XG4gICAgICAgIHZlcnRpY2VzID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdmVydGV4Q291bnQpIHtcbiAgICAgICAgICB2ZXJ0aWNlc1tpXSA9IGIyTWF0aC5NdWxYKHhmLCBsb2NhbFZlcnRpY2VzW2ldKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NvbGlkUG9seWdvbih2ZXJ0aWNlcywgdmVydGV4Q291bnQsIGNvbG9yKTtcbiAgICAgIGNhc2UgYjJTaGFwZS5lX2VkZ2VTaGFwZTpcbiAgICAgICAgZWRnZSA9IChzaGFwZSBpbnN0YW5jZW9mIGIyRWRnZVNoYXBlID8gc2hhcGUgOiBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQoYjJNYXRoLk11bFgoeGYsIGVkZ2UuR2V0VmVydGV4MSgpKSwgYjJNYXRoLk11bFgoeGYsIGVkZ2UuR2V0VmVydGV4MigpKSwgY29sb3IpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYjJXb3JsZDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJXb3JsZC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDaXJjbGVTaGFwZSwgYjJDb2xsaXNpb24sIGIyQ29udGFjdCxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyQ29udGFjdCA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdDtcblxuYjJDb2xsaXNpb24gPSBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb247XG5cbmIyQ2lyY2xlU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyQ2lyY2xlU2hhcGU7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ2lyY2xlQ29udGFjdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyQ2lyY2xlQ29udGFjdCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBiMkNpcmNsZUNvbnRhY3QoKSB7XG4gICAgcmV0dXJuIGIyQ2lyY2xlQ29udGFjdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGIyQ2lyY2xlQ29udGFjdC5DcmVhdGUgPSBmdW5jdGlvbihhbGxvY2F0b3IpIHtcbiAgICByZXR1cm4gbmV3IGIyQ2lyY2xlQ29udGFjdCgpO1xuICB9O1xuXG4gIGIyQ2lyY2xlQ29udGFjdC5EZXN0cm95ID0gZnVuY3Rpb24oY29udGFjdCwgYWxsb2NhdG9yKSB7fTtcblxuICBiMkNpcmNsZUNvbnRhY3QucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7XG4gICAgYjJDaXJjbGVDb250YWN0Ll9fc3VwZXJfXy5SZXNldC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJlQik7XG4gIH07XG5cbiAgYjJDaXJjbGVDb250YWN0LnByb3RvdHlwZS5FdmFsdWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiQSwgYkI7XG4gICAgYkEgPSB0aGlzLm1fZml4dHVyZUEuR2V0Qm9keSgpO1xuICAgIGJCID0gdGhpcy5tX2ZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICBiMkNvbGxpc2lvbi5Db2xsaWRlQ2lyY2xlcyh0aGlzLm1fbWFuaWZvbGQsICh0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSBpbnN0YW5jZW9mIGIyQ2lyY2xlU2hhcGUgPyB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSA6IG51bGwpLCBiQS5tX3hmLCAodGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgaW5zdGFuY2VvZiBiMkNpcmNsZVNoYXBlID8gdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgOiBudWxsKSwgYkIubV94Zik7XG4gIH07XG5cbiAgcmV0dXJuIGIyQ2lyY2xlQ29udGFjdDtcblxufSkoYjJDb250YWN0KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDaXJjbGVDb250YWN0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3RFZGdlLCBiMk1hbmlmb2xkLCBiMlNldHRpbmdzLCBiMlRPSUlucHV0LCBiMlRpbWVPZkltcGFjdDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyQ29udGFjdEVkZ2UgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RFZGdlO1xuXG5iMk1hbmlmb2xkID0gQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGQ7XG5cbmIyVGltZU9mSW1wYWN0ID0gQm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0O1xuXG5iMlRPSUlucHV0ID0gQm94MkQuQ29sbGlzaW9uLmIyVE9JSW5wdXQ7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdCA9IChmdW5jdGlvbigpIHtcbiAgYjJDb250YWN0LmVfc2Vuc29yRmxhZyA9IDB4MDAwMTtcblxuICBiMkNvbnRhY3QuZV9jb250aW51b3VzRmxhZyA9IDB4MDAwMjtcblxuICBiMkNvbnRhY3QuZV9pc2xhbmRGbGFnID0gMHgwMDA0O1xuXG4gIGIyQ29udGFjdC5lX3RvaUZsYWcgPSAweDAwMDg7XG5cbiAgYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnID0gMHgwMDEwO1xuXG4gIGIyQ29udGFjdC5lX2VuYWJsZWRGbGFnID0gMHgwMDIwO1xuXG4gIGIyQ29udGFjdC5lX2ZpbHRlckZsYWcgPSAweDAwNDA7XG5cbiAgYjJDb250YWN0LnNfaW5wdXQgPSBuZXcgYjJUT0lJbnB1dCgpO1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUubV9ub2RlQSA9IG51bGw7XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5tX25vZGVCID0gbnVsbDtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLm1fbWFuaWZvbGQgPSBudWxsO1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUubV9vbGRNYW5pZm9sZCA9IG51bGw7XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5tX2ZpeHR1cmVBID0gbnVsbDtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLm1fZml4dHVyZUIgPSBudWxsO1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUubV90b3VjaGluZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdCgpIHtcbiAgICB0aGlzLm1fbm9kZUEgPSBuZXcgYjJDb250YWN0RWRnZSgpO1xuICAgIHRoaXMubV9ub2RlQiA9IG5ldyBiMkNvbnRhY3RFZGdlKCk7XG4gICAgdGhpcy5tX21hbmlmb2xkID0gbmV3IGIyTWFuaWZvbGQoKTtcbiAgICB0aGlzLm1fb2xkTWFuaWZvbGQgPSBuZXcgYjJNYW5pZm9sZCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuR2V0TWFuaWZvbGQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21hbmlmb2xkO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuR2V0V29ybGRNYW5pZm9sZCA9IGZ1bmN0aW9uKHdvcmxkTWFuaWZvbGQpIHtcbiAgICB2YXIgYm9keUEsIGJvZHlCLCBzaGFwZUEsIHNoYXBlQjtcbiAgICBib2R5QSA9IHRoaXMubV9maXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgYm9keUIgPSB0aGlzLm1fZml4dHVyZUIuR2V0Qm9keSgpO1xuICAgIHNoYXBlQSA9IHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpO1xuICAgIHNoYXBlQiA9IHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpO1xuICAgIHdvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZSh0aGlzLm1fbWFuaWZvbGQsIGJvZHlBLkdldFRyYW5zZm9ybSgpLCBzaGFwZUEubV9yYWRpdXMsIGJvZHlCLkdldFRyYW5zZm9ybSgpLCBzaGFwZUIubV9yYWRpdXMpO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuSXNUb3VjaGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5tX2ZsYWdzICYgYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnKSA9PT0gYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuSXNDb250aW51b3VzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV9jb250aW51b3VzRmxhZykgPT09IGIyQ29udGFjdC5lX2NvbnRpbnVvdXNGbGFnO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuU2V0U2Vuc29yID0gZnVuY3Rpb24oc2Vuc29yKSB7XG4gICAgaWYgKHNlbnNvcikge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQ29udGFjdC5lX3NlbnNvckZsYWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJDb250YWN0LmVfc2Vuc29yRmxhZztcbiAgICB9XG4gIH07XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5Jc1NlbnNvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5tX2ZsYWdzICYgYjJDb250YWN0LmVfc2Vuc29yRmxhZykgPT09IGIyQ29udGFjdC5lX3NlbnNvckZsYWc7XG4gIH07XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5TZXRFbmFibGVkID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChmbGFnKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfZW5hYmxlZEZsYWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJDb250YWN0LmVfZW5hYmxlZEZsYWc7XG4gICAgfVxuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuSXNFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV9lbmFibGVkRmxhZykgPT09IGIyQ29udGFjdC5lX2VuYWJsZWRGbGFnO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuR2V0TmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkdldEZpeHR1cmVBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maXh0dXJlQTtcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkdldEZpeHR1cmVCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maXh0dXJlQjtcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkZsYWdGb3JGaWx0ZXJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfZmlsdGVyRmxhZztcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7XG4gICAgdmFyIGJvZHlBLCBib2R5QjtcbiAgICBpZiAoZml4dHVyZUEgPT09IHZvaWQgMCkge1xuICAgICAgZml4dHVyZUEgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoZml4dHVyZUIgPT09IHZvaWQgMCkge1xuICAgICAgZml4dHVyZUIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLm1fZmxhZ3MgPSBiMkNvbnRhY3QuZV9lbmFibGVkRmxhZztcbiAgICBpZiAoIWZpeHR1cmVBIHx8ICFmaXh0dXJlQikge1xuICAgICAgdGhpcy5tX2ZpeHR1cmVBID0gbnVsbDtcbiAgICAgIHRoaXMubV9maXh0dXJlQiA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChmaXh0dXJlQS5Jc1NlbnNvcigpIHx8IGZpeHR1cmVCLklzU2Vuc29yKCkpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkNvbnRhY3QuZV9zZW5zb3JGbGFnO1xuICAgIH1cbiAgICBib2R5QSA9IGZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBib2R5QiA9IGZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICBpZiAoYm9keUEuR2V0VHlwZSgpICE9PSBCb3gyRC5EeW5hbWljcy5iMkJvZHkuYjJfZHluYW1pY0JvZHkgfHwgYm9keUEuSXNCdWxsZXQoKSB8fCBib2R5Qi5HZXRUeXBlKCkgIT09IEJveDJELkR5bmFtaWNzLmIyQm9keS5iMl9keW5hbWljQm9keSB8fCBib2R5Qi5Jc0J1bGxldCgpKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfY29udGludW91c0ZsYWc7XG4gICAgfVxuICAgIHRoaXMubV9maXh0dXJlQSA9IGZpeHR1cmVBO1xuICAgIHRoaXMubV9maXh0dXJlQiA9IGZpeHR1cmVCO1xuICAgIHRoaXMubV9tYW5pZm9sZC5tX3BvaW50Q291bnQgPSAwO1xuICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbmV4dCA9IG51bGw7XG4gICAgdGhpcy5tX25vZGVBLmNvbnRhY3QgPSBudWxsO1xuICAgIHRoaXMubV9ub2RlQS5wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbm9kZUEubmV4dCA9IG51bGw7XG4gICAgdGhpcy5tX25vZGVBLm90aGVyID0gbnVsbDtcbiAgICB0aGlzLm1fbm9kZUIuY29udGFjdCA9IG51bGw7XG4gICAgdGhpcy5tX25vZGVCLnByZXYgPSBudWxsO1xuICAgIHRoaXMubV9ub2RlQi5uZXh0ID0gbnVsbDtcbiAgICB0aGlzLm1fbm9kZUIub3RoZXIgPSBudWxsO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB2YXIgYWFiYk92ZXJsYXAsIGJvZHlBLCBib2R5QiwgaSwgaWQyLCBqLCBtcDEsIG1wMiwgc2hhcGVBLCBzaGFwZUIsIHRNYW5pZm9sZCwgdG91Y2hpbmcsIHdhc1RvdWNoaW5nLCB4ZkEsIHhmQjtcbiAgICB0TWFuaWZvbGQgPSB0aGlzLm1fb2xkTWFuaWZvbGQ7XG4gICAgdGhpcy5tX29sZE1hbmlmb2xkID0gdGhpcy5tX21hbmlmb2xkO1xuICAgIHRoaXMubV9tYW5pZm9sZCA9IHRNYW5pZm9sZDtcbiAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfZW5hYmxlZEZsYWc7XG4gICAgdG91Y2hpbmcgPSBmYWxzZTtcbiAgICB3YXNUb3VjaGluZyA9ICh0aGlzLm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV90b3VjaGluZ0ZsYWcpID09PSBiMkNvbnRhY3QuZV90b3VjaGluZ0ZsYWc7XG4gICAgYm9keUEgPSB0aGlzLm1fZml4dHVyZUEubV9ib2R5O1xuICAgIGJvZHlCID0gdGhpcy5tX2ZpeHR1cmVCLm1fYm9keTtcbiAgICBhYWJiT3ZlcmxhcCA9IHRoaXMubV9maXh0dXJlQS5tX2FhYmIuVGVzdE92ZXJsYXAodGhpcy5tX2ZpeHR1cmVCLm1fYWFiYik7XG4gICAgaWYgKHRoaXMubV9mbGFncyAmIGIyQ29udGFjdC5lX3NlbnNvckZsYWcpIHtcbiAgICAgIGlmIChhYWJiT3ZlcmxhcCkge1xuICAgICAgICBzaGFwZUEgPSB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKTtcbiAgICAgICAgc2hhcGVCID0gdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCk7XG4gICAgICAgIHhmQSA9IGJvZHlBLkdldFRyYW5zZm9ybSgpO1xuICAgICAgICB4ZkIgPSBib2R5Qi5HZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgdG91Y2hpbmcgPSBiMlNoYXBlLlRlc3RPdmVybGFwKHNoYXBlQSwgeGZBLCBzaGFwZUIsIHhmQik7XG4gICAgICB9XG4gICAgICB0aGlzLm1fbWFuaWZvbGQubV9wb2ludENvdW50ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGJvZHlBLkdldFR5cGUoKSAhPT0gQm94MkQuRHluYW1pY3MuYjJCb2R5LmIyX2R5bmFtaWNCb2R5IHx8IGJvZHlBLklzQnVsbGV0KCkgfHwgYm9keUIuR2V0VHlwZSgpICE9PSBCb3gyRC5EeW5hbWljcy5iMkJvZHkuYjJfZHluYW1pY0JvZHkgfHwgYm9keUIuSXNCdWxsZXQoKSkge1xuICAgICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfY29udGludW91c0ZsYWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyQ29udGFjdC5lX2NvbnRpbnVvdXNGbGFnO1xuICAgICAgfVxuICAgICAgaWYgKGFhYmJPdmVybGFwKSB7XG4gICAgICAgIHRoaXMuRXZhbHVhdGUoKTtcbiAgICAgICAgdG91Y2hpbmcgPSB0aGlzLm1fbWFuaWZvbGQubV9wb2ludENvdW50ID4gMDtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5tX21hbmlmb2xkLm1fcG9pbnRDb3VudCkge1xuICAgICAgICAgIG1wMiA9IHRoaXMubV9tYW5pZm9sZC5tX3BvaW50c1tpXTtcbiAgICAgICAgICBtcDIubV9ub3JtYWxJbXB1bHNlID0gMC4wO1xuICAgICAgICAgIG1wMi5tX3RhbmdlbnRJbXB1bHNlID0gMC4wO1xuICAgICAgICAgIGlkMiA9IG1wMi5tX2lkO1xuICAgICAgICAgIGogPSAwO1xuICAgICAgICAgIHdoaWxlIChqIDwgdGhpcy5tX29sZE1hbmlmb2xkLm1fcG9pbnRDb3VudCkge1xuICAgICAgICAgICAgbXAxID0gdGhpcy5tX29sZE1hbmlmb2xkLm1fcG9pbnRzW2pdO1xuICAgICAgICAgICAgaWYgKG1wMS5tX2lkLmtleSA9PT0gaWQyLmtleSkge1xuICAgICAgICAgICAgICBtcDIubV9ub3JtYWxJbXB1bHNlID0gbXAxLm1fbm9ybWFsSW1wdWxzZTtcbiAgICAgICAgICAgICAgbXAyLm1fdGFuZ2VudEltcHVsc2UgPSBtcDEubV90YW5nZW50SW1wdWxzZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2o7XG4gICAgICAgICAgfVxuICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX21hbmlmb2xkLm1fcG9pbnRDb3VudCA9IDA7XG4gICAgICB9XG4gICAgICBpZiAodG91Y2hpbmcgIT09IHdhc1RvdWNoaW5nKSB7XG4gICAgICAgIGJvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgICBib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRvdWNoaW5nKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyQ29udGFjdC5lX3RvdWNoaW5nRmxhZztcbiAgICB9XG4gICAgaWYgKHdhc1RvdWNoaW5nID09PSBmYWxzZSAmJiB0b3VjaGluZyA9PT0gdHJ1ZSkge1xuICAgICAgbGlzdGVuZXIuQmVnaW5Db250YWN0KHRoaXMpO1xuICAgIH1cbiAgICBpZiAod2FzVG91Y2hpbmcgPT09IHRydWUgJiYgdG91Y2hpbmcgPT09IGZhbHNlKSB7XG4gICAgICBsaXN0ZW5lci5FbmRDb250YWN0KHRoaXMpO1xuICAgIH1cbiAgICBpZiAoKHRoaXMubV9mbGFncyAmIGIyQ29udGFjdC5lX3NlbnNvckZsYWcpID09PSAwKSB7XG4gICAgICBsaXN0ZW5lci5QcmVTb2x2ZSh0aGlzLCB0aGlzLm1fb2xkTWFuaWZvbGQpO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkV2YWx1YXRlID0gZnVuY3Rpb24oKSB7fTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkNvbXB1dGVUT0kgPSBmdW5jdGlvbihzd2VlcEEsIHN3ZWVwQikge1xuICAgIGIyQ29udGFjdC5zX2lucHV0LnByb3h5QS5TZXQodGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkpO1xuICAgIGIyQ29udGFjdC5zX2lucHV0LnByb3h5Qi5TZXQodGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkpO1xuICAgIGIyQ29udGFjdC5zX2lucHV0LnN3ZWVwQSA9IHN3ZWVwQTtcbiAgICBiMkNvbnRhY3Quc19pbnB1dC5zd2VlcEIgPSBzd2VlcEI7XG4gICAgYjJDb250YWN0LnNfaW5wdXQudG9sZXJhbmNlID0gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wO1xuICAgIHJldHVybiBiMlRpbWVPZkltcGFjdC5UaW1lT2ZJbXBhY3QoYjJDb250YWN0LnNfaW5wdXQpO1xuICB9O1xuXG4gIHJldHVybiBiMkNvbnRhY3Q7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0Q29uc3RyYWludFBvaW50LCBiMk1hdDIyLCBiMlNldHRpbmdzLCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5iMkNvbnRhY3RDb25zdHJhaW50UG9pbnQgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RDb25zdHJhaW50UG9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdENvbnN0cmFpbnQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdENvbnN0cmFpbnQucHJvdG90eXBlLmxvY2FsUGxhbmVOb3JtYWwgPSBudWxsO1xuXG4gIGIyQ29udGFjdENvbnN0cmFpbnQucHJvdG90eXBlLmxvY2FsUG9pbnQgPSBudWxsO1xuXG4gIGIyQ29udGFjdENvbnN0cmFpbnQucHJvdG90eXBlLm5vcm1hbCA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludC5wcm90b3R5cGUubm9ybWFsTWFzcyA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludC5wcm90b3R5cGUuSyA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludC5wcm90b3R5cGUucG9pbnRzID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkNvbnRhY3RDb25zdHJhaW50KCkge1xuICAgIHZhciBpO1xuICAgIHRoaXMubG9jYWxQbGFuZU5vcm1hbCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsUG9pbnQgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5ub3JtYWxNYXNzID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLksgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMucG9pbnRzID0gbmV3IEFycmF5KGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYjJTZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50cykge1xuICAgICAgdGhpcy5wb2ludHNbaV0gPSBuZXcgYjJDb250YWN0Q29uc3RyYWludFBvaW50KCk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkNvbnRhY3RDb25zdHJhaW50O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RDb25zdHJhaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RDb25zdHJhaW50UG9pbnQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdENvbnN0cmFpbnRQb2ludC5wcm90b3R5cGUubG9jYWxQb2ludCA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludFBvaW50LnByb3RvdHlwZS5yQSA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludFBvaW50LnByb3RvdHlwZS5yQiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJDb250YWN0Q29uc3RyYWludFBvaW50KCkge1xuICAgIHRoaXMubG9jYWxQb2ludCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnJBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMuckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyQ29udGFjdENvbnN0cmFpbnRQb2ludDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0Q29uc3RyYWludFBvaW50LmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdEVkZ2UgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyQ29udGFjdEVkZ2UoKSB7fVxuXG4gIHJldHVybiBiMkNvbnRhY3RFZGdlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RFZGdlLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNpcmNsZUNvbnRhY3QsIGIyQ29udGFjdFJlZ2lzdGVyLCBiMkVkZ2VBbmRDaXJjbGVDb250YWN0LCBiMlBvbHlBbmRDaXJjbGVDb250YWN0LCBiMlBvbHlBbmRFZGdlQ29udGFjdCwgYjJQb2x5Z29uQ29udGFjdCwgYjJTaGFwZTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlNoYXBlID0gQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlO1xuXG5iMkNvbnRhY3RSZWdpc3RlciA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFJlZ2lzdGVyO1xuXG5iMkNpcmNsZUNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNpcmNsZUNvbnRhY3Q7XG5cbmIyUG9seUFuZENpcmNsZUNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvbHlBbmRDaXJjbGVDb250YWN0O1xuXG5iMlBvbHlnb25Db250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQb2x5Z29uQ29udGFjdDtcblxuYjJFZGdlQW5kQ2lyY2xlQ29udGFjdCA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyRWRnZUFuZENpcmNsZUNvbnRhY3Q7XG5cbmIyUG9seUFuZEVkZ2VDb250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQb2x5QW5kRWRnZUNvbnRhY3Q7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdEZhY3RvcnkgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdEZhY3RvcnkucHJvdG90eXBlLm1fYWxsb2NhdG9yID0gbnVsbDtcblxuICBiMkNvbnRhY3RGYWN0b3J5LnByb3RvdHlwZS5tX3JlZ2lzdGVycyA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJDb250YWN0RmFjdG9yeShhbGxvY2F0b3IpIHtcbiAgICB0aGlzLm1fYWxsb2NhdG9yID0gYWxsb2NhdG9yO1xuICAgIHRoaXMuSW5pdGlhbGl6ZVJlZ2lzdGVycygpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ29udGFjdEZhY3RvcnkucHJvdG90eXBlLkFkZFR5cGUgPSBmdW5jdGlvbihjcmVhdGVGY24sIGRlc3Ryb3lGY24sIHR5cGUxLCB0eXBlMikge1xuICAgIGlmICh0eXBlMSA9PT0gdm9pZCAwKSB7XG4gICAgICB0eXBlMSA9IDA7XG4gICAgfVxuICAgIGlmICh0eXBlMiA9PT0gdm9pZCAwKSB7XG4gICAgICB0eXBlMiA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9yZWdpc3RlcnNbdHlwZTFdW3R5cGUyXS5jcmVhdGVGY24gPSBjcmVhdGVGY247XG4gICAgdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMV1bdHlwZTJdLmRlc3Ryb3lGY24gPSBkZXN0cm95RmNuO1xuICAgIHRoaXMubV9yZWdpc3RlcnNbdHlwZTFdW3R5cGUyXS5wcmltYXJ5ID0gdHJ1ZTtcbiAgICBpZiAodHlwZTEgIT09IHR5cGUyKSB7XG4gICAgICB0aGlzLm1fcmVnaXN0ZXJzW3R5cGUyXVt0eXBlMV0uY3JlYXRlRmNuID0gY3JlYXRlRmNuO1xuICAgICAgdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMl1bdHlwZTFdLmRlc3Ryb3lGY24gPSBkZXN0cm95RmNuO1xuICAgICAgdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMl1bdHlwZTFdLnByaW1hcnkgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgYjJDb250YWN0RmFjdG9yeS5wcm90b3R5cGUuSW5pdGlhbGl6ZVJlZ2lzdGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpLCBqO1xuICAgIHRoaXMubV9yZWdpc3RlcnMgPSBuZXcgQXJyYXkoYjJTaGFwZS5lX3NoYXBlVHlwZUNvdW50KTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGIyU2hhcGUuZV9zaGFwZVR5cGVDb3VudCkge1xuICAgICAgdGhpcy5tX3JlZ2lzdGVyc1tpXSA9IG5ldyBBcnJheShiMlNoYXBlLmVfc2hhcGVUeXBlQ291bnQpO1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IGIyU2hhcGUuZV9zaGFwZVR5cGVDb3VudCkge1xuICAgICAgICB0aGlzLm1fcmVnaXN0ZXJzW2ldW2pdID0gbmV3IGIyQ29udGFjdFJlZ2lzdGVyKCk7XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG4gICAgdGhpcy5BZGRUeXBlKGIyQ2lyY2xlQ29udGFjdC5DcmVhdGUsIGIyQ2lyY2xlQ29udGFjdC5EZXN0cm95LCBiMlNoYXBlLmVfY2lyY2xlU2hhcGUsIGIyU2hhcGUuZV9jaXJjbGVTaGFwZSk7XG4gICAgdGhpcy5BZGRUeXBlKGIyUG9seUFuZENpcmNsZUNvbnRhY3QuQ3JlYXRlLCBiMlBvbHlBbmRDaXJjbGVDb250YWN0LkRlc3Ryb3ksIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUsIGIyU2hhcGUuZV9jaXJjbGVTaGFwZSk7XG4gICAgdGhpcy5BZGRUeXBlKGIyUG9seWdvbkNvbnRhY3QuQ3JlYXRlLCBiMlBvbHlnb25Db250YWN0LkRlc3Ryb3ksIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUsIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUpO1xuICAgIHRoaXMuQWRkVHlwZShiMkVkZ2VBbmRDaXJjbGVDb250YWN0LkNyZWF0ZSwgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5EZXN0cm95LCBiMlNoYXBlLmVfZWRnZVNoYXBlLCBiMlNoYXBlLmVfY2lyY2xlU2hhcGUpO1xuICAgIHRoaXMuQWRkVHlwZShiMlBvbHlBbmRFZGdlQ29udGFjdC5DcmVhdGUsIGIyUG9seUFuZEVkZ2VDb250YWN0LkRlc3Ryb3ksIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUsIGIyU2hhcGUuZV9lZGdlU2hhcGUpO1xuICB9O1xuXG4gIGIyQ29udGFjdEZhY3RvcnkucHJvdG90eXBlLkNyZWF0ZSA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikge1xuICAgIHZhciBjLCBjcmVhdGVGY24sIHJlZywgdHlwZTEsIHR5cGUyO1xuICAgIHR5cGUxID0gcGFyc2VJbnQoZml4dHVyZUEuR2V0VHlwZSgpKTtcbiAgICB0eXBlMiA9IHBhcnNlSW50KGZpeHR1cmVCLkdldFR5cGUoKSk7XG4gICAgcmVnID0gdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMV1bdHlwZTJdO1xuICAgIGMgPSB2b2lkIDA7XG4gICAgaWYgKHJlZy5wb29sKSB7XG4gICAgICBjID0gcmVnLnBvb2w7XG4gICAgICByZWcucG9vbCA9IGMubV9uZXh0O1xuICAgICAgcmVnLnBvb2xDb3VudC0tO1xuICAgICAgYy5SZXNldChmaXh0dXJlQSwgZml4dHVyZUIpO1xuICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICAgIGNyZWF0ZUZjbiA9IHJlZy5jcmVhdGVGY247XG4gICAgaWYgKGNyZWF0ZUZjbiAhPSBudWxsKSB7XG4gICAgICBpZiAocmVnLnByaW1hcnkpIHtcbiAgICAgICAgYyA9IGNyZWF0ZUZjbih0aGlzLm1fYWxsb2NhdG9yKTtcbiAgICAgICAgYy5SZXNldChmaXh0dXJlQSwgZml4dHVyZUIpO1xuICAgICAgICByZXR1cm4gYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGMgPSBjcmVhdGVGY24odGhpcy5tX2FsbG9jYXRvcik7XG4gICAgICAgIGMuUmVzZXQoZml4dHVyZUIsIGZpeHR1cmVBKTtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3RGYWN0b3J5LnByb3RvdHlwZS5EZXN0cm95ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICAgIHZhciBkZXN0cm95RmNuLCByZWcsIHR5cGUxLCB0eXBlMjtcbiAgICBpZiAoY29udGFjdC5tX21hbmlmb2xkLm1fcG9pbnRDb3VudCA+IDApIHtcbiAgICAgIGNvbnRhY3QubV9maXh0dXJlQS5tX2JvZHkuU2V0QXdha2UodHJ1ZSk7XG4gICAgICBjb250YWN0Lm1fZml4dHVyZUIubV9ib2R5LlNldEF3YWtlKHRydWUpO1xuICAgIH1cbiAgICB0eXBlMSA9IHBhcnNlSW50KGNvbnRhY3QubV9maXh0dXJlQS5HZXRUeXBlKCkpO1xuICAgIHR5cGUyID0gcGFyc2VJbnQoY29udGFjdC5tX2ZpeHR1cmVCLkdldFR5cGUoKSk7XG4gICAgcmVnID0gdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMV1bdHlwZTJdO1xuICAgIGlmICh0cnVlKSB7XG4gICAgICByZWcucG9vbENvdW50Kys7XG4gICAgICBjb250YWN0Lm1fbmV4dCA9IHJlZy5wb29sO1xuICAgICAgcmVnLnBvb2wgPSBjb250YWN0O1xuICAgIH1cbiAgICBkZXN0cm95RmNuID0gcmVnLmRlc3Ryb3lGY247XG4gICAgZGVzdHJveUZjbihjb250YWN0LCB0aGlzLm1fYWxsb2NhdG9yKTtcbiAgfTtcblxuICByZXR1cm4gYjJDb250YWN0RmFjdG9yeTtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0RmFjdG9yeS5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RSZWdpc3RlciA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJDb250YWN0UmVnaXN0ZXIoKSB7fVxuXG4gIHJldHVybiBiMkNvbnRhY3RSZWdpc3RlcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0UmVnaXN0ZXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udGFjdElELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250YWN0SUQgPSBCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0UmVzdWx0ID0gKGZ1bmN0aW9uKCkge1xuICBiMkNvbnRhY3RSZXN1bHQucHJvdG90eXBlLnBvc2l0aW9uID0gbnVsbDtcblxuICBiMkNvbnRhY3RSZXN1bHQucHJvdG90eXBlLm5vcm1hbCA9IG51bGw7XG5cbiAgYjJDb250YWN0UmVzdWx0LnByb3RvdHlwZS5pZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJDb250YWN0UmVzdWx0KCkge1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5pZCA9IG5ldyBiMkNvbnRhY3RJRCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkNvbnRhY3RSZXN1bHQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udGFjdFJlc3VsdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0Q29uc3RyYWludCwgYjJNYXRoLCBiMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQsIGIyU2V0dGluZ3MsIGIyVGltZVN0ZXAsIGIyV29ybGRNYW5pZm9sZDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJUaW1lU3RlcCA9IEJveDJELkR5bmFtaWNzLmIyVGltZVN0ZXA7XG5cbmIyQ29udGFjdENvbnN0cmFpbnQgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RDb25zdHJhaW50O1xuXG5iMldvcmxkTWFuaWZvbGQgPSBCb3gyRC5Db2xsaXNpb24uYjJXb3JsZE1hbmlmb2xkO1xuXG5iMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQ7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlciA9IChmdW5jdGlvbigpIHtcbiAgYjJDb250YWN0U29sdmVyLnNfd29ybGRNYW5pZm9sZCA9IG5ldyBiMldvcmxkTWFuaWZvbGQoKTtcblxuICBiMkNvbnRhY3RTb2x2ZXIuc19wc20gPSBuZXcgYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkKCk7XG5cbiAgYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5tX3N0ZXAgPSBudWxsO1xuXG4gIGIyQ29udGFjdFNvbHZlci5wcm90b3R5cGUubV9jb25zdHJhaW50cyA9IG51bGw7XG5cbiAgYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5tX2FsbG9jYXRvciA9IG51bGw7XG5cbiAgYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5tX2NvbnN0cmFpbnRDb3VudCA9IDA7XG5cbiAgZnVuY3Rpb24gYjJDb250YWN0U29sdmVyKCkge1xuICAgIHRoaXMubV9zdGVwID0gbmV3IGIyVGltZVN0ZXAoKTtcbiAgICB0aGlzLm1fY29uc3RyYWludHMgPSBuZXcgQXJyYXkoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihzdGVwLCBjb250YWN0cywgY29udGFjdENvdW50LCBhbGxvY2F0b3IpIHtcbiAgICB2YXIgYm9keUEsIGJvZHlCLCBjYywgY2NwLCBjY3AxLCBjY3AyLCBjb250YWN0LCBjcCwgZml4dHVyZUEsIGZpeHR1cmVCLCBmcmljdGlvbiwgaSwgaW52SUEsIGludklCLCBpbnZNYXNzQSwgaW52TWFzc0IsIGssIGsxMSwgazEyLCBrMjIsIGtFcXVhbGl6ZWQsIGtOb3JtYWwsIGtUYW5nZW50LCBrX21heENvbmRpdGlvbk51bWJlciwgbWFuaWZvbGQsIG5vcm1hbFgsIG5vcm1hbFksIHJBWCwgckFZLCByQlgsIHJCWSwgcmFkaXVzQSwgcmFkaXVzQiwgcmVzdGl0dXRpb24sIHJuMUEsIHJuMUIsIHJuMkEsIHJuMkIsIHJuQSwgcm5CLCBydEEsIHJ0Qiwgc2hhcGVBLCBzaGFwZUIsIHRNYXQsIHRWZWMsIHRYLCB0WSwgdGFuZ2VudFgsIHRhbmdlbnRZLCB2QVgsIHZBWSwgdkJYLCB2QlksIHZSZWwsIHdBLCB3QjtcbiAgICBpZiAoY29udGFjdENvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIGNvbnRhY3RDb3VudCA9IDA7XG4gICAgfVxuICAgIGNvbnRhY3QgPSB2b2lkIDA7XG4gICAgdGhpcy5tX3N0ZXAuU2V0KHN0ZXApO1xuICAgIHRoaXMubV9hbGxvY2F0b3IgPSBhbGxvY2F0b3I7XG4gICAgaSA9IDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRoaXMubV9jb25zdHJhaW50Q291bnQgPSBjb250YWN0Q291bnQ7XG4gICAgd2hpbGUgKHRoaXMubV9jb25zdHJhaW50cy5sZW5ndGggPCB0aGlzLm1fY29uc3RyYWludENvdW50KSB7XG4gICAgICB0aGlzLm1fY29uc3RyYWludHNbdGhpcy5tX2NvbnN0cmFpbnRzLmxlbmd0aF0gPSBuZXcgYjJDb250YWN0Q29uc3RyYWludCgpO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGNvbnRhY3RDb3VudCkge1xuICAgICAgY29udGFjdCA9IGNvbnRhY3RzW2ldO1xuICAgICAgZml4dHVyZUEgPSBjb250YWN0Lm1fZml4dHVyZUE7XG4gICAgICBmaXh0dXJlQiA9IGNvbnRhY3QubV9maXh0dXJlQjtcbiAgICAgIHNoYXBlQSA9IGZpeHR1cmVBLm1fc2hhcGU7XG4gICAgICBzaGFwZUIgPSBmaXh0dXJlQi5tX3NoYXBlO1xuICAgICAgcmFkaXVzQSA9IHNoYXBlQS5tX3JhZGl1cztcbiAgICAgIHJhZGl1c0IgPSBzaGFwZUIubV9yYWRpdXM7XG4gICAgICBib2R5QSA9IGZpeHR1cmVBLm1fYm9keTtcbiAgICAgIGJvZHlCID0gZml4dHVyZUIubV9ib2R5O1xuICAgICAgbWFuaWZvbGQgPSBjb250YWN0LkdldE1hbmlmb2xkKCk7XG4gICAgICBmcmljdGlvbiA9IGIyU2V0dGluZ3MuYjJNaXhGcmljdGlvbihmaXh0dXJlQS5HZXRGcmljdGlvbigpLCBmaXh0dXJlQi5HZXRGcmljdGlvbigpKTtcbiAgICAgIHJlc3RpdHV0aW9uID0gYjJTZXR0aW5ncy5iMk1peFJlc3RpdHV0aW9uKGZpeHR1cmVBLkdldFJlc3RpdHV0aW9uKCksIGZpeHR1cmVCLkdldFJlc3RpdHV0aW9uKCkpO1xuICAgICAgdkFYID0gYm9keUEubV9saW5lYXJWZWxvY2l0eS54O1xuICAgICAgdkFZID0gYm9keUEubV9saW5lYXJWZWxvY2l0eS55O1xuICAgICAgdkJYID0gYm9keUIubV9saW5lYXJWZWxvY2l0eS54O1xuICAgICAgdkJZID0gYm9keUIubV9saW5lYXJWZWxvY2l0eS55O1xuICAgICAgd0EgPSBib2R5QS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICAgIHdCID0gYm9keUIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KG1hbmlmb2xkLm1fcG9pbnRDb3VudCA+IDApO1xuICAgICAgYjJDb250YWN0U29sdmVyLnNfd29ybGRNYW5pZm9sZC5Jbml0aWFsaXplKG1hbmlmb2xkLCBib2R5QS5tX3hmLCByYWRpdXNBLCBib2R5Qi5tX3hmLCByYWRpdXNCKTtcbiAgICAgIG5vcm1hbFggPSBiMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLm1fbm9ybWFsLng7XG4gICAgICBub3JtYWxZID0gYjJDb250YWN0U29sdmVyLnNfd29ybGRNYW5pZm9sZC5tX25vcm1hbC55O1xuICAgICAgY2MgPSB0aGlzLm1fY29uc3RyYWludHNbaV07XG4gICAgICBjYy5ib2R5QSA9IGJvZHlBO1xuICAgICAgY2MuYm9keUIgPSBib2R5QjtcbiAgICAgIGNjLm1hbmlmb2xkID0gbWFuaWZvbGQ7XG4gICAgICBjYy5ub3JtYWwueCA9IG5vcm1hbFg7XG4gICAgICBjYy5ub3JtYWwueSA9IG5vcm1hbFk7XG4gICAgICBjYy5wb2ludENvdW50ID0gbWFuaWZvbGQubV9wb2ludENvdW50O1xuICAgICAgY2MuZnJpY3Rpb24gPSBmcmljdGlvbjtcbiAgICAgIGNjLnJlc3RpdHV0aW9uID0gcmVzdGl0dXRpb247XG4gICAgICBjYy5sb2NhbFBsYW5lTm9ybWFsLnggPSBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwueDtcbiAgICAgIGNjLmxvY2FsUGxhbmVOb3JtYWwueSA9IG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC55O1xuICAgICAgY2MubG9jYWxQb2ludC54ID0gbWFuaWZvbGQubV9sb2NhbFBvaW50Lng7XG4gICAgICBjYy5sb2NhbFBvaW50LnkgPSBtYW5pZm9sZC5tX2xvY2FsUG9pbnQueTtcbiAgICAgIGNjLnJhZGl1cyA9IHJhZGl1c0EgKyByYWRpdXNCO1xuICAgICAgY2MudHlwZSA9IG1hbmlmb2xkLm1fdHlwZTtcbiAgICAgIGsgPSAwO1xuICAgICAgd2hpbGUgKGsgPCBjYy5wb2ludENvdW50KSB7XG4gICAgICAgIGNwID0gbWFuaWZvbGQubV9wb2ludHNba107XG4gICAgICAgIGNjcCA9IGNjLnBvaW50c1trXTtcbiAgICAgICAgY2NwLm5vcm1hbEltcHVsc2UgPSBjcC5tX25vcm1hbEltcHVsc2U7XG4gICAgICAgIGNjcC50YW5nZW50SW1wdWxzZSA9IGNwLm1fdGFuZ2VudEltcHVsc2U7XG4gICAgICAgIGNjcC5sb2NhbFBvaW50LlNldFYoY3AubV9sb2NhbFBvaW50KTtcbiAgICAgICAgckFYID0gY2NwLnJBLnggPSBiMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLm1fcG9pbnRzW2tdLnggLSBib2R5QS5tX3N3ZWVwLmMueDtcbiAgICAgICAgckFZID0gY2NwLnJBLnkgPSBiMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLm1fcG9pbnRzW2tdLnkgLSBib2R5QS5tX3N3ZWVwLmMueTtcbiAgICAgICAgckJYID0gY2NwLnJCLnggPSBiMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLm1fcG9pbnRzW2tdLnggLSBib2R5Qi5tX3N3ZWVwLmMueDtcbiAgICAgICAgckJZID0gY2NwLnJCLnkgPSBiMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLm1fcG9pbnRzW2tdLnkgLSBib2R5Qi5tX3N3ZWVwLmMueTtcbiAgICAgICAgcm5BID0gckFYICogbm9ybWFsWSAtIHJBWSAqIG5vcm1hbFg7XG4gICAgICAgIHJuQiA9IHJCWCAqIG5vcm1hbFkgLSByQlkgKiBub3JtYWxYO1xuICAgICAgICBybkEgKj0gcm5BO1xuICAgICAgICBybkIgKj0gcm5CO1xuICAgICAgICBrTm9ybWFsID0gYm9keUEubV9pbnZNYXNzICsgYm9keUIubV9pbnZNYXNzICsgYm9keUEubV9pbnZJICogcm5BICsgYm9keUIubV9pbnZJICogcm5CO1xuICAgICAgICBjY3Aubm9ybWFsTWFzcyA9IDEuMCAvIGtOb3JtYWw7XG4gICAgICAgIGtFcXVhbGl6ZWQgPSBib2R5QS5tX21hc3MgKiBib2R5QS5tX2ludk1hc3MgKyBib2R5Qi5tX21hc3MgKiBib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIGtFcXVhbGl6ZWQgKz0gYm9keUEubV9tYXNzICogYm9keUEubV9pbnZJICogcm5BICsgYm9keUIubV9tYXNzICogYm9keUIubV9pbnZJICogcm5CO1xuICAgICAgICBjY3AuZXF1YWxpemVkTWFzcyA9IDEuMCAvIGtFcXVhbGl6ZWQ7XG4gICAgICAgIHRhbmdlbnRYID0gbm9ybWFsWTtcbiAgICAgICAgdGFuZ2VudFkgPSAtbm9ybWFsWDtcbiAgICAgICAgcnRBID0gckFYICogdGFuZ2VudFkgLSByQVkgKiB0YW5nZW50WDtcbiAgICAgICAgcnRCID0gckJYICogdGFuZ2VudFkgLSByQlkgKiB0YW5nZW50WDtcbiAgICAgICAgcnRBICo9IHJ0QTtcbiAgICAgICAgcnRCICo9IHJ0QjtcbiAgICAgICAga1RhbmdlbnQgPSBib2R5QS5tX2ludk1hc3MgKyBib2R5Qi5tX2ludk1hc3MgKyBib2R5QS5tX2ludkkgKiBydEEgKyBib2R5Qi5tX2ludkkgKiBydEI7XG4gICAgICAgIGNjcC50YW5nZW50TWFzcyA9IDEuMCAvIGtUYW5nZW50O1xuICAgICAgICBjY3AudmVsb2NpdHlCaWFzID0gMC4wO1xuICAgICAgICB0WCA9IHZCWCArICgtd0IgKiByQlkpIC0gdkFYIC0gKC13QSAqIHJBWSk7XG4gICAgICAgIHRZID0gdkJZICsgKHdCICogckJYKSAtIHZBWSAtICh3QSAqIHJBWCk7XG4gICAgICAgIHZSZWwgPSBjYy5ub3JtYWwueCAqIHRYICsgY2Mubm9ybWFsLnkgKiB0WTtcbiAgICAgICAgaWYgKHZSZWwgPCAoLWIyU2V0dGluZ3MuYjJfdmVsb2NpdHlUaHJlc2hvbGQpKSB7XG4gICAgICAgICAgY2NwLnZlbG9jaXR5QmlhcyArPSAtY2MucmVzdGl0dXRpb24gKiB2UmVsO1xuICAgICAgICB9XG4gICAgICAgICsraztcbiAgICAgIH1cbiAgICAgIGlmIChjYy5wb2ludENvdW50ID09PSAyKSB7XG4gICAgICAgIGNjcDEgPSBjYy5wb2ludHNbMF07XG4gICAgICAgIGNjcDIgPSBjYy5wb2ludHNbMV07XG4gICAgICAgIGludk1hc3NBID0gYm9keUEubV9pbnZNYXNzO1xuICAgICAgICBpbnZJQSA9IGJvZHlBLm1faW52STtcbiAgICAgICAgaW52TWFzc0IgPSBib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIGludklCID0gYm9keUIubV9pbnZJO1xuICAgICAgICBybjFBID0gY2NwMS5yQS54ICogbm9ybWFsWSAtIGNjcDEuckEueSAqIG5vcm1hbFg7XG4gICAgICAgIHJuMUIgPSBjY3AxLnJCLnggKiBub3JtYWxZIC0gY2NwMS5yQi55ICogbm9ybWFsWDtcbiAgICAgICAgcm4yQSA9IGNjcDIuckEueCAqIG5vcm1hbFkgLSBjY3AyLnJBLnkgKiBub3JtYWxYO1xuICAgICAgICBybjJCID0gY2NwMi5yQi54ICogbm9ybWFsWSAtIGNjcDIuckIueSAqIG5vcm1hbFg7XG4gICAgICAgIGsxMSA9IGludk1hc3NBICsgaW52TWFzc0IgKyBpbnZJQSAqIHJuMUEgKiBybjFBICsgaW52SUIgKiBybjFCICogcm4xQjtcbiAgICAgICAgazIyID0gaW52TWFzc0EgKyBpbnZNYXNzQiArIGludklBICogcm4yQSAqIHJuMkEgKyBpbnZJQiAqIHJuMkIgKiBybjJCO1xuICAgICAgICBrMTIgPSBpbnZNYXNzQSArIGludk1hc3NCICsgaW52SUEgKiBybjFBICogcm4yQSArIGludklCICogcm4xQiAqIHJuMkI7XG4gICAgICAgIGtfbWF4Q29uZGl0aW9uTnVtYmVyID0gMTAwLjA7XG4gICAgICAgIGlmIChrMTEgKiBrMTEgPCBrX21heENvbmRpdGlvbk51bWJlciAqIChrMTEgKiBrMjIgLSBrMTIgKiBrMTIpKSB7XG4gICAgICAgICAgY2MuSy5jb2wxLlNldChrMTEsIGsxMik7XG4gICAgICAgICAgY2MuSy5jb2wyLlNldChrMTIsIGsyMik7XG4gICAgICAgICAgY2MuSy5HZXRJbnZlcnNlKGNjLm5vcm1hbE1hc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNjLnBvaW50Q291bnQgPSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICB9O1xuXG4gIGIyQ29udGFjdFNvbHZlci5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIFBYLCBQWSwgYm9keUEsIGJvZHlCLCBjLCBjY3AsIGNjcDIsIGksIGludklBLCBpbnZJQiwgaW52TWFzc0EsIGludk1hc3NCLCBqLCBub3JtYWxYLCBub3JtYWxZLCB0Q291bnQsIHRNYXQsIHRWZWMsIHRWZWMyLCB0WCwgdGFuZ2VudFgsIHRhbmdlbnRZO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgdFZlYzIgPSB2b2lkIDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9jb25zdHJhaW50Q291bnQpIHtcbiAgICAgIGMgPSB0aGlzLm1fY29uc3RyYWludHNbaV07XG4gICAgICBib2R5QSA9IGMuYm9keUE7XG4gICAgICBib2R5QiA9IGMuYm9keUI7XG4gICAgICBpbnZNYXNzQSA9IGJvZHlBLm1faW52TWFzcztcbiAgICAgIGludklBID0gYm9keUEubV9pbnZJO1xuICAgICAgaW52TWFzc0IgPSBib2R5Qi5tX2ludk1hc3M7XG4gICAgICBpbnZJQiA9IGJvZHlCLm1faW52STtcbiAgICAgIG5vcm1hbFggPSBjLm5vcm1hbC54O1xuICAgICAgbm9ybWFsWSA9IGMubm9ybWFsLnk7XG4gICAgICB0YW5nZW50WCA9IG5vcm1hbFk7XG4gICAgICB0YW5nZW50WSA9IC1ub3JtYWxYO1xuICAgICAgdFggPSAwO1xuICAgICAgaiA9IDA7XG4gICAgICB0Q291bnQgPSAwO1xuICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgIHRDb3VudCA9IGMucG9pbnRDb3VudDtcbiAgICAgICAgaiA9IDA7XG4gICAgICAgIHdoaWxlIChqIDwgdENvdW50KSB7XG4gICAgICAgICAgY2NwID0gYy5wb2ludHNbal07XG4gICAgICAgICAgY2NwLm5vcm1hbEltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgICAgIGNjcC50YW5nZW50SW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICAgICAgUFggPSBjY3Aubm9ybWFsSW1wdWxzZSAqIG5vcm1hbFggKyBjY3AudGFuZ2VudEltcHVsc2UgKiB0YW5nZW50WDtcbiAgICAgICAgICBQWSA9IGNjcC5ub3JtYWxJbXB1bHNlICogbm9ybWFsWSArIGNjcC50YW5nZW50SW1wdWxzZSAqIHRhbmdlbnRZO1xuICAgICAgICAgIGJvZHlBLm1fYW5ndWxhclZlbG9jaXR5IC09IGludklBICogKGNjcC5yQS54ICogUFkgLSBjY3AuckEueSAqIFBYKTtcbiAgICAgICAgICBib2R5QS5tX2xpbmVhclZlbG9jaXR5LnggLT0gaW52TWFzc0EgKiBQWDtcbiAgICAgICAgICBib2R5QS5tX2xpbmVhclZlbG9jaXR5LnkgLT0gaW52TWFzc0EgKiBQWTtcbiAgICAgICAgICBib2R5Qi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBpbnZJQiAqIChjY3AuckIueCAqIFBZIC0gY2NwLnJCLnkgKiBQWCk7XG4gICAgICAgICAgYm9keUIubV9saW5lYXJWZWxvY2l0eS54ICs9IGludk1hc3NCICogUFg7XG4gICAgICAgICAgYm9keUIubV9saW5lYXJWZWxvY2l0eS55ICs9IGludk1hc3NCICogUFk7XG4gICAgICAgICAgKytqO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0Q291bnQgPSBjLnBvaW50Q291bnQ7XG4gICAgICAgIGogPSAwO1xuICAgICAgICB3aGlsZSAoaiA8IHRDb3VudCkge1xuICAgICAgICAgIGNjcDIgPSBjLnBvaW50c1tqXTtcbiAgICAgICAgICBjY3AyLm5vcm1hbEltcHVsc2UgPSAwLjA7XG4gICAgICAgICAgY2NwMi50YW5nZW50SW1wdWxzZSA9IDAuMDtcbiAgICAgICAgICArK2o7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gIH07XG5cbiAgYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgUDFYLCBQMVksIFAyWCwgUDJZLCBQWCwgUFksIGFYLCBhWSwgYlgsIGJZLCBib2R5QSwgYm9keUIsIGMsIGNjcCwgY3AxLCBjcDIsIGRYLCBkWSwgZHYxWCwgZHYxWSwgZHYyWCwgZHYyWSwgZHZYLCBkdlksIGZyaWN0aW9uLCBpLCBpbnZJQSwgaW52SUIsIGludk1hc3NBLCBpbnZNYXNzQiwgaiwga19lcnJvclRvbCwgbGFtYmRhLCBtYXhGcmljdGlvbiwgbmV3SW1wdWxzZSwgbm9ybWFsWCwgbm9ybWFsWSwgckFYLCByQVksIHJCWCwgckJZLCB0Q291bnQsIHRNYXQsIHRWZWMsIHRYLCB0YW5nZW50WCwgdGFuZ2VudFksIHZBLCB2Qiwgdm4sIHZuMSwgdm4yLCB2dCwgd0EsIHdCLCB4WCwgeFk7XG4gICAgaiA9IDA7XG4gICAgY2NwID0gdm9pZCAwO1xuICAgIHJBWCA9IDA7XG4gICAgckFZID0gMDtcbiAgICByQlggPSAwO1xuICAgIHJCWSA9IDA7XG4gICAgZHZYID0gMDtcbiAgICBkdlkgPSAwO1xuICAgIHZuID0gMDtcbiAgICB2dCA9IDA7XG4gICAgbGFtYmRhID0gMDtcbiAgICBtYXhGcmljdGlvbiA9IDA7XG4gICAgbmV3SW1wdWxzZSA9IDA7XG4gICAgUFggPSAwO1xuICAgIFBZID0gMDtcbiAgICBkWCA9IDA7XG4gICAgZFkgPSAwO1xuICAgIFAxWCA9IDA7XG4gICAgUDFZID0gMDtcbiAgICBQMlggPSAwO1xuICAgIFAyWSA9IDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2NvbnN0cmFpbnRDb3VudCkge1xuICAgICAgYyA9IHRoaXMubV9jb25zdHJhaW50c1tpXTtcbiAgICAgIGJvZHlBID0gYy5ib2R5QTtcbiAgICAgIGJvZHlCID0gYy5ib2R5QjtcbiAgICAgIHdBID0gYm9keUEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICB3QiA9IGJvZHlCLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgdkEgPSBib2R5QS5tX2xpbmVhclZlbG9jaXR5O1xuICAgICAgdkIgPSBib2R5Qi5tX2xpbmVhclZlbG9jaXR5O1xuICAgICAgaW52TWFzc0EgPSBib2R5QS5tX2ludk1hc3M7XG4gICAgICBpbnZJQSA9IGJvZHlBLm1faW52STtcbiAgICAgIGludk1hc3NCID0gYm9keUIubV9pbnZNYXNzO1xuICAgICAgaW52SUIgPSBib2R5Qi5tX2ludkk7XG4gICAgICBub3JtYWxYID0gYy5ub3JtYWwueDtcbiAgICAgIG5vcm1hbFkgPSBjLm5vcm1hbC55O1xuICAgICAgdGFuZ2VudFggPSBub3JtYWxZO1xuICAgICAgdGFuZ2VudFkgPSAtbm9ybWFsWDtcbiAgICAgIGZyaWN0aW9uID0gYy5mcmljdGlvbjtcbiAgICAgIHRYID0gMDtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCBjLnBvaW50Q291bnQpIHtcbiAgICAgICAgY2NwID0gYy5wb2ludHNbal07XG4gICAgICAgIGR2WCA9IHZCLnggLSB3QiAqIGNjcC5yQi55IC0gdkEueCArIHdBICogY2NwLnJBLnk7XG4gICAgICAgIGR2WSA9IHZCLnkgKyB3QiAqIGNjcC5yQi54IC0gdkEueSAtIHdBICogY2NwLnJBLng7XG4gICAgICAgIHZ0ID0gZHZYICogdGFuZ2VudFggKyBkdlkgKiB0YW5nZW50WTtcbiAgICAgICAgbGFtYmRhID0gY2NwLnRhbmdlbnRNYXNzICogKC12dCk7XG4gICAgICAgIG1heEZyaWN0aW9uID0gZnJpY3Rpb24gKiBjY3Aubm9ybWFsSW1wdWxzZTtcbiAgICAgICAgbmV3SW1wdWxzZSA9IGIyTWF0aC5DbGFtcChjY3AudGFuZ2VudEltcHVsc2UgKyBsYW1iZGEsIC1tYXhGcmljdGlvbiwgbWF4RnJpY3Rpb24pO1xuICAgICAgICBsYW1iZGEgPSBuZXdJbXB1bHNlIC0gY2NwLnRhbmdlbnRJbXB1bHNlO1xuICAgICAgICBQWCA9IGxhbWJkYSAqIHRhbmdlbnRYO1xuICAgICAgICBQWSA9IGxhbWJkYSAqIHRhbmdlbnRZO1xuICAgICAgICB2QS54IC09IGludk1hc3NBICogUFg7XG4gICAgICAgIHZBLnkgLT0gaW52TWFzc0EgKiBQWTtcbiAgICAgICAgd0EgLT0gaW52SUEgKiAoY2NwLnJBLnggKiBQWSAtIGNjcC5yQS55ICogUFgpO1xuICAgICAgICB2Qi54ICs9IGludk1hc3NCICogUFg7XG4gICAgICAgIHZCLnkgKz0gaW52TWFzc0IgKiBQWTtcbiAgICAgICAgd0IgKz0gaW52SUIgKiAoY2NwLnJCLnggKiBQWSAtIGNjcC5yQi55ICogUFgpO1xuICAgICAgICBjY3AudGFuZ2VudEltcHVsc2UgPSBuZXdJbXB1bHNlO1xuICAgICAgICBqKys7XG4gICAgICB9XG4gICAgICB0Q291bnQgPSBwYXJzZUludChjLnBvaW50Q291bnQpO1xuICAgICAgaWYgKGMucG9pbnRDb3VudCA9PT0gMSkge1xuICAgICAgICBjY3AgPSBjLnBvaW50c1swXTtcbiAgICAgICAgZHZYID0gdkIueCArICgtd0IgKiBjY3AuckIueSkgLSB2QS54IC0gKC13QSAqIGNjcC5yQS55KTtcbiAgICAgICAgZHZZID0gdkIueSArICh3QiAqIGNjcC5yQi54KSAtIHZBLnkgLSAod0EgKiBjY3AuckEueCk7XG4gICAgICAgIHZuID0gZHZYICogbm9ybWFsWCArIGR2WSAqIG5vcm1hbFk7XG4gICAgICAgIGxhbWJkYSA9IC1jY3Aubm9ybWFsTWFzcyAqICh2biAtIGNjcC52ZWxvY2l0eUJpYXMpO1xuICAgICAgICBuZXdJbXB1bHNlID0gY2NwLm5vcm1hbEltcHVsc2UgKyBsYW1iZGE7XG4gICAgICAgIG5ld0ltcHVsc2UgPSAobmV3SW1wdWxzZSA+IDAgPyBuZXdJbXB1bHNlIDogMC4wKTtcbiAgICAgICAgbGFtYmRhID0gbmV3SW1wdWxzZSAtIGNjcC5ub3JtYWxJbXB1bHNlO1xuICAgICAgICBQWCA9IGxhbWJkYSAqIG5vcm1hbFg7XG4gICAgICAgIFBZID0gbGFtYmRhICogbm9ybWFsWTtcbiAgICAgICAgdkEueCAtPSBpbnZNYXNzQSAqIFBYO1xuICAgICAgICB2QS55IC09IGludk1hc3NBICogUFk7XG4gICAgICAgIHdBIC09IGludklBICogKGNjcC5yQS54ICogUFkgLSBjY3AuckEueSAqIFBYKTtcbiAgICAgICAgdkIueCArPSBpbnZNYXNzQiAqIFBYO1xuICAgICAgICB2Qi55ICs9IGludk1hc3NCICogUFk7XG4gICAgICAgIHdCICs9IGludklCICogKGNjcC5yQi54ICogUFkgLSBjY3AuckIueSAqIFBYKTtcbiAgICAgICAgY2NwLm5vcm1hbEltcHVsc2UgPSBuZXdJbXB1bHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3AxID0gYy5wb2ludHNbMF07XG4gICAgICAgIGNwMiA9IGMucG9pbnRzWzFdO1xuICAgICAgICBhWCA9IGNwMS5ub3JtYWxJbXB1bHNlO1xuICAgICAgICBhWSA9IGNwMi5ub3JtYWxJbXB1bHNlO1xuICAgICAgICBkdjFYID0gdkIueCAtIHdCICogY3AxLnJCLnkgLSB2QS54ICsgd0EgKiBjcDEuckEueTtcbiAgICAgICAgZHYxWSA9IHZCLnkgKyB3QiAqIGNwMS5yQi54IC0gdkEueSAtIHdBICogY3AxLnJBLng7XG4gICAgICAgIGR2MlggPSB2Qi54IC0gd0IgKiBjcDIuckIueSAtIHZBLnggKyB3QSAqIGNwMi5yQS55O1xuICAgICAgICBkdjJZID0gdkIueSArIHdCICogY3AyLnJCLnggLSB2QS55IC0gd0EgKiBjcDIuckEueDtcbiAgICAgICAgdm4xID0gZHYxWCAqIG5vcm1hbFggKyBkdjFZICogbm9ybWFsWTtcbiAgICAgICAgdm4yID0gZHYyWCAqIG5vcm1hbFggKyBkdjJZICogbm9ybWFsWTtcbiAgICAgICAgYlggPSB2bjEgLSBjcDEudmVsb2NpdHlCaWFzO1xuICAgICAgICBiWSA9IHZuMiAtIGNwMi52ZWxvY2l0eUJpYXM7XG4gICAgICAgIHRNYXQgPSBjLks7XG4gICAgICAgIGJYIC09IHRNYXQuY29sMS54ICogYVggKyB0TWF0LmNvbDIueCAqIGFZO1xuICAgICAgICBiWSAtPSB0TWF0LmNvbDEueSAqIGFYICsgdE1hdC5jb2wyLnkgKiBhWTtcbiAgICAgICAga19lcnJvclRvbCA9IDAuMDAxO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIHRNYXQgPSBjLm5vcm1hbE1hc3M7XG4gICAgICAgICAgeFggPSAtKHRNYXQuY29sMS54ICogYlggKyB0TWF0LmNvbDIueCAqIGJZKTtcbiAgICAgICAgICB4WSA9IC0odE1hdC5jb2wxLnkgKiBiWCArIHRNYXQuY29sMi55ICogYlkpO1xuICAgICAgICAgIGlmICh4WCA+PSAwLjAgJiYgeFkgPj0gMC4wKSB7XG4gICAgICAgICAgICBkWCA9IHhYIC0gYVg7XG4gICAgICAgICAgICBkWSA9IHhZIC0gYVk7XG4gICAgICAgICAgICBQMVggPSBkWCAqIG5vcm1hbFg7XG4gICAgICAgICAgICBQMVkgPSBkWCAqIG5vcm1hbFk7XG4gICAgICAgICAgICBQMlggPSBkWSAqIG5vcm1hbFg7XG4gICAgICAgICAgICBQMlkgPSBkWSAqIG5vcm1hbFk7XG4gICAgICAgICAgICB2QS54IC09IGludk1hc3NBICogKFAxWCArIFAyWCk7XG4gICAgICAgICAgICB2QS55IC09IGludk1hc3NBICogKFAxWSArIFAyWSk7XG4gICAgICAgICAgICB3QSAtPSBpbnZJQSAqIChjcDEuckEueCAqIFAxWSAtIGNwMS5yQS55ICogUDFYICsgY3AyLnJBLnggKiBQMlkgLSBjcDIuckEueSAqIFAyWCk7XG4gICAgICAgICAgICB2Qi54ICs9IGludk1hc3NCICogKFAxWCArIFAyWCk7XG4gICAgICAgICAgICB2Qi55ICs9IGludk1hc3NCICogKFAxWSArIFAyWSk7XG4gICAgICAgICAgICB3QiArPSBpbnZJQiAqIChjcDEuckIueCAqIFAxWSAtIGNwMS5yQi55ICogUDFYICsgY3AyLnJCLnggKiBQMlkgLSBjcDIuckIueSAqIFAyWCk7XG4gICAgICAgICAgICBjcDEubm9ybWFsSW1wdWxzZSA9IHhYO1xuICAgICAgICAgICAgY3AyLm5vcm1hbEltcHVsc2UgPSB4WTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB4WCA9IC1jcDEubm9ybWFsTWFzcyAqIGJYO1xuICAgICAgICAgIHhZID0gMC4wO1xuICAgICAgICAgIHZuMSA9IDAuMDtcbiAgICAgICAgICB2bjIgPSBjLksuY29sMS55ICogeFggKyBiWTtcbiAgICAgICAgICBpZiAoeFggPj0gMC4wICYmIHZuMiA+PSAwLjApIHtcbiAgICAgICAgICAgIGRYID0geFggLSBhWDtcbiAgICAgICAgICAgIGRZID0geFkgLSBhWTtcbiAgICAgICAgICAgIFAxWCA9IGRYICogbm9ybWFsWDtcbiAgICAgICAgICAgIFAxWSA9IGRYICogbm9ybWFsWTtcbiAgICAgICAgICAgIFAyWCA9IGRZICogbm9ybWFsWDtcbiAgICAgICAgICAgIFAyWSA9IGRZICogbm9ybWFsWTtcbiAgICAgICAgICAgIHZBLnggLT0gaW52TWFzc0EgKiAoUDFYICsgUDJYKTtcbiAgICAgICAgICAgIHZBLnkgLT0gaW52TWFzc0EgKiAoUDFZICsgUDJZKTtcbiAgICAgICAgICAgIHdBIC09IGludklBICogKGNwMS5yQS54ICogUDFZIC0gY3AxLnJBLnkgKiBQMVggKyBjcDIuckEueCAqIFAyWSAtIGNwMi5yQS55ICogUDJYKTtcbiAgICAgICAgICAgIHZCLnggKz0gaW52TWFzc0IgKiAoUDFYICsgUDJYKTtcbiAgICAgICAgICAgIHZCLnkgKz0gaW52TWFzc0IgKiAoUDFZICsgUDJZKTtcbiAgICAgICAgICAgIHdCICs9IGludklCICogKGNwMS5yQi54ICogUDFZIC0gY3AxLnJCLnkgKiBQMVggKyBjcDIuckIueCAqIFAyWSAtIGNwMi5yQi55ICogUDJYKTtcbiAgICAgICAgICAgIGNwMS5ub3JtYWxJbXB1bHNlID0geFg7XG4gICAgICAgICAgICBjcDIubm9ybWFsSW1wdWxzZSA9IHhZO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHhYID0gMC4wO1xuICAgICAgICAgIHhZID0gLWNwMi5ub3JtYWxNYXNzICogYlk7XG4gICAgICAgICAgdm4xID0gYy5LLmNvbDIueCAqIHhZICsgYlg7XG4gICAgICAgICAgdm4yID0gMC4wO1xuICAgICAgICAgIGlmICh4WSA+PSAwLjAgJiYgdm4xID49IDAuMCkge1xuICAgICAgICAgICAgZFggPSB4WCAtIGFYO1xuICAgICAgICAgICAgZFkgPSB4WSAtIGFZO1xuICAgICAgICAgICAgUDFYID0gZFggKiBub3JtYWxYO1xuICAgICAgICAgICAgUDFZID0gZFggKiBub3JtYWxZO1xuICAgICAgICAgICAgUDJYID0gZFkgKiBub3JtYWxYO1xuICAgICAgICAgICAgUDJZID0gZFkgKiBub3JtYWxZO1xuICAgICAgICAgICAgdkEueCAtPSBpbnZNYXNzQSAqIChQMVggKyBQMlgpO1xuICAgICAgICAgICAgdkEueSAtPSBpbnZNYXNzQSAqIChQMVkgKyBQMlkpO1xuICAgICAgICAgICAgd0EgLT0gaW52SUEgKiAoY3AxLnJBLnggKiBQMVkgLSBjcDEuckEueSAqIFAxWCArIGNwMi5yQS54ICogUDJZIC0gY3AyLnJBLnkgKiBQMlgpO1xuICAgICAgICAgICAgdkIueCArPSBpbnZNYXNzQiAqIChQMVggKyBQMlgpO1xuICAgICAgICAgICAgdkIueSArPSBpbnZNYXNzQiAqIChQMVkgKyBQMlkpO1xuICAgICAgICAgICAgd0IgKz0gaW52SUIgKiAoY3AxLnJCLnggKiBQMVkgLSBjcDEuckIueSAqIFAxWCArIGNwMi5yQi54ICogUDJZIC0gY3AyLnJCLnkgKiBQMlgpO1xuICAgICAgICAgICAgY3AxLm5vcm1hbEltcHVsc2UgPSB4WDtcbiAgICAgICAgICAgIGNwMi5ub3JtYWxJbXB1bHNlID0geFk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgeFggPSAwLjA7XG4gICAgICAgICAgeFkgPSAwLjA7XG4gICAgICAgICAgdm4xID0gYlg7XG4gICAgICAgICAgdm4yID0gYlk7XG4gICAgICAgICAgaWYgKHZuMSA+PSAwLjAgJiYgdm4yID49IDAuMCkge1xuICAgICAgICAgICAgZFggPSB4WCAtIGFYO1xuICAgICAgICAgICAgZFkgPSB4WSAtIGFZO1xuICAgICAgICAgICAgUDFYID0gZFggKiBub3JtYWxYO1xuICAgICAgICAgICAgUDFZID0gZFggKiBub3JtYWxZO1xuICAgICAgICAgICAgUDJYID0gZFkgKiBub3JtYWxYO1xuICAgICAgICAgICAgUDJZID0gZFkgKiBub3JtYWxZO1xuICAgICAgICAgICAgdkEueCAtPSBpbnZNYXNzQSAqIChQMVggKyBQMlgpO1xuICAgICAgICAgICAgdkEueSAtPSBpbnZNYXNzQSAqIChQMVkgKyBQMlkpO1xuICAgICAgICAgICAgd0EgLT0gaW52SUEgKiAoY3AxLnJBLnggKiBQMVkgLSBjcDEuckEueSAqIFAxWCArIGNwMi5yQS54ICogUDJZIC0gY3AyLnJBLnkgKiBQMlgpO1xuICAgICAgICAgICAgdkIueCArPSBpbnZNYXNzQiAqIChQMVggKyBQMlgpO1xuICAgICAgICAgICAgdkIueSArPSBpbnZNYXNzQiAqIChQMVkgKyBQMlkpO1xuICAgICAgICAgICAgd0IgKz0gaW52SUIgKiAoY3AxLnJCLnggKiBQMVkgLSBjcDEuckIueSAqIFAxWCArIGNwMi5yQi54ICogUDJZIC0gY3AyLnJCLnkgKiBQMlgpO1xuICAgICAgICAgICAgY3AxLm5vcm1hbEltcHVsc2UgPSB4WDtcbiAgICAgICAgICAgIGNwMi5ub3JtYWxJbXB1bHNlID0geFk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJvZHlBLm1fYW5ndWxhclZlbG9jaXR5ID0gd0E7XG4gICAgICBib2R5Qi5tX2FuZ3VsYXJWZWxvY2l0eSA9IHdCO1xuICAgICAgKytpO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLkZpbmFsaXplVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjLCBpLCBqLCBtLCBwb2ludDEsIHBvaW50MjtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9jb25zdHJhaW50Q291bnQpIHtcbiAgICAgIGMgPSB0aGlzLm1fY29uc3RyYWludHNbaV07XG4gICAgICBtID0gYy5tYW5pZm9sZDtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCBjLnBvaW50Q291bnQpIHtcbiAgICAgICAgcG9pbnQxID0gbS5tX3BvaW50c1tqXTtcbiAgICAgICAgcG9pbnQyID0gYy5wb2ludHNbal07XG4gICAgICAgIHBvaW50MS5tX25vcm1hbEltcHVsc2UgPSBwb2ludDIubm9ybWFsSW1wdWxzZTtcbiAgICAgICAgcG9pbnQxLm1fdGFuZ2VudEltcHVsc2UgPSBwb2ludDIudGFuZ2VudEltcHVsc2U7XG4gICAgICAgICsrajtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gIH07XG5cbiAgYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICB2YXIgQywgUFgsIFBZLCBib2R5QSwgYm9keUIsIGMsIGNjcCwgaSwgaW1wdWxzZSwgaW52SUEsIGludklCLCBpbnZNYXNzQSwgaW52TWFzc0IsIGosIG1pblNlcGFyYXRpb24sIG5vcm1hbCwgcG9pbnQsIHJBWCwgckFZLCByQlgsIHJCWSwgc2VwYXJhdGlvbjtcbiAgICBpZiAoYmF1bWdhcnRlID09PSB2b2lkIDApIHtcbiAgICAgIGJhdW1nYXJ0ZSA9IDA7XG4gICAgfVxuICAgIG1pblNlcGFyYXRpb24gPSAwLjA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY29uc3RyYWludENvdW50KSB7XG4gICAgICBjID0gdGhpcy5tX2NvbnN0cmFpbnRzW2ldO1xuICAgICAgYm9keUEgPSBjLmJvZHlBO1xuICAgICAgYm9keUIgPSBjLmJvZHlCO1xuICAgICAgaW52TWFzc0EgPSBib2R5QS5tX21hc3MgKiBib2R5QS5tX2ludk1hc3M7XG4gICAgICBpbnZJQSA9IGJvZHlBLm1fbWFzcyAqIGJvZHlBLm1faW52STtcbiAgICAgIGludk1hc3NCID0gYm9keUIubV9tYXNzICogYm9keUIubV9pbnZNYXNzO1xuICAgICAgaW52SUIgPSBib2R5Qi5tX21hc3MgKiBib2R5Qi5tX2ludkk7XG4gICAgICBiMkNvbnRhY3RTb2x2ZXIuc19wc20uSW5pdGlhbGl6ZShjKTtcbiAgICAgIG5vcm1hbCA9IGIyQ29udGFjdFNvbHZlci5zX3BzbS5tX25vcm1hbDtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCBjLnBvaW50Q291bnQpIHtcbiAgICAgICAgY2NwID0gYy5wb2ludHNbal07XG4gICAgICAgIHBvaW50ID0gYjJDb250YWN0U29sdmVyLnNfcHNtLm1fcG9pbnRzW2pdO1xuICAgICAgICBzZXBhcmF0aW9uID0gYjJDb250YWN0U29sdmVyLnNfcHNtLm1fc2VwYXJhdGlvbnNbal07XG4gICAgICAgIHJBWCA9IHBvaW50LnggLSBib2R5QS5tX3N3ZWVwLmMueDtcbiAgICAgICAgckFZID0gcG9pbnQueSAtIGJvZHlBLm1fc3dlZXAuYy55O1xuICAgICAgICByQlggPSBwb2ludC54IC0gYm9keUIubV9zd2VlcC5jLng7XG4gICAgICAgIHJCWSA9IHBvaW50LnkgLSBib2R5Qi5tX3N3ZWVwLmMueTtcbiAgICAgICAgbWluU2VwYXJhdGlvbiA9IChtaW5TZXBhcmF0aW9uIDwgc2VwYXJhdGlvbiA/IG1pblNlcGFyYXRpb24gOiBzZXBhcmF0aW9uKTtcbiAgICAgICAgQyA9IGIyTWF0aC5DbGFtcChiYXVtZ2FydGUgKiAoc2VwYXJhdGlvbiArIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCksIC1iMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24sIDAuMCk7XG4gICAgICAgIGltcHVsc2UgPSAtY2NwLmVxdWFsaXplZE1hc3MgKiBDO1xuICAgICAgICBQWCA9IGltcHVsc2UgKiBub3JtYWwueDtcbiAgICAgICAgUFkgPSBpbXB1bHNlICogbm9ybWFsLnk7XG4gICAgICAgIGJvZHlBLm1fc3dlZXAuYy54IC09IGludk1hc3NBICogUFg7XG4gICAgICAgIGJvZHlBLm1fc3dlZXAuYy55IC09IGludk1hc3NBICogUFk7XG4gICAgICAgIGJvZHlBLm1fc3dlZXAuYSAtPSBpbnZJQSAqIChyQVggKiBQWSAtIHJBWSAqIFBYKTtcbiAgICAgICAgYm9keUEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICAgICAgYm9keUIubV9zd2VlcC5jLnggKz0gaW52TWFzc0IgKiBQWDtcbiAgICAgICAgYm9keUIubV9zd2VlcC5jLnkgKz0gaW52TWFzc0IgKiBQWTtcbiAgICAgICAgYm9keUIubV9zd2VlcC5hICs9IGludklCICogKHJCWCAqIFBZIC0gckJZICogUFgpO1xuICAgICAgICBib2R5Qi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgICBqKys7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBtaW5TZXBhcmF0aW9uID4gKC0xLjUgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApO1xuICB9O1xuXG4gIHJldHVybiBiMkNvbnRhY3RTb2x2ZXI7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udGFjdFNvbHZlci5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0LFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0O1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkVkZ2VBbmRDaXJjbGVDb250YWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICB2YXIgYjJDb2xsaWRlRWRnZUFuZENpcmNsZTtcblxuICBfX2V4dGVuZHMoYjJFZGdlQW5kQ2lyY2xlQ29udGFjdCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBiMkVkZ2VBbmRDaXJjbGVDb250YWN0KCkge1xuICAgIHJldHVybiBiMkVkZ2VBbmRDaXJjbGVDb250YWN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUubV9maXh0dXJlQSA9IG51bGw7XG5cbiAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUubV9maXh0dXJlQiA9IG51bGw7XG5cbiAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUubV9tYW5pZm9sZCA9IG51bGw7XG5cbiAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5DcmVhdGUgPSBmdW5jdGlvbihhbGxvY2F0b3IpIHtcbiAgICByZXR1cm4gbmV3IGIyRWRnZUFuZENpcmNsZUNvbnRhY3QoKTtcbiAgfTtcblxuICBiMkVkZ2VBbmRDaXJjbGVDb250YWN0LkRlc3Ryb3kgPSBmdW5jdGlvbihjb250YWN0LCBhbGxvY2F0b3IpIHt9O1xuXG4gIGIyRWRnZUFuZENpcmNsZUNvbnRhY3QucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7XG4gICAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5fX3N1cGVyX18uUmVzZXQuY2FsbCh0aGlzLCBmaXh0dXJlQSwgZml4dHVyZUIpO1xuICB9O1xuXG4gIGIyRWRnZUFuZENpcmNsZUNvbnRhY3QucHJvdG90eXBlLkV2YWx1YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJBLCBiQjtcbiAgICBiQSA9IHRoaXMubV9maXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgYkIgPSB0aGlzLm1fZml4dHVyZUIuR2V0Qm9keSgpO1xuICAgIHRoaXMuYjJDb2xsaWRlRWRnZUFuZENpcmNsZSh0aGlzLm1fbWFuaWZvbGQsICh0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSBpbnN0YW5jZW9mIGIyRWRnZVNoYXBlID8gdGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkgOiBudWxsKSwgYkEubV94ZiwgKHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIGluc3RhbmNlb2YgYjJDaXJjbGVTaGFwZSA/IHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIDogbnVsbCksIGJCLm1feGYpO1xuICB9O1xuXG4gIGIyQ29sbGlkZUVkZ2VBbmRDaXJjbGUgPSBmdW5jdGlvbihtYW5pZm9sZCwgZWRnZSwgeGYxLCBjaXJjbGUsIHhmMikge307XG5cbiAgcmV0dXJuIGIyRWRnZUFuZENpcmNsZUNvbnRhY3Q7XG5cbn0pKGIyQ29udGFjdCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRWRnZUFuZENpcmNsZUNvbnRhY3QuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udGFjdCxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyQ29udGFjdCA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdDtcblxuQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJOdWxsQ29udGFjdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyTnVsbENvbnRhY3QsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gYjJOdWxsQ29udGFjdCgpIHtcbiAgICByZXR1cm4gYjJOdWxsQ29udGFjdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGIyTnVsbENvbnRhY3QucHJvdG90eXBlLkV2YWx1YXRlID0gZnVuY3Rpb24oKSB7fTtcblxuICByZXR1cm4gYjJOdWxsQ29udGFjdDtcblxufSkoYjJDb250YWN0KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJOdWxsQ29udGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0LFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0O1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvbHlBbmRDaXJjbGVDb250YWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICB2YXIgRXZhbHVhdGU7XG5cbiAgX19leHRlbmRzKGIyUG9seUFuZENpcmNsZUNvbnRhY3QsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gYjJQb2x5QW5kQ2lyY2xlQ29udGFjdCgpIHtcbiAgICByZXR1cm4gYjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGIyUG9seUFuZENpcmNsZUNvbnRhY3QuQ3JlYXRlID0gZnVuY3Rpb24oYWxsb2NhdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBiMlBvbHlBbmRDaXJjbGVDb250YWN0KCk7XG4gIH07XG5cbiAgYjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5EZXN0cm95ID0gZnVuY3Rpb24oY29udGFjdCwgYWxsb2NhdG9yKSB7fTtcblxuICBiMlBvbHlBbmRDaXJjbGVDb250YWN0LnByb3RvdHlwZS5SZXNldCA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikge1xuICAgIGIyUG9seUFuZENpcmNsZUNvbnRhY3QuX19zdXBlcl9fLlJlc2V0LmNhbGwodGhpcywgZml4dHVyZUEsIGZpeHR1cmVCKTtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KGZpeHR1cmVBLkdldFR5cGUoKSA9PT0gYjJTaGFwZS5lX3BvbHlnb25TaGFwZSk7XG4gICAgYjJTZXR0aW5ncy5iMkFzc2VydChmaXh0dXJlQi5HZXRUeXBlKCkgPT09IGIyU2hhcGUuZV9jaXJjbGVTaGFwZSk7XG4gIH07XG5cbiAgRXZhbHVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYkEsIGJCO1xuICAgIGJBID0gdGhpcy5tX2ZpeHR1cmVBLm1fYm9keTtcbiAgICBiQiA9IHRoaXMubV9maXh0dXJlQi5tX2JvZHk7XG4gICAgYjJDb2xsaXNpb24uQ29sbGlkZVBvbHlnb25BbmRDaXJjbGUodGhpcy5tX21hbmlmb2xkLCAodGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkgaW5zdGFuY2VvZiBiMlBvbHlnb25TaGFwZSA/IHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpIDogbnVsbCksIGJBLm1feGYsICh0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSBpbnN0YW5jZW9mIGIyQ2lyY2xlU2hhcGUgPyB0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSA6IG51bGwpLCBiQi5tX3hmKTtcbiAgfTtcblxuICByZXR1cm4gYjJQb2x5QW5kQ2lyY2xlQ29udGFjdDtcblxufSkoYjJDb250YWN0KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0LFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0O1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvbHlBbmRFZGdlQ29udGFjdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyUG9seUFuZEVkZ2VDb250YWN0LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIGIyUG9seUFuZEVkZ2VDb250YWN0KCkge1xuICAgIHJldHVybiBiMlBvbHlBbmRFZGdlQ29udGFjdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGIyUG9seUFuZEVkZ2VDb250YWN0LkNyZWF0ZSA9IGZ1bmN0aW9uKGFsbG9jYXRvcikge1xuICAgIHJldHVybiBuZXcgYjJQb2x5QW5kRWRnZUNvbnRhY3QoKTtcbiAgfTtcblxuICBiMlBvbHlBbmRFZGdlQ29udGFjdC5EZXN0cm95ID0gZnVuY3Rpb24oY29udGFjdCwgYWxsb2NhdG9yKSB7fTtcblxuICBiMlBvbHlBbmRFZGdlQ29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHtcbiAgICBiMlBvbHlBbmRFZGdlQ29udGFjdC5fX3N1cGVyX18uUmVzZXQuY2FsbCh0aGlzLCBmaXh0dXJlQSwgZml4dHVyZUIpO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZml4dHVyZUEuR2V0VHlwZSgpID09PSBiMlNoYXBlLmVfcG9seWdvblNoYXBlKTtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KGZpeHR1cmVCLkdldFR5cGUoKSA9PT0gYjJTaGFwZS5lX2VkZ2VTaGFwZSk7XG4gIH07XG5cbiAgYjJQb2x5QW5kRWRnZUNvbnRhY3QucHJvdG90eXBlLkV2YWx1YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJBLCBiQjtcbiAgICBiQSA9IHRoaXMubV9maXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgYkIgPSB0aGlzLm1fZml4dHVyZUIuR2V0Qm9keSgpO1xuICAgIHRoaXMuYjJDb2xsaWRlUG9seUFuZEVkZ2UodGhpcy5tX21hbmlmb2xkLCAodGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkgaW5zdGFuY2VvZiBiMlBvbHlnb25TaGFwZSA/IHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpIDogbnVsbCksIGJBLm1feGYsICh0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSBpbnN0YW5jZW9mIGIyRWRnZVNoYXBlID8gdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgOiBudWxsKSwgYkIubV94Zik7XG4gIH07XG5cbiAgcmV0dXJuIGIyUG9seUFuZEVkZ2VDb250YWN0O1xuXG59KShiMkNvbnRhY3QpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlBvbHlBbmRFZGdlQ29udGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb2xsaXNpb24sIGIyQ29udGFjdCwgYjJQb2x5Z29uU2hhcGUsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Q7XG5cbmIyQ29sbGlzaW9uID0gQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uO1xuXG5iMlBvbHlnb25TaGFwZSA9IEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGU7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seWdvbkNvbnRhY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlBvbHlnb25Db250YWN0LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIGIyUG9seWdvbkNvbnRhY3QoKSB7XG4gICAgcmV0dXJuIGIyUG9seWdvbkNvbnRhY3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBiMlBvbHlnb25Db250YWN0LkNyZWF0ZSA9IGZ1bmN0aW9uKGFsbG9jYXRvcikge1xuICAgIHJldHVybiBuZXcgYjJQb2x5Z29uQ29udGFjdCgpO1xuICB9O1xuXG4gIGIyUG9seWdvbkNvbnRhY3QuRGVzdHJveSA9IGZ1bmN0aW9uKGNvbnRhY3QsIGFsbG9jYXRvcikge307XG5cbiAgYjJQb2x5Z29uQ29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHtcbiAgICBiMlBvbHlnb25Db250YWN0Ll9fc3VwZXJfXy5SZXNldC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJlQik7XG4gIH07XG5cbiAgYjJQb2x5Z29uQ29udGFjdC5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYkEsIGJCO1xuICAgIGJBID0gdGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBiQiA9IHRoaXMubV9maXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgYjJDb2xsaXNpb24uQ29sbGlkZVBvbHlnb25zKHRoaXMubV9tYW5pZm9sZCwgKHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpIGluc3RhbmNlb2YgYjJQb2x5Z29uU2hhcGUgPyB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSA6IG51bGwpLCBiQS5tX3hmLCAodGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgaW5zdGFuY2VvZiBiMlBvbHlnb25TaGFwZSA/IHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIDogbnVsbCksIGJCLm1feGYpO1xuICB9O1xuXG4gIHJldHVybiBiMlBvbHlnb25Db250YWN0O1xuXG59KShiMkNvbnRhY3QpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlBvbHlnb25Db250YWN0LmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3IsIGIyU2V0dGluZ3MsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5wcm90b3R5cGUubV9ub3JtYWwgPSBudWxsO1xuXG4gIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5wcm90b3R5cGUubV9zZXBhcmF0aW9ucyA9IG51bGw7XG5cbiAgYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLnByb3RvdHlwZS5tX3BvaW50cyA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkKCkge1xuICAgIHZhciBpO1xuICAgIHRoaXMubV9ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3NlcGFyYXRpb25zID0gbmV3IFZlY3RvcihiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKTtcbiAgICB0aGlzLm1fcG9pbnRzID0gbmV3IEFycmF5KGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYjJTZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50cykge1xuICAgICAgdGhpcy5tX3BvaW50c1tpXSA9IG5ldyBiMlZlYzIoKTtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oY2MpIHtcbiAgICB2YXIgY2xpcFBvaW50WCwgY2xpcFBvaW50WSwgZCwgZDIsIGRYLCBkWSwgaSwgcGxhbmVQb2ludFgsIHBsYW5lUG9pbnRZLCBwb2ludEFYLCBwb2ludEFZLCBwb2ludEJYLCBwb2ludEJZLCB0TWF0LCB0VmVjLCBfcmVzdWx0cztcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KGNjLnBvaW50Q291bnQgPiAwKTtcbiAgICBpID0gMDtcbiAgICBjbGlwUG9pbnRYID0gMDtcbiAgICBjbGlwUG9pbnRZID0gMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgcGxhbmVQb2ludFggPSAwO1xuICAgIHBsYW5lUG9pbnRZID0gMDtcbiAgICBzd2l0Y2ggKGNjLnR5cGUpIHtcbiAgICAgIGNhc2UgYjJNYW5pZm9sZC5lX2NpcmNsZXM6XG4gICAgICAgIHRNYXQgPSBjYy5ib2R5QS5tX3hmLlI7XG4gICAgICAgIHRWZWMgPSBjYy5sb2NhbFBvaW50O1xuICAgICAgICBwb2ludEFYID0gY2MuYm9keUEubV94Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICBwb2ludEFZID0gY2MuYm9keUEubV94Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgICB0TWF0ID0gY2MuYm9keUIubV94Zi5SO1xuICAgICAgICB0VmVjID0gY2MucG9pbnRzWzBdLmxvY2FsUG9pbnQ7XG4gICAgICAgIHBvaW50QlggPSBjYy5ib2R5Qi5tX3hmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICAgIHBvaW50QlkgPSBjYy5ib2R5Qi5tX3hmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICAgIGRYID0gcG9pbnRCWCAtIHBvaW50QVg7XG4gICAgICAgIGRZID0gcG9pbnRCWSAtIHBvaW50QVk7XG4gICAgICAgIGQyID0gZFggKiBkWCArIGRZICogZFk7XG4gICAgICAgIGlmIChkMiA+IE51bWJlci5NSU5fVkFMVUUgKiBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICAgICAgZCA9IE1hdGguc3FydChkMik7XG4gICAgICAgICAgdGhpcy5tX25vcm1hbC54ID0gZFggLyBkO1xuICAgICAgICAgIHRoaXMubV9ub3JtYWwueSA9IGRZIC8gZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fbm9ybWFsLnggPSAxLjA7XG4gICAgICAgICAgdGhpcy5tX25vcm1hbC55ID0gMC4wO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9wb2ludHNbMF0ueCA9IDAuNSAqIChwb2ludEFYICsgcG9pbnRCWCk7XG4gICAgICAgIHRoaXMubV9wb2ludHNbMF0ueSA9IDAuNSAqIChwb2ludEFZICsgcG9pbnRCWSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1fc2VwYXJhdGlvbnNbMF0gPSBkWCAqIHRoaXMubV9ub3JtYWwueCArIGRZICogdGhpcy5tX25vcm1hbC55IC0gY2MucmFkaXVzO1xuICAgICAgY2FzZSBiMk1hbmlmb2xkLmVfZmFjZUE6XG4gICAgICAgIHRNYXQgPSBjYy5ib2R5QS5tX3hmLlI7XG4gICAgICAgIHRWZWMgPSBjYy5sb2NhbFBsYW5lTm9ybWFsO1xuICAgICAgICB0aGlzLm1fbm9ybWFsLnggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgICB0aGlzLm1fbm9ybWFsLnkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgICB0TWF0ID0gY2MuYm9keUEubV94Zi5SO1xuICAgICAgICB0VmVjID0gY2MubG9jYWxQb2ludDtcbiAgICAgICAgcGxhbmVQb2ludFggPSBjYy5ib2R5QS5tX3hmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICAgIHBsYW5lUG9pbnRZID0gY2MuYm9keUEubV94Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgICB0TWF0ID0gY2MuYm9keUIubV94Zi5SO1xuICAgICAgICBpID0gMDtcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgd2hpbGUgKGkgPCBjYy5wb2ludENvdW50KSB7XG4gICAgICAgICAgdFZlYyA9IGNjLnBvaW50c1tpXS5sb2NhbFBvaW50O1xuICAgICAgICAgIGNsaXBQb2ludFggPSBjYy5ib2R5Qi5tX3hmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICAgICAgY2xpcFBvaW50WSA9IGNjLmJvZHlCLm1feGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgICAgICB0aGlzLm1fc2VwYXJhdGlvbnNbaV0gPSAoY2xpcFBvaW50WCAtIHBsYW5lUG9pbnRYKSAqIHRoaXMubV9ub3JtYWwueCArIChjbGlwUG9pbnRZIC0gcGxhbmVQb2ludFkpICogdGhpcy5tX25vcm1hbC55IC0gY2MucmFkaXVzO1xuICAgICAgICAgIHRoaXMubV9wb2ludHNbaV0ueCA9IGNsaXBQb2ludFg7XG4gICAgICAgICAgdGhpcy5tX3BvaW50c1tpXS55ID0gY2xpcFBvaW50WTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKCsraSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgYjJNYW5pZm9sZC5lX2ZhY2VCOlxuICAgICAgICB0TWF0ID0gY2MuYm9keUIubV94Zi5SO1xuICAgICAgICB0VmVjID0gY2MubG9jYWxQbGFuZU5vcm1hbDtcbiAgICAgICAgdGhpcy5tX25vcm1hbC54ID0gdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgdGhpcy5tX25vcm1hbC55ID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgdE1hdCA9IGNjLmJvZHlCLm1feGYuUjtcbiAgICAgICAgdFZlYyA9IGNjLmxvY2FsUG9pbnQ7XG4gICAgICAgIHBsYW5lUG9pbnRYID0gY2MuYm9keUIubV94Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICBwbGFuZVBvaW50WSA9IGNjLmJvZHlCLm1feGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgICAgdE1hdCA9IGNjLmJvZHlBLm1feGYuUjtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgY2MucG9pbnRDb3VudCkge1xuICAgICAgICAgIHRWZWMgPSBjYy5wb2ludHNbaV0ubG9jYWxQb2ludDtcbiAgICAgICAgICBjbGlwUG9pbnRYID0gY2MuYm9keUEubV94Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICAgIGNsaXBQb2ludFkgPSBjYy5ib2R5QS5tX3hmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICAgICAgdGhpcy5tX3NlcGFyYXRpb25zW2ldID0gKGNsaXBQb2ludFggLSBwbGFuZVBvaW50WCkgKiB0aGlzLm1fbm9ybWFsLnggKyAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIHRoaXMubV9ub3JtYWwueSAtIGNjLnJhZGl1cztcbiAgICAgICAgICB0aGlzLm1fcG9pbnRzW2ldLlNldChjbGlwUG9pbnRYLCBjbGlwUG9pbnRZKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX25vcm1hbC54ICo9IC0xLjtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ub3JtYWwueSAqPSAtMS47XG4gICAgfVxuICB9O1xuXG4gIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5jaXJjbGVQb2ludEEgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLmNpcmNsZVBvaW50QiA9IG5ldyBiMlZlYzIoKTtcblxuICByZXR1cm4gYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29sb3IsIGIyQ29udHJvbGxlciwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb2xvciA9IEJveDJELkNvbW1vbi5iMkNvbG9yO1xuXG5iMkNvbnRyb2xsZXIgPSBCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXI7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJCdW95YW5jeUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkJ1b3lhbmN5Q29udHJvbGxlciwgX3N1cGVyKTtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUubm9ybWFsID0gbnVsbDtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUub2Zmc2V0ID0gMDtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUuZGVuc2l0eSA9IDA7XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLnZlbG9jaXR5ID0gbnVsbDtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUubGluZWFyRHJhZyA9IDI7XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLmFuZ3VsYXJEcmFnID0gMTtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUudXNlRGVuc2l0eSA9IGZhbHNlO1xuXG4gIGIyQnVveWFuY3lDb250cm9sbGVyLnByb3RvdHlwZS51c2VXb3JsZEdyYXZpdHkgPSB0cnVlO1xuXG4gIGIyQnVveWFuY3lDb250cm9sbGVyLnByb3RvdHlwZS5ncmF2aXR5ID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkJ1b3lhbmN5Q29udHJvbGxlcigpIHtcbiAgICBiMkJ1b3lhbmN5Q29udHJvbGxlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLm5vcm1hbCA9IG5ldyBiMlZlYzIoMCwgLTEuKTtcbiAgICB0aGlzLnZlbG9jaXR5ID0gbmV3IGIyVmVjMigwLCAwKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUuU3RlcCA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgYXJlYSwgYXJlYWMsIGJvZHksIGJ1b3lhbmN5Rm9yY2UsIGRyYWdGb3JjZSwgZml4dHVyZSwgaSwgbWFzcywgbWFzc2MsIHNhcmVhLCBzYywgc2hhcGVEZW5zaXR5O1xuICAgIGlmICghdGhpcy5tX2JvZHlMaXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnVzZVdvcmxkR3Jhdml0eSkge1xuICAgICAgdGhpcy5ncmF2aXR5ID0gdGhpcy5HZXRXb3JsZCgpLkdldEdyYXZpdHkoKS5Db3B5KCk7XG4gICAgfVxuICAgIGkgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgd2hpbGUgKGkpIHtcbiAgICAgIGJvZHkgPSBpLmJvZHk7XG4gICAgICBpZiAoYm9keS5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgYXJlYWMgPSBuZXcgYjJWZWMyKCk7XG4gICAgICBtYXNzYyA9IG5ldyBiMlZlYzIoKTtcbiAgICAgIGFyZWEgPSAwLjA7XG4gICAgICBtYXNzID0gMC4wO1xuICAgICAgZml4dHVyZSA9IGJvZHkuR2V0Rml4dHVyZUxpc3QoKTtcbiAgICAgIHdoaWxlIChmaXh0dXJlKSB7XG4gICAgICAgIHNjID0gbmV3IGIyVmVjMigpO1xuICAgICAgICBzYXJlYSA9IGZpeHR1cmUuR2V0U2hhcGUoKS5Db21wdXRlU3VibWVyZ2VkQXJlYSh0aGlzLm5vcm1hbCwgdGhpcy5vZmZzZXQsIGJvZHkuR2V0VHJhbnNmb3JtKCksIHNjKTtcbiAgICAgICAgYXJlYSArPSBzYXJlYTtcbiAgICAgICAgYXJlYWMueCArPSBzYXJlYSAqIHNjLng7XG4gICAgICAgIGFyZWFjLnkgKz0gc2FyZWEgKiBzYy55O1xuICAgICAgICBzaGFwZURlbnNpdHkgPSAwO1xuICAgICAgICBpZiAodGhpcy51c2VEZW5zaXR5KSB7XG4gICAgICAgICAgc2hhcGVEZW5zaXR5ID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGFwZURlbnNpdHkgPSAxO1xuICAgICAgICB9XG4gICAgICAgIG1hc3MgKz0gc2FyZWEgKiBzaGFwZURlbnNpdHk7XG4gICAgICAgIG1hc3NjLnggKz0gc2FyZWEgKiBzYy54ICogc2hhcGVEZW5zaXR5O1xuICAgICAgICBtYXNzYy55ICs9IHNhcmVhICogc2MueSAqIHNoYXBlRGVuc2l0eTtcbiAgICAgICAgZml4dHVyZSA9IGZpeHR1cmUuR2V0TmV4dCgpO1xuICAgICAgfVxuICAgICAgYXJlYWMueCAvPSBhcmVhO1xuICAgICAgYXJlYWMueSAvPSBhcmVhO1xuICAgICAgbWFzc2MueCAvPSBtYXNzO1xuICAgICAgbWFzc2MueSAvPSBtYXNzO1xuICAgICAgaWYgKGFyZWEgPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgYnVveWFuY3lGb3JjZSA9IHRoaXMuZ3Jhdml0eS5HZXROZWdhdGl2ZSgpO1xuICAgICAgYnVveWFuY3lGb3JjZS5NdWx0aXBseSh0aGlzLmRlbnNpdHkgKiBhcmVhKTtcbiAgICAgIGJvZHkuQXBwbHlGb3JjZShidW95YW5jeUZvcmNlLCBtYXNzYyk7XG4gICAgICBkcmFnRm9yY2UgPSBib2R5LkdldExpbmVhclZlbG9jaXR5RnJvbVdvcmxkUG9pbnQoYXJlYWMpO1xuICAgICAgZHJhZ0ZvcmNlLlN1YnRyYWN0KHRoaXMudmVsb2NpdHkpO1xuICAgICAgZHJhZ0ZvcmNlLk11bHRpcGx5KC10aGlzLmxpbmVhckRyYWcgKiBhcmVhKTtcbiAgICAgIGJvZHkuQXBwbHlGb3JjZShkcmFnRm9yY2UsIGFyZWFjKTtcbiAgICAgIGJvZHkuQXBwbHlUb3JxdWUoLWJvZHkuR2V0SW5lcnRpYSgpIC8gYm9keS5HZXRNYXNzKCkgKiBhcmVhICogYm9keS5HZXRBbmd1bGFyVmVsb2NpdHkoKSAqIHRoaXMuYW5ndWxhckRyYWcpO1xuICAgICAgaSA9IGkubmV4dEJvZHk7XG4gICAgfVxuICB9O1xuXG4gIGIyQnVveWFuY3lDb250cm9sbGVyLnByb3RvdHlwZS5EcmF3ID0gZnVuY3Rpb24oZGVidWdEcmF3KSB7XG4gICAgdmFyIGNvbG9yLCBwMSwgcDIsIHI7XG4gICAgciA9IDEwMDA7XG4gICAgcDEgPSBuZXcgYjJWZWMyKCk7XG4gICAgcDIgPSBuZXcgYjJWZWMyKCk7XG4gICAgcDEueCA9IHRoaXMubm9ybWFsLnggKiB0aGlzLm9mZnNldCArIHRoaXMubm9ybWFsLnkgKiByO1xuICAgIHAxLnkgPSB0aGlzLm5vcm1hbC55ICogdGhpcy5vZmZzZXQgLSB0aGlzLm5vcm1hbC54ICogcjtcbiAgICBwMi54ID0gdGhpcy5ub3JtYWwueCAqIHRoaXMub2Zmc2V0IC0gdGhpcy5ub3JtYWwueSAqIHI7XG4gICAgcDIueSA9IHRoaXMubm9ybWFsLnkgKiB0aGlzLm9mZnNldCArIHRoaXMubm9ybWFsLnggKiByO1xuICAgIGNvbG9yID0gbmV3IGIyQ29sb3IoMCwgMCwgMSk7XG4gICAgZGVidWdEcmF3LkRyYXdTZWdtZW50KHAxLCBwMiwgY29sb3IpO1xuICB9O1xuXG4gIHJldHVybiBiMkJ1b3lhbmN5Q29udHJvbGxlcjtcblxufSkoYjJDb250cm9sbGVyKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJCdW95YW5jeUNvbnRyb2xsZXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udHJvbGxlciwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250cm9sbGVyID0gQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkNvbnN0YW50QWNjZWxDb250cm9sbGVyLCBfc3VwZXIpO1xuXG4gIGIyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIucHJvdG90eXBlLkEgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIoKSB7XG4gICAgYjJDb25zdGFudEFjY2VsQ29udHJvbGxlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLkEgPSBuZXcgYjJWZWMyKDAsIDApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGJvZHksIGksIHNtYWxsQTtcbiAgICBzbWFsbEEgPSBuZXcgYjJWZWMyKHRoaXMuQS54ICogc3RlcC5kdCwgdGhpcy5BLnkgKiBzdGVwLmR0KTtcbiAgICBpID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChpKSB7XG4gICAgICBib2R5ID0gaS5ib2R5O1xuICAgICAgaWYgKCFib2R5LklzQXdha2UoKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJvZHkuU2V0TGluZWFyVmVsb2NpdHkobmV3IGIyVmVjMihib2R5LkdldExpbmVhclZlbG9jaXR5KCkueCArIHNtYWxsQS54LCBib2R5LkdldExpbmVhclZlbG9jaXR5KCkueSArIHNtYWxsQS55KSk7XG4gICAgICBpID0gaS5uZXh0Qm9keTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGIyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXI7XG5cbn0pKGIyQ29udHJvbGxlcik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udHJvbGxlciwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250cm9sbGVyID0gQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyLCBfc3VwZXIpO1xuXG4gIGIyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXIucHJvdG90eXBlLkYgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXIoKSB7XG4gICAgYjJDb25zdGFudEZvcmNlQ29udHJvbGxlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLkYgPSBuZXcgYjJWZWMyKDAsIDApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGJvZHksIGk7XG4gICAgaSA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICB3aGlsZSAoaSkge1xuICAgICAgYm9keSA9IGkuYm9keTtcbiAgICAgIGlmICghYm9keS5Jc0F3YWtlKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBib2R5LkFwcGx5Rm9yY2UodGhpcy5GLCBib2R5LkdldFdvcmxkQ2VudGVyKCkpO1xuICAgICAgaSA9IGkubmV4dEJvZHk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyO1xuXG59KShiMkNvbnRyb2xsZXIpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRyb2xsZXJFZGdlO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyQ29udHJvbGxlckVkZ2UgPSBCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJFZGdlO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyQ29udHJvbGxlcigpIHt9XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5tX2JvZHlMaXN0ID0gbnVsbDtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLm1fYm9keUNvdW50ID0gMDtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLm1fbmV4dCA9IG51bGw7XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5tX3dvcmxkID0gbnVsbDtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihzdGVwKSB7fTtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLkRyYXcgPSBmdW5jdGlvbihkZWJ1Z0RyYXcpIHt9O1xuXG4gIGIyQ29udHJvbGxlci5wcm90b3R5cGUuQWRkQm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICB2YXIgZWRnZTtcbiAgICBlZGdlID0gbmV3IGIyQ29udHJvbGxlckVkZ2UoKTtcbiAgICBlZGdlLmNvbnRyb2xsZXIgPSB0aGlzO1xuICAgIGVkZ2UuYm9keSA9IGJvZHk7XG4gICAgZWRnZS5uZXh0Qm9keSA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICBlZGdlLnByZXZCb2R5ID0gbnVsbDtcbiAgICB0aGlzLm1fYm9keUxpc3QgPSBlZGdlO1xuICAgIGlmIChlZGdlLm5leHRCb2R5KSB7XG4gICAgICBlZGdlLm5leHRCb2R5LnByZXZCb2R5ID0gZWRnZTtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlDb3VudCsrO1xuICAgIGVkZ2UubmV4dENvbnRyb2xsZXIgPSBib2R5Lm1fY29udHJvbGxlckxpc3Q7XG4gICAgZWRnZS5wcmV2Q29udHJvbGxlciA9IG51bGw7XG4gICAgYm9keS5tX2NvbnRyb2xsZXJMaXN0ID0gZWRnZTtcbiAgICBpZiAoZWRnZS5uZXh0Q29udHJvbGxlcikge1xuICAgICAgZWRnZS5uZXh0Q29udHJvbGxlci5wcmV2Q29udHJvbGxlciA9IGVkZ2U7XG4gICAgfVxuICAgIGJvZHkubV9jb250cm9sbGVyQ291bnQrKztcbiAgfTtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLlJlbW92ZUJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgdmFyIGVkZ2U7XG4gICAgZWRnZSA9IGJvZHkubV9jb250cm9sbGVyTGlzdDtcbiAgICB3aGlsZSAoZWRnZSAmJiBlZGdlLmNvbnRyb2xsZXIgIT09IHRoaXMpIHtcbiAgICAgIGVkZ2UgPSBlZGdlLm5leHRDb250cm9sbGVyO1xuICAgIH1cbiAgICBpZiAoZWRnZS5wcmV2Qm9keSkge1xuICAgICAgZWRnZS5wcmV2Qm9keS5uZXh0Qm9keSA9IGVkZ2UubmV4dEJvZHk7XG4gICAgfVxuICAgIGlmIChlZGdlLm5leHRCb2R5KSB7XG4gICAgICBlZGdlLm5leHRCb2R5LnByZXZCb2R5ID0gZWRnZS5wcmV2Qm9keTtcbiAgICB9XG4gICAgaWYgKGVkZ2UubmV4dENvbnRyb2xsZXIpIHtcbiAgICAgIGVkZ2UubmV4dENvbnRyb2xsZXIucHJldkNvbnRyb2xsZXIgPSBlZGdlLnByZXZDb250cm9sbGVyO1xuICAgIH1cbiAgICBpZiAoZWRnZS5wcmV2Q29udHJvbGxlcikge1xuICAgICAgZWRnZS5wcmV2Q29udHJvbGxlci5uZXh0Q29udHJvbGxlciA9IGVkZ2UubmV4dENvbnRyb2xsZXI7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fYm9keUxpc3QgPT09IGVkZ2UpIHtcbiAgICAgIHRoaXMubV9ib2R5TGlzdCA9IGVkZ2UubmV4dEJvZHk7XG4gICAgfVxuICAgIGlmIChib2R5Lm1fY29udHJvbGxlckxpc3QgPT09IGVkZ2UpIHtcbiAgICAgIGJvZHkubV9jb250cm9sbGVyTGlzdCA9IGVkZ2UubmV4dENvbnRyb2xsZXI7XG4gICAgfVxuICAgIGJvZHkubV9jb250cm9sbGVyQ291bnQtLTtcbiAgICB0aGlzLm1fYm9keUNvdW50LS07XG4gIH07XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5DbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIHdoaWxlICh0aGlzLm1fYm9keUxpc3QpIHtcbiAgICAgIHRoaXMuUmVtb3ZlQm9keSh0aGlzLm1fYm9keUxpc3QuYm9keSk7XG4gICAgfVxuICB9O1xuXG4gIGIyQ29udHJvbGxlci5wcm90b3R5cGUuR2V0TmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgfTtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLkdldFdvcmxkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV93b3JsZDtcbiAgfTtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLkdldEJvZHlMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5TGlzdDtcbiAgfTtcblxuICByZXR1cm4gYjJDb250cm9sbGVyO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRyb2xsZXIuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyRWRnZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJDb250cm9sbGVyRWRnZSgpIHt9XG5cbiAgcmV0dXJuIGIyQ29udHJvbGxlckVkZ2U7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udHJvbGxlckVkZ2UuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udHJvbGxlciwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250cm9sbGVyID0gQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyR3Jhdml0eUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkdyYXZpdHlDb250cm9sbGVyLCBfc3VwZXIpO1xuXG4gIGIyR3Jhdml0eUNvbnRyb2xsZXIucHJvdG90eXBlLkcgPSAxO1xuXG4gIGIyR3Jhdml0eUNvbnRyb2xsZXIucHJvdG90eXBlLmludlNxciA9IHRydWU7XG5cbiAgZnVuY3Rpb24gYjJHcmF2aXR5Q29udHJvbGxlcigpIHtcbiAgICBiMkdyYXZpdHlDb250cm9sbGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuRyA9IDE7XG4gICAgdGhpcy5pbnZTcXIgPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyR3Jhdml0eUNvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGJvZHkxLCBib2R5MiwgZHgsIGR5LCBmLCBpLCBqLCBtYXNzMSwgcDEsIHAyLCByMjtcbiAgICBpID0gbnVsbDtcbiAgICBib2R5MSA9IG51bGw7XG4gICAgcDEgPSBudWxsO1xuICAgIG1hc3MxID0gMDtcbiAgICBqID0gbnVsbDtcbiAgICBib2R5MiA9IG51bGw7XG4gICAgcDIgPSBudWxsO1xuICAgIGR4ID0gMDtcbiAgICBkeSA9IDA7XG4gICAgcjIgPSAwO1xuICAgIGYgPSBudWxsO1xuICAgIGlmICh0aGlzLmludlNxcikge1xuICAgICAgaSA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICAgIHdoaWxlIChpKSB7XG4gICAgICAgIGJvZHkxID0gaS5ib2R5O1xuICAgICAgICBwMSA9IGJvZHkxLkdldFdvcmxkQ2VudGVyKCk7XG4gICAgICAgIG1hc3MxID0gYm9keTEuR2V0TWFzcygpO1xuICAgICAgICBqID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgICAgICB3aGlsZSAoaiAhPT0gaSkge1xuICAgICAgICAgIGJvZHkyID0gai5ib2R5O1xuICAgICAgICAgIHAyID0gYm9keTIuR2V0V29ybGRDZW50ZXIoKTtcbiAgICAgICAgICBkeCA9IHAyLnggLSBwMS54O1xuICAgICAgICAgIGR5ID0gcDIueSAtIHAxLnk7XG4gICAgICAgICAgcjIgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICBpZiAocjIgPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZiA9IG5ldyBiMlZlYzIoZHgsIGR5KTtcbiAgICAgICAgICBmLk11bHRpcGx5KHRoaXMuRyAvIHIyIC8gTWF0aC5zcXJ0KHIyKSAqIG1hc3MxICogYm9keTIuR2V0TWFzcygpKTtcbiAgICAgICAgICBpZiAoYm9keTEuSXNBd2FrZSgpKSB7XG4gICAgICAgICAgICBib2R5MS5BcHBseUZvcmNlKGYsIHAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZi5NdWx0aXBseSgtMS4pO1xuICAgICAgICAgIGlmIChib2R5Mi5Jc0F3YWtlKCkpIHtcbiAgICAgICAgICAgIGJvZHkyLkFwcGx5Rm9yY2UoZiwgcDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBqID0gai5uZXh0Qm9keTtcbiAgICAgICAgfVxuICAgICAgICBpID0gaS5uZXh0Qm9keTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaSA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICAgIHdoaWxlIChpKSB7XG4gICAgICAgIGJvZHkxID0gaS5ib2R5O1xuICAgICAgICBwMSA9IGJvZHkxLkdldFdvcmxkQ2VudGVyKCk7XG4gICAgICAgIG1hc3MxID0gYm9keTEuR2V0TWFzcygpO1xuICAgICAgICBqID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgICAgICB3aGlsZSAoaiAhPT0gaSkge1xuICAgICAgICAgIGJvZHkyID0gai5ib2R5O1xuICAgICAgICAgIHAyID0gYm9keTIuR2V0V29ybGRDZW50ZXIoKTtcbiAgICAgICAgICBkeCA9IHAyLnggLSBwMS54O1xuICAgICAgICAgIGR5ID0gcDIueSAtIHAxLnk7XG4gICAgICAgICAgcjIgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICBpZiAocjIgPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZiA9IG5ldyBiMlZlYzIoZHgsIGR5KTtcbiAgICAgICAgICBmLk11bHRpcGx5KHRoaXMuRyAvIHIyICogbWFzczEgKiBib2R5Mi5HZXRNYXNzKCkpO1xuICAgICAgICAgIGlmIChib2R5MS5Jc0F3YWtlKCkpIHtcbiAgICAgICAgICAgIGJvZHkxLkFwcGx5Rm9yY2UoZiwgcDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmLk11bHRpcGx5KC0xLik7XG4gICAgICAgICAgaWYgKGJvZHkyLklzQXdha2UoKSkge1xuICAgICAgICAgICAgYm9keTIuQXBwbHlGb3JjZShmLCBwMik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGogPSBqLm5leHRCb2R5O1xuICAgICAgICB9XG4gICAgICAgIGkgPSBpLm5leHRCb2R5O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYjJHcmF2aXR5Q29udHJvbGxlcjtcblxufSkoYjJDb250cm9sbGVyKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJHcmF2aXR5Q29udHJvbGxlci5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250cm9sbGVyLCBiMk1hdDIyLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRyb2xsZXIgPSBCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXI7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlRlbnNvckRhbXBpbmdDb250cm9sbGVyLCBfc3VwZXIpO1xuXG4gIGIyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXIucHJvdG90eXBlLlQgPSBudWxsO1xuXG4gIGIyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXIucHJvdG90eXBlLm1heFRpbWVzdGVwID0gMDtcblxuICBmdW5jdGlvbiBiMlRlbnNvckRhbXBpbmdDb250cm9sbGVyKCkge1xuICAgIGIyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5UID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLm1heFRpbWVzdGVwID0gMDtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlRlbnNvckRhbXBpbmdDb250cm9sbGVyLnByb3RvdHlwZS5TZXRBeGlzQWxpZ25lZCA9IGZ1bmN0aW9uKHhEYW1waW5nLCB5RGFtcGluZykge1xuICAgIGlmICh4RGFtcGluZyA9PT0gdm9pZCAwKSB7XG4gICAgICB4RGFtcGluZyA9IDA7XG4gICAgfVxuICAgIGlmICh5RGFtcGluZyA9PT0gdm9pZCAwKSB7XG4gICAgICB5RGFtcGluZyA9IDA7XG4gICAgfVxuICAgIHRoaXMuVC5jb2wxLnggPSAteERhbXBpbmc7XG4gICAgdGhpcy5ULmNvbDEueSA9IDA7XG4gICAgdGhpcy5ULmNvbDIueCA9IDA7XG4gICAgdGhpcy5ULmNvbDIueSA9IC15RGFtcGluZztcbiAgICBpZiAoeERhbXBpbmcgPiAwIHx8IHlEYW1waW5nID4gMCkge1xuICAgICAgdGhpcy5tYXhUaW1lc3RlcCA9IDEgLyBNYXRoLm1heCh4RGFtcGluZywgeURhbXBpbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1heFRpbWVzdGVwID0gMDtcbiAgICB9XG4gIH07XG5cbiAgYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlci5wcm90b3R5cGUuU3RlcCA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgYm9keSwgZGFtcGluZywgaSwgdGltZXN0ZXA7XG4gICAgdGltZXN0ZXAgPSBzdGVwLmR0O1xuICAgIGlmICh0aW1lc3RlcCA8PSBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aW1lc3RlcCA+IHRoaXMubWF4VGltZXN0ZXAgJiYgdGhpcy5tYXhUaW1lc3RlcCA+IDApIHtcbiAgICAgIHRpbWVzdGVwID0gdGhpcy5tYXhUaW1lc3RlcDtcbiAgICB9XG4gICAgaSA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICB3aGlsZSAoaSkge1xuICAgICAgYm9keSA9IGkuYm9keTtcbiAgICAgIGlmICghYm9keS5Jc0F3YWtlKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBkYW1waW5nID0gYm9keS5HZXRXb3JsZFZlY3RvcihiMk1hdGguTXVsTVYodGhpcy5ULCBib2R5LkdldExvY2FsVmVjdG9yKGJvZHkuR2V0TGluZWFyVmVsb2NpdHkoKSkpKTtcbiAgICAgIGJvZHkuU2V0TGluZWFyVmVsb2NpdHkobmV3IGIyVmVjMihib2R5LkdldExpbmVhclZlbG9jaXR5KCkueCArIGRhbXBpbmcueCAqIHRpbWVzdGVwLCBib2R5LkdldExpbmVhclZlbG9jaXR5KCkueSArIGRhbXBpbmcueSAqIHRpbWVzdGVwKSk7XG4gICAgICBpID0gaS5uZXh0Qm9keTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGIyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXI7XG5cbn0pKGIyQ29udHJvbGxlcik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJEaXN0YW5jZUpvaW50ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJEaXN0YW5jZUpvaW50LCBfc3VwZXIpO1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUubV91ID0gbnVsbDtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLm1fbGVuZ3RoID0gMDtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLm1fZnJlcXVlbmN5SHogPSAwO1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUubV9kYW1waW5nUmF0aW8gPSAwO1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUubV9pbXB1bHNlID0gMC4wO1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUubV9nYW1tYSA9IDAuMDtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLm1fYmlhcyA9IDAuMDtcblxuICBmdW5jdGlvbiBiMkRpc3RhbmNlSm9pbnQoZGVmKSB7XG4gICAgYjJEaXN0YW5jZUpvaW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGRlZik7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV91ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjEuU2V0VihkZWYubG9jYWxBbmNob3JBKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IyLlNldFYoZGVmLmxvY2FsQW5jaG9yQik7XG4gICAgdGhpcy5tX2xlbmd0aCA9IGRlZi5sZW5ndGg7XG4gICAgdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gZGVmLmZyZXF1ZW5jeUh6O1xuICAgIHRoaXMubV9kYW1waW5nUmF0aW8gPSBkZWYuZGFtcGluZ1JhdGlvO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTtcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91LngsIGludl9kdCAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3UueSk7XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIDAuMDtcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLkdldExlbmd0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbGVuZ3RoO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuU2V0TGVuZ3RoID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7XG4gICAgICBsZW5ndGggPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fbGVuZ3RoID0gbGVuZ3RoO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuR2V0RnJlcXVlbmN5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9mcmVxdWVuY3lIejtcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLlNldEZyZXF1ZW5jeSA9IGZ1bmN0aW9uKGh6KSB7XG4gICAgaWYgKGh6ID09PSB2b2lkIDApIHtcbiAgICAgIGh6ID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gaHo7XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5HZXREYW1waW5nUmF0aW8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2RhbXBpbmdSYXRpbztcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLlNldERhbXBpbmdSYXRpbyA9IGZ1bmN0aW9uKHJhdGlvKSB7XG4gICAgaWYgKHJhdGlvID09PSB2b2lkIDApIHtcbiAgICAgIHJhdGlvID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IHJhdGlvO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIEMsIFBYLCBQWSwgYkEsIGJCLCBjcjF1LCBjcjJ1LCBkLCBpbnZNYXNzLCBrLCBsZW5ndGgsIG9tZWdhLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICByMVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgcjJYID0gdFg7XG4gICAgdGhpcy5tX3UueCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYIC0gYkEubV9zd2VlcC5jLnggLSByMVg7XG4gICAgdGhpcy5tX3UueSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZIC0gYkEubV9zd2VlcC5jLnkgLSByMVk7XG4gICAgbGVuZ3RoID0gTWF0aC5zcXJ0KHRoaXMubV91LnggKiB0aGlzLm1fdS54ICsgdGhpcy5tX3UueSAqIHRoaXMubV91LnkpO1xuICAgIGlmIChsZW5ndGggPiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgIHRoaXMubV91Lk11bHRpcGx5KDEuMCAvIGxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV91LlNldFplcm8oKTtcbiAgICB9XG4gICAgY3IxdSA9IHIxWCAqIHRoaXMubV91LnkgLSByMVkgKiB0aGlzLm1fdS54O1xuICAgIGNyMnUgPSByMlggKiB0aGlzLm1fdS55IC0gcjJZICogdGhpcy5tX3UueDtcbiAgICBpbnZNYXNzID0gYkEubV9pbnZNYXNzICsgYkEubV9pbnZJICogY3IxdSAqIGNyMXUgKyBiQi5tX2ludk1hc3MgKyBiQi5tX2ludkkgKiBjcjJ1ICogY3IydTtcbiAgICB0aGlzLm1fbWFzcyA9IChpbnZNYXNzICE9PSAwLjAgPyAxLjAgLyBpbnZNYXNzIDogMC4wKTtcbiAgICBpZiAodGhpcy5tX2ZyZXF1ZW5jeUh6ID4gMC4wKSB7XG4gICAgICBDID0gbGVuZ3RoIC0gdGhpcy5tX2xlbmd0aDtcbiAgICAgIG9tZWdhID0gMi4wICogTWF0aC5QSSAqIHRoaXMubV9mcmVxdWVuY3lIejtcbiAgICAgIGQgPSAyLjAgKiB0aGlzLm1fbWFzcyAqIHRoaXMubV9kYW1waW5nUmF0aW8gKiBvbWVnYTtcbiAgICAgIGsgPSB0aGlzLm1fbWFzcyAqIG9tZWdhICogb21lZ2E7XG4gICAgICB0aGlzLm1fZ2FtbWEgPSBzdGVwLmR0ICogKGQgKyBzdGVwLmR0ICogayk7XG4gICAgICB0aGlzLm1fZ2FtbWEgPSAodGhpcy5tX2dhbW1hICE9PSAwLjAgPyAxIC8gdGhpcy5tX2dhbW1hIDogMC4wKTtcbiAgICAgIHRoaXMubV9iaWFzID0gQyAqIHN0ZXAuZHQgKiBrICogdGhpcy5tX2dhbW1hO1xuICAgICAgdGhpcy5tX21hc3MgPSBpbnZNYXNzICsgdGhpcy5tX2dhbW1hO1xuICAgICAgdGhpcy5tX21hc3MgPSAodGhpcy5tX21hc3MgIT09IDAuMCA/IDEuMCAvIHRoaXMubV9tYXNzIDogMC4wKTtcbiAgICB9XG4gICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICB0aGlzLm1faW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICBQWCA9IHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3UueDtcbiAgICAgIFBZID0gdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fdS55O1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS54IC09IGJBLm1faW52TWFzcyAqIFBYO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55IC09IGJBLm1faW52TWFzcyAqIFBZO1xuICAgICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgLT0gYkEubV9pbnZJICogKHIxWCAqIFBZIC0gcjFZICogUFgpO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IGJCLm1faW52TWFzcyAqIFBYO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS55ICs9IGJCLm1faW52TWFzcyAqIFBZO1xuICAgICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkIubV9pbnZJICogKHIyWCAqIFBZIC0gcjJZICogUFgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIENkb3QsIFBYLCBQWSwgYkEsIGJCLCBpbXB1bHNlLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYLCB2MVgsIHYxWSwgdjJYLCB2Mlk7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIHYxWCA9IGJBLm1fbGluZWFyVmVsb2NpdHkueCArICgtYkEubV9hbmd1bGFyVmVsb2NpdHkgKiByMVkpO1xuICAgIHYxWSA9IGJBLm1fbGluZWFyVmVsb2NpdHkueSArIChiQS5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIxWCk7XG4gICAgdjJYID0gYkIubV9saW5lYXJWZWxvY2l0eS54ICsgKC1iQi5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIyWSk7XG4gICAgdjJZID0gYkIubV9saW5lYXJWZWxvY2l0eS55ICsgKGJCLm1fYW5ndWxhclZlbG9jaXR5ICogcjJYKTtcbiAgICBDZG90ID0gdGhpcy5tX3UueCAqICh2MlggLSB2MVgpICsgdGhpcy5tX3UueSAqICh2MlkgLSB2MVkpO1xuICAgIGltcHVsc2UgPSAtdGhpcy5tX21hc3MgKiAoQ2RvdCArIHRoaXMubV9iaWFzICsgdGhpcy5tX2dhbW1hICogdGhpcy5tX2ltcHVsc2UpO1xuICAgIHRoaXMubV9pbXB1bHNlICs9IGltcHVsc2U7XG4gICAgUFggPSBpbXB1bHNlICogdGhpcy5tX3UueDtcbiAgICBQWSA9IGltcHVsc2UgKiB0aGlzLm1fdS55O1xuICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCAtPSBiQS5tX2ludk1hc3MgKiBQWDtcbiAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgLT0gYkEubV9pbnZNYXNzICogUFk7XG4gICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgLT0gYkEubV9pbnZJICogKHIxWCAqIFBZIC0gcjFZICogUFgpO1xuICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQi5tX2ludk1hc3MgKiBQWDtcbiAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkIubV9pbnZNYXNzICogUFk7XG4gICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkIubV9pbnZJICogKHIyWCAqIFBZIC0gcjJZICogUFgpO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgdmFyIEMsIFBYLCBQWSwgYkEsIGJCLCBkWCwgZFksIGltcHVsc2UsIGxlbmd0aCwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WDtcbiAgICBpZiAoYmF1bWdhcnRlID09PSB2b2lkIDApIHtcbiAgICAgIGJhdW1nYXJ0ZSA9IDA7XG4gICAgfVxuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgaWYgKHRoaXMubV9mcmVxdWVuY3lIeiA+IDAuMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICByMVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgcjJYID0gdFg7XG4gICAgZFggPSBiQi5tX3N3ZWVwLmMueCArIHIyWCAtIGJBLm1fc3dlZXAuYy54IC0gcjFYO1xuICAgIGRZID0gYkIubV9zd2VlcC5jLnkgKyByMlkgLSBiQS5tX3N3ZWVwLmMueSAtIHIxWTtcbiAgICBsZW5ndGggPSBNYXRoLnNxcnQoZFggKiBkWCArIGRZICogZFkpO1xuICAgIGRYIC89IGxlbmd0aDtcbiAgICBkWSAvPSBsZW5ndGg7XG4gICAgQyA9IGxlbmd0aCAtIHRoaXMubV9sZW5ndGg7XG4gICAgQyA9IGIyTWF0aC5DbGFtcChDLCAtYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uLCBiMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24pO1xuICAgIGltcHVsc2UgPSAtdGhpcy5tX21hc3MgKiBDO1xuICAgIHRoaXMubV91LlNldChkWCwgZFkpO1xuICAgIFBYID0gaW1wdWxzZSAqIHRoaXMubV91Lng7XG4gICAgUFkgPSBpbXB1bHNlICogdGhpcy5tX3UueTtcbiAgICBiQS5tX3N3ZWVwLmMueCAtPSBiQS5tX2ludk1hc3MgKiBQWDtcbiAgICBiQS5tX3N3ZWVwLmMueSAtPSBiQS5tX2ludk1hc3MgKiBQWTtcbiAgICBiQS5tX3N3ZWVwLmEgLT0gYkEubV9pbnZJICogKHIxWCAqIFBZIC0gcjFZICogUFgpO1xuICAgIGJCLm1fc3dlZXAuYy54ICs9IGJCLm1faW52TWFzcyAqIFBYO1xuICAgIGJCLm1fc3dlZXAuYy55ICs9IGJCLm1faW52TWFzcyAqIFBZO1xuICAgIGJCLm1fc3dlZXAuYSArPSBiQi5tX2ludkkgKiAocjJYICogUFkgLSByMlkgKiBQWCk7XG4gICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIHJldHVybiBiMk1hdGguQWJzKEMpIDwgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wO1xuICB9O1xuXG4gIHJldHVybiBiMkRpc3RhbmNlSm9pbnQ7XG5cbn0pKGIySm9pbnQpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkRpc3RhbmNlSm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWY7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkRpc3RhbmNlSm9pbnREZWYsIF9zdXBlcik7XG5cbiAgYjJEaXN0YW5jZUpvaW50RGVmLnByb3RvdHlwZS50eXBlID0gMDtcblxuICBiMkRpc3RhbmNlSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQSA9IG51bGw7XG5cbiAgYjJEaXN0YW5jZUpvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckIgPSBudWxsO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUudXNlckRhdGEgPSBudWxsO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUuYm9keUEgPSBudWxsO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUuYm9keUIgPSBudWxsO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUubGVuZ3RoID0gMS4wO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUuZnJlcXVlbmN5SHogPSAwLjA7XG5cbiAgYjJEaXN0YW5jZUpvaW50RGVmLnByb3RvdHlwZS5kYW1waW5nUmF0aW8gPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJEaXN0YW5jZUpvaW50RGVmKCkge1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMudHlwZSA9IGIySm9pbnQuZV9kaXN0YW5jZUpvaW50O1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGJBLCBiQiwgYW5jaG9yQSwgYW5jaG9yQikge1xuICAgIHZhciBkWCwgZFk7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQS5TZXRWKHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3JBKSk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIuU2V0Vih0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yQikpO1xuICAgIGRYID0gYW5jaG9yQi54IC0gYW5jaG9yQS54O1xuICAgIGRZID0gYW5jaG9yQi55IC0gYW5jaG9yQS55O1xuICAgIHRoaXMubGVuZ3RoID0gTWF0aC5zcXJ0KGRYICogZFggKyBkWSAqIGRZKTtcbiAgICB0aGlzLmZyZXF1ZW5jeUh6ID0gMC4wO1xuICAgIHRoaXMuZGFtcGluZ1JhdGlvID0gMC4wO1xuICB9O1xuXG4gIHJldHVybiBiMkRpc3RhbmNlSm9pbnREZWY7XG5cbn0pKGIySm9pbnREZWYpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkRpc3RhbmNlSm9pbnREZWYuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIyTWF0MjIsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMk1hdDIyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMjtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRnJpY3Rpb25Kb2ludCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyRnJpY3Rpb25Kb2ludCwgX3N1cGVyKTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLm1fbGluZWFyTWFzcyA9IG51bGw7XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5tX2xpbmVhckltcHVsc2UgPSBudWxsO1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUubV9hbmd1bGFyTWFzcyA9IDAuMDtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLm1fYW5ndWxhckltcHVsc2UgPSAwLjA7XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5tX21heEZvcmNlID0gMDtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLm1fbWF4VG9ycXVlID0gMDtcblxuICBmdW5jdGlvbiBiMkZyaWN0aW9uSm9pbnQoZGVmKSB7XG4gICAgYjJGcmljdGlvbkpvaW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGRlZik7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3JCID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9saW5lYXJNYXNzID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLm1fbGluZWFySW1wdWxzZSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3JBLlNldFYoZGVmLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5TZXRWKGRlZi5sb2NhbEFuY2hvckIpO1xuICAgIHRoaXMubV9saW5lYXJNYXNzLlNldFplcm8oKTtcbiAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgIHRoaXMubV9tYXhUb3JxdWUgPSBkZWYubWF4VG9ycXVlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKTtcbiAgfTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQik7XG4gIH07XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiB0aGlzLm1fbGluZWFySW1wdWxzZS54LCBpbnZfZHQgKiB0aGlzLm1fbGluZWFySW1wdWxzZS55KTtcbiAgfTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2FuZ3VsYXJJbXB1bHNlO1xuICB9O1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuU2V0TWF4Rm9yY2UgPSBmdW5jdGlvbihmb3JjZSkge1xuICAgIGlmIChmb3JjZSA9PT0gdm9pZCAwKSB7XG4gICAgICBmb3JjZSA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9tYXhGb3JjZSA9IGZvcmNlO1xuICB9O1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuR2V0TWF4Rm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21heEZvcmNlO1xuICB9O1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuU2V0TWF4VG9ycXVlID0gZnVuY3Rpb24odG9ycXVlKSB7XG4gICAgaWYgKHRvcnF1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB0b3JxdWUgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fbWF4VG9ycXVlID0gdG9ycXVlO1xuICB9O1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuR2V0TWF4VG9ycXVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9tYXhUb3JxdWU7XG4gIH07XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgSywgUCwgYkEsIGJCLCBpQSwgaUIsIG1BLCBtQiwgckFYLCByQVksIHJCWCwgckJZLCB0TWF0LCB0WDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHJBWCA9IHRoaXMubV9sb2NhbEFuY2hvckEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByQVkgPSB0aGlzLm1fbG9jYWxBbmNob3JBLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHJBWCArIHRNYXQuY29sMi54ICogckFZO1xuICAgIHJBWSA9IHRNYXQuY29sMS55ICogckFYICsgdE1hdC5jb2wyLnkgKiByQVk7XG4gICAgckFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByQlggPSB0aGlzLm1fbG9jYWxBbmNob3JCLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgckJZID0gdGhpcy5tX2xvY2FsQW5jaG9yQi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByQlggKyB0TWF0LmNvbDIueCAqIHJCWTtcbiAgICByQlkgPSB0TWF0LmNvbDEueSAqIHJCWCArIHRNYXQuY29sMi55ICogckJZO1xuICAgIHJCWCA9IHRYO1xuICAgIG1BID0gYkEubV9pbnZNYXNzO1xuICAgIG1CID0gYkIubV9pbnZNYXNzO1xuICAgIGlBID0gYkEubV9pbnZJO1xuICAgIGlCID0gYkIubV9pbnZJO1xuICAgIEsgPSBuZXcgYjJNYXQyMigpO1xuICAgIEsuY29sMS54ID0gbUEgKyBtQjtcbiAgICBLLmNvbDIueCA9IDAuMDtcbiAgICBLLmNvbDEueSA9IDAuMDtcbiAgICBLLmNvbDIueSA9IG1BICsgbUI7XG4gICAgSy5jb2wxLnggKz0gaUEgKiByQVkgKiByQVk7XG4gICAgSy5jb2wyLnggKz0gLWlBICogckFYICogckFZO1xuICAgIEsuY29sMS55ICs9IC1pQSAqIHJBWCAqIHJBWTtcbiAgICBLLmNvbDIueSArPSBpQSAqIHJBWCAqIHJBWDtcbiAgICBLLmNvbDEueCArPSBpQiAqIHJCWSAqIHJCWTtcbiAgICBLLmNvbDIueCArPSAtaUIgKiByQlggKiByQlk7XG4gICAgSy5jb2wxLnkgKz0gLWlCICogckJYICogckJZO1xuICAgIEsuY29sMi55ICs9IGlCICogckJYICogckJYO1xuICAgIEsuR2V0SW52ZXJzZSh0aGlzLm1fbGluZWFyTWFzcyk7XG4gICAgdGhpcy5tX2FuZ3VsYXJNYXNzID0gaUEgKyBpQjtcbiAgICBpZiAodGhpcy5tX2FuZ3VsYXJNYXNzID4gMC4wKSB7XG4gICAgICB0aGlzLm1fYW5ndWxhck1hc3MgPSAxLjAgLyB0aGlzLm1fYW5ndWxhck1hc3M7XG4gICAgfVxuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UueCAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS55ICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9hbmd1bGFySW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICBQID0gdGhpcy5tX2xpbmVhckltcHVsc2U7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggLT0gbUEgKiBQLng7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgLT0gbUEgKiBQLnk7XG4gICAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSAtPSBpQSAqIChyQVggKiBQLnkgLSByQVkgKiBQLnggKyB0aGlzLm1fYW5ndWxhckltcHVsc2UpO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IG1CICogUC54O1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS55ICs9IG1CICogUC55O1xuICAgICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gaUIgKiAockJYICogUC55IC0gckJZICogUC54ICsgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlID0gMC4wO1xuICAgIH1cbiAgfTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgQ2RvdCwgQ2RvdFgsIENkb3RZLCBiQSwgYkIsIGlBLCBpQiwgaW1wdWxzZSwgaW1wdWxzZVYsIG1BLCBtQiwgbWF4SW1wdWxzZSwgb2xkSW1wdWxzZSwgb2xkSW1wdWxzZVYsIHJBWCwgckFZLCByQlgsIHJCWSwgdE1hdCwgdFgsIHZBLCB2Qiwgd0EsIHdCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHZBID0gYkEubV9saW5lYXJWZWxvY2l0eTtcbiAgICB3QSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIHZCID0gYkIubV9saW5lYXJWZWxvY2l0eTtcbiAgICB3QiA9IGJCLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIG1BID0gYkEubV9pbnZNYXNzO1xuICAgIG1CID0gYkIubV9pbnZNYXNzO1xuICAgIGlBID0gYkEubV9pbnZJO1xuICAgIGlCID0gYkIubV9pbnZJO1xuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgckFYID0gdGhpcy5tX2xvY2FsQW5jaG9yQS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJBWSA9IHRoaXMubV9sb2NhbEFuY2hvckEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogckFYICsgdE1hdC5jb2wyLnggKiByQVk7XG4gICAgckFZID0gdE1hdC5jb2wxLnkgKiByQVggKyB0TWF0LmNvbDIueSAqIHJBWTtcbiAgICByQVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHJCWCA9IHRoaXMubV9sb2NhbEFuY2hvckIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByQlkgPSB0aGlzLm1fbG9jYWxBbmNob3JCLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHJCWCArIHRNYXQuY29sMi54ICogckJZO1xuICAgIHJCWSA9IHRNYXQuY29sMS55ICogckJYICsgdE1hdC5jb2wyLnkgKiByQlk7XG4gICAgckJYID0gdFg7XG4gICAgbWF4SW1wdWxzZSA9IDA7XG4gICAgQ2RvdCA9IHdCIC0gd0E7XG4gICAgaW1wdWxzZSA9IC10aGlzLm1fYW5ndWxhck1hc3MgKiBDZG90O1xuICAgIG9sZEltcHVsc2UgPSB0aGlzLm1fYW5ndWxhckltcHVsc2U7XG4gICAgbWF4SW1wdWxzZSA9IHN0ZXAuZHQgKiB0aGlzLm1fbWF4VG9ycXVlO1xuICAgIHRoaXMubV9hbmd1bGFySW1wdWxzZSA9IGIyTWF0aC5DbGFtcCh0aGlzLm1fYW5ndWxhckltcHVsc2UgKyBpbXB1bHNlLCAtbWF4SW1wdWxzZSwgbWF4SW1wdWxzZSk7XG4gICAgaW1wdWxzZSA9IHRoaXMubV9hbmd1bGFySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgd0EgLT0gaUEgKiBpbXB1bHNlO1xuICAgIHdCICs9IGlCICogaW1wdWxzZTtcbiAgICBDZG90WCA9IHZCLnggLSB3QiAqIHJCWSAtIHZBLnggKyB3QSAqIHJBWTtcbiAgICBDZG90WSA9IHZCLnkgKyB3QiAqIHJCWCAtIHZBLnkgLSB3QSAqIHJBWDtcbiAgICBpbXB1bHNlViA9IGIyTWF0aC5NdWxNVih0aGlzLm1fbGluZWFyTWFzcywgbmV3IGIyVmVjMigtQ2RvdFgsIC1DZG90WSkpO1xuICAgIG9sZEltcHVsc2VWID0gdGhpcy5tX2xpbmVhckltcHVsc2UuQ29weSgpO1xuICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLkFkZChpbXB1bHNlVik7XG4gICAgbWF4SW1wdWxzZSA9IHN0ZXAuZHQgKiB0aGlzLm1fbWF4Rm9yY2U7XG4gICAgaWYgKHRoaXMubV9saW5lYXJJbXB1bHNlLkxlbmd0aFNxdWFyZWQoKSA+IG1heEltcHVsc2UgKiBtYXhJbXB1bHNlKSB7XG4gICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5Ob3JtYWxpemUoKTtcbiAgICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLk11bHRpcGx5KG1heEltcHVsc2UpO1xuICAgIH1cbiAgICBpbXB1bHNlViA9IGIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV9saW5lYXJJbXB1bHNlLCBvbGRJbXB1bHNlVik7XG4gICAgdkEueCAtPSBtQSAqIGltcHVsc2VWLng7XG4gICAgdkEueSAtPSBtQSAqIGltcHVsc2VWLnk7XG4gICAgd0EgLT0gaUEgKiAockFYICogaW1wdWxzZVYueSAtIHJBWSAqIGltcHVsc2VWLngpO1xuICAgIHZCLnggKz0gbUIgKiBpbXB1bHNlVi54O1xuICAgIHZCLnkgKz0gbUIgKiBpbXB1bHNlVi55O1xuICAgIHdCICs9IGlCICogKHJCWCAqIGltcHVsc2VWLnkgLSByQlkgKiBpbXB1bHNlVi54KTtcbiAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSA9IHdBO1xuICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ID0gd0I7XG4gIH07XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICBpZiAoYmF1bWdhcnRlID09PSB2b2lkIDApIHtcbiAgICAgIGJhdW1nYXJ0ZSA9IDA7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHJldHVybiBiMkZyaWN0aW9uSm9pbnQ7XG5cbn0pKGIySm9pbnQpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkZyaWN0aW9uSm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWY7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkZyaWN0aW9uSm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkZyaWN0aW9uSm9pbnREZWYsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gYjJGcmljdGlvbkpvaW50RGVmKCkge1xuICAgIHJldHVybiBiMkZyaWN0aW9uSm9pbnREZWYuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBiMkZyaWN0aW9uSm9pbnREZWYucHJvdG90eXBlLnR5cGUgPSBiMkpvaW50LmVfZnJpY3Rpb25Kb2ludDtcblxuICBiMkZyaWN0aW9uSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQSA9IG51bGw7XG5cbiAgYjJGcmljdGlvbkpvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckIgPSBudWxsO1xuXG4gIGIyRnJpY3Rpb25Kb2ludERlZi5wcm90b3R5cGUubWF4Rm9yY2UgPSAwLjA7XG5cbiAgYjJGcmljdGlvbkpvaW50RGVmLnByb3RvdHlwZS5tYXhUb3JxdWUgPSAwLjA7XG5cbiAgcmV0dXJuIGIyRnJpY3Rpb25Kb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbih7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBiMlZlYzIoKTtcbiAgfSxcbiAgSW5pdGlhbGl6ZTogZnVuY3Rpb24oYkEsIGJCLCBhbmNob3IpIHtcbiAgICB0aGlzLmJvZHlBID0gYkE7XG4gICAgdGhpcy5ib2R5QiA9IGJCO1xuICAgIHRoaXMubG9jYWxBbmNob3JBLlNldFYodGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvcikpO1xuICAgIHRoaXMubG9jYWxBbmNob3JCLlNldFYodGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvcikpO1xuICB9XG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJGcmljdGlvbkpvaW50RGVmLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkphY29iaWFuLCBiMkpvaW50LCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKYWNvYmlhbiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkphY29iaWFuO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJHZWFySm9pbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkdlYXJKb2ludCwgX3N1cGVyKTtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9ncm91bmRBbmNob3IxID0gbnVsbDtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9ncm91bmRBbmNob3IyID0gbnVsbDtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9KID0gbnVsbDtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9yZXZvbHV0ZTEgPSBudWxsO1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5tX3ByaXNtYXRpYzEgPSBudWxsO1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5tX3Jldm9sdXRlMiA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fcHJpc21hdGljMiA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fZ3JvdW5kMSA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fZ3JvdW5kMiA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fcmF0aW8gPSAwO1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5tX2NvbnN0YW50ID0gMDtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9pbXB1bHNlID0gMC4wO1xuXG4gIGZ1bmN0aW9uIGIyR2VhckpvaW50KGRlZikge1xuICAgIHZhciBjb29yZGluYXRlMSwgY29vcmRpbmF0ZTIsIHR5cGUxLCB0eXBlMjtcbiAgICBiMkdlYXJKb2ludC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBkZWYpO1xuICAgIHRoaXMubV9ncm91bmRBbmNob3IxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9ncm91bmRBbmNob3IyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fSiA9IG5ldyBiMkphY29iaWFuKCk7XG4gICAgdHlwZTEgPSBwYXJzZUludChkZWYuam9pbnQxLm1fdHlwZSk7XG4gICAgdHlwZTIgPSBwYXJzZUludChkZWYuam9pbnQyLm1fdHlwZSk7XG4gICAgY29vcmRpbmF0ZTEgPSAwO1xuICAgIGNvb3JkaW5hdGUyID0gMDtcbiAgICB0aGlzLm1fZ3JvdW5kMSA9IGRlZi5qb2ludDEuR2V0Qm9keUEoKTtcbiAgICB0aGlzLm1fYm9keUEgPSBkZWYuam9pbnQxLkdldEJvZHlCKCk7XG4gICAgaWYgKHR5cGUxID09PSBiMkpvaW50LmVfcmV2b2x1dGVKb2ludCkge1xuICAgICAgdGhpcy5tX3Jldm9sdXRlMSA9IChkZWYuam9pbnQxIGluc3RhbmNlb2YgYjJSZXZvbHV0ZUpvaW50ID8gZGVmLmpvaW50MSA6IG51bGwpO1xuICAgICAgdGhpcy5tX2dyb3VuZEFuY2hvcjEuU2V0Vih0aGlzLm1fcmV2b2x1dGUxLm1fbG9jYWxBbmNob3IxKTtcbiAgICAgIHRoaXMubV9sb2NhbEFuY2hvcjEuU2V0Vih0aGlzLm1fcmV2b2x1dGUxLm1fbG9jYWxBbmNob3IyKTtcbiAgICAgIGNvb3JkaW5hdGUxID0gdGhpcy5tX3Jldm9sdXRlMS5HZXRKb2ludEFuZ2xlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9wcmlzbWF0aWMxID0gKGRlZi5qb2ludDEgaW5zdGFuY2VvZiBiMlByaXNtYXRpY0pvaW50ID8gZGVmLmpvaW50MSA6IG51bGwpO1xuICAgICAgdGhpcy5tX2dyb3VuZEFuY2hvcjEuU2V0Vih0aGlzLm1fcHJpc21hdGljMS5tX2xvY2FsQW5jaG9yMSk7XG4gICAgICB0aGlzLm1fbG9jYWxBbmNob3IxLlNldFYodGhpcy5tX3ByaXNtYXRpYzEubV9sb2NhbEFuY2hvcjIpO1xuICAgICAgY29vcmRpbmF0ZTEgPSB0aGlzLm1fcHJpc21hdGljMS5HZXRKb2ludFRyYW5zbGF0aW9uKCk7XG4gICAgfVxuICAgIHRoaXMubV9ncm91bmQyID0gZGVmLmpvaW50Mi5HZXRCb2R5QSgpO1xuICAgIHRoaXMubV9ib2R5QiA9IGRlZi5qb2ludDIuR2V0Qm9keUIoKTtcbiAgICBpZiAodHlwZTIgPT09IGIySm9pbnQuZV9yZXZvbHV0ZUpvaW50KSB7XG4gICAgICB0aGlzLm1fcmV2b2x1dGUyID0gKGRlZi5qb2ludDIgaW5zdGFuY2VvZiBiMlJldm9sdXRlSm9pbnQgPyBkZWYuam9pbnQyIDogbnVsbCk7XG4gICAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMi5TZXRWKHRoaXMubV9yZXZvbHV0ZTIubV9sb2NhbEFuY2hvcjEpO1xuICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yMi5TZXRWKHRoaXMubV9yZXZvbHV0ZTIubV9sb2NhbEFuY2hvcjIpO1xuICAgICAgY29vcmRpbmF0ZTIgPSB0aGlzLm1fcmV2b2x1dGUyLkdldEpvaW50QW5nbGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3ByaXNtYXRpYzIgPSAoZGVmLmpvaW50MiBpbnN0YW5jZW9mIGIyUHJpc21hdGljSm9pbnQgPyBkZWYuam9pbnQyIDogbnVsbCk7XG4gICAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMi5TZXRWKHRoaXMubV9wcmlzbWF0aWMyLm1fbG9jYWxBbmNob3IxKTtcbiAgICAgIHRoaXMubV9sb2NhbEFuY2hvcjIuU2V0Vih0aGlzLm1fcHJpc21hdGljMi5tX2xvY2FsQW5jaG9yMik7XG4gICAgICBjb29yZGluYXRlMiA9IHRoaXMubV9wcmlzbWF0aWMyLkdldEpvaW50VHJhbnNsYXRpb24oKTtcbiAgICB9XG4gICAgdGhpcy5tX3JhdGlvID0gZGVmLnJhdGlvO1xuICAgIHRoaXMubV9jb25zdGFudCA9IGNvb3JkaW5hdGUxICsgdGhpcy5tX3JhdGlvICogY29vcmRpbmF0ZTI7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLkdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7XG4gIH07XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7XG4gIH07XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgYjJWZWMyKGludl9kdCAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0oubGluZWFyQi54LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueSk7XG4gIH07XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgdmFyIFBYLCBQWSwgclgsIHJZLCB0TWF0LCB0WDtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHRNYXQgPSB0aGlzLm1fYm9keUIubV94Zi5SO1xuICAgIHJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gdGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHJYICsgdE1hdC5jb2wyLnggKiByWTtcbiAgICByWSA9IHRNYXQuY29sMS55ICogclggKyB0TWF0LmNvbDIueSAqIHJZO1xuICAgIHJYID0gdFg7XG4gICAgUFggPSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueDtcbiAgICBQWSA9IHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0oubGluZWFyQi55O1xuICAgIHJldHVybiBpbnZfZHQgKiAodGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5hbmd1bGFyQiAtIHJYICogUFkgKyByWSAqIFBYKTtcbiAgfTtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUuR2V0UmF0aW8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3JhdGlvO1xuICB9O1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5TZXRSYXRpbyA9IGZ1bmN0aW9uKHJhdGlvKSB7XG4gICAgaWYgKHJhdGlvID09PSB2b2lkIDApIHtcbiAgICAgIHJhdGlvID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX3JhdGlvID0gcmF0aW87XG4gIH07XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBLLCBiQSwgYkIsIGNydWcsIGcxLCBnMiwgclgsIHJZLCB0TWF0LCB0VmVjLCB0WCwgdWdYLCB1Z1k7XG4gICAgZzEgPSB0aGlzLm1fZ3JvdW5kMTtcbiAgICBnMiA9IHRoaXMubV9ncm91bmQyO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHVnWCA9IDA7XG4gICAgdWdZID0gMDtcbiAgICByWCA9IDA7XG4gICAgclkgPSAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICBjcnVnID0gMDtcbiAgICB0WCA9IDA7XG4gICAgSyA9IDAuMDtcbiAgICB0aGlzLm1fSi5TZXRaZXJvKCk7XG4gICAgaWYgKHRoaXMubV9yZXZvbHV0ZTEpIHtcbiAgICAgIHRoaXMubV9KLmFuZ3VsYXJBID0gLTEuMDtcbiAgICAgIEsgKz0gYkEubV9pbnZJO1xuICAgIH0gZWxzZSB7XG4gICAgICB0TWF0ID0gZzEubV94Zi5SO1xuICAgICAgdFZlYyA9IHRoaXMubV9wcmlzbWF0aWMxLm1fbG9jYWxYQXhpczE7XG4gICAgICB1Z1ggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgdWdZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgICByWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICAgIHJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHJYICsgdE1hdC5jb2wyLnggKiByWTtcbiAgICAgIHJZID0gdE1hdC5jb2wxLnkgKiByWCArIHRNYXQuY29sMi55ICogclk7XG4gICAgICByWCA9IHRYO1xuICAgICAgY3J1ZyA9IHJYICogdWdZIC0gclkgKiB1Z1g7XG4gICAgICB0aGlzLm1fSi5saW5lYXJBLlNldCgtdWdYLCAtdWdZKTtcbiAgICAgIHRoaXMubV9KLmFuZ3VsYXJBID0gLWNydWc7XG4gICAgICBLICs9IGJBLm1faW52TWFzcyArIGJBLm1faW52SSAqIGNydWcgKiBjcnVnO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX3Jldm9sdXRlMikge1xuICAgICAgdGhpcy5tX0ouYW5ndWxhckIgPSAtdGhpcy5tX3JhdGlvO1xuICAgICAgSyArPSB0aGlzLm1fcmF0aW8gKiB0aGlzLm1fcmF0aW8gKiBiQi5tX2ludkk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRNYXQgPSBnMi5tX3hmLlI7XG4gICAgICB0VmVjID0gdGhpcy5tX3ByaXNtYXRpYzIubV9sb2NhbFhBeGlzMTtcbiAgICAgIHVnWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICB1Z1kgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICAgIHJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgICAgclkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgICB0WCA9IHRNYXQuY29sMS54ICogclggKyB0TWF0LmNvbDIueCAqIHJZO1xuICAgICAgclkgPSB0TWF0LmNvbDEueSAqIHJYICsgdE1hdC5jb2wyLnkgKiByWTtcbiAgICAgIHJYID0gdFg7XG4gICAgICBjcnVnID0gclggKiB1Z1kgLSByWSAqIHVnWDtcbiAgICAgIHRoaXMubV9KLmxpbmVhckIuU2V0KC10aGlzLm1fcmF0aW8gKiB1Z1gsIC10aGlzLm1fcmF0aW8gKiB1Z1kpO1xuICAgICAgdGhpcy5tX0ouYW5ndWxhckIgPSAtdGhpcy5tX3JhdGlvICogY3J1ZztcbiAgICAgIEsgKz0gdGhpcy5tX3JhdGlvICogdGhpcy5tX3JhdGlvICogKGJCLm1faW52TWFzcyArIGJCLm1faW52SSAqIGNydWcgKiBjcnVnKTtcbiAgICB9XG4gICAgdGhpcy5tX21hc3MgPSAoSyA+IDAuMCA/IDEuMCAvIEsgOiAwLjApO1xuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS54ICs9IGJBLm1faW52TWFzcyAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0oubGluZWFyQS54O1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55ICs9IGJBLm1faW52TWFzcyAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0oubGluZWFyQS55O1xuICAgICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkEubV9pbnZJICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5hbmd1bGFyQTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQi5tX2ludk1hc3MgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQi5tX2ludk1hc3MgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueTtcbiAgICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJCLm1faW52SSAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0ouYW5ndWxhckI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlID0gMC4wO1xuICAgIH1cbiAgfTtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90LCBiQSwgYkIsIGltcHVsc2U7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgQ2RvdCA9IHRoaXMubV9KLkNvbXB1dGUoYkEubV9saW5lYXJWZWxvY2l0eSwgYkEubV9hbmd1bGFyVmVsb2NpdHksIGJCLm1fbGluZWFyVmVsb2NpdHksIGJCLm1fYW5ndWxhclZlbG9jaXR5KTtcbiAgICBpbXB1bHNlID0gLXRoaXMubV9tYXNzICogQ2RvdDtcbiAgICB0aGlzLm1faW1wdWxzZSArPSBpbXB1bHNlO1xuICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQS5tX2ludk1hc3MgKiBpbXB1bHNlICogdGhpcy5tX0oubGluZWFyQS54O1xuICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQS5tX2ludk1hc3MgKiBpbXB1bHNlICogdGhpcy5tX0oubGluZWFyQS55O1xuICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJBLm1faW52SSAqIGltcHVsc2UgKiB0aGlzLm1fSi5hbmd1bGFyQTtcbiAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueDtcbiAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueTtcbiAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQi5tX2ludkkgKiBpbXB1bHNlICogdGhpcy5tX0ouYW5ndWxhckI7XG4gIH07XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0ZSkge1xuICAgIHZhciBDLCBiQSwgYkIsIGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMiwgaW1wdWxzZSwgbGluZWFyRXJyb3I7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICBsaW5lYXJFcnJvciA9IDAuMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICBjb29yZGluYXRlMSA9IDA7XG4gICAgY29vcmRpbmF0ZTIgPSAwO1xuICAgIGlmICh0aGlzLm1fcmV2b2x1dGUxKSB7XG4gICAgICBjb29yZGluYXRlMSA9IHRoaXMubV9yZXZvbHV0ZTEuR2V0Sm9pbnRBbmdsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb29yZGluYXRlMSA9IHRoaXMubV9wcmlzbWF0aWMxLkdldEpvaW50VHJhbnNsYXRpb24oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9yZXZvbHV0ZTIpIHtcbiAgICAgIGNvb3JkaW5hdGUyID0gdGhpcy5tX3Jldm9sdXRlMi5HZXRKb2ludEFuZ2xlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvb3JkaW5hdGUyID0gdGhpcy5tX3ByaXNtYXRpYzIuR2V0Sm9pbnRUcmFuc2xhdGlvbigpO1xuICAgIH1cbiAgICBDID0gdGhpcy5tX2NvbnN0YW50IC0gKGNvb3JkaW5hdGUxICsgdGhpcy5tX3JhdGlvICogY29vcmRpbmF0ZTIpO1xuICAgIGltcHVsc2UgPSAtdGhpcy5tX21hc3MgKiBDO1xuICAgIGJBLm1fc3dlZXAuYy54ICs9IGJBLm1faW52TWFzcyAqIGltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJBLng7XG4gICAgYkEubV9zd2VlcC5jLnkgKz0gYkEubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckEueTtcbiAgICBiQS5tX3N3ZWVwLmEgKz0gYkEubV9pbnZJICogaW1wdWxzZSAqIHRoaXMubV9KLmFuZ3VsYXJBO1xuICAgIGJCLm1fc3dlZXAuYy54ICs9IGJCLm1faW52TWFzcyAqIGltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLng7XG4gICAgYkIubV9zd2VlcC5jLnkgKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueTtcbiAgICBiQi5tX3N3ZWVwLmEgKz0gYkIubV9pbnZJICogaW1wdWxzZSAqIHRoaXMubV9KLmFuZ3VsYXJCO1xuICAgIGJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICByZXR1cm4gbGluZWFyRXJyb3IgPCBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7XG4gIH07XG5cbiAgcmV0dXJuIGIyR2VhckpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJHZWFySm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWY7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkdlYXJKb2ludERlZiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyR2VhckpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIGIyR2VhckpvaW50RGVmKCkge1xuICAgIHJldHVybiBiMkdlYXJKb2ludERlZi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGIyR2VhckpvaW50RGVmLnByb3RvdHlwZS50eXBlID0gYjJKb2ludC5lX2dlYXJKb2ludDtcblxuICBiMkdlYXJKb2ludERlZi5wcm90b3R5cGUuam9pbnQxID0gbnVsbDtcblxuICBiMkdlYXJKb2ludERlZi5wcm90b3R5cGUuam9pbnQyID0gbnVsbDtcblxuICBiMkdlYXJKb2ludERlZi5wcm90b3R5cGUucmF0aW8gPSAxLjA7XG5cbiAgcmV0dXJuIGIyR2VhckpvaW50RGVmO1xuXG59KShiMkpvaW50RGVmKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJHZWFySm9pbnREZWYuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkphY29iaWFuID0gKGZ1bmN0aW9uKCkge1xuICBiMkphY29iaWFuLnByb3RvdHlwZS5saW5lYXJBID0gbnVsbDtcblxuICBiMkphY29iaWFuLnByb3RvdHlwZS5saW5lYXJCID0gbnVsbDtcblxuICBiMkphY29iaWFuLnByb3RvdHlwZS5hbmd1bGFyQSA9IG51bGw7XG5cbiAgYjJKYWNvYmlhbi5wcm90b3R5cGUuYW5ndWxhckIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIySmFjb2JpYW4oKSB7XG4gICAgdGhpcy5saW5lYXJBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubGluZWFyQiA9IG5ldyBiMlZlYzIoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkphY29iaWFuLnByb3RvdHlwZS5TZXRaZXJvID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5saW5lYXJBLlNldFplcm8oKTtcbiAgICB0aGlzLmFuZ3VsYXJBID0gMC4wO1xuICAgIHRoaXMubGluZWFyQi5TZXRaZXJvKCk7XG4gICAgdGhpcy5hbmd1bGFyQiA9IDAuMDtcbiAgfTtcblxuICBiMkphY29iaWFuLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbih4MSwgYTEsIHgyLCBhMikge1xuICAgIGlmIChhMSA9PT0gdm9pZCAwKSB7XG4gICAgICBhMSA9IDA7XG4gICAgfVxuICAgIGlmIChhMiA9PT0gdm9pZCAwKSB7XG4gICAgICBhMiA9IDA7XG4gICAgfVxuICAgIHRoaXMubGluZWFyQS5TZXRWKHgxKTtcbiAgICB0aGlzLmFuZ3VsYXJBID0gYTE7XG4gICAgdGhpcy5saW5lYXJCLlNldFYoeDIpO1xuICAgIHRoaXMuYW5ndWxhckIgPSBhMjtcbiAgfTtcblxuICBiMkphY29iaWFuLnByb3RvdHlwZS5Db21wdXRlID0gZnVuY3Rpb24oeDEsIGExLCB4MiwgYTIpIHtcbiAgICBpZiAoYTEgPT09IHZvaWQgMCkge1xuICAgICAgYTEgPSAwO1xuICAgIH1cbiAgICBpZiAoYTIgPT09IHZvaWQgMCkge1xuICAgICAgYTIgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gKHRoaXMubGluZWFyQS54ICogeDEueCArIHRoaXMubGluZWFyQS55ICogeDEueSkgKyB0aGlzLmFuZ3VsYXJBICogYTEgKyAodGhpcy5saW5lYXJCLnggKiB4Mi54ICsgdGhpcy5saW5lYXJCLnkgKiB4Mi55KSArIHRoaXMuYW5ndWxhckIgKiBhMjtcbiAgfTtcblxuICByZXR1cm4gYjJKYWNvYmlhbjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJKYWNvYmlhbi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJEaXN0YW5jZUpvaW50LCBiMkRpc3RhbmNlSm9pbnREZWYsIGIyRnJpY3Rpb25Kb2ludCwgYjJGcmljdGlvbkpvaW50RGVmLCBiMkdlYXJKb2ludCwgYjJHZWFySm9pbnREZWYsIGIySm9pbnRFZGdlLCBiMkxpbmVKb2ludCwgYjJMaW5lSm9pbnREZWYsIGIyTW91c2VKb2ludCwgYjJNb3VzZUpvaW50RGVmLCBiMlByaXNtYXRpY0pvaW50LCBiMlByaXNtYXRpY0pvaW50RGVmLCBiMlB1bGxleUpvaW50LCBiMlB1bGxleUpvaW50RGVmLCBiMlJldm9sdXRlSm9pbnQsIGIyUmV2b2x1dGVKb2ludERlZiwgYjJWZWMyLCBiMldlbGRKb2ludCwgYjJXZWxkSm9pbnREZWY7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RWRnZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RWRnZTtcblxuYjJEaXN0YW5jZUpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRGlzdGFuY2VKb2ludDtcblxuYjJNb3VzZUpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTW91c2VKb2ludDtcblxuYjJQcmlzbWF0aWNKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50O1xuXG5iMlJldm9sdXRlSm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJSZXZvbHV0ZUpvaW50O1xuXG5iMlB1bGxleUpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5Sm9pbnQ7XG5cbmIyR2VhckpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyR2VhckpvaW50O1xuXG5iMkxpbmVKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkxpbmVKb2ludDtcblxuYjJXZWxkSm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnQ7XG5cbmIyRnJpY3Rpb25Kb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkZyaWN0aW9uSm9pbnQ7XG5cbmIyRGlzdGFuY2VKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9pbnREZWY7XG5cbmIyTW91c2VKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMk1vdXNlSm9pbnREZWY7XG5cbmIyUHJpc21hdGljSm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludERlZjtcblxuYjJSZXZvbHV0ZUpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludERlZjtcblxuYjJQdWxsZXlKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMlB1bGxleUpvaW50RGVmO1xuXG5iMkdlYXJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkdlYXJKb2ludERlZjtcblxuYjJMaW5lSm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnREZWY7XG5cbmIyV2VsZEpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyV2VsZEpvaW50RGVmO1xuXG5iMkZyaWN0aW9uSm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludCA9IChmdW5jdGlvbigpIHtcbiAgYjJKb2ludC5lX3Vua25vd25Kb2ludCA9IDA7XG5cbiAgYjJKb2ludC5lX3Jldm9sdXRlSm9pbnQgPSAxO1xuXG4gIGIySm9pbnQuZV9wcmlzbWF0aWNKb2ludCA9IDI7XG5cbiAgYjJKb2ludC5lX2Rpc3RhbmNlSm9pbnQgPSAzO1xuXG4gIGIySm9pbnQuZV9wdWxsZXlKb2ludCA9IDQ7XG5cbiAgYjJKb2ludC5lX21vdXNlSm9pbnQgPSA1O1xuXG4gIGIySm9pbnQuZV9nZWFySm9pbnQgPSA2O1xuXG4gIGIySm9pbnQuZV9saW5lSm9pbnQgPSA3O1xuXG4gIGIySm9pbnQuZV93ZWxkSm9pbnQgPSA4O1xuXG4gIGIySm9pbnQuZV9mcmljdGlvbkpvaW50ID0gOTtcblxuICBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdCA9IDA7XG5cbiAgYjJKb2ludC5lX2F0TG93ZXJMaW1pdCA9IDE7XG5cbiAgYjJKb2ludC5lX2F0VXBwZXJMaW1pdCA9IDI7XG5cbiAgYjJKb2ludC5lX2VxdWFsTGltaXRzID0gMztcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX3R5cGUgPSBiMkpvaW50LmVfdW5rbm93bkpvaW50O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fZWRnZUEgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fZWRnZUIgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fbG9jYWxBbmNob3IxID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX2xvY2FsQW5jaG9yMiA9IG51bGw7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV9sb2NhbENlbnRlckEgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fbG9jYWxDZW50ZXJCID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX3ByZXYgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fbmV4dCA9IG51bGw7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV9ib2R5QSA9IG51bGw7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV9ib2R5QiA9IG51bGw7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV9jb2xsaWRlQ29ubmVjdGVkID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX2lzbGFuZEZsYWcgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fdXNlckRhdGEgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIySm9pbnQoZGVmKSB7XG4gICAgdGhpcy5tX2VkZ2VBID0gbmV3IGIySm9pbnRFZGdlKCk7XG4gICAgdGhpcy5tX2VkZ2VCID0gbmV3IGIySm9pbnRFZGdlKCk7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJCID0gbmV3IGIyVmVjMigpO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZGVmLmJvZHlBICE9PSBkZWYuYm9keUIpO1xuICAgIHRoaXMubV90eXBlID0gZGVmLnR5cGU7XG4gICAgdGhpcy5tX3ByZXYgPSBudWxsO1xuICAgIHRoaXMubV9uZXh0ID0gbnVsbDtcbiAgICB0aGlzLm1fYm9keUEgPSBkZWYuYm9keUE7XG4gICAgdGhpcy5tX2JvZHlCID0gZGVmLmJvZHlCO1xuICAgIHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkID0gZGVmLmNvbGxpZGVDb25uZWN0ZWQ7XG4gICAgdGhpcy5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICB0aGlzLm1fdXNlckRhdGEgPSBkZWYudXNlckRhdGE7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuR2V0VHlwZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdHlwZTtcbiAgfTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gMC4wO1xuICB9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLkdldEJvZHlBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5QTtcbiAgfTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5HZXRCb2R5QiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUI7XG4gIH07XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuR2V0TmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgfTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5HZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdXNlckRhdGE7XG4gIH07XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuU2V0VXNlckRhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgfTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5Jc0FjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuSXNBY3RpdmUoKSAmJiB0aGlzLm1fYm9keUIuSXNBY3RpdmUoKTtcbiAgfTtcblxuICBiMkpvaW50LkNyZWF0ZSA9IGZ1bmN0aW9uKGRlZiwgYWxsb2NhdG9yKSB7XG4gICAgdmFyIGpvaW50O1xuICAgIGpvaW50ID0gbnVsbDtcbiAgICBzd2l0Y2ggKGRlZi50eXBlKSB7XG4gICAgICBjYXNlIGIySm9pbnQuZV9kaXN0YW5jZUpvaW50OlxuICAgICAgICBqb2ludCA9IG5ldyBiMkRpc3RhbmNlSm9pbnQoKGRlZiBpbnN0YW5jZW9mIGIyRGlzdGFuY2VKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9tb3VzZUpvaW50OlxuICAgICAgICBqb2ludCA9IG5ldyBiMk1vdXNlSm9pbnQoKGRlZiBpbnN0YW5jZW9mIGIyTW91c2VKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9wcmlzbWF0aWNKb2ludDpcbiAgICAgICAgam9pbnQgPSBuZXcgYjJQcmlzbWF0aWNKb2ludCgoZGVmIGluc3RhbmNlb2YgYjJQcmlzbWF0aWNKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9yZXZvbHV0ZUpvaW50OlxuICAgICAgICBqb2ludCA9IG5ldyBiMlJldm9sdXRlSm9pbnQoKGRlZiBpbnN0YW5jZW9mIGIyUmV2b2x1dGVKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9wdWxsZXlKb2ludDpcbiAgICAgICAgam9pbnQgPSBuZXcgYjJQdWxsZXlKb2ludCgoZGVmIGluc3RhbmNlb2YgYjJQdWxsZXlKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9nZWFySm9pbnQ6XG4gICAgICAgIGpvaW50ID0gbmV3IGIyR2VhckpvaW50KChkZWYgaW5zdGFuY2VvZiBiMkdlYXJKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9saW5lSm9pbnQ6XG4gICAgICAgIGpvaW50ID0gbmV3IGIyTGluZUpvaW50KChkZWYgaW5zdGFuY2VvZiBiMkxpbmVKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV93ZWxkSm9pbnQ6XG4gICAgICAgIGpvaW50ID0gbmV3IGIyV2VsZEpvaW50KChkZWYgaW5zdGFuY2VvZiBiMldlbGRKb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9mcmljdGlvbkpvaW50OlxuICAgICAgICBqb2ludCA9IG5ldyBiMkZyaWN0aW9uSm9pbnQoKGRlZiBpbnN0YW5jZW9mIGIyRnJpY3Rpb25Kb2ludERlZiA/IGRlZiA6IG51bGwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBqb2ludDtcbiAgfTtcblxuICBiMkpvaW50LkRlc3Ryb3kgPSBmdW5jdGlvbihqb2ludCwgYWxsb2NhdG9yKSB7fTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHt9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHt9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLkZpbmFsaXplVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKCkge307XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgcmV0dXJuIGIySm9pbnQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIySm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZiA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJKb2ludERlZigpIHt9XG5cbiAgYjJKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IGIySm9pbnQuZV91bmtub3duSm9pbnQ7XG5cbiAgYjJKb2ludERlZi5wcm90b3R5cGUudXNlckRhdGEgPSBudWxsO1xuXG4gIGIySm9pbnREZWYucHJvdG90eXBlLmJvZHlBID0gbnVsbDtcblxuICBiMkpvaW50RGVmLnByb3RvdHlwZS5ib2R5QiA9IG51bGw7XG5cbiAgYjJKb2ludERlZi5wcm90b3R5cGUuY29sbGlkZUNvbm5lY3RlZCA9IG51bGw7XG5cbiAgcmV0dXJuIGIySm9pbnREZWY7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIySm9pbnREZWYuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnRFZGdlID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkpvaW50RWRnZSgpIHt9XG5cbiAgcmV0dXJuIGIySm9pbnRFZGdlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkpvaW50RWRnZS5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKb2ludCwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkxpbmVKb2ludCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyTGluZUpvaW50LCBfc3VwZXIpO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX2xvY2FsWEF4aXMxID0gbnVsbDtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV9sb2NhbFlBeGlzMSA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fYXhpcyA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fcGVycCA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fSyA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1faW1wdWxzZSA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fbW90b3JNYXNzID0gMC4wO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX21vdG9ySW1wdWxzZSA9IDAuMDtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV9sb3dlclRyYW5zbGF0aW9uID0gMC4wO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX3VwcGVyVHJhbnNsYXRpb24gPSAwLjA7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fbWF4TW90b3JGb3JjZSA9IDAuMDtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV9tb3RvclNwZWVkID0gMC4wO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX2VuYWJsZUxpbWl0ID0gZmFsc2U7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fZW5hYmxlTW90b3IgPSBmYWxzZTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG5cbiAgZnVuY3Rpb24gYjJMaW5lSm9pbnQoZGVmKSB7XG4gICAgYjJMaW5lSm9pbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZGVmKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsWEF4aXMxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbFlBeGlzMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fYXhpcyA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fcGVycCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fSyA9IG5ldyBiMk1hdDIyKCk7XG4gICAgdGhpcy5tX2ltcHVsc2UgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMS5TZXRWKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIuU2V0VihkZWYubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLm1fbG9jYWxYQXhpczEuU2V0VihkZWYubG9jYWxBeGlzQSk7XG4gICAgdGhpcy5tX2xvY2FsWUF4aXMxLnggPSAtdGhpcy5tX2xvY2FsWEF4aXMxLnk7XG4gICAgdGhpcy5tX2xvY2FsWUF4aXMxLnkgPSB0aGlzLm1fbG9jYWxYQXhpczEueDtcbiAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBkZWYubG93ZXJUcmFuc2xhdGlvbjtcbiAgICB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiA9IGRlZi51cHBlclRyYW5zbGF0aW9uO1xuICAgIHRoaXMubV9tYXhNb3RvckZvcmNlID0gZGVmLm1heE1vdG9yRm9yY2U7XG4gICAgdGhpcy5tX21vdG9yU3BlZWQgPSBkZWYubW90b3JTcGVlZDtcbiAgICB0aGlzLm1fZW5hYmxlTGltaXQgPSBkZWYuZW5hYmxlTGltaXQ7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZGVmLmVuYWJsZU1vdG9yO1xuICAgIHRoaXMubV9heGlzLlNldFplcm8oKTtcbiAgICB0aGlzLm1fcGVycC5TZXRaZXJvKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgYjJWZWMyKGludl9kdCAqICh0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3BlcnAueCArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueSkgKiB0aGlzLm1fYXhpcy54KSwgaW52X2R0ICogKHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fcGVycC55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS55KSAqIHRoaXMubV9heGlzLnkpKTtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55O1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRKb2ludFRyYW5zbGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGF4aXMsIGJBLCBiQiwgZFgsIGRZLCBwMSwgcDIsIHRNYXQsIHRyYW5zbGF0aW9uO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgcDEgPSBiQS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjEpO1xuICAgIHAyID0gYkIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IyKTtcbiAgICBkWCA9IHAyLnggLSBwMS54O1xuICAgIGRZID0gcDIueSAtIHAxLnk7XG4gICAgYXhpcyA9IGJBLkdldFdvcmxkVmVjdG9yKHRoaXMubV9sb2NhbFhBeGlzMSk7XG4gICAgdHJhbnNsYXRpb24gPSBheGlzLnggKiBkWCArIGF4aXMueSAqIGRZO1xuICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuR2V0Sm9pbnRTcGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBheGlzLCBiQSwgYkIsIGRYLCBkWSwgcDFYLCBwMVksIHAyWCwgcDJZLCByMVgsIHIxWSwgcjJYLCByMlksIHNwZWVkLCB0TWF0LCB0WCwgdjEsIHYyLCB3MSwgdzI7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIHAxWCA9IGJBLm1fc3dlZXAuYy54ICsgcjFYO1xuICAgIHAxWSA9IGJBLm1fc3dlZXAuYy55ICsgcjFZO1xuICAgIHAyWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYO1xuICAgIHAyWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZO1xuICAgIGRYID0gcDJYIC0gcDFYO1xuICAgIGRZID0gcDJZIC0gcDFZO1xuICAgIGF4aXMgPSBiQS5HZXRXb3JsZFZlY3Rvcih0aGlzLm1fbG9jYWxYQXhpczEpO1xuICAgIHYxID0gYkEubV9saW5lYXJWZWxvY2l0eTtcbiAgICB2MiA9IGJCLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgdzEgPSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICB3MiA9IGJCLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIHNwZWVkID0gKGRYICogKC13MSAqIGF4aXMueSkgKyBkWSAqICh3MSAqIGF4aXMueCkpICsgKGF4aXMueCAqICgoKHYyLnggKyAoLXcyICogcjJZKSkgLSB2MS54KSAtICgtdzEgKiByMVkpKSArIGF4aXMueSAqICgoKHYyLnkgKyAodzIgKiByMlgpKSAtIHYxLnkpIC0gKHcxICogcjFYKSkpO1xuICAgIHJldHVybiBzcGVlZDtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuSXNMaW1pdEVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZUxpbWl0O1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5FbmFibGVMaW1pdCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGZsYWc7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldExvd2VyTGltaXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb247XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldFVwcGVyTGltaXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb247XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLlNldExpbWl0cyA9IGZ1bmN0aW9uKGxvd2VyLCB1cHBlcikge1xuICAgIGlmIChsb3dlciA9PT0gdm9pZCAwKSB7XG4gICAgICBsb3dlciA9IDA7XG4gICAgfVxuICAgIGlmICh1cHBlciA9PT0gdm9pZCAwKSB7XG4gICAgICB1cHBlciA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBsb3dlcjtcbiAgICB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiA9IHVwcGVyO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5Jc01vdG9yRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZW5hYmxlTW90b3I7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkVuYWJsZU1vdG9yID0gZnVuY3Rpb24oZmxhZykge1xuICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZmxhZztcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuU2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKHNwZWVkKSB7XG4gICAgaWYgKHNwZWVkID09PSB2b2lkIDApIHtcbiAgICAgIHNwZWVkID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fbW90b3JTcGVlZCA9IHNwZWVkO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRNb3RvclNwZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9tb3RvclNwZWVkO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5TZXRNYXhNb3RvckZvcmNlID0gZnVuY3Rpb24oZm9yY2UpIHtcbiAgICBpZiAoZm9yY2UgPT09IHZvaWQgMCkge1xuICAgICAgZm9yY2UgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9tYXhNb3RvckZvcmNlID0gZm9yY2U7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldE1heE1vdG9yRm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21heE1vdG9yRm9yY2U7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldE1vdG9yRm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIEwxLCBMMiwgUFgsIFBZLCBiQSwgYkIsIGRYLCBkWSwgaTEsIGkyLCBqb2ludFRyYW5zaXRpb24sIG0xLCBtMiwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WCwgeGYxLCB4ZjI7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQS5TZXRWKGJBLkdldExvY2FsQ2VudGVyKCkpO1xuICAgIHRoaXMubV9sb2NhbENlbnRlckIuU2V0VihiQi5HZXRMb2NhbENlbnRlcigpKTtcbiAgICB4ZjEgPSBiQS5HZXRUcmFuc2Zvcm0oKTtcbiAgICB4ZjIgPSBiQi5HZXRUcmFuc2Zvcm0oKTtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIHRoaXMubV9sb2NhbENlbnRlckEueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSB0aGlzLm1fbG9jYWxDZW50ZXJBLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJCLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gdGhpcy5tX2xvY2FsQ2VudGVyQi55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIGRYID0gYkIubV9zd2VlcC5jLnggKyByMlggLSBiQS5tX3N3ZWVwLmMueCAtIHIxWDtcbiAgICBkWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZIC0gYkEubV9zd2VlcC5jLnkgLSByMVk7XG4gICAgdGhpcy5tX2ludk1hc3NBID0gYkEubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZNYXNzQiA9IGJCLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52SUEgPSBiQS5tX2ludkk7XG4gICAgdGhpcy5tX2ludklCID0gYkIubV9pbnZJO1xuICAgIHRoaXMubV9heGlzLlNldFYoYjJNYXRoLk11bE1WKHhmMS5SLCB0aGlzLm1fbG9jYWxYQXhpczEpKTtcbiAgICB0aGlzLm1fYTEgPSAoZFggKyByMVgpICogdGhpcy5tX2F4aXMueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fYXhpcy54O1xuICAgIHRoaXMubV9hMiA9IHIyWCAqIHRoaXMubV9heGlzLnkgLSByMlkgKiB0aGlzLm1fYXhpcy54O1xuICAgIHRoaXMubV9tb3Rvck1hc3MgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1faW52SUEgKiB0aGlzLm1fYTEgKiB0aGlzLm1fYTEgKyB0aGlzLm1faW52SUIgKiB0aGlzLm1fYTIgKiB0aGlzLm1fYTI7XG4gICAgdGhpcy5tX21vdG9yTWFzcyA9ICh0aGlzLm1fbW90b3JNYXNzID4gTnVtYmVyLk1JTl9WQUxVRSA/IDEuMCAvIHRoaXMubV9tb3Rvck1hc3MgOiAwLjApO1xuICAgIHRoaXMubV9wZXJwLlNldFYoYjJNYXRoLk11bE1WKHhmMS5SLCB0aGlzLm1fbG9jYWxZQXhpczEpKTtcbiAgICB0aGlzLm1fczEgPSAoZFggKyByMVgpICogdGhpcy5tX3BlcnAueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fcGVycC54O1xuICAgIHRoaXMubV9zMiA9IHIyWCAqIHRoaXMubV9wZXJwLnkgLSByMlkgKiB0aGlzLm1fcGVycC54O1xuICAgIG0xID0gdGhpcy5tX2ludk1hc3NBO1xuICAgIG0yID0gdGhpcy5tX2ludk1hc3NCO1xuICAgIGkxID0gdGhpcy5tX2ludklBO1xuICAgIGkyID0gdGhpcy5tX2ludklCO1xuICAgIHRoaXMubV9LLmNvbDEueCA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9zMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX3MyO1xuICAgIHRoaXMubV9LLmNvbDEueSA9IGkxICogdGhpcy5tX3MxICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fYTI7XG4gICAgdGhpcy5tX0suY29sMi54ID0gdGhpcy5tX0suY29sMS55O1xuICAgIHRoaXMubV9LLmNvbDIueSA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9hMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX2EyICogdGhpcy5tX2EyO1xuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQpIHtcbiAgICAgIGpvaW50VHJhbnNpdGlvbiA9IHRoaXMubV9heGlzLnggKiBkWCArIHRoaXMubV9heGlzLnkgKiBkWTtcbiAgICAgIGlmIChiMk1hdGguQWJzKHRoaXMubV91cHBlclRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIDwgMi4wICogYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2VxdWFsTGltaXRzO1xuICAgICAgfSBlbHNlIGlmIChqb2ludFRyYW5zaXRpb24gPD0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfYXRMb3dlckxpbWl0KSB7XG4gICAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfYXRMb3dlckxpbWl0O1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnkgPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoam9pbnRUcmFuc2l0aW9uID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkge1xuICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ID0gMC4wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuICAgICAgICB0aGlzLm1faW1wdWxzZS55ID0gMC4wO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICB0aGlzLm1faW1wdWxzZS54ICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9pbXB1bHNlLnkgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICBQWCA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fcGVycC54ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS55KSAqIHRoaXMubV9heGlzLng7XG4gICAgICBQWSA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fcGVycC55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS55KSAqIHRoaXMubV9heGlzLnk7XG4gICAgICBMMSA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fczEgKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnkpICogdGhpcy5tX2ExO1xuICAgICAgTDIgPSB0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3MyICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS55KSAqIHRoaXMubV9hMjtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCAtPSB0aGlzLm1faW52TWFzc0EgKiBQWDtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTtcbiAgICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5IC09IHRoaXMubV9pbnZJQSAqIEwxO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBYO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZO1xuICAgICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gdGhpcy5tX2ludklCICogTDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwLjA7XG4gICAgfVxuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIENkb3QsIENkb3QxLCBDZG90MiwgTDEsIEwyLCBQWCwgUFksIGIsIGJBLCBiQiwgZGYsIGRmMiwgZjEsIGYyciwgaW1wdWxzZSwgbWF4SW1wdWxzZSwgb2xkSW1wdWxzZSwgdjEsIHYyLCB3MSwgdzI7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdjEgPSBiQS5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcxID0gYkEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcyID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgUFggPSAwO1xuICAgIFBZID0gMDtcbiAgICBMMSA9IDA7XG4gICAgTDIgPSAwO1xuICAgIGlmICh0aGlzLm1fZW5hYmxlTW90b3IgJiYgdGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9lcXVhbExpbWl0cykge1xuICAgICAgQ2RvdCA9IHRoaXMubV9heGlzLnggKiAodjIueCAtIHYxLngpICsgdGhpcy5tX2F4aXMueSAqICh2Mi55IC0gdjEueSkgKyB0aGlzLm1fYTIgKiB3MiAtIHRoaXMubV9hMSAqIHcxO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9tb3Rvck1hc3MgKiAodGhpcy5tX21vdG9yU3BlZWQgLSBDZG90KTtcbiAgICAgIG9sZEltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICAgICAgbWF4SW1wdWxzZSA9IHN0ZXAuZHQgKiB0aGlzLm1fbWF4TW90b3JGb3JjZTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSBiMk1hdGguQ2xhbXAodGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsIC1tYXhJbXB1bHNlLCBtYXhJbXB1bHNlKTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlIC0gb2xkSW1wdWxzZTtcbiAgICAgIFBYID0gaW1wdWxzZSAqIHRoaXMubV9heGlzLng7XG4gICAgICBQWSA9IGltcHVsc2UgKiB0aGlzLm1fYXhpcy55O1xuICAgICAgTDEgPSBpbXB1bHNlICogdGhpcy5tX2ExO1xuICAgICAgTDIgPSBpbXB1bHNlICogdGhpcy5tX2EyO1xuICAgICAgdjEueCAtPSB0aGlzLm1faW52TWFzc0EgKiBQWDtcbiAgICAgIHYxLnkgLT0gdGhpcy5tX2ludk1hc3NBICogUFk7XG4gICAgICB3MSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICAgIHYyLnggKz0gdGhpcy5tX2ludk1hc3NCICogUFg7XG4gICAgICB2Mi55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZO1xuICAgICAgdzIgKz0gdGhpcy5tX2ludklCICogTDI7XG4gICAgfVxuICAgIENkb3QxID0gdGhpcy5tX3BlcnAueCAqICh2Mi54IC0gdjEueCkgKyB0aGlzLm1fcGVycC55ICogKHYyLnkgLSB2MS55KSArIHRoaXMubV9zMiAqIHcyIC0gdGhpcy5tX3MxICogdzE7XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQpIHtcbiAgICAgIENkb3QyID0gdGhpcy5tX2F4aXMueCAqICh2Mi54IC0gdjEueCkgKyB0aGlzLm1fYXhpcy55ICogKHYyLnkgLSB2MS55KSArIHRoaXMubV9hMiAqIHcyIC0gdGhpcy5tX2ExICogdzE7XG4gICAgICBmMSA9IHRoaXMubV9pbXB1bHNlLkNvcHkoKTtcbiAgICAgIGRmID0gdGhpcy5tX0suU29sdmUobmV3IGIyVmVjMigpLCAtQ2RvdDEsIC1DZG90Mik7XG4gICAgICB0aGlzLm1faW1wdWxzZS5BZGQoZGYpO1xuICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlID09PSBiMkpvaW50LmVfYXRMb3dlckxpbWl0KSB7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlLnkgPSBiMk1hdGguTWF4KHRoaXMubV9pbXB1bHNlLnksIDAuMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ID0gYjJNYXRoLk1pbih0aGlzLm1faW1wdWxzZS55LCAwLjApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiID0gKC1DZG90MSkgLSAodGhpcy5tX2ltcHVsc2UueSAtIGYxLnkpICogdGhpcy5tX0suY29sMi54O1xuICAgICAgZjJyID0gMDtcbiAgICAgIGlmICh0aGlzLm1fSy5jb2wxLnggIT09IDAuMCkge1xuICAgICAgICBmMnIgPSBiIC8gdGhpcy5tX0suY29sMS54ICsgZjEueDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGYyciA9IGYxLng7XG4gICAgICB9XG4gICAgICB0aGlzLm1faW1wdWxzZS54ID0gZjJyO1xuICAgICAgZGYueCA9IHRoaXMubV9pbXB1bHNlLnggLSBmMS54O1xuICAgICAgZGYueSA9IHRoaXMubV9pbXB1bHNlLnkgLSBmMS55O1xuICAgICAgUFggPSBkZi54ICogdGhpcy5tX3BlcnAueCArIGRmLnkgKiB0aGlzLm1fYXhpcy54O1xuICAgICAgUFkgPSBkZi54ICogdGhpcy5tX3BlcnAueSArIGRmLnkgKiB0aGlzLm1fYXhpcy55O1xuICAgICAgTDEgPSBkZi54ICogdGhpcy5tX3MxICsgZGYueSAqIHRoaXMubV9hMTtcbiAgICAgIEwyID0gZGYueCAqIHRoaXMubV9zMiArIGRmLnkgKiB0aGlzLm1fYTI7XG4gICAgICB2MS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYO1xuICAgICAgdjEueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTtcbiAgICAgIHcxIC09IHRoaXMubV9pbnZJQSAqIEwxO1xuICAgICAgdjIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDtcbiAgICAgIHYyLnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7XG4gICAgICB3MiArPSB0aGlzLm1faW52SUIgKiBMMjtcbiAgICB9IGVsc2Uge1xuICAgICAgZGYyID0gMDtcbiAgICAgIGlmICh0aGlzLm1fSy5jb2wxLnggIT09IDAuMCkge1xuICAgICAgICBkZjIgPSAoLUNkb3QxKSAvIHRoaXMubV9LLmNvbDEueDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRmMiA9IDAuMDtcbiAgICAgIH1cbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gZGYyO1xuICAgICAgUFggPSBkZjIgKiB0aGlzLm1fcGVycC54O1xuICAgICAgUFkgPSBkZjIgKiB0aGlzLm1fcGVycC55O1xuICAgICAgTDEgPSBkZjIgKiB0aGlzLm1fczE7XG4gICAgICBMMiA9IGRmMiAqIHRoaXMubV9zMjtcbiAgICAgIHYxLnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgICB2MS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZO1xuICAgICAgdzEgLT0gdGhpcy5tX2ludklBICogTDE7XG4gICAgICB2Mi54ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBYO1xuICAgICAgdjIueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTtcbiAgICAgIHcyICs9IHRoaXMubV9pbnZJQiAqIEwyO1xuICAgIH1cbiAgICBiQS5tX2xpbmVhclZlbG9jaXR5LlNldFYodjEpO1xuICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ID0gdzE7XG4gICAgYkIubV9saW5lYXJWZWxvY2l0eS5TZXRWKHYyKTtcbiAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSA9IHcyO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICB2YXIgQzEsIEMyLCBMMSwgTDIsIFBYLCBQWSwgUjEsIFIyLCBhMSwgYTIsIGFjdGl2ZSwgYW5ndWxhckVycm9yLCBiQSwgYkIsIGMxLCBjMiwgZFgsIGRZLCBpMSwgaTIsIGltcHVsc2UsIGltcHVsc2UxLCBrMTEsIGxpbWl0QywgbGluZWFyRXJyb3IsIG0xLCBtMiwgb2xkTGltaXRJbXB1bHNlLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYLCB0cmFuc2xhdGlvbjtcbiAgICBpZiAoYmF1bWdhcnRlID09PSB2b2lkIDApIHtcbiAgICAgIGJhdW1nYXJ0ZSA9IDA7XG4gICAgfVxuICAgIGxpbWl0QyA9IDA7XG4gICAgb2xkTGltaXRJbXB1bHNlID0gMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICBjMSA9IGJBLm1fc3dlZXAuYztcbiAgICBhMSA9IGJBLm1fc3dlZXAuYTtcbiAgICBjMiA9IGJCLm1fc3dlZXAuYztcbiAgICBhMiA9IGJCLm1fc3dlZXAuYTtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcbiAgICBtMSA9IDA7XG4gICAgbTIgPSAwO1xuICAgIGkxID0gMDtcbiAgICBpMiA9IDA7XG4gICAgbGluZWFyRXJyb3IgPSAwLjA7XG4gICAgYW5ndWxhckVycm9yID0gMC4wO1xuICAgIGFjdGl2ZSA9IGZhbHNlO1xuICAgIEMyID0gMC4wO1xuICAgIFIxID0gYjJNYXQyMi5Gcm9tQW5nbGUoYTEpO1xuICAgIFIyID0gYjJNYXQyMi5Gcm9tQW5nbGUoYTIpO1xuICAgIHRNYXQgPSBSMTtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJBLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBSMjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJCLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gdGhpcy5tX2xvY2FsQ2VudGVyQi55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIGRYID0gYzIueCArIHIyWCAtIGMxLnggLSByMVg7XG4gICAgZFkgPSBjMi55ICsgcjJZIC0gYzEueSAtIHIxWTtcbiAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0KSB7XG4gICAgICB0aGlzLm1fYXhpcyA9IGIyTWF0aC5NdWxNVihSMSwgdGhpcy5tX2xvY2FsWEF4aXMxKTtcbiAgICAgIHRoaXMubV9hMSA9IChkWCArIHIxWCkgKiB0aGlzLm1fYXhpcy55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9heGlzLng7XG4gICAgICB0aGlzLm1fYTIgPSByMlggKiB0aGlzLm1fYXhpcy55IC0gcjJZICogdGhpcy5tX2F4aXMueDtcbiAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5tX2F4aXMueCAqIGRYICsgdGhpcy5tX2F4aXMueSAqIGRZO1xuICAgICAgaWYgKGIyTWF0aC5BYnModGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikgPCAyLjAgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgICAgQzIgPSBiMk1hdGguQ2xhbXAodHJhbnNsYXRpb24sIC1iMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24sIGIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbik7XG4gICAgICAgIGxpbmVhckVycm9yID0gYjJNYXRoLkFicyh0cmFuc2xhdGlvbik7XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uIDw9IHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIEMyID0gYjJNYXRoLkNsYW1wKHRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gKyBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIC1iMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24sIDAuMCk7XG4gICAgICAgIGxpbmVhckVycm9yID0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gLSB0cmFuc2xhdGlvbjtcbiAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRpb24gPj0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgQzIgPSBiMk1hdGguQ2xhbXAodHJhbnNsYXRpb24gLSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiArIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgMC4wLCBiMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24pO1xuICAgICAgICBsaW5lYXJFcnJvciA9IHRyYW5zbGF0aW9uIC0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb247XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubV9wZXJwID0gYjJNYXRoLk11bE1WKFIxLCB0aGlzLm1fbG9jYWxZQXhpczEpO1xuICAgIHRoaXMubV9zMSA9IChkWCArIHIxWCkgKiB0aGlzLm1fcGVycC55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9wZXJwLng7XG4gICAgdGhpcy5tX3MyID0gcjJYICogdGhpcy5tX3BlcnAueSAtIHIyWSAqIHRoaXMubV9wZXJwLng7XG4gICAgaW1wdWxzZSA9IG5ldyBiMlZlYzIoKTtcbiAgICBDMSA9IHRoaXMubV9wZXJwLnggKiBkWCArIHRoaXMubV9wZXJwLnkgKiBkWTtcbiAgICBsaW5lYXJFcnJvciA9IGIyTWF0aC5NYXgobGluZWFyRXJyb3IsIGIyTWF0aC5BYnMoQzEpKTtcbiAgICBhbmd1bGFyRXJyb3IgPSAwLjA7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgbTEgPSB0aGlzLm1faW52TWFzc0E7XG4gICAgICBtMiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICAgIGkxID0gdGhpcy5tX2ludklBO1xuICAgICAgaTIgPSB0aGlzLm1faW52SUI7XG4gICAgICB0aGlzLm1fSy5jb2wxLnggPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fczEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9zMjtcbiAgICAgIHRoaXMubV9LLmNvbDEueSA9IGkxICogdGhpcy5tX3MxICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fYTI7XG4gICAgICB0aGlzLm1fSy5jb2wyLnggPSB0aGlzLm1fSy5jb2wxLnk7XG4gICAgICB0aGlzLm1fSy5jb2wyLnkgPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fYTEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9hMiAqIHRoaXMubV9hMjtcbiAgICAgIHRoaXMubV9LLlNvbHZlKGltcHVsc2UsIC1DMSwgLUMyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbTEgPSB0aGlzLm1faW52TWFzc0E7XG4gICAgICBtMiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICAgIGkxID0gdGhpcy5tX2ludklBO1xuICAgICAgaTIgPSB0aGlzLm1faW52SUI7XG4gICAgICBrMTEgPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fczEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9zMjtcbiAgICAgIGltcHVsc2UxID0gMDtcbiAgICAgIGlmIChrMTEgIT09IDAuMCkge1xuICAgICAgICBpbXB1bHNlMSA9ICgtQzEpIC8gazExO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW1wdWxzZTEgPSAwLjA7XG4gICAgICB9XG4gICAgICBpbXB1bHNlLnggPSBpbXB1bHNlMTtcbiAgICAgIGltcHVsc2UueSA9IDAuMDtcbiAgICB9XG4gICAgUFggPSBpbXB1bHNlLnggKiB0aGlzLm1fcGVycC54ICsgaW1wdWxzZS55ICogdGhpcy5tX2F4aXMueDtcbiAgICBQWSA9IGltcHVsc2UueCAqIHRoaXMubV9wZXJwLnkgKyBpbXB1bHNlLnkgKiB0aGlzLm1fYXhpcy55O1xuICAgIEwxID0gaW1wdWxzZS54ICogdGhpcy5tX3MxICsgaW1wdWxzZS55ICogdGhpcy5tX2ExO1xuICAgIEwyID0gaW1wdWxzZS54ICogdGhpcy5tX3MyICsgaW1wdWxzZS55ICogdGhpcy5tX2EyO1xuICAgIGMxLnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgYzEueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTtcbiAgICBhMSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICBjMi54ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBYO1xuICAgIGMyLnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7XG4gICAgYTIgKz0gdGhpcy5tX2ludklCICogTDI7XG4gICAgYkEubV9zd2VlcC5hID0gYTE7XG4gICAgYkIubV9zd2VlcC5hID0gYTI7XG4gICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIHJldHVybiBsaW5lYXJFcnJvciA8PSBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AgJiYgYW5ndWxhckVycm9yIDw9IGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsb3A7XG4gIH07XG5cbiAgcmV0dXJuIGIyTGluZUpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJMaW5lSm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWY7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkxpbmVKb2ludERlZiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyTGluZUpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS50eXBlID0gYjJKb2ludC5lX2xpbmVKb2ludDtcblxuICBiMkxpbmVKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JBID0gbnVsbDtcblxuICBiMkxpbmVKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JCID0gbnVsbDtcblxuICBiMkxpbmVKb2ludERlZi5wcm90b3R5cGUubG9jYWxBeGlzQSA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLmVuYWJsZUxpbWl0ID0gZmFsc2U7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLmxvd2VyVHJhbnNsYXRpb24gPSAwLjA7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLnVwcGVyVHJhbnNsYXRpb24gPSAwLjA7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLmVuYWJsZU1vdG9yID0gZmFsc2U7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLm1heE1vdG9yRm9yY2UgPSAwLjA7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLm1vdG9yU3BlZWQgPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJMaW5lSm9pbnREZWYoKSB7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEF4aXNBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubG9jYWxBeGlzQS5TZXQoMS4wLCAwLjApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oYkEsIGJCLCBhbmNob3IsIGF4aXMpIHtcbiAgICB0aGlzLmJvZHlBID0gYkE7XG4gICAgdGhpcy5ib2R5QiA9IGJCO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gdGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvcik7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSB0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yKTtcbiAgICB0aGlzLmxvY2FsQXhpc0EgPSB0aGlzLmJvZHlBLkdldExvY2FsVmVjdG9yKGF4aXMpO1xuICB9O1xuXG4gIHJldHVybiBiMkxpbmVKb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyTGluZUpvaW50RGVmLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMk1hdDIyLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMk1vdXNlSm9pbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMk1vdXNlSm9pbnQsIF9zdXBlcik7XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5LID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLksxID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLksyID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1fbG9jYWxBbmNob3IgPSBudWxsO1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUubV90YXJnZXQgPSBudWxsO1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUubV9pbXB1bHNlID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1fbWFzcyA9IG51bGw7XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5tX0MgPSBudWxsO1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUubV9mcmVxdWVuY3lIeiA9IDAuMDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1fZGFtcGluZ1JhdGlvID0gMC4wO1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUubV9iZXRhID0gMC4wO1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUubV9nYW1tYSA9IDAuMDtcblxuICBmdW5jdGlvbiBiMk1vdXNlSm9pbnQoZGVmKSB7XG4gICAgdmFyIHRNYXQsIHRYLCB0WTtcbiAgICBiMk1vdXNlSm9pbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZGVmKTtcbiAgICB0aGlzLksgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMuSzEgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMuSzIgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvciA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdGFyZ2V0ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9pbXB1bHNlID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9tYXNzID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLm1fQyA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdGFyZ2V0LlNldFYoZGVmLnRhcmdldCk7XG4gICAgdFggPSB0aGlzLm1fdGFyZ2V0LnggLSB0aGlzLm1fYm9keUIubV94Zi5wb3NpdGlvbi54O1xuICAgIHRZID0gdGhpcy5tX3RhcmdldC55IC0gdGhpcy5tX2JvZHlCLm1feGYucG9zaXRpb24ueTtcbiAgICB0TWF0ID0gdGhpcy5tX2JvZHlCLm1feGYuUjtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IueCA9IHRYICogdE1hdC5jb2wxLnggKyB0WSAqIHRNYXQuY29sMS55O1xuICAgIHRoaXMubV9sb2NhbEFuY2hvci55ID0gdFggKiB0TWF0LmNvbDIueCArIHRZICogdE1hdC5jb2wyLnk7XG4gICAgdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgICB0aGlzLm1fZnJlcXVlbmN5SHogPSBkZWYuZnJlcXVlbmN5SHo7XG4gICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IGRlZi5kYW1waW5nUmF0aW87XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV90YXJnZXQ7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcik7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS54LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55KTtcbiAgfTtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gMC4wO1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuR2V0VGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV90YXJnZXQ7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5TZXRUYXJnZXQgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICBpZiAodGhpcy5tX2JvZHlCLklzQXdha2UoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5tX3RhcmdldCA9IHRhcmdldDtcbiAgfTtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLkdldE1heEZvcmNlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9tYXhGb3JjZTtcbiAgfTtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLlNldE1heEZvcmNlID0gZnVuY3Rpb24obWF4Rm9yY2UpIHtcbiAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkge1xuICAgICAgbWF4Rm9yY2UgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fbWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgfTtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLkdldEZyZXF1ZW5jeSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZnJlcXVlbmN5SHo7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5TZXRGcmVxdWVuY3kgPSBmdW5jdGlvbihoeikge1xuICAgIGlmIChoeiA9PT0gdm9pZCAwKSB7XG4gICAgICBoeiA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9mcmVxdWVuY3lIeiA9IGh6O1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuR2V0RGFtcGluZ1JhdGlvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9kYW1waW5nUmF0aW87XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5TZXREYW1waW5nUmF0aW8gPSBmdW5jdGlvbihyYXRpbykge1xuICAgIGlmIChyYXRpbyA9PT0gdm9pZCAwKSB7XG4gICAgICByYXRpbyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9kYW1waW5nUmF0aW8gPSByYXRpbztcbiAgfTtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBiLCBkLCBpbnZJLCBpbnZNYXNzLCBrLCBtYXNzLCBvbWVnYSwgclgsIHJZLCB0TWF0LCB0WDtcbiAgICBiID0gdGhpcy5tX2JvZHlCO1xuICAgIG1hc3MgPSBiLkdldE1hc3MoKTtcbiAgICBvbWVnYSA9IDIuMCAqIE1hdGguUEkgKiB0aGlzLm1fZnJlcXVlbmN5SHo7XG4gICAgZCA9IDIuMCAqIG1hc3MgKiB0aGlzLm1fZGFtcGluZ1JhdGlvICogb21lZ2E7XG4gICAgayA9IG1hc3MgKiBvbWVnYSAqIG9tZWdhO1xuICAgIHRoaXMubV9nYW1tYSA9IHN0ZXAuZHQgKiAoZCArIHN0ZXAuZHQgKiBrKTtcbiAgICB0aGlzLm1fZ2FtbWEgPSAodGhpcy5tX2dhbW1hICE9PSAwID8gMSAvIHRoaXMubV9nYW1tYSA6IDAuMCk7XG4gICAgdGhpcy5tX2JldGEgPSBzdGVwLmR0ICogayAqIHRoaXMubV9nYW1tYTtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRNYXQgPSBiLm1feGYuUjtcbiAgICByWCA9IHRoaXMubV9sb2NhbEFuY2hvci54IC0gYi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgclkgPSB0aGlzLm1fbG9jYWxBbmNob3IueSAtIGIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByWCArIHRNYXQuY29sMi54ICogclk7XG4gICAgclkgPSB0TWF0LmNvbDEueSAqIHJYICsgdE1hdC5jb2wyLnkgKiByWTtcbiAgICByWCA9IHRYO1xuICAgIGludk1hc3MgPSBiLm1faW52TWFzcztcbiAgICBpbnZJID0gYi5tX2ludkk7XG4gICAgdGhpcy5LMS5jb2wxLnggPSBpbnZNYXNzO1xuICAgIHRoaXMuSzEuY29sMi54ID0gMC4wO1xuICAgIHRoaXMuSzEuY29sMS55ID0gMC4wO1xuICAgIHRoaXMuSzEuY29sMi55ID0gaW52TWFzcztcbiAgICB0aGlzLksyLmNvbDEueCA9IGludkkgKiByWSAqIHJZO1xuICAgIHRoaXMuSzIuY29sMi54ID0gLWludkkgKiByWCAqIHJZO1xuICAgIHRoaXMuSzIuY29sMS55ID0gLWludkkgKiByWCAqIHJZO1xuICAgIHRoaXMuSzIuY29sMi55ID0gaW52SSAqIHJYICogclg7XG4gICAgdGhpcy5LLlNldE0odGhpcy5LMSk7XG4gICAgdGhpcy5LLkFkZE0odGhpcy5LMik7XG4gICAgdGhpcy5LLmNvbDEueCArPSB0aGlzLm1fZ2FtbWE7XG4gICAgdGhpcy5LLmNvbDIueSArPSB0aGlzLm1fZ2FtbWE7XG4gICAgdGhpcy5LLkdldEludmVyc2UodGhpcy5tX21hc3MpO1xuICAgIHRoaXMubV9DLnggPSBiLm1fc3dlZXAuYy54ICsgclggLSB0aGlzLm1fdGFyZ2V0Lng7XG4gICAgdGhpcy5tX0MueSA9IGIubV9zd2VlcC5jLnkgKyByWSAtIHRoaXMubV90YXJnZXQueTtcbiAgICBiLm1fYW5ndWxhclZlbG9jaXR5ICo9IDAuOTg7XG4gICAgdGhpcy5tX2ltcHVsc2UueCAqPSBzdGVwLmR0UmF0aW87XG4gICAgdGhpcy5tX2ltcHVsc2UueSAqPSBzdGVwLmR0UmF0aW87XG4gICAgYi5tX2xpbmVhclZlbG9jaXR5LnggKz0gaW52TWFzcyAqIHRoaXMubV9pbXB1bHNlLng7XG4gICAgYi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gaW52TWFzcyAqIHRoaXMubV9pbXB1bHNlLnk7XG4gICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBpbnZJICogKHJYICogdGhpcy5tX2ltcHVsc2UueSAtIHJZICogdGhpcy5tX2ltcHVsc2UueCk7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIENkb3RYLCBDZG90WSwgYiwgaW1wdWxzZVgsIGltcHVsc2VZLCBtYXhJbXB1bHNlLCBvbGRJbXB1bHNlWCwgb2xkSW1wdWxzZVksIHJYLCByWSwgdE1hdCwgdFgsIHRZO1xuICAgIGIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgdFkgPSAwO1xuICAgIHRNYXQgPSBiLm1feGYuUjtcbiAgICByWCA9IHRoaXMubV9sb2NhbEFuY2hvci54IC0gYi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgclkgPSB0aGlzLm1fbG9jYWxBbmNob3IueSAtIGIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByWCArIHRNYXQuY29sMi54ICogclk7XG4gICAgclkgPSB0TWF0LmNvbDEueSAqIHJYICsgdE1hdC5jb2wyLnkgKiByWTtcbiAgICByWCA9IHRYO1xuICAgIENkb3RYID0gYi5tX2xpbmVhclZlbG9jaXR5LnggKyAoLWIubV9hbmd1bGFyVmVsb2NpdHkgKiByWSk7XG4gICAgQ2RvdFkgPSBiLm1fbGluZWFyVmVsb2NpdHkueSArIChiLm1fYW5ndWxhclZlbG9jaXR5ICogclgpO1xuICAgIHRNYXQgPSB0aGlzLm1fbWFzcztcbiAgICB0WCA9IENkb3RYICsgdGhpcy5tX2JldGEgKiB0aGlzLm1fQy54ICsgdGhpcy5tX2dhbW1hICogdGhpcy5tX2ltcHVsc2UueDtcbiAgICB0WSA9IENkb3RZICsgdGhpcy5tX2JldGEgKiB0aGlzLm1fQy55ICsgdGhpcy5tX2dhbW1hICogdGhpcy5tX2ltcHVsc2UueTtcbiAgICBpbXB1bHNlWCA9IC0odE1hdC5jb2wxLnggKiB0WCArIHRNYXQuY29sMi54ICogdFkpO1xuICAgIGltcHVsc2VZID0gLSh0TWF0LmNvbDEueSAqIHRYICsgdE1hdC5jb2wyLnkgKiB0WSk7XG4gICAgb2xkSW1wdWxzZVggPSB0aGlzLm1faW1wdWxzZS54O1xuICAgIG9sZEltcHVsc2VZID0gdGhpcy5tX2ltcHVsc2UueTtcbiAgICB0aGlzLm1faW1wdWxzZS54ICs9IGltcHVsc2VYO1xuICAgIHRoaXMubV9pbXB1bHNlLnkgKz0gaW1wdWxzZVk7XG4gICAgbWF4SW1wdWxzZSA9IHN0ZXAuZHQgKiB0aGlzLm1fbWF4Rm9yY2U7XG4gICAgaWYgKHRoaXMubV9pbXB1bHNlLkxlbmd0aFNxdWFyZWQoKSA+IG1heEltcHVsc2UgKiBtYXhJbXB1bHNlKSB7XG4gICAgICB0aGlzLm1faW1wdWxzZS5NdWx0aXBseShtYXhJbXB1bHNlIC8gdGhpcy5tX2ltcHVsc2UuTGVuZ3RoKCkpO1xuICAgIH1cbiAgICBpbXB1bHNlWCA9IHRoaXMubV9pbXB1bHNlLnggLSBvbGRJbXB1bHNlWDtcbiAgICBpbXB1bHNlWSA9IHRoaXMubV9pbXB1bHNlLnkgLSBvbGRJbXB1bHNlWTtcbiAgICBiLm1fbGluZWFyVmVsb2NpdHkueCArPSBiLm1faW52TWFzcyAqIGltcHVsc2VYO1xuICAgIGIubV9saW5lYXJWZWxvY2l0eS55ICs9IGIubV9pbnZNYXNzICogaW1wdWxzZVk7XG4gICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiLm1faW52SSAqIChyWCAqIGltcHVsc2VZIC0gclkgKiBpbXB1bHNlWCk7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICBpZiAoYmF1bWdhcnRlID09PSB2b2lkIDApIHtcbiAgICAgIGJhdW1nYXJ0ZSA9IDA7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHJldHVybiBiMk1vdXNlSm9pbnQ7XG5cbn0pKGIySm9pbnQpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk1vdXNlSm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWY7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMk1vdXNlSm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMk1vdXNlSm9pbnREZWYsIF9zdXBlcik7XG5cbiAgYjJNb3VzZUpvaW50RGVmLnByb3RvdHlwZS50eXBlID0gYjJKb2ludC5lX21vdXNlSm9pbnQ7XG5cbiAgYjJNb3VzZUpvaW50RGVmLnByb3RvdHlwZS50YXJnZXQgPSBudWxsO1xuXG4gIGIyTW91c2VKb2ludERlZi5wcm90b3R5cGUubWF4Rm9yY2UgPSAwLjA7XG5cbiAgYjJNb3VzZUpvaW50RGVmLnByb3RvdHlwZS5mcmVxdWVuY3lIeiA9IDUuMDtcblxuICBiMk1vdXNlSm9pbnREZWYucHJvdG90eXBlLmRhbXBpbmdSYXRpbyA9IDAuNztcblxuICBmdW5jdGlvbiBiMk1vdXNlSm9pbnREZWYoKSB7XG4gICAgdGhpcy50YXJnZXQgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyTW91c2VKb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyTW91c2VKb2ludERlZi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKb2ludCwgYjJNYXQyMiwgYjJNYXRoLCBiMlZlYzIsIGIyVmVjMyxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMk1hdDIyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMjtcblxuYjJWZWMzID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJQcmlzbWF0aWNKb2ludCwgX3N1cGVyKTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX2xvY2FsWEF4aXMxID0gbnVsbDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX2xvY2FsWUF4aXMxID0gbnVsbDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX2F4aXMgPSBudWxsO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fcGVycCA9IG51bGw7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9LID0gbnVsbDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX3JlZkFuZ2xlID0gbnVsbDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX2ltcHVsc2UgPSBudWxsO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fbW90b3JNYXNzID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fbW90b3JJbXB1bHNlID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fbG93ZXJUcmFuc2xhdGlvbiA9IDAuMDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX3VwcGVyVHJhbnNsYXRpb24gPSAwLjA7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9tYXhNb3RvckZvcmNlID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fbW90b3JTcGVlZCA9IDAuMDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX2VuYWJsZUxpbWl0ID0gZmFsc2U7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9lbmFibGVNb3RvciA9IGZhbHNlO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuXG4gIGZ1bmN0aW9uIGIyUHJpc21hdGljSm9pbnQoZGVmKSB7XG4gICAgYjJQcmlzbWF0aWNKb2ludC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsWEF4aXMxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbFlBeGlzMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fYXhpcyA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fcGVycCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fSyA9IG5ldyBiMk1hdDMzKCk7XG4gICAgdGhpcy5tX2ltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMS5TZXRWKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIuU2V0VihkZWYubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLm1fbG9jYWxYQXhpczEuU2V0VihkZWYubG9jYWxBeGlzQSk7XG4gICAgdGhpcy5tX2xvY2FsWUF4aXMxLnggPSAtdGhpcy5tX2xvY2FsWEF4aXMxLnk7XG4gICAgdGhpcy5tX2xvY2FsWUF4aXMxLnkgPSB0aGlzLm1fbG9jYWxYQXhpczEueDtcbiAgICB0aGlzLm1fcmVmQW5nbGUgPSBkZWYucmVmZXJlbmNlQW5nbGU7XG4gICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgIHRoaXMubV9tb3Rvck1hc3MgPSAwLjA7XG4gICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDtcbiAgICB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiA9IGRlZi5sb3dlclRyYW5zbGF0aW9uO1xuICAgIHRoaXMubV91cHBlclRyYW5zbGF0aW9uID0gZGVmLnVwcGVyVHJhbnNsYXRpb247XG4gICAgdGhpcy5tX21heE1vdG9yRm9yY2UgPSBkZWYubWF4TW90b3JGb3JjZTtcbiAgICB0aGlzLm1fbW90b3JTcGVlZCA9IGRlZi5tb3RvclNwZWVkO1xuICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGRlZi5lbmFibGVMaW1pdDtcbiAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSBkZWYuZW5hYmxlTW90b3I7XG4gICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcbiAgICB0aGlzLm1fYXhpcy5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX3BlcnAuU2V0WmVybygpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IyKTtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiAodGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnggKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopICogdGhpcy5tX2F4aXMueCksIGludl9kdCAqICh0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3BlcnAueSArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueikgKiB0aGlzLm1fYXhpcy55KSk7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55O1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldEpvaW50VHJhbnNsYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXhpcywgYkEsIGJCLCBkWCwgZFksIHAxLCBwMiwgdE1hdCwgdHJhbnNsYXRpb247XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICBwMSA9IGJBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7XG4gICAgcDIgPSBiQi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjIpO1xuICAgIGRYID0gcDIueCAtIHAxLng7XG4gICAgZFkgPSBwMi55IC0gcDEueTtcbiAgICBheGlzID0gYkEuR2V0V29ybGRWZWN0b3IodGhpcy5tX2xvY2FsWEF4aXMxKTtcbiAgICB0cmFuc2xhdGlvbiA9IGF4aXMueCAqIGRYICsgYXhpcy55ICogZFk7XG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldEpvaW50U3BlZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXhpcywgYkEsIGJCLCBkWCwgZFksIHAxWCwgcDFZLCBwMlgsIHAyWSwgcjFYLCByMVksIHIyWCwgcjJZLCBzcGVlZCwgdE1hdCwgdFgsIHYxLCB2MiwgdzEsIHcyO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBwMVggPSBiQS5tX3N3ZWVwLmMueCArIHIxWDtcbiAgICBwMVkgPSBiQS5tX3N3ZWVwLmMueSArIHIxWTtcbiAgICBwMlggPSBiQi5tX3N3ZWVwLmMueCArIHIyWDtcbiAgICBwMlkgPSBiQi5tX3N3ZWVwLmMueSArIHIyWTtcbiAgICBkWCA9IHAyWCAtIHAxWDtcbiAgICBkWSA9IHAyWSAtIHAxWTtcbiAgICBheGlzID0gYkEuR2V0V29ybGRWZWN0b3IodGhpcy5tX2xvY2FsWEF4aXMxKTtcbiAgICB2MSA9IGJBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcxID0gYkEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgdzIgPSBiQi5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICBzcGVlZCA9IChkWCAqICgtdzEgKiBheGlzLnkpICsgZFkgKiAodzEgKiBheGlzLngpKSArIChheGlzLnggKiAoKCh2Mi54ICsgKC13MiAqIHIyWSkpIC0gdjEueCkgLSAoLXcxICogcjFZKSkgKyBheGlzLnkgKiAoKCh2Mi55ICsgKHcyICogcjJYKSkgLSB2MS55KSAtICh3MSAqIHIxWCkpKTtcbiAgICByZXR1cm4gc3BlZWQ7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuSXNMaW1pdEVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZUxpbWl0O1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkVuYWJsZUxpbWl0ID0gZnVuY3Rpb24oZmxhZykge1xuICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2VuYWJsZUxpbWl0ID0gZmxhZztcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRMb3dlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldFVwcGVyTGltaXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb247XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuU2V0TGltaXRzID0gZnVuY3Rpb24obG93ZXIsIHVwcGVyKSB7XG4gICAgaWYgKGxvd2VyID09PSB2b2lkIDApIHtcbiAgICAgIGxvd2VyID0gMDtcbiAgICB9XG4gICAgaWYgKHVwcGVyID09PSB2b2lkIDApIHtcbiAgICAgIHVwcGVyID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiA9IGxvd2VyO1xuICAgIHRoaXMubV91cHBlclRyYW5zbGF0aW9uID0gdXBwZXI7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuSXNNb3RvckVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZU1vdG9yO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkVuYWJsZU1vdG9yID0gZnVuY3Rpb24oZmxhZykge1xuICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZmxhZztcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5TZXRNb3RvclNwZWVkID0gZnVuY3Rpb24oc3BlZWQpIHtcbiAgICBpZiAoc3BlZWQgPT09IHZvaWQgMCkge1xuICAgICAgc3BlZWQgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9tb3RvclNwZWVkID0gc3BlZWQ7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbW90b3JTcGVlZDtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5TZXRNYXhNb3RvckZvcmNlID0gZnVuY3Rpb24oZm9yY2UpIHtcbiAgICBpZiAoZm9yY2UgPT09IHZvaWQgMCkge1xuICAgICAgZm9yY2UgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9tYXhNb3RvckZvcmNlID0gZm9yY2U7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0TW90b3JGb3JjZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBMMSwgTDIsIFBYLCBQWSwgYkEsIGJCLCBkWCwgZFksIGkxLCBpMiwgam9pbnRUcmFuc2l0aW9uLCBtMSwgbTIsIHIxWCwgcjFZLCByMlgsIHIyWSwgdE1hdCwgdFgsIHhmMSwgeGYyO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIHRoaXMubV9sb2NhbENlbnRlckEuU2V0VihiQS5HZXRMb2NhbENlbnRlcigpKTtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJCLlNldFYoYkIuR2V0TG9jYWxDZW50ZXIoKSk7XG4gICAgeGYxID0gYkEuR2V0VHJhbnNmb3JtKCk7XG4gICAgeGYyID0gYkIuR2V0VHJhbnNmb3JtKCk7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJBLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQi54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIHRoaXMubV9sb2NhbENlbnRlckIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBkWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYIC0gYkEubV9zd2VlcC5jLnggLSByMVg7XG4gICAgZFkgPSBiQi5tX3N3ZWVwLmMueSArIHIyWSAtIGJBLm1fc3dlZXAuYy55IC0gcjFZO1xuICAgIHRoaXMubV9pbnZNYXNzQSA9IGJBLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52TWFzc0IgPSBiQi5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludklBID0gYkEubV9pbnZJO1xuICAgIHRoaXMubV9pbnZJQiA9IGJCLm1faW52STtcbiAgICB0aGlzLm1fYXhpcy5TZXRWKGIyTWF0aC5NdWxNVih4ZjEuUiwgdGhpcy5tX2xvY2FsWEF4aXMxKSk7XG4gICAgdGhpcy5tX2ExID0gKGRYICsgcjFYKSAqIHRoaXMubV9heGlzLnkgLSAoZFkgKyByMVkpICogdGhpcy5tX2F4aXMueDtcbiAgICB0aGlzLm1fYTIgPSByMlggKiB0aGlzLm1fYXhpcy55IC0gcjJZICogdGhpcy5tX2F4aXMueDtcbiAgICB0aGlzLm1fbW90b3JNYXNzID0gdGhpcy5tX2ludk1hc3NBICsgdGhpcy5tX2ludk1hc3NCICsgdGhpcy5tX2ludklBICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgdGhpcy5tX2ludklCICogdGhpcy5tX2EyICogdGhpcy5tX2EyO1xuICAgIGlmICh0aGlzLm1fbW90b3JNYXNzID4gTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgdGhpcy5tX21vdG9yTWFzcyA9IDEuMCAvIHRoaXMubV9tb3Rvck1hc3M7XG4gICAgfVxuICAgIHRoaXMubV9wZXJwLlNldFYoYjJNYXRoLk11bE1WKHhmMS5SLCB0aGlzLm1fbG9jYWxZQXhpczEpKTtcbiAgICB0aGlzLm1fczEgPSAoZFggKyByMVgpICogdGhpcy5tX3BlcnAueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fcGVycC54O1xuICAgIHRoaXMubV9zMiA9IHIyWCAqIHRoaXMubV9wZXJwLnkgLSByMlkgKiB0aGlzLm1fcGVycC54O1xuICAgIG0xID0gdGhpcy5tX2ludk1hc3NBO1xuICAgIG0yID0gdGhpcy5tX2ludk1hc3NCO1xuICAgIGkxID0gdGhpcy5tX2ludklBO1xuICAgIGkyID0gdGhpcy5tX2ludklCO1xuICAgIHRoaXMubV9LLmNvbDEueCA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9zMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX3MyO1xuICAgIHRoaXMubV9LLmNvbDEueSA9IGkxICogdGhpcy5tX3MxICsgaTIgKiB0aGlzLm1fczI7XG4gICAgdGhpcy5tX0suY29sMS56ID0gaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9hMjtcbiAgICB0aGlzLm1fSy5jb2wyLnggPSB0aGlzLm1fSy5jb2wxLnk7XG4gICAgdGhpcy5tX0suY29sMi55ID0gaTEgKyBpMjtcbiAgICB0aGlzLm1fSy5jb2wyLnogPSBpMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX2EyO1xuICAgIHRoaXMubV9LLmNvbDMueCA9IHRoaXMubV9LLmNvbDEuejtcbiAgICB0aGlzLm1fSy5jb2wzLnkgPSB0aGlzLm1fSy5jb2wyLno7XG4gICAgdGhpcy5tX0suY29sMy56ID0gbTEgKyBtMiArIGkxICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fYTIgKiB0aGlzLm1fYTI7XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgam9pbnRUcmFuc2l0aW9uID0gdGhpcy5tX2F4aXMueCAqIGRYICsgdGhpcy5tX2F4aXMueSAqIGRZO1xuICAgICAgaWYgKGIyTWF0aC5BYnModGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikgPCAyLjAgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfZXF1YWxMaW1pdHM7XG4gICAgICB9IGVsc2UgaWYgKGpvaW50VHJhbnNpdGlvbiA8PSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikge1xuICAgICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9hdExvd2VyTGltaXQpIHtcbiAgICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9hdExvd2VyTGltaXQ7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChqb2ludFRyYW5zaXRpb24gPj0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfYXRVcHBlckxpbWl0O1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwLjA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fZW5hYmxlTW90b3IgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gMC4wO1xuICAgIH1cbiAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX2ltcHVsc2UueSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIFBYID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnggKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopICogdGhpcy5tX2F4aXMueDtcbiAgICAgIFBZID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnkgKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopICogdGhpcy5tX2F4aXMueTtcbiAgICAgIEwxID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9zMSArIHRoaXMubV9pbXB1bHNlLnkgKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopICogdGhpcy5tX2ExO1xuICAgICAgTDIgPSB0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3MyICsgdGhpcy5tX2ltcHVsc2UueSArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueikgKiB0aGlzLm1fYTI7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgLT0gdGhpcy5tX2ludk1hc3NBICogUFk7XG4gICAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTtcbiAgICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IHRoaXMubV9pbnZJQiAqIEwyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gMC4wO1xuICAgIH1cbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIENkb3QsIENkb3QxWCwgQ2RvdDFZLCBDZG90MiwgTDEsIEwyLCBQWCwgUFksIGJBLCBiQiwgYlgsIGJZLCBkZiwgZGYyLCBmMSwgZjJyLCBpbXB1bHNlLCBtYXhJbXB1bHNlLCBvbGRJbXB1bHNlLCB2MSwgdjIsIHcxLCB3MjtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB2MSA9IGJBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgdzEgPSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICB2MiA9IGJCLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgdzIgPSBiQi5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICBQWCA9IDA7XG4gICAgUFkgPSAwO1xuICAgIEwxID0gMDtcbiAgICBMMiA9IDA7XG4gICAgaWYgKHRoaXMubV9lbmFibGVNb3RvciAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2VxdWFsTGltaXRzKSB7XG4gICAgICBDZG90ID0gdGhpcy5tX2F4aXMueCAqICh2Mi54IC0gdjEueCkgKyB0aGlzLm1fYXhpcy55ICogKHYyLnkgLSB2MS55KSArIHRoaXMubV9hMiAqIHcyIC0gdGhpcy5tX2ExICogdzE7XG4gICAgICBpbXB1bHNlID0gdGhpcy5tX21vdG9yTWFzcyAqICh0aGlzLm1fbW90b3JTcGVlZCAtIENkb3QpO1xuICAgICAgb2xkSW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2U7XG4gICAgICBtYXhJbXB1bHNlID0gc3RlcC5kdCAqIHRoaXMubV9tYXhNb3RvckZvcmNlO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IGIyTWF0aC5DbGFtcCh0aGlzLm1fbW90b3JJbXB1bHNlICsgaW1wdWxzZSwgLW1heEltcHVsc2UsIG1heEltcHVsc2UpO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuICAgICAgUFggPSBpbXB1bHNlICogdGhpcy5tX2F4aXMueDtcbiAgICAgIFBZID0gaW1wdWxzZSAqIHRoaXMubV9heGlzLnk7XG4gICAgICBMMSA9IGltcHVsc2UgKiB0aGlzLm1fYTE7XG4gICAgICBMMiA9IGltcHVsc2UgKiB0aGlzLm1fYTI7XG4gICAgICB2MS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYO1xuICAgICAgdjEueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTtcbiAgICAgIHcxIC09IHRoaXMubV9pbnZJQSAqIEwxO1xuICAgICAgdjIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDtcbiAgICAgIHYyLnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7XG4gICAgICB3MiArPSB0aGlzLm1faW52SUIgKiBMMjtcbiAgICB9XG4gICAgQ2RvdDFYID0gdGhpcy5tX3BlcnAueCAqICh2Mi54IC0gdjEueCkgKyB0aGlzLm1fcGVycC55ICogKHYyLnkgLSB2MS55KSArIHRoaXMubV9zMiAqIHcyIC0gdGhpcy5tX3MxICogdzE7XG4gICAgQ2RvdDFZID0gdzIgLSB3MTtcbiAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0ICYmIHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdCkge1xuICAgICAgQ2RvdDIgPSB0aGlzLm1fYXhpcy54ICogKHYyLnggLSB2MS54KSArIHRoaXMubV9heGlzLnkgKiAodjIueSAtIHYxLnkpICsgdGhpcy5tX2EyICogdzIgLSB0aGlzLm1fYTEgKiB3MTtcbiAgICAgIGYxID0gdGhpcy5tX2ltcHVsc2UuQ29weSgpO1xuICAgICAgZGYgPSB0aGlzLm1fSy5Tb2x2ZTMzKG5ldyBiMlZlYzMoKSwgLUNkb3QxWCwgLUNkb3QxWSwgLUNkb3QyKTtcbiAgICAgIHRoaXMubV9pbXB1bHNlLkFkZChkZik7XG4gICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT09IGIySm9pbnQuZV9hdExvd2VyTGltaXQpIHtcbiAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IGIyTWF0aC5NYXgodGhpcy5tX2ltcHVsc2UueiwgMC4wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PT0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkge1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSBiMk1hdGguTWluKHRoaXMubV9pbXB1bHNlLnosIDAuMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJYID0gKC1DZG90MVgpIC0gKHRoaXMubV9pbXB1bHNlLnogLSBmMS56KSAqIHRoaXMubV9LLmNvbDMueDtcbiAgICAgIGJZID0gKC1DZG90MVkpIC0gKHRoaXMubV9pbXB1bHNlLnogLSBmMS56KSAqIHRoaXMubV9LLmNvbDMueTtcbiAgICAgIGYyciA9IHRoaXMubV9LLlNvbHZlMjIobmV3IGIyVmVjMigpLCBiWCwgYlkpO1xuICAgICAgZjJyLnggKz0gZjEueDtcbiAgICAgIGYyci55ICs9IGYxLnk7XG4gICAgICB0aGlzLm1faW1wdWxzZS54ID0gZjJyLng7XG4gICAgICB0aGlzLm1faW1wdWxzZS55ID0gZjJyLnk7XG4gICAgICBkZi54ID0gdGhpcy5tX2ltcHVsc2UueCAtIGYxLng7XG4gICAgICBkZi55ID0gdGhpcy5tX2ltcHVsc2UueSAtIGYxLnk7XG4gICAgICBkZi56ID0gdGhpcy5tX2ltcHVsc2UueiAtIGYxLno7XG4gICAgICBQWCA9IGRmLnggKiB0aGlzLm1fcGVycC54ICsgZGYueiAqIHRoaXMubV9heGlzLng7XG4gICAgICBQWSA9IGRmLnggKiB0aGlzLm1fcGVycC55ICsgZGYueiAqIHRoaXMubV9heGlzLnk7XG4gICAgICBMMSA9IGRmLnggKiB0aGlzLm1fczEgKyBkZi55ICsgZGYueiAqIHRoaXMubV9hMTtcbiAgICAgIEwyID0gZGYueCAqIHRoaXMubV9zMiArIGRmLnkgKyBkZi56ICogdGhpcy5tX2EyO1xuICAgICAgdjEueCAtPSB0aGlzLm1faW52TWFzc0EgKiBQWDtcbiAgICAgIHYxLnkgLT0gdGhpcy5tX2ludk1hc3NBICogUFk7XG4gICAgICB3MSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICAgIHYyLnggKz0gdGhpcy5tX2ludk1hc3NCICogUFg7XG4gICAgICB2Mi55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZO1xuICAgICAgdzIgKz0gdGhpcy5tX2ludklCICogTDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRmMiA9IHRoaXMubV9LLlNvbHZlMjIobmV3IGIyVmVjMigpLCAtQ2RvdDFYLCAtQ2RvdDFZKTtcbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gZGYyLng7XG4gICAgICB0aGlzLm1faW1wdWxzZS55ICs9IGRmMi55O1xuICAgICAgUFggPSBkZjIueCAqIHRoaXMubV9wZXJwLng7XG4gICAgICBQWSA9IGRmMi54ICogdGhpcy5tX3BlcnAueTtcbiAgICAgIEwxID0gZGYyLnggKiB0aGlzLm1fczEgKyBkZjIueTtcbiAgICAgIEwyID0gZGYyLnggKiB0aGlzLm1fczIgKyBkZjIueTtcbiAgICAgIHYxLnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgICB2MS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZO1xuICAgICAgdzEgLT0gdGhpcy5tX2ludklBICogTDE7XG4gICAgICB2Mi54ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBYO1xuICAgICAgdjIueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTtcbiAgICAgIHcyICs9IHRoaXMubV9pbnZJQiAqIEwyO1xuICAgIH1cbiAgICBiQS5tX2xpbmVhclZlbG9jaXR5LlNldFYodjEpO1xuICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ID0gdzE7XG4gICAgYkIubV9saW5lYXJWZWxvY2l0eS5TZXRWKHYyKTtcbiAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSA9IHcyO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0ZSkge1xuICAgIHZhciBDMVgsIEMxWSwgQzIsIEwxLCBMMiwgUFgsIFBZLCBSMSwgUjIsIGExLCBhMiwgYWN0aXZlLCBhbmd1bGFyRXJyb3IsIGJBLCBiQiwgYzEsIGMyLCBkWCwgZFksIGkxLCBpMiwgaW1wdWxzZSwgaW1wdWxzZTEsIGsxMSwgazEyLCBrMjIsIGxpbWl0QywgbGluZWFyRXJyb3IsIG0xLCBtMiwgb2xkTGltaXRJbXB1bHNlLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYLCB0cmFuc2xhdGlvbjtcbiAgICBpZiAoYmF1bWdhcnRlID09PSB2b2lkIDApIHtcbiAgICAgIGJhdW1nYXJ0ZSA9IDA7XG4gICAgfVxuICAgIGxpbWl0QyA9IDA7XG4gICAgb2xkTGltaXRJbXB1bHNlID0gMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICBjMSA9IGJBLm1fc3dlZXAuYztcbiAgICBhMSA9IGJBLm1fc3dlZXAuYTtcbiAgICBjMiA9IGJCLm1fc3dlZXAuYztcbiAgICBhMiA9IGJCLm1fc3dlZXAuYTtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcbiAgICBtMSA9IDA7XG4gICAgbTIgPSAwO1xuICAgIGkxID0gMDtcbiAgICBpMiA9IDA7XG4gICAgbGluZWFyRXJyb3IgPSAwLjA7XG4gICAgYW5ndWxhckVycm9yID0gMC4wO1xuICAgIGFjdGl2ZSA9IGZhbHNlO1xuICAgIEMyID0gMC4wO1xuICAgIFIxID0gYjJNYXQyMi5Gcm9tQW5nbGUoYTEpO1xuICAgIFIyID0gYjJNYXQyMi5Gcm9tQW5nbGUoYTIpO1xuICAgIHRNYXQgPSBSMTtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJBLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBSMjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJCLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gdGhpcy5tX2xvY2FsQ2VudGVyQi55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIGRYID0gYzIueCArIHIyWCAtIGMxLnggLSByMVg7XG4gICAgZFkgPSBjMi55ICsgcjJZIC0gYzEueSAtIHIxWTtcbiAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0KSB7XG4gICAgICB0aGlzLm1fYXhpcyA9IGIyTWF0aC5NdWxNVihSMSwgdGhpcy5tX2xvY2FsWEF4aXMxKTtcbiAgICAgIHRoaXMubV9hMSA9IChkWCArIHIxWCkgKiB0aGlzLm1fYXhpcy55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9heGlzLng7XG4gICAgICB0aGlzLm1fYTIgPSByMlggKiB0aGlzLm1fYXhpcy55IC0gcjJZICogdGhpcy5tX2F4aXMueDtcbiAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5tX2F4aXMueCAqIGRYICsgdGhpcy5tX2F4aXMueSAqIGRZO1xuICAgICAgaWYgKGIyTWF0aC5BYnModGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikgPCAyLjAgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgICAgQzIgPSBiMk1hdGguQ2xhbXAodHJhbnNsYXRpb24sIC1iMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24sIGIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbik7XG4gICAgICAgIGxpbmVhckVycm9yID0gYjJNYXRoLkFicyh0cmFuc2xhdGlvbik7XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uIDw9IHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIEMyID0gYjJNYXRoLkNsYW1wKHRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gKyBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIC1iMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24sIDAuMCk7XG4gICAgICAgIGxpbmVhckVycm9yID0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gLSB0cmFuc2xhdGlvbjtcbiAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRpb24gPj0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgQzIgPSBiMk1hdGguQ2xhbXAodHJhbnNsYXRpb24gLSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiArIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgMC4wLCBiMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24pO1xuICAgICAgICBsaW5lYXJFcnJvciA9IHRyYW5zbGF0aW9uIC0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb247XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubV9wZXJwID0gYjJNYXRoLk11bE1WKFIxLCB0aGlzLm1fbG9jYWxZQXhpczEpO1xuICAgIHRoaXMubV9zMSA9IChkWCArIHIxWCkgKiB0aGlzLm1fcGVycC55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9wZXJwLng7XG4gICAgdGhpcy5tX3MyID0gcjJYICogdGhpcy5tX3BlcnAueSAtIHIyWSAqIHRoaXMubV9wZXJwLng7XG4gICAgaW1wdWxzZSA9IG5ldyBiMlZlYzMoKTtcbiAgICBDMVggPSB0aGlzLm1fcGVycC54ICogZFggKyB0aGlzLm1fcGVycC55ICogZFk7XG4gICAgQzFZID0gYTIgLSBhMSAtIHRoaXMubV9yZWZBbmdsZTtcbiAgICBsaW5lYXJFcnJvciA9IGIyTWF0aC5NYXgobGluZWFyRXJyb3IsIGIyTWF0aC5BYnMoQzFYKSk7XG4gICAgYW5ndWxhckVycm9yID0gYjJNYXRoLkFicyhDMVkpO1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIG0xID0gdGhpcy5tX2ludk1hc3NBO1xuICAgICAgbTIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICBpMSA9IHRoaXMubV9pbnZJQTtcbiAgICAgIGkyID0gdGhpcy5tX2ludklCO1xuICAgICAgdGhpcy5tX0suY29sMS54ID0gbTEgKyBtMiArIGkxICogdGhpcy5tX3MxICogdGhpcy5tX3MxICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7XG4gICAgICB0aGlzLm1fSy5jb2wxLnkgPSBpMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyO1xuICAgICAgdGhpcy5tX0suY29sMS56ID0gaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9hMjtcbiAgICAgIHRoaXMubV9LLmNvbDIueCA9IHRoaXMubV9LLmNvbDEueTtcbiAgICAgIHRoaXMubV9LLmNvbDIueSA9IGkxICsgaTI7XG4gICAgICB0aGlzLm1fSy5jb2wyLnogPSBpMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX2EyO1xuICAgICAgdGhpcy5tX0suY29sMy54ID0gdGhpcy5tX0suY29sMS56O1xuICAgICAgdGhpcy5tX0suY29sMy55ID0gdGhpcy5tX0suY29sMi56O1xuICAgICAgdGhpcy5tX0suY29sMy56ID0gbTEgKyBtMiArIGkxICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fYTIgKiB0aGlzLm1fYTI7XG4gICAgICB0aGlzLm1fSy5Tb2x2ZTMzKGltcHVsc2UsIC1DMVgsIC1DMVksIC1DMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0xID0gdGhpcy5tX2ludk1hc3NBO1xuICAgICAgbTIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICBpMSA9IHRoaXMubV9pbnZJQTtcbiAgICAgIGkyID0gdGhpcy5tX2ludklCO1xuICAgICAgazExID0gbTEgKyBtMiArIGkxICogdGhpcy5tX3MxICogdGhpcy5tX3MxICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7XG4gICAgICBrMTIgPSBpMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyO1xuICAgICAgazIyID0gaTEgKyBpMjtcbiAgICAgIHRoaXMubV9LLmNvbDEuU2V0KGsxMSwgazEyLCAwLjApO1xuICAgICAgdGhpcy5tX0suY29sMi5TZXQoazEyLCBrMjIsIDAuMCk7XG4gICAgICBpbXB1bHNlMSA9IHRoaXMubV9LLlNvbHZlMjIobmV3IGIyVmVjMigpLCAtQzFYLCAtQzFZKTtcbiAgICAgIGltcHVsc2UueCA9IGltcHVsc2UxLng7XG4gICAgICBpbXB1bHNlLnkgPSBpbXB1bHNlMS55O1xuICAgICAgaW1wdWxzZS56ID0gMC4wO1xuICAgIH1cbiAgICBQWCA9IGltcHVsc2UueCAqIHRoaXMubV9wZXJwLnggKyBpbXB1bHNlLnogKiB0aGlzLm1fYXhpcy54O1xuICAgIFBZID0gaW1wdWxzZS54ICogdGhpcy5tX3BlcnAueSArIGltcHVsc2UueiAqIHRoaXMubV9heGlzLnk7XG4gICAgTDEgPSBpbXB1bHNlLnggKiB0aGlzLm1fczEgKyBpbXB1bHNlLnkgKyBpbXB1bHNlLnogKiB0aGlzLm1fYTE7XG4gICAgTDIgPSBpbXB1bHNlLnggKiB0aGlzLm1fczIgKyBpbXB1bHNlLnkgKyBpbXB1bHNlLnogKiB0aGlzLm1fYTI7XG4gICAgYzEueCAtPSB0aGlzLm1faW52TWFzc0EgKiBQWDtcbiAgICBjMS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZO1xuICAgIGExIC09IHRoaXMubV9pbnZJQSAqIEwxO1xuICAgIGMyLnggKz0gdGhpcy5tX2ludk1hc3NCICogUFg7XG4gICAgYzIueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTtcbiAgICBhMiArPSB0aGlzLm1faW52SUIgKiBMMjtcbiAgICBiQS5tX3N3ZWVwLmEgPSBhMTtcbiAgICBiQi5tX3N3ZWVwLmEgPSBhMjtcbiAgICBiQS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIGJCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgcmV0dXJuIGxpbmVhckVycm9yIDw9IGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCAmJiBhbmd1bGFyRXJyb3IgPD0gYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcDtcbiAgfTtcblxuICByZXR1cm4gYjJQcmlzbWF0aWNKb2ludDtcblxufSkoYjJKb2ludCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUHJpc21hdGljSm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludERlZiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyUHJpc21hdGljSm9pbnREZWYsIF9zdXBlcik7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IGIySm9pbnQuZV9wcmlzbWF0aWNKb2ludDtcblxuICBiMlByaXNtYXRpY0pvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckEgPSBudWxsO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQiA9IG51bGw7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUubG9jYWxBeGlzQSA9IG51bGw7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUucmVmZXJlbmNlQW5nbGUgPSAwLjA7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUuZW5hYmxlTGltaXQgPSBmYWxzZTtcblxuICBiMlByaXNtYXRpY0pvaW50RGVmLnByb3RvdHlwZS5sb3dlclRyYW5zbGF0aW9uID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLnVwcGVyVHJhbnNsYXRpb24gPSAwLjA7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUuZW5hYmxlTW90b3IgPSBmYWxzZTtcblxuICBiMlByaXNtYXRpY0pvaW50RGVmLnByb3RvdHlwZS5tYXhNb3RvckZvcmNlID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLm1vdG9yU3BlZWQgPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJQcmlzbWF0aWNKb2ludERlZigpIHtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsQXhpc0EgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy50eXBlID0gYjJKb2ludC5lX3ByaXNtYXRpY0pvaW50O1xuICAgIHRoaXMubG9jYWxBeGlzQS5TZXQoMS4wLCAwLjApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihiQSwgYkIsIGFuY2hvciwgYXhpcykge1xuICAgIHRoaXMuYm9keUEgPSBiQTtcbiAgICB0aGlzLmJvZHlCID0gYkI7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSB0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNob3IpO1xuICAgIHRoaXMubG9jYWxBeGlzQSA9IHRoaXMuYm9keUEuR2V0TG9jYWxWZWN0b3IoYXhpcyk7XG4gICAgdGhpcy5yZWZlcmVuY2VBbmdsZSA9IHRoaXMuYm9keUIuR2V0QW5nbGUoKSAtIHRoaXMuYm9keUEuR2V0QW5nbGUoKTtcbiAgfTtcblxuICByZXR1cm4gYjJQcmlzbWF0aWNKb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUHJpc21hdGljSm9pbnREZWYuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIyTWF0MjIsIGIyTWF0aCwgYjJWZWMyLCBiMlZlYzMsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbmIyVmVjMyA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyUHVsbGV5Sm9pbnQsIF9zdXBlcik7XG5cbiAgYjJQdWxsZXlKb2ludC5iMl9taW5QdWxsZXlMZW5ndGggPSAyLjA7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9sb2NhbFhBeGlzMSA9IG51bGw7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9sb2NhbFlBeGlzMSA9IG51bGw7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV91MSA9IG51bGw7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV91MiA9IG51bGw7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9ncm91bmQgPSBudWxsO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fcmF0aW8gPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9jb25zdGFudCA9IDAuMDtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5tX21heExlbmd0aDEgPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9tYXhMZW5ndGgyID0gMC4wO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1faW1wdWxzZSA9IDAuMDtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5tX2xpbWl0SW1wdWxzZTEgPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9saW1pdEltcHVsc2UyID0gMC4wO1xuXG4gIGZ1bmN0aW9uIGIyUHVsbGV5Sm9pbnQoZGVmKSB7XG4gICAgYjJQdWxsZXlKb2ludC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBkZWYpO1xuICAgIHRoaXMubV9ncm91bmRBbmNob3IxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9ncm91bmRBbmNob3IyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdTEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3UyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9ncm91bmQgPSB0aGlzLm1fYm9keUEubV93b3JsZC5tX2dyb3VuZEJvZHk7XG4gICAgdGhpcy5tX2dyb3VuZEFuY2hvcjEueCA9IGRlZi5ncm91bmRBbmNob3JBLnggLSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueDtcbiAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMS55ID0gZGVmLmdyb3VuZEFuY2hvckEueSAtIHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi55O1xuICAgIHRoaXMubV9ncm91bmRBbmNob3IyLnggPSBkZWYuZ3JvdW5kQW5jaG9yQi54IC0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLng7XG4gICAgdGhpcy5tX2dyb3VuZEFuY2hvcjIueSA9IGRlZi5ncm91bmRBbmNob3JCLnkgLSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IxLlNldFYoZGVmLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMi5TZXRWKGRlZi5sb2NhbEFuY2hvckIpO1xuICAgIHRoaXMubV9yYXRpbyA9IGRlZi5yYXRpbztcbiAgICB0aGlzLm1fY29uc3RhbnQgPSBkZWYubGVuZ3RoQSArIHRoaXMubV9yYXRpbyAqIGRlZi5sZW5ndGhCO1xuICAgIHRoaXMubV9tYXhMZW5ndGgxID0gYjJNYXRoLk1pbihkZWYubWF4TGVuZ3RoQSwgdGhpcy5tX2NvbnN0YW50IC0gdGhpcy5tX3JhdGlvICogYjJQdWxsZXlKb2ludC5iMl9taW5QdWxsZXlMZW5ndGgpO1xuICAgIHRoaXMubV9tYXhMZW5ndGgyID0gYjJNYXRoLk1pbihkZWYubWF4TGVuZ3RoQiwgKHRoaXMubV9jb25zdGFudCAtIGIyUHVsbGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3RoKSAvIHRoaXMubV9yYXRpbyk7XG4gICAgdGhpcy5tX2ltcHVsc2UgPSAwLjA7XG4gICAgdGhpcy5tX2xpbWl0SW1wdWxzZTEgPSAwLjA7XG4gICAgdGhpcy5tX2xpbWl0SW1wdWxzZTIgPSAwLjA7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTtcbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjIpO1xuICB9O1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgYjJWZWMyKGludl9kdCAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3UyLngsIGludl9kdCAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3UyLnkpO1xuICB9O1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gMC4wO1xuICB9O1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLkdldEdyb3VuZEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYTtcbiAgICBhID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLkNvcHkoKTtcbiAgICBhLkFkZCh0aGlzLm1fZ3JvdW5kQW5jaG9yMSk7XG4gICAgcmV0dXJuIGE7XG4gIH07XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0R3JvdW5kQW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhO1xuICAgIGEgPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24uQ29weSgpO1xuICAgIGEuQWRkKHRoaXMubV9ncm91bmRBbmNob3IyKTtcbiAgICByZXR1cm4gYTtcbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRMZW5ndGgxID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRYLCBkWSwgcCwgc1gsIHNZO1xuICAgIHAgPSB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTtcbiAgICBzWCA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi54ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjEueDtcbiAgICBzWSA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi55ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjEueTtcbiAgICBkWCA9IHAueCAtIHNYO1xuICAgIGRZID0gcC55IC0gc1k7XG4gICAgcmV0dXJuIE1hdGguc3FydChkWCAqIGRYICsgZFkgKiBkWSk7XG4gIH07XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0TGVuZ3RoMiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkWCwgZFksIHAsIHNYLCBzWTtcbiAgICBwID0gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7XG4gICAgc1ggPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueCArIHRoaXMubV9ncm91bmRBbmNob3IyLng7XG4gICAgc1kgPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueSArIHRoaXMubV9ncm91bmRBbmNob3IyLnk7XG4gICAgZFggPSBwLnggLSBzWDtcbiAgICBkWSA9IHAueSAtIHNZO1xuICAgIHJldHVybiBNYXRoLnNxcnQoZFggKiBkWCArIGRZICogZFkpO1xuICB9O1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLkdldFJhdGlvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9yYXRpbztcbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgQywgUDFYLCBQMVksIFAyWCwgUDJZLCBiQSwgYkIsIGNyMXUxLCBjcjJ1MiwgbGVuZ3RoMSwgbGVuZ3RoMiwgcDFYLCBwMVksIHAyWCwgcDJZLCByMVgsIHIxWSwgcjJYLCByMlksIHMxWCwgczFZLCBzMlgsIHMyWSwgdE1hdCwgdFg7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIHAxWCA9IGJBLm1fc3dlZXAuYy54ICsgcjFYO1xuICAgIHAxWSA9IGJBLm1fc3dlZXAuYy55ICsgcjFZO1xuICAgIHAyWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYO1xuICAgIHAyWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZO1xuICAgIHMxWCA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi54ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjEueDtcbiAgICBzMVkgPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueSArIHRoaXMubV9ncm91bmRBbmNob3IxLnk7XG4gICAgczJYID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnggKyB0aGlzLm1fZ3JvdW5kQW5jaG9yMi54O1xuICAgIHMyWSA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi55ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjIueTtcbiAgICB0aGlzLm1fdTEuU2V0KHAxWCAtIHMxWCwgcDFZIC0gczFZKTtcbiAgICB0aGlzLm1fdTIuU2V0KHAyWCAtIHMyWCwgcDJZIC0gczJZKTtcbiAgICBsZW5ndGgxID0gdGhpcy5tX3UxLkxlbmd0aCgpO1xuICAgIGxlbmd0aDIgPSB0aGlzLm1fdTIuTGVuZ3RoKCk7XG4gICAgaWYgKGxlbmd0aDEgPiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgIHRoaXMubV91MS5NdWx0aXBseSgxLjAgLyBsZW5ndGgxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3UxLlNldFplcm8oKTtcbiAgICB9XG4gICAgaWYgKGxlbmd0aDIgPiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgIHRoaXMubV91Mi5NdWx0aXBseSgxLjAgLyBsZW5ndGgyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3UyLlNldFplcm8oKTtcbiAgICB9XG4gICAgQyA9IHRoaXMubV9jb25zdGFudCAtIGxlbmd0aDEgLSB0aGlzLm1fcmF0aW8gKiBsZW5ndGgyO1xuICAgIGlmIChDID4gMC4wKSB7XG4gICAgICB0aGlzLm1fc3RhdGUgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcbiAgICAgIHRoaXMubV9pbXB1bHNlID0gMC4wO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fc3RhdGUgPSBiMkpvaW50LmVfYXRVcHBlckxpbWl0O1xuICAgIH1cbiAgICBpZiAobGVuZ3RoMSA8IHRoaXMubV9tYXhMZW5ndGgxKSB7XG4gICAgICB0aGlzLm1fbGltaXRTdGF0ZTEgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcbiAgICAgIHRoaXMubV9saW1pdEltcHVsc2UxID0gMC4wO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbGltaXRTdGF0ZTEgPSBiMkpvaW50LmVfYXRVcHBlckxpbWl0O1xuICAgIH1cbiAgICBpZiAobGVuZ3RoMiA8IHRoaXMubV9tYXhMZW5ndGgyKSB7XG4gICAgICB0aGlzLm1fbGltaXRTdGF0ZTIgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcbiAgICAgIHRoaXMubV9saW1pdEltcHVsc2UyID0gMC4wO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbGltaXRTdGF0ZTIgPSBiMkpvaW50LmVfYXRVcHBlckxpbWl0O1xuICAgIH1cbiAgICBjcjF1MSA9IHIxWCAqIHRoaXMubV91MS55IC0gcjFZICogdGhpcy5tX3UxLng7XG4gICAgY3IydTIgPSByMlggKiB0aGlzLm1fdTIueSAtIHIyWSAqIHRoaXMubV91Mi54O1xuICAgIHRoaXMubV9saW1pdE1hc3MxID0gYkEubV9pbnZNYXNzICsgYkEubV9pbnZJICogY3IxdTEgKiBjcjF1MTtcbiAgICB0aGlzLm1fbGltaXRNYXNzMiA9IGJCLm1faW52TWFzcyArIGJCLm1faW52SSAqIGNyMnUyICogY3IydTI7XG4gICAgdGhpcy5tX3B1bGxleU1hc3MgPSB0aGlzLm1fbGltaXRNYXNzMSArIHRoaXMubV9yYXRpbyAqIHRoaXMubV9yYXRpbyAqIHRoaXMubV9saW1pdE1hc3MyO1xuICAgIHRoaXMubV9saW1pdE1hc3MxID0gMS4wIC8gdGhpcy5tX2xpbWl0TWFzczE7XG4gICAgdGhpcy5tX2xpbWl0TWFzczIgPSAxLjAgLyB0aGlzLm1fbGltaXRNYXNzMjtcbiAgICB0aGlzLm1fcHVsbGV5TWFzcyA9IDEuMCAvIHRoaXMubV9wdWxsZXlNYXNzO1xuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgdGhpcy5tX2ltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX2xpbWl0SW1wdWxzZTEgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX2xpbWl0SW1wdWxzZTIgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgUDFYID0gKCgtdGhpcy5tX2ltcHVsc2UpIC0gdGhpcy5tX2xpbWl0SW1wdWxzZTEpICogdGhpcy5tX3UxLng7XG4gICAgICBQMVkgPSAoKC10aGlzLm1faW1wdWxzZSkgLSB0aGlzLm1fbGltaXRJbXB1bHNlMSkgKiB0aGlzLm1fdTEueTtcbiAgICAgIFAyWCA9ICgoLXRoaXMubV9yYXRpbyAqIHRoaXMubV9pbXB1bHNlKSAtIHRoaXMubV9saW1pdEltcHVsc2UyKSAqIHRoaXMubV91Mi54O1xuICAgICAgUDJZID0gKCgtdGhpcy5tX3JhdGlvICogdGhpcy5tX2ltcHVsc2UpIC0gdGhpcy5tX2xpbWl0SW1wdWxzZTIpICogdGhpcy5tX3UyLnk7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkEubV9pbnZNYXNzICogUDFYO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55ICs9IGJBLm1faW52TWFzcyAqIFAxWTtcbiAgICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJBLm1faW52SSAqIChyMVggKiBQMVkgLSByMVkgKiBQMVgpO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IGJCLm1faW52TWFzcyAqIFAyWDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQi5tX2ludk1hc3MgKiBQMlk7XG4gICAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQi5tX2ludkkgKiAocjJYICogUDJZIC0gcjJZICogUDJYKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ltcHVsc2UgPSAwLjA7XG4gICAgICB0aGlzLm1fbGltaXRJbXB1bHNlMSA9IDAuMDtcbiAgICAgIHRoaXMubV9saW1pdEltcHVsc2UyID0gMC4wO1xuICAgIH1cbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIENkb3QsIFAxWCwgUDFZLCBQMlgsIFAyWSwgYkEsIGJCLCBpbXB1bHNlLCBvbGRJbXB1bHNlLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYLCB2MVgsIHYxWSwgdjJYLCB2Mlk7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIHYxWCA9IDA7XG4gICAgdjFZID0gMDtcbiAgICB2MlggPSAwO1xuICAgIHYyWSA9IDA7XG4gICAgUDFYID0gMDtcbiAgICBQMVkgPSAwO1xuICAgIFAyWCA9IDA7XG4gICAgUDJZID0gMDtcbiAgICBDZG90ID0gMDtcbiAgICBpbXB1bHNlID0gMDtcbiAgICBvbGRJbXB1bHNlID0gMDtcbiAgICBpZiAodGhpcy5tX3N0YXRlID09PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICB2MVggPSBiQS5tX2xpbmVhclZlbG9jaXR5LnggKyAoLWJBLm1fYW5ndWxhclZlbG9jaXR5ICogcjFZKTtcbiAgICAgIHYxWSA9IGJBLm1fbGluZWFyVmVsb2NpdHkueSArIChiQS5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIxWCk7XG4gICAgICB2MlggPSBiQi5tX2xpbmVhclZlbG9jaXR5LnggKyAoLWJCLm1fYW5ndWxhclZlbG9jaXR5ICogcjJZKTtcbiAgICAgIHYyWSA9IGJCLm1fbGluZWFyVmVsb2NpdHkueSArIChiQi5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIyWCk7XG4gICAgICBDZG90ID0gKC0odGhpcy5tX3UxLnggKiB2MVggKyB0aGlzLm1fdTEueSAqIHYxWSkpIC0gdGhpcy5tX3JhdGlvICogKHRoaXMubV91Mi54ICogdjJYICsgdGhpcy5tX3UyLnkgKiB2MlkpO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9wdWxsZXlNYXNzICogKC1DZG90KTtcbiAgICAgIG9sZEltcHVsc2UgPSB0aGlzLm1faW1wdWxzZTtcbiAgICAgIHRoaXMubV9pbXB1bHNlID0gYjJNYXRoLk1heCgwLjAsIHRoaXMubV9pbXB1bHNlICsgaW1wdWxzZSk7XG4gICAgICBpbXB1bHNlID0gdGhpcy5tX2ltcHVsc2UgLSBvbGRJbXB1bHNlO1xuICAgICAgUDFYID0gLWltcHVsc2UgKiB0aGlzLm1fdTEueDtcbiAgICAgIFAxWSA9IC1pbXB1bHNlICogdGhpcy5tX3UxLnk7XG4gICAgICBQMlggPSAtdGhpcy5tX3JhdGlvICogaW1wdWxzZSAqIHRoaXMubV91Mi54O1xuICAgICAgUDJZID0gLXRoaXMubV9yYXRpbyAqIGltcHVsc2UgKiB0aGlzLm1fdTIueTtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQS5tX2ludk1hc3MgKiBQMVg7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkEubV9pbnZNYXNzICogUDFZO1xuICAgICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkEubV9pbnZJICogKHIxWCAqIFAxWSAtIHIxWSAqIFAxWCk7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkIubV9pbnZNYXNzICogUDJYO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS55ICs9IGJCLm1faW52TWFzcyAqIFAyWTtcbiAgICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJCLm1faW52SSAqIChyMlggKiBQMlkgLSByMlkgKiBQMlgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUxID09PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICB2MVggPSBiQS5tX2xpbmVhclZlbG9jaXR5LnggKyAoLWJBLm1fYW5ndWxhclZlbG9jaXR5ICogcjFZKTtcbiAgICAgIHYxWSA9IGJBLm1fbGluZWFyVmVsb2NpdHkueSArIChiQS5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIxWCk7XG4gICAgICBDZG90ID0gLSh0aGlzLm1fdTEueCAqIHYxWCArIHRoaXMubV91MS55ICogdjFZKTtcbiAgICAgIGltcHVsc2UgPSAtdGhpcy5tX2xpbWl0TWFzczEgKiBDZG90O1xuICAgICAgb2xkSW1wdWxzZSA9IHRoaXMubV9saW1pdEltcHVsc2UxO1xuICAgICAgdGhpcy5tX2xpbWl0SW1wdWxzZTEgPSBiMk1hdGguTWF4KDAuMCwgdGhpcy5tX2xpbWl0SW1wdWxzZTEgKyBpbXB1bHNlKTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fbGltaXRJbXB1bHNlMSAtIG9sZEltcHVsc2U7XG4gICAgICBQMVggPSAtaW1wdWxzZSAqIHRoaXMubV91MS54O1xuICAgICAgUDFZID0gLWltcHVsc2UgKiB0aGlzLm1fdTEueTtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQS5tX2ludk1hc3MgKiBQMVg7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkEubV9pbnZNYXNzICogUDFZO1xuICAgICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkEubV9pbnZJICogKHIxWCAqIFAxWSAtIHIxWSAqIFAxWCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZTIgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgIHYyWCA9IGJCLm1fbGluZWFyVmVsb2NpdHkueCArICgtYkIubV9hbmd1bGFyVmVsb2NpdHkgKiByMlkpO1xuICAgICAgdjJZID0gYkIubV9saW5lYXJWZWxvY2l0eS55ICsgKGJCLm1fYW5ndWxhclZlbG9jaXR5ICogcjJYKTtcbiAgICAgIENkb3QgPSAtKHRoaXMubV91Mi54ICogdjJYICsgdGhpcy5tX3UyLnkgKiB2MlkpO1xuICAgICAgaW1wdWxzZSA9IC10aGlzLm1fbGltaXRNYXNzMiAqIENkb3Q7XG4gICAgICBvbGRJbXB1bHNlID0gdGhpcy5tX2xpbWl0SW1wdWxzZTI7XG4gICAgICB0aGlzLm1fbGltaXRJbXB1bHNlMiA9IGIyTWF0aC5NYXgoMC4wLCB0aGlzLm1fbGltaXRJbXB1bHNlMiArIGltcHVsc2UpO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9saW1pdEltcHVsc2UyIC0gb2xkSW1wdWxzZTtcbiAgICAgIFAyWCA9IC1pbXB1bHNlICogdGhpcy5tX3UyLng7XG4gICAgICBQMlkgPSAtaW1wdWxzZSAqIHRoaXMubV91Mi55O1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IGJCLm1faW52TWFzcyAqIFAyWDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQi5tX2ludk1hc3MgKiBQMlk7XG4gICAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQi5tX2ludkkgKiAocjJYICogUDJZIC0gcjJZICogUDJYKTtcbiAgICB9XG4gIH07XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgdmFyIEMsIGJBLCBiQiwgaW1wdWxzZSwgbGVuZ3RoMSwgbGVuZ3RoMiwgbGluZWFyRXJyb3IsIG9sZEltcHVsc2UsIG9sZExpbWl0UG9zaXRpb25JbXB1bHNlLCBwMVgsIHAxWSwgcDJYLCBwMlksIHIxWCwgcjFZLCByMlgsIHIyWSwgczFYLCBzMVksIHMyWCwgczJZLCB0TWF0LCB0WDtcbiAgICBpZiAoYmF1bWdhcnRlID09PSB2b2lkIDApIHtcbiAgICAgIGJhdW1nYXJ0ZSA9IDA7XG4gICAgfVxuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgczFYID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnggKyB0aGlzLm1fZ3JvdW5kQW5jaG9yMS54O1xuICAgIHMxWSA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi55ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjEueTtcbiAgICBzMlggPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueCArIHRoaXMubV9ncm91bmRBbmNob3IyLng7XG4gICAgczJZID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnkgKyB0aGlzLm1fZ3JvdW5kQW5jaG9yMi55O1xuICAgIHIxWCA9IDA7XG4gICAgcjFZID0gMDtcbiAgICByMlggPSAwO1xuICAgIHIyWSA9IDA7XG4gICAgcDFYID0gMDtcbiAgICBwMVkgPSAwO1xuICAgIHAyWCA9IDA7XG4gICAgcDJZID0gMDtcbiAgICBsZW5ndGgxID0gMDtcbiAgICBsZW5ndGgyID0gMDtcbiAgICBDID0gMDtcbiAgICBpbXB1bHNlID0gMDtcbiAgICBvbGRJbXB1bHNlID0gMDtcbiAgICBvbGRMaW1pdFBvc2l0aW9uSW1wdWxzZSA9IDA7XG4gICAgdFggPSAwO1xuICAgIGxpbmVhckVycm9yID0gMC4wO1xuICAgIGlmICh0aGlzLm1fc3RhdGUgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgICAgcjFYID0gdFg7XG4gICAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICAgIHIyWCA9IHRYO1xuICAgICAgcDFYID0gYkEubV9zd2VlcC5jLnggKyByMVg7XG4gICAgICBwMVkgPSBiQS5tX3N3ZWVwLmMueSArIHIxWTtcbiAgICAgIHAyWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYO1xuICAgICAgcDJZID0gYkIubV9zd2VlcC5jLnkgKyByMlk7XG4gICAgICB0aGlzLm1fdTEuU2V0KHAxWCAtIHMxWCwgcDFZIC0gczFZKTtcbiAgICAgIHRoaXMubV91Mi5TZXQocDJYIC0gczJYLCBwMlkgLSBzMlkpO1xuICAgICAgbGVuZ3RoMSA9IHRoaXMubV91MS5MZW5ndGgoKTtcbiAgICAgIGxlbmd0aDIgPSB0aGlzLm1fdTIuTGVuZ3RoKCk7XG4gICAgICBpZiAobGVuZ3RoMSA+IGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCkge1xuICAgICAgICB0aGlzLm1fdTEuTXVsdGlwbHkoMS4wIC8gbGVuZ3RoMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1fdTEuU2V0WmVybygpO1xuICAgICAgfVxuICAgICAgaWYgKGxlbmd0aDIgPiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgICAgdGhpcy5tX3UyLk11bHRpcGx5KDEuMCAvIGxlbmd0aDIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX3UyLlNldFplcm8oKTtcbiAgICAgIH1cbiAgICAgIEMgPSB0aGlzLm1fY29uc3RhbnQgLSBsZW5ndGgxIC0gdGhpcy5tX3JhdGlvICogbGVuZ3RoMjtcbiAgICAgIGxpbmVhckVycm9yID0gYjJNYXRoLk1heChsaW5lYXJFcnJvciwgLUMpO1xuICAgICAgQyA9IGIyTWF0aC5DbGFtcChDICsgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCAtYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uLCAwLjApO1xuICAgICAgaW1wdWxzZSA9IC10aGlzLm1fcHVsbGV5TWFzcyAqIEM7XG4gICAgICBwMVggPSAtaW1wdWxzZSAqIHRoaXMubV91MS54O1xuICAgICAgcDFZID0gLWltcHVsc2UgKiB0aGlzLm1fdTEueTtcbiAgICAgIHAyWCA9IC10aGlzLm1fcmF0aW8gKiBpbXB1bHNlICogdGhpcy5tX3UyLng7XG4gICAgICBwMlkgPSAtdGhpcy5tX3JhdGlvICogaW1wdWxzZSAqIHRoaXMubV91Mi55O1xuICAgICAgYkEubV9zd2VlcC5jLnggKz0gYkEubV9pbnZNYXNzICogcDFYO1xuICAgICAgYkEubV9zd2VlcC5jLnkgKz0gYkEubV9pbnZNYXNzICogcDFZO1xuICAgICAgYkEubV9zd2VlcC5hICs9IGJBLm1faW52SSAqIChyMVggKiBwMVkgLSByMVkgKiBwMVgpO1xuICAgICAgYkIubV9zd2VlcC5jLnggKz0gYkIubV9pbnZNYXNzICogcDJYO1xuICAgICAgYkIubV9zd2VlcC5jLnkgKz0gYkIubV9pbnZNYXNzICogcDJZO1xuICAgICAgYkIubV9zd2VlcC5hICs9IGJCLm1faW52SSAqIChyMlggKiBwMlkgLSByMlkgKiBwMlgpO1xuICAgICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICAgIGJCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZTEgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgICAgcjFYID0gdFg7XG4gICAgICBwMVggPSBiQS5tX3N3ZWVwLmMueCArIHIxWDtcbiAgICAgIHAxWSA9IGJBLm1fc3dlZXAuYy55ICsgcjFZO1xuICAgICAgdGhpcy5tX3UxLlNldChwMVggLSBzMVgsIHAxWSAtIHMxWSk7XG4gICAgICBsZW5ndGgxID0gdGhpcy5tX3UxLkxlbmd0aCgpO1xuICAgICAgaWYgKGxlbmd0aDEgPiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgICAgdGhpcy5tX3UxLnggKj0gMS4wIC8gbGVuZ3RoMTtcbiAgICAgICAgdGhpcy5tX3UxLnkgKj0gMS4wIC8gbGVuZ3RoMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubV91MS5TZXRaZXJvKCk7XG4gICAgICB9XG4gICAgICBDID0gdGhpcy5tX21heExlbmd0aDEgLSBsZW5ndGgxO1xuICAgICAgbGluZWFyRXJyb3IgPSBiMk1hdGguTWF4KGxpbmVhckVycm9yLCAtQyk7XG4gICAgICBDID0gYjJNYXRoLkNsYW1wKEMgKyBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIC1iMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24sIDAuMCk7XG4gICAgICBpbXB1bHNlID0gLXRoaXMubV9saW1pdE1hc3MxICogQztcbiAgICAgIHAxWCA9IC1pbXB1bHNlICogdGhpcy5tX3UxLng7XG4gICAgICBwMVkgPSAtaW1wdWxzZSAqIHRoaXMubV91MS55O1xuICAgICAgYkEubV9zd2VlcC5jLnggKz0gYkEubV9pbnZNYXNzICogcDFYO1xuICAgICAgYkEubV9zd2VlcC5jLnkgKz0gYkEubV9pbnZNYXNzICogcDFZO1xuICAgICAgYkEubV9zd2VlcC5hICs9IGJBLm1faW52SSAqIChyMVggKiBwMVkgLSByMVkgKiBwMVgpO1xuICAgICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9saW1pdFN0YXRlMiA9PT0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkge1xuICAgICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgICByMlggPSB0WDtcbiAgICAgIHAyWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYO1xuICAgICAgcDJZID0gYkIubV9zd2VlcC5jLnkgKyByMlk7XG4gICAgICB0aGlzLm1fdTIuU2V0KHAyWCAtIHMyWCwgcDJZIC0gczJZKTtcbiAgICAgIGxlbmd0aDIgPSB0aGlzLm1fdTIuTGVuZ3RoKCk7XG4gICAgICBpZiAobGVuZ3RoMiA+IGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCkge1xuICAgICAgICB0aGlzLm1fdTIueCAqPSAxLjAgLyBsZW5ndGgyO1xuICAgICAgICB0aGlzLm1fdTIueSAqPSAxLjAgLyBsZW5ndGgyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX3UyLlNldFplcm8oKTtcbiAgICAgIH1cbiAgICAgIEMgPSB0aGlzLm1fbWF4TGVuZ3RoMiAtIGxlbmd0aDI7XG4gICAgICBsaW5lYXJFcnJvciA9IGIyTWF0aC5NYXgobGluZWFyRXJyb3IsIC1DKTtcbiAgICAgIEMgPSBiMk1hdGguQ2xhbXAoQyArIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgLWIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbiwgMC4wKTtcbiAgICAgIGltcHVsc2UgPSAtdGhpcy5tX2xpbWl0TWFzczIgKiBDO1xuICAgICAgcDJYID0gLWltcHVsc2UgKiB0aGlzLm1fdTIueDtcbiAgICAgIHAyWSA9IC1pbXB1bHNlICogdGhpcy5tX3UyLnk7XG4gICAgICBiQi5tX3N3ZWVwLmMueCArPSBiQi5tX2ludk1hc3MgKiBwMlg7XG4gICAgICBiQi5tX3N3ZWVwLmMueSArPSBiQi5tX2ludk1hc3MgKiBwMlk7XG4gICAgICBiQi5tX3N3ZWVwLmEgKz0gYkIubV9pbnZJICogKHIyWCAqIHAyWSAtIHIyWSAqIHAyWCk7XG4gICAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIH1cbiAgICByZXR1cm4gbGluZWFyRXJyb3IgPCBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7XG4gIH07XG5cbiAgcmV0dXJuIGIyUHVsbGV5Sm9pbnQ7XG5cbn0pKGIySm9pbnQpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlB1bGxleUpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludERlZiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyUHVsbGV5Sm9pbnREZWYsIF9zdXBlcik7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IGIySm9pbnQuZV9wdWxsZXlKb2ludDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5ncm91bmRBbmNob3JBID0gbnVsbDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5ncm91bmRBbmNob3JCID0gbnVsbDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckEgPSBudWxsO1xuXG4gIGIyUHVsbGV5Sm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQiA9IG51bGw7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUubGVuZ3RoQSA9IDAuMDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5tYXhMZW5ndGhBID0gMC4wO1xuXG4gIGIyUHVsbGV5Sm9pbnREZWYucHJvdG90eXBlLmxlbmd0aEIgPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUubWF4TGVuZ3RoQiA9IDAuMDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5yYXRpbyA9IDEuMDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5jb2xsaWRlQ29ubmVjdGVkID0gdHJ1ZTtcblxuICBmdW5jdGlvbiBiMlB1bGxleUpvaW50RGVmKCkge1xuICAgIGIyUHVsbGV5Sm9pbnREZWYuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5ncm91bmRBbmNob3JBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMuZ3JvdW5kQW5jaG9yQiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmdyb3VuZEFuY2hvckEuU2V0KC0xLjAsIDEuMCk7XG4gICAgdGhpcy5ncm91bmRBbmNob3JCLlNldCgxLjAsIDEuMCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEuU2V0KC0xLjAsIDAuMCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIuU2V0KDEuMCwgMC4wKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oYkEsIGJCLCBnYUEsIGdhQiwgYW5jaG9yQSwgYW5jaG9yQiwgcikge1xuICAgIHZhciBDLCBkMVgsIGQxWSwgZDJYLCBkMlk7XG4gICAgaWYgKHIgPT09IHZvaWQgMCkge1xuICAgICAgciA9IDA7XG4gICAgfVxuICAgIHRoaXMuYm9keUEgPSBiQTtcbiAgICB0aGlzLmJvZHlCID0gYkI7XG4gICAgdGhpcy5ncm91bmRBbmNob3JBLlNldFYoZ2FBKTtcbiAgICB0aGlzLmdyb3VuZEFuY2hvckIuU2V0VihnYUIpO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gdGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvckEpO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gdGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvckIpO1xuICAgIGQxWCA9IGFuY2hvckEueCAtIGdhQS54O1xuICAgIGQxWSA9IGFuY2hvckEueSAtIGdhQS55O1xuICAgIHRoaXMubGVuZ3RoQSA9IE1hdGguc3FydChkMVggKiBkMVggKyBkMVkgKiBkMVkpO1xuICAgIGQyWCA9IGFuY2hvckIueCAtIGdhQi54O1xuICAgIGQyWSA9IGFuY2hvckIueSAtIGdhQi55O1xuICAgIHRoaXMubGVuZ3RoQiA9IE1hdGguc3FydChkMlggKiBkMlggKyBkMlkgKiBkMlkpO1xuICAgIHRoaXMucmF0aW8gPSByO1xuICAgIEMgPSB0aGlzLmxlbmd0aEEgKyB0aGlzLnJhdGlvICogdGhpcy5sZW5ndGhCO1xuICAgIHRoaXMubWF4TGVuZ3RoQSA9IEMgLSB0aGlzLnJhdGlvICogYjJQdWxsZXlKb2ludC5iMl9taW5QdWxsZXlMZW5ndGg7XG4gICAgdGhpcy5tYXhMZW5ndGhCID0gKEMgLSBiMlB1bGxleUpvaW50LmIyX21pblB1bGxleUxlbmd0aCkgLyB0aGlzLnJhdGlvO1xuICB9O1xuXG4gIHJldHVybiBiMlB1bGxleUpvaW50RGVmO1xuXG59KShiMkpvaW50RGVmKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJQdWxsZXlKb2ludERlZi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKb2ludCwgYjJNYXQyMiwgYjJNYXRoLCBiMlZlYzIsIGIyVmVjMyxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMk1hdDIyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMjtcblxuYjJWZWMzID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlJldm9sdXRlSm9pbnQsIF9zdXBlcik7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnRJbXB1bHNlID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuSyA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5LMSA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5LMiA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5LMyA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5pbXB1bHNlMiA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5pbXB1bHNlMyA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5yZWR1Y2VkID0gbnVsbDtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLm1faW1wdWxzZSA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX21hc3MgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX3JlZmVyZW5jZUFuZ2xlID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV9tb3RvckltcHVsc2UgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX2xvd2VyQW5nbGUgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX3VwcGVyQW5nbGUgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX21heE1vdG9yVG9ycXVlID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV9tb3RvclNwZWVkID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV9lbmFibGVMaW1pdCA9IDAuMDtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLm1fZW5hYmxlTW90b3IgPSBmYWxzZTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuXG4gIGZ1bmN0aW9uIGIyUmV2b2x1dGVKb2ludChkZWYpIHtcbiAgICBiMlJldm9sdXRlSm9pbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZGVmKTtcbiAgICB0aGlzLksgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMuSzEgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMuSzIgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMuSzMgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMuaW1wdWxzZTMgPSBuZXcgYjJWZWMzKCk7XG4gICAgdGhpcy5pbXB1bHNlMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnJlZHVjZWQgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9pbXB1bHNlID0gbmV3IGIyVmVjMygpO1xuICAgIHRoaXMubV9tYXNzID0gbmV3IGIyTWF0MzMoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IxLlNldFYoZGVmLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMi5TZXRWKGRlZi5sb2NhbEFuY2hvckIpO1xuICAgIHRoaXMubV9yZWZlcmVuY2VBbmdsZSA9IGRlZi5yZWZlcmVuY2VBbmdsZTtcbiAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX2xvd2VyQW5nbGUgPSBkZWYubG93ZXJBbmdsZTtcbiAgICB0aGlzLm1fdXBwZXJBbmdsZSA9IGRlZi51cHBlckFuZ2xlO1xuICAgIHRoaXMubV9tYXhNb3RvclRvcnF1ZSA9IGRlZi5tYXhNb3RvclRvcnF1ZTtcbiAgICB0aGlzLm1fbW90b3JTcGVlZCA9IGRlZi5tb3RvclNwZWVkO1xuICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGRlZi5lbmFibGVMaW1pdDtcbiAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSBkZWYuZW5hYmxlTW90b3I7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjEpO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IyKTtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgYjJWZWMyKGludl9kdCAqIHRoaXMubV9pbXB1bHNlLngsIGludl9kdCAqIHRoaXMubV9pbXB1bHNlLnkpO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS56O1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0Sm9pbnRBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIubV9zd2VlcC5hIC0gdGhpcy5tX2JvZHlBLm1fc3dlZXAuYSAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldEpvaW50U3BlZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLm1fYW5ndWxhclZlbG9jaXR5IC0gdGhpcy5tX2JvZHlBLm1fYW5ndWxhclZlbG9jaXR5O1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuSXNMaW1pdEVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZUxpbWl0O1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuRW5hYmxlTGltaXQgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgdGhpcy5tX2VuYWJsZUxpbWl0ID0gZmxhZztcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldExvd2VyTGltaXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xvd2VyQW5nbGU7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRVcHBlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV91cHBlckFuZ2xlO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuU2V0TGltaXRzID0gZnVuY3Rpb24obG93ZXIsIHVwcGVyKSB7XG4gICAgaWYgKGxvd2VyID09PSB2b2lkIDApIHtcbiAgICAgIGxvd2VyID0gMDtcbiAgICB9XG4gICAgaWYgKHVwcGVyID09PSB2b2lkIDApIHtcbiAgICAgIHVwcGVyID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2xvd2VyQW5nbGUgPSBsb3dlcjtcbiAgICB0aGlzLm1fdXBwZXJBbmdsZSA9IHVwcGVyO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuSXNNb3RvckVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHJldHVybiB0aGlzLm1fZW5hYmxlTW90b3I7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5FbmFibGVNb3RvciA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSBmbGFnO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuU2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKHNwZWVkKSB7XG4gICAgaWYgKHNwZWVkID09PSB2b2lkIDApIHtcbiAgICAgIHNwZWVkID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fbW90b3JTcGVlZCA9IHNwZWVkO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbW90b3JTcGVlZDtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLlNldE1heE1vdG9yVG9ycXVlID0gZnVuY3Rpb24odG9ycXVlKSB7XG4gICAgaWYgKHRvcnF1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB0b3JxdWUgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fbWF4TW90b3JUb3JxdWUgPSB0b3JxdWU7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRNb3RvclRvcnF1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbWF4TW90b3JUb3JxdWU7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgUFgsIFBZLCBiQSwgYkIsIGkxLCBpMiwgam9pbnRBbmdsZSwgbTEsIG0yLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuXG4gICAgLyoqXG4gICAgdG9kbzogZml4IHRoaXNcbiAgICAgKi9cbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIG0xID0gYkEubV9pbnZNYXNzO1xuICAgIG0yID0gYkIubV9pbnZNYXNzO1xuICAgIGkxID0gYkEubV9pbnZJO1xuICAgIGkyID0gYkIubV9pbnZJO1xuICAgIHRoaXMubV9tYXNzLmNvbDEueCA9IG0xICsgbTIgKyByMVkgKiByMVkgKiBpMSArIHIyWSAqIHIyWSAqIGkyO1xuICAgIHRoaXMubV9tYXNzLmNvbDIueCA9ICgtcjFZICogcjFYICogaTEpIC0gcjJZICogcjJYICogaTI7XG4gICAgdGhpcy5tX21hc3MuY29sMy54ID0gKC1yMVkgKiBpMSkgLSByMlkgKiBpMjtcbiAgICB0aGlzLm1fbWFzcy5jb2wxLnkgPSB0aGlzLm1fbWFzcy5jb2wyLng7XG4gICAgdGhpcy5tX21hc3MuY29sMi55ID0gbTEgKyBtMiArIHIxWCAqIHIxWCAqIGkxICsgcjJYICogcjJYICogaTI7XG4gICAgdGhpcy5tX21hc3MuY29sMy55ID0gcjFYICogaTEgKyByMlggKiBpMjtcbiAgICB0aGlzLm1fbWFzcy5jb2wxLnogPSB0aGlzLm1fbWFzcy5jb2wzLng7XG4gICAgdGhpcy5tX21hc3MuY29sMi56ID0gdGhpcy5tX21hc3MuY29sMy55O1xuICAgIHRoaXMubV9tYXNzLmNvbDMueiA9IGkxICsgaTI7XG4gICAgdGhpcy5tX21vdG9yTWFzcyA9IDEuMCAvIChpMSArIGkyKTtcbiAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgam9pbnRBbmdsZSA9IGJCLm1fc3dlZXAuYSAtIGJBLm1fc3dlZXAuYSAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcbiAgICAgIGlmIChiMk1hdGguQWJzKHRoaXMubV91cHBlckFuZ2xlIC0gdGhpcy5tX2xvd2VyQW5nbGUpIDwgMi4wICogYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcCkge1xuICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9lcXVhbExpbWl0cztcbiAgICAgIH0gZWxzZSBpZiAoam9pbnRBbmdsZSA8PSB0aGlzLm1fbG93ZXJBbmdsZSkge1xuICAgICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9hdExvd2VyTGltaXQpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMC4wO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2F0TG93ZXJMaW1pdDtcbiAgICAgIH0gZWxzZSBpZiAoam9pbnRBbmdsZSA+PSB0aGlzLm1fdXBwZXJBbmdsZSkge1xuICAgICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMC4wO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwLjA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgfVxuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgdGhpcy5tX2ltcHVsc2UueCAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1faW1wdWxzZS55ICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgUFggPSB0aGlzLm1faW1wdWxzZS54O1xuICAgICAgUFkgPSB0aGlzLm1faW1wdWxzZS55O1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS54IC09IG0xICogUFg7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgLT0gbTEgKiBQWTtcbiAgICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5IC09IGkxICogKChyMVggKiBQWSAtIHIxWSAqIFBYKSArIHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBtMiAqIFBYO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS55ICs9IG0yICogUFk7XG4gICAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBpMiAqICgocjJYICogUFkgLSByMlkgKiBQWCkgKyB0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2Uueik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwLjA7XG4gICAgfVxuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90LCBDZG90MVgsIENkb3QxWSwgQ2RvdDIsIENkb3RYLCBDZG90WSwgYkEsIGJCLCBpMSwgaTIsIGltcHVsc2UsIG0xLCBtMiwgbWF4SW1wdWxzZSwgbmV3SW1wdWxzZSwgb2xkSW1wdWxzZSwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WCwgdjEsIHYyLCB3MSwgdzI7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgbmV3SW1wdWxzZSA9IDA7XG4gICAgcjFYID0gMDtcbiAgICByMVkgPSAwO1xuICAgIHIyWCA9IDA7XG4gICAgcjJZID0gMDtcbiAgICB2MSA9IGJBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgdzEgPSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICB2MiA9IGJCLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgdzIgPSBiQi5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICBtMSA9IGJBLm1faW52TWFzcztcbiAgICBtMiA9IGJCLm1faW52TWFzcztcbiAgICBpMSA9IGJBLm1faW52STtcbiAgICBpMiA9IGJCLm1faW52STtcbiAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yICYmIHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfZXF1YWxMaW1pdHMpIHtcbiAgICAgIENkb3QgPSB3MiAtIHcxIC0gdGhpcy5tX21vdG9yU3BlZWQ7XG4gICAgICBpbXB1bHNlID0gdGhpcy5tX21vdG9yTWFzcyAqICgtQ2RvdCk7XG4gICAgICBvbGRJbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgICAgIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heE1vdG9yVG9ycXVlO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IGIyTWF0aC5DbGFtcCh0aGlzLm1fbW90b3JJbXB1bHNlICsgaW1wdWxzZSwgLW1heEltcHVsc2UsIG1heEltcHVsc2UpO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuICAgICAgdzEgLT0gaTEgKiBpbXB1bHNlO1xuICAgICAgdzIgKz0gaTIgKiBpbXB1bHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0ICYmIHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdCkge1xuICAgICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgICByMVggPSB0WDtcbiAgICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgICByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgICAgcjJYID0gdFg7XG4gICAgICBDZG90MVggPSB2Mi54ICsgKC13MiAqIHIyWSkgLSB2MS54IC0gKC13MSAqIHIxWSk7XG4gICAgICBDZG90MVkgPSB2Mi55ICsgKHcyICogcjJYKSAtIHYxLnkgLSAodzEgKiByMVgpO1xuICAgICAgQ2RvdDIgPSB3MiAtIHcxO1xuICAgICAgdGhpcy5tX21hc3MuU29sdmUzMyh0aGlzLmltcHVsc2UzLCAtQ2RvdDFYLCAtQ2RvdDFZLCAtQ2RvdDIpO1xuICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlID09PSBiMkpvaW50LmVfZXF1YWxMaW1pdHMpIHtcbiAgICAgICAgdGhpcy5tX2ltcHVsc2UuQWRkKHRoaXMuaW1wdWxzZTMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PT0gYjJKb2ludC5lX2F0TG93ZXJMaW1pdCkge1xuICAgICAgICBuZXdJbXB1bHNlID0gdGhpcy5tX2ltcHVsc2UueiArIHRoaXMuaW1wdWxzZTMuejtcbiAgICAgICAgaWYgKG5ld0ltcHVsc2UgPCAwLjApIHtcbiAgICAgICAgICB0aGlzLm1fbWFzcy5Tb2x2ZTIyKHRoaXMucmVkdWNlZCwgLUNkb3QxWCwgLUNkb3QxWSk7XG4gICAgICAgICAgdGhpcy5pbXB1bHNlMy54ID0gdGhpcy5yZWR1Y2VkLng7XG4gICAgICAgICAgdGhpcy5pbXB1bHNlMy55ID0gdGhpcy5yZWR1Y2VkLnk7XG4gICAgICAgICAgdGhpcy5pbXB1bHNlMy56ID0gLXRoaXMubV9pbXB1bHNlLno7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueCArPSB0aGlzLnJlZHVjZWQueDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ICs9IHRoaXMucmVkdWNlZC55O1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgbmV3SW1wdWxzZSA9IHRoaXMubV9pbXB1bHNlLnogKyB0aGlzLmltcHVsc2UzLno7XG4gICAgICAgIGlmIChuZXdJbXB1bHNlID4gMC4wKSB7XG4gICAgICAgICAgdGhpcy5tX21hc3MuU29sdmUyMih0aGlzLnJlZHVjZWQsIC1DZG90MVgsIC1DZG90MVkpO1xuICAgICAgICAgIHRoaXMuaW1wdWxzZTMueCA9IHRoaXMucmVkdWNlZC54O1xuICAgICAgICAgIHRoaXMuaW1wdWxzZTMueSA9IHRoaXMucmVkdWNlZC55O1xuICAgICAgICAgIHRoaXMuaW1wdWxzZTMueiA9IC10aGlzLm1faW1wdWxzZS56O1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gdGhpcy5yZWR1Y2VkLng7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueSArPSB0aGlzLnJlZHVjZWQueTtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMC4wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2MS54IC09IG0xICogdGhpcy5pbXB1bHNlMy54O1xuICAgICAgdjEueSAtPSBtMSAqIHRoaXMuaW1wdWxzZTMueTtcbiAgICAgIHcxIC09IGkxICogKHIxWCAqIHRoaXMuaW1wdWxzZTMueSAtIHIxWSAqIHRoaXMuaW1wdWxzZTMueCArIHRoaXMuaW1wdWxzZTMueik7XG4gICAgICB2Mi54ICs9IG0yICogdGhpcy5pbXB1bHNlMy54O1xuICAgICAgdjIueSArPSBtMiAqIHRoaXMuaW1wdWxzZTMueTtcbiAgICAgIHcyICs9IGkyICogKHIyWCAqIHRoaXMuaW1wdWxzZTMueSAtIHIyWSAqIHRoaXMuaW1wdWxzZTMueCArIHRoaXMuaW1wdWxzZTMueik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgICAgcjFYID0gdFg7XG4gICAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICAgIHIyWCA9IHRYO1xuICAgICAgQ2RvdFggPSB2Mi54ICsgKC13MiAqIHIyWSkgLSB2MS54IC0gKC13MSAqIHIxWSk7XG4gICAgICBDZG90WSA9IHYyLnkgKyAodzIgKiByMlgpIC0gdjEueSAtICh3MSAqIHIxWCk7XG4gICAgICB0aGlzLm1fbWFzcy5Tb2x2ZTIyKHRoaXMuaW1wdWxzZTIsIC1DZG90WCwgLUNkb3RZKTtcbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gdGhpcy5pbXB1bHNlMi54O1xuICAgICAgdGhpcy5tX2ltcHVsc2UueSArPSB0aGlzLmltcHVsc2UyLnk7XG4gICAgICB2MS54IC09IG0xICogdGhpcy5pbXB1bHNlMi54O1xuICAgICAgdjEueSAtPSBtMSAqIHRoaXMuaW1wdWxzZTIueTtcbiAgICAgIHcxIC09IGkxICogKHIxWCAqIHRoaXMuaW1wdWxzZTIueSAtIHIxWSAqIHRoaXMuaW1wdWxzZTIueCk7XG4gICAgICB2Mi54ICs9IG0yICogdGhpcy5pbXB1bHNlMi54O1xuICAgICAgdjIueSArPSBtMiAqIHRoaXMuaW1wdWxzZTIueTtcbiAgICAgIHcyICs9IGkyICogKHIyWCAqIHRoaXMuaW1wdWxzZTIueSAtIHIyWSAqIHRoaXMuaW1wdWxzZTIueCk7XG4gICAgfVxuICAgIGJBLm1fbGluZWFyVmVsb2NpdHkuU2V0Vih2MSk7XG4gICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgPSB3MTtcbiAgICBiQi5tX2xpbmVhclZlbG9jaXR5LlNldFYodjIpO1xuICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ID0gdzI7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICB2YXIgQywgQ0xlbmd0aCwgQ0xlbmd0aFNxdWFyZWQsIENYLCBDWSwgYW5nbGUsIGFuZ3VsYXJFcnJvciwgYkEsIGJCLCBpbXB1bHNlWCwgaW1wdWxzZVksIGludkkxLCBpbnZJMiwgaW52TWFzczEsIGludk1hc3MyLCBrLCBrX2FsbG93ZWRTdHJldGNoLCBrX2JldGEsIGxpbWl0SW1wdWxzZSwgbSwgb2xkTGltaXRJbXB1bHNlLCBwb3NpdGlvbkVycm9yLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYLCB1WCwgdVk7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICBvbGRMaW1pdEltcHVsc2UgPSAwO1xuICAgIEMgPSAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgYW5ndWxhckVycm9yID0gMC4wO1xuICAgIHBvc2l0aW9uRXJyb3IgPSAwLjA7XG4gICAgdFggPSAwO1xuICAgIGltcHVsc2VYID0gMDtcbiAgICBpbXB1bHNlWSA9IDA7XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQpIHtcbiAgICAgIGFuZ2xlID0gYkIubV9zd2VlcC5hIC0gYkEubV9zd2VlcC5hIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgbGltaXRJbXB1bHNlID0gMC4wO1xuICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlID09PSBiMkpvaW50LmVfZXF1YWxMaW1pdHMpIHtcbiAgICAgICAgQyA9IGIyTWF0aC5DbGFtcChhbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlLCAtYjJTZXR0aW5ncy5iMl9tYXhBbmd1bGFyQ29ycmVjdGlvbiwgYjJTZXR0aW5ncy5iMl9tYXhBbmd1bGFyQ29ycmVjdGlvbik7XG4gICAgICAgIGxpbWl0SW1wdWxzZSA9IC10aGlzLm1fbW90b3JNYXNzICogQztcbiAgICAgICAgYW5ndWxhckVycm9yID0gYjJNYXRoLkFicyhDKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT09IGIySm9pbnQuZV9hdExvd2VyTGltaXQpIHtcbiAgICAgICAgQyA9IGFuZ2xlIC0gdGhpcy5tX2xvd2VyQW5nbGU7XG4gICAgICAgIGFuZ3VsYXJFcnJvciA9IC1DO1xuICAgICAgICBDID0gYjJNYXRoLkNsYW1wKEMgKyBiMlNldHRpbmdzLmIyX2FuZ3VsYXJTbG9wLCAtYjJTZXR0aW5ncy5iMl9tYXhBbmd1bGFyQ29ycmVjdGlvbiwgMC4wKTtcbiAgICAgICAgbGltaXRJbXB1bHNlID0gLXRoaXMubV9tb3Rvck1hc3MgKiBDO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PT0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkge1xuICAgICAgICBDID0gYW5nbGUgLSB0aGlzLm1fdXBwZXJBbmdsZTtcbiAgICAgICAgYW5ndWxhckVycm9yID0gQztcbiAgICAgICAgQyA9IGIyTWF0aC5DbGFtcChDIC0gYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcCwgMC4wLCBiMlNldHRpbmdzLmIyX21heEFuZ3VsYXJDb3JyZWN0aW9uKTtcbiAgICAgICAgbGltaXRJbXB1bHNlID0gLXRoaXMubV9tb3Rvck1hc3MgKiBDO1xuICAgICAgfVxuICAgICAgYkEubV9zd2VlcC5hIC09IGJBLm1faW52SSAqIGxpbWl0SW1wdWxzZTtcbiAgICAgIGJCLm1fc3dlZXAuYSArPSBiQi5tX2ludkkgKiBsaW1pdEltcHVsc2U7XG4gICAgICBiQS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICB9XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBDWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYIC0gYkEubV9zd2VlcC5jLnggLSByMVg7XG4gICAgQ1kgPSBiQi5tX3N3ZWVwLmMueSArIHIyWSAtIGJBLm1fc3dlZXAuYy55IC0gcjFZO1xuICAgIENMZW5ndGhTcXVhcmVkID0gQ1ggKiBDWCArIENZICogQ1k7XG4gICAgQ0xlbmd0aCA9IE1hdGguc3FydChDTGVuZ3RoU3F1YXJlZCk7XG4gICAgcG9zaXRpb25FcnJvciA9IENMZW5ndGg7XG4gICAgaW52TWFzczEgPSBiQS5tX2ludk1hc3M7XG4gICAgaW52TWFzczIgPSBiQi5tX2ludk1hc3M7XG4gICAgaW52STEgPSBiQS5tX2ludkk7XG4gICAgaW52STIgPSBiQi5tX2ludkk7XG4gICAga19hbGxvd2VkU3RyZXRjaCA9IDEwLjAgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7XG4gICAgaWYgKENMZW5ndGhTcXVhcmVkID4ga19hbGxvd2VkU3RyZXRjaCAqIGtfYWxsb3dlZFN0cmV0Y2gpIHtcbiAgICAgIHVYID0gQ1ggLyBDTGVuZ3RoO1xuICAgICAgdVkgPSBDWSAvIENMZW5ndGg7XG4gICAgICBrID0gaW52TWFzczEgKyBpbnZNYXNzMjtcbiAgICAgIG0gPSAxLjAgLyBrO1xuICAgICAgaW1wdWxzZVggPSBtICogKC1DWCk7XG4gICAgICBpbXB1bHNlWSA9IG0gKiAoLUNZKTtcbiAgICAgIGtfYmV0YSA9IDAuNTtcbiAgICAgIGJBLm1fc3dlZXAuYy54IC09IGtfYmV0YSAqIGludk1hc3MxICogaW1wdWxzZVg7XG4gICAgICBiQS5tX3N3ZWVwLmMueSAtPSBrX2JldGEgKiBpbnZNYXNzMSAqIGltcHVsc2VZO1xuICAgICAgYkIubV9zd2VlcC5jLnggKz0ga19iZXRhICogaW52TWFzczIgKiBpbXB1bHNlWDtcbiAgICAgIGJCLm1fc3dlZXAuYy55ICs9IGtfYmV0YSAqIGludk1hc3MyICogaW1wdWxzZVk7XG4gICAgICBDWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYIC0gYkEubV9zd2VlcC5jLnggLSByMVg7XG4gICAgICBDWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZIC0gYkEubV9zd2VlcC5jLnkgLSByMVk7XG4gICAgfVxuICAgIHRoaXMuSzEuY29sMS54ID0gaW52TWFzczEgKyBpbnZNYXNzMjtcbiAgICB0aGlzLksxLmNvbDIueCA9IDAuMDtcbiAgICB0aGlzLksxLmNvbDEueSA9IDAuMDtcbiAgICB0aGlzLksxLmNvbDIueSA9IGludk1hc3MxICsgaW52TWFzczI7XG4gICAgdGhpcy5LMi5jb2wxLnggPSBpbnZJMSAqIHIxWSAqIHIxWTtcbiAgICB0aGlzLksyLmNvbDIueCA9IC1pbnZJMSAqIHIxWCAqIHIxWTtcbiAgICB0aGlzLksyLmNvbDEueSA9IC1pbnZJMSAqIHIxWCAqIHIxWTtcbiAgICB0aGlzLksyLmNvbDIueSA9IGludkkxICogcjFYICogcjFYO1xuICAgIHRoaXMuSzMuY29sMS54ID0gaW52STIgKiByMlkgKiByMlk7XG4gICAgdGhpcy5LMy5jb2wyLnggPSAtaW52STIgKiByMlggKiByMlk7XG4gICAgdGhpcy5LMy5jb2wxLnkgPSAtaW52STIgKiByMlggKiByMlk7XG4gICAgdGhpcy5LMy5jb2wyLnkgPSBpbnZJMiAqIHIyWCAqIHIyWDtcbiAgICB0aGlzLksuU2V0TSh0aGlzLksxKTtcbiAgICB0aGlzLksuQWRkTSh0aGlzLksyKTtcbiAgICB0aGlzLksuQWRkTSh0aGlzLkszKTtcbiAgICB0aGlzLksuU29sdmUoYjJSZXZvbHV0ZUpvaW50LnRJbXB1bHNlLCAtQ1gsIC1DWSk7XG4gICAgaW1wdWxzZVggPSBiMlJldm9sdXRlSm9pbnQudEltcHVsc2UueDtcbiAgICBpbXB1bHNlWSA9IGIyUmV2b2x1dGVKb2ludC50SW1wdWxzZS55O1xuICAgIGJBLm1fc3dlZXAuYy54IC09IGJBLm1faW52TWFzcyAqIGltcHVsc2VYO1xuICAgIGJBLm1fc3dlZXAuYy55IC09IGJBLm1faW52TWFzcyAqIGltcHVsc2VZO1xuICAgIGJBLm1fc3dlZXAuYSAtPSBiQS5tX2ludkkgKiAocjFYICogaW1wdWxzZVkgLSByMVkgKiBpbXB1bHNlWCk7XG4gICAgYkIubV9zd2VlcC5jLnggKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZVg7XG4gICAgYkIubV9zd2VlcC5jLnkgKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZVk7XG4gICAgYkIubV9zd2VlcC5hICs9IGJCLm1faW52SSAqIChyMlggKiBpbXB1bHNlWSAtIHIyWSAqIGltcHVsc2VYKTtcbiAgICBiQS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIGJCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgcmV0dXJuIHBvc2l0aW9uRXJyb3IgPD0gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBiMlNldHRpbmdzLmIyX2FuZ3VsYXJTbG9wO1xuICB9O1xuXG4gIHJldHVybiBiMlJldm9sdXRlSm9pbnQ7XG5cbn0pKGIySm9pbnQpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlJldm9sdXRlSm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWY7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlJldm9sdXRlSm9pbnREZWYsIF9zdXBlcik7XG5cbiAgYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS50eXBlID0gYjJKb2ludC5lX3Jldm9sdXRlSm9pbnQ7XG5cbiAgYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckEgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JCID0gbnVsbDtcblxuICBiMlJldm9sdXRlSm9pbnREZWYucHJvdG90eXBlLnJlZmVyZW5jZUFuZ2xlID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUubG93ZXJBbmdsZSA9IDAuMDtcblxuICBiMlJldm9sdXRlSm9pbnREZWYucHJvdG90eXBlLnVwcGVyQW5nbGUgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS5tYXhNb3RvclRvcnF1ZSA9IDAuMDtcblxuICBiMlJldm9sdXRlSm9pbnREZWYucHJvdG90eXBlLm1vdG9yU3BlZWQgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS5lbmFibGVMaW1pdCA9IGZhbHNlO1xuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUuZW5hYmxlTW90b3IgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBiMlJldm9sdXRlSm9pbnREZWYoKSB7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEuU2V0KDAuMCwgMC4wKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQi5TZXQoMC4wLCAwLjApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGJBLCBiQiwgYW5jaG9yKSB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3IpO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gdGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvcik7XG4gICAgdGhpcy5yZWZlcmVuY2VBbmdsZSA9IHRoaXMuYm9keUIuR2V0QW5nbGUoKSAtIHRoaXMuYm9keUEuR2V0QW5nbGUoKTtcbiAgfTtcblxuICByZXR1cm4gYjJSZXZvbHV0ZUpvaW50RGVmO1xuXG59KShiMkpvaW50RGVmKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJSZXZvbHV0ZUpvaW50RGVmLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMk1hdDMzLCBiMlZlYzIsIGIyVmVjMyxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJWZWMzID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzO1xuXG5iMk1hdDMzID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQzMztcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMldlbGRKb2ludCwgX3N1cGVyKTtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUubV9pbXB1bHNlID0gbnVsbDtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUubV9tYXNzID0gbnVsbDtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUubV9yZWZlcmVuY2VBbmdsZSA9IDAuMDtcblxuICBmdW5jdGlvbiBiMldlbGRKb2ludChkZWYpIHtcbiAgICBiMldlbGRKb2ludC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBkZWYpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1faW1wdWxzZSA9IG5ldyBiMlZlYzMoKTtcbiAgICB0aGlzLm1fbWFzcyA9IG5ldyBiMk1hdDMzKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5TZXRWKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckIuU2V0VihkZWYubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLm1fcmVmZXJlbmNlQW5nbGUgPSBkZWYucmVmZXJlbmNlQW5nbGU7XG4gICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgIHRoaXMubV9tYXNzID0gbmV3IGIyTWF0MzMoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKTtcbiAgfTtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgfTtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueCwgaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueSk7XG4gIH07XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UuejtcbiAgfTtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGJBLCBiQiwgaUEsIGlCLCBtQSwgbUIsIHJBWCwgckFZLCByQlgsIHJCWSwgdE1hdCwgdFg7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByQVggPSB0aGlzLm1fbG9jYWxBbmNob3JBLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgckFZID0gdGhpcy5tX2xvY2FsQW5jaG9yQS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByQVggKyB0TWF0LmNvbDIueCAqIHJBWTtcbiAgICByQVkgPSB0TWF0LmNvbDEueSAqIHJBWCArIHRNYXQuY29sMi55ICogckFZO1xuICAgIHJBWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgckJYID0gdGhpcy5tX2xvY2FsQW5jaG9yQi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJCWSA9IHRoaXMubV9sb2NhbEFuY2hvckIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogckJYICsgdE1hdC5jb2wyLnggKiByQlk7XG4gICAgckJZID0gdE1hdC5jb2wxLnkgKiByQlggKyB0TWF0LmNvbDIueSAqIHJCWTtcbiAgICByQlggPSB0WDtcbiAgICBtQSA9IGJBLm1faW52TWFzcztcbiAgICBtQiA9IGJCLm1faW52TWFzcztcbiAgICBpQSA9IGJBLm1faW52STtcbiAgICBpQiA9IGJCLm1faW52STtcbiAgICB0aGlzLm1fbWFzcy5jb2wxLnggPSBtQSArIG1CICsgckFZICogckFZICogaUEgKyByQlkgKiByQlkgKiBpQjtcbiAgICB0aGlzLm1fbWFzcy5jb2wyLnggPSAoLXJBWSAqIHJBWCAqIGlBKSAtIHJCWSAqIHJCWCAqIGlCO1xuICAgIHRoaXMubV9tYXNzLmNvbDMueCA9ICgtckFZICogaUEpIC0gckJZICogaUI7XG4gICAgdGhpcy5tX21hc3MuY29sMS55ID0gdGhpcy5tX21hc3MuY29sMi54O1xuICAgIHRoaXMubV9tYXNzLmNvbDIueSA9IG1BICsgbUIgKyByQVggKiByQVggKiBpQSArIHJCWCAqIHJCWCAqIGlCO1xuICAgIHRoaXMubV9tYXNzLmNvbDMueSA9IHJBWCAqIGlBICsgckJYICogaUI7XG4gICAgdGhpcy5tX21hc3MuY29sMS56ID0gdGhpcy5tX21hc3MuY29sMy54O1xuICAgIHRoaXMubV9tYXNzLmNvbDIueiA9IHRoaXMubV9tYXNzLmNvbDMueTtcbiAgICB0aGlzLm1fbWFzcy5jb2wzLnogPSBpQSArIGlCO1xuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgdGhpcy5tX2ltcHVsc2UueCAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1faW1wdWxzZS55ICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9pbXB1bHNlLnogKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS54IC09IG1BICogdGhpcy5tX2ltcHVsc2UueDtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueSAtPSBtQSAqIHRoaXMubV9pbXB1bHNlLnk7XG4gICAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSAtPSBpQSAqIChyQVggKiB0aGlzLm1faW1wdWxzZS55IC0gckFZICogdGhpcy5tX2ltcHVsc2UueCArIHRoaXMubV9pbXB1bHNlLnopO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IG1CICogdGhpcy5tX2ltcHVsc2UueDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBtQiAqIHRoaXMubV9pbXB1bHNlLnk7XG4gICAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBpQiAqIChyQlggKiB0aGlzLm1faW1wdWxzZS55IC0gckJZICogdGhpcy5tX2ltcHVsc2UueCArIHRoaXMubV9pbXB1bHNlLnopO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgfVxuICB9O1xuXG4gIGIyV2VsZEpvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIENkb3QxWCwgQ2RvdDFZLCBDZG90MiwgYkEsIGJCLCBpQSwgaUIsIGltcHVsc2UsIG1BLCBtQiwgckFYLCByQVksIHJCWCwgckJZLCB0TWF0LCB0WCwgdkEsIHZCLCB3QSwgd0I7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdkEgPSBiQS5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHdBID0gYkEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgdkIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHdCID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgbUEgPSBiQS5tX2ludk1hc3M7XG4gICAgbUIgPSBiQi5tX2ludk1hc3M7XG4gICAgaUEgPSBiQS5tX2ludkk7XG4gICAgaUIgPSBiQi5tX2ludkk7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByQVggPSB0aGlzLm1fbG9jYWxBbmNob3JBLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgckFZID0gdGhpcy5tX2xvY2FsQW5jaG9yQS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByQVggKyB0TWF0LmNvbDIueCAqIHJBWTtcbiAgICByQVkgPSB0TWF0LmNvbDEueSAqIHJBWCArIHRNYXQuY29sMi55ICogckFZO1xuICAgIHJBWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgckJYID0gdGhpcy5tX2xvY2FsQW5jaG9yQi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJCWSA9IHRoaXMubV9sb2NhbEFuY2hvckIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogckJYICsgdE1hdC5jb2wyLnggKiByQlk7XG4gICAgckJZID0gdE1hdC5jb2wxLnkgKiByQlggKyB0TWF0LmNvbDIueSAqIHJCWTtcbiAgICByQlggPSB0WDtcbiAgICBDZG90MVggPSB2Qi54IC0gd0IgKiByQlkgLSB2QS54ICsgd0EgKiByQVk7XG4gICAgQ2RvdDFZID0gdkIueSArIHdCICogckJYIC0gdkEueSAtIHdBICogckFYO1xuICAgIENkb3QyID0gd0IgLSB3QTtcbiAgICBpbXB1bHNlID0gbmV3IGIyVmVjMygpO1xuICAgIHRoaXMubV9tYXNzLlNvbHZlMzMoaW1wdWxzZSwgLUNkb3QxWCwgLUNkb3QxWSwgLUNkb3QyKTtcbiAgICB0aGlzLm1faW1wdWxzZS5BZGQoaW1wdWxzZSk7XG4gICAgdkEueCAtPSBtQSAqIGltcHVsc2UueDtcbiAgICB2QS55IC09IG1BICogaW1wdWxzZS55O1xuICAgIHdBIC09IGlBICogKHJBWCAqIGltcHVsc2UueSAtIHJBWSAqIGltcHVsc2UueCArIGltcHVsc2Uueik7XG4gICAgdkIueCArPSBtQiAqIGltcHVsc2UueDtcbiAgICB2Qi55ICs9IG1CICogaW1wdWxzZS55O1xuICAgIHdCICs9IGlCICogKHJCWCAqIGltcHVsc2UueSAtIHJCWSAqIGltcHVsc2UueCArIGltcHVsc2Uueik7XG4gICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgPSB3QTtcbiAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSA9IHdCO1xuICB9O1xuXG4gIGIyV2VsZEpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICB2YXIgQzFYLCBDMVksIEMyLCBhbmd1bGFyRXJyb3IsIGJBLCBiQiwgaUEsIGlCLCBpbXB1bHNlLCBrX2FsbG93ZWRTdHJldGNoLCBtQSwgbUIsIHBvc2l0aW9uRXJyb3IsIHJBWCwgckFZLCByQlgsIHJCWSwgdE1hdCwgdFg7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHJBWCA9IHRoaXMubV9sb2NhbEFuY2hvckEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByQVkgPSB0aGlzLm1fbG9jYWxBbmNob3JBLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHJBWCArIHRNYXQuY29sMi54ICogckFZO1xuICAgIHJBWSA9IHRNYXQuY29sMS55ICogckFYICsgdE1hdC5jb2wyLnkgKiByQVk7XG4gICAgckFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByQlggPSB0aGlzLm1fbG9jYWxBbmNob3JCLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgckJZID0gdGhpcy5tX2xvY2FsQW5jaG9yQi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByQlggKyB0TWF0LmNvbDIueCAqIHJCWTtcbiAgICByQlkgPSB0TWF0LmNvbDEueSAqIHJCWCArIHRNYXQuY29sMi55ICogckJZO1xuICAgIHJCWCA9IHRYO1xuICAgIG1BID0gYkEubV9pbnZNYXNzO1xuICAgIG1CID0gYkIubV9pbnZNYXNzO1xuICAgIGlBID0gYkEubV9pbnZJO1xuICAgIGlCID0gYkIubV9pbnZJO1xuICAgIEMxWCA9IGJCLm1fc3dlZXAuYy54ICsgckJYIC0gYkEubV9zd2VlcC5jLnggLSByQVg7XG4gICAgQzFZID0gYkIubV9zd2VlcC5jLnkgKyByQlkgLSBiQS5tX3N3ZWVwLmMueSAtIHJBWTtcbiAgICBDMiA9IGJCLm1fc3dlZXAuYSAtIGJBLm1fc3dlZXAuYSAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcbiAgICBrX2FsbG93ZWRTdHJldGNoID0gMTAuMCAqIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcDtcbiAgICBwb3NpdGlvbkVycm9yID0gTWF0aC5zcXJ0KEMxWCAqIEMxWCArIEMxWSAqIEMxWSk7XG4gICAgYW5ndWxhckVycm9yID0gYjJNYXRoLkFicyhDMik7XG4gICAgaWYgKHBvc2l0aW9uRXJyb3IgPiBrX2FsbG93ZWRTdHJldGNoKSB7XG4gICAgICBpQSAqPSAxLjA7XG4gICAgICBpQiAqPSAxLjA7XG4gICAgfVxuICAgIHRoaXMubV9tYXNzLmNvbDEueCA9IG1BICsgbUIgKyByQVkgKiByQVkgKiBpQSArIHJCWSAqIHJCWSAqIGlCO1xuICAgIHRoaXMubV9tYXNzLmNvbDIueCA9ICgtckFZICogckFYICogaUEpIC0gckJZICogckJYICogaUI7XG4gICAgdGhpcy5tX21hc3MuY29sMy54ID0gKC1yQVkgKiBpQSkgLSByQlkgKiBpQjtcbiAgICB0aGlzLm1fbWFzcy5jb2wxLnkgPSB0aGlzLm1fbWFzcy5jb2wyLng7XG4gICAgdGhpcy5tX21hc3MuY29sMi55ID0gbUEgKyBtQiArIHJBWCAqIHJBWCAqIGlBICsgckJYICogckJYICogaUI7XG4gICAgdGhpcy5tX21hc3MuY29sMy55ID0gckFYICogaUEgKyByQlggKiBpQjtcbiAgICB0aGlzLm1fbWFzcy5jb2wxLnogPSB0aGlzLm1fbWFzcy5jb2wzLng7XG4gICAgdGhpcy5tX21hc3MuY29sMi56ID0gdGhpcy5tX21hc3MuY29sMy55O1xuICAgIHRoaXMubV9tYXNzLmNvbDMueiA9IGlBICsgaUI7XG4gICAgaW1wdWxzZSA9IG5ldyBiMlZlYzMoKTtcbiAgICB0aGlzLm1fbWFzcy5Tb2x2ZTMzKGltcHVsc2UsIC1DMVgsIC1DMVksIC1DMik7XG4gICAgYkEubV9zd2VlcC5jLnggLT0gbUEgKiBpbXB1bHNlLng7XG4gICAgYkEubV9zd2VlcC5jLnkgLT0gbUEgKiBpbXB1bHNlLnk7XG4gICAgYkEubV9zd2VlcC5hIC09IGlBICogKHJBWCAqIGltcHVsc2UueSAtIHJBWSAqIGltcHVsc2UueCArIGltcHVsc2Uueik7XG4gICAgYkIubV9zd2VlcC5jLnggKz0gbUIgKiBpbXB1bHNlLng7XG4gICAgYkIubV9zd2VlcC5jLnkgKz0gbUIgKiBpbXB1bHNlLnk7XG4gICAgYkIubV9zd2VlcC5hICs9IGlCICogKHJCWCAqIGltcHVsc2UueSAtIHJCWSAqIGltcHVsc2UueCArIGltcHVsc2Uueik7XG4gICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIHJldHVybiBwb3NpdGlvbkVycm9yIDw9IGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCAmJiBhbmd1bGFyRXJyb3IgPD0gYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcDtcbiAgfTtcblxuICByZXR1cm4gYjJXZWxkSm9pbnQ7XG5cbn0pKGIySm9pbnQpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMldlbGRKb2ludC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKb2ludCwgYjJKb2ludERlZiwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIySm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZjtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyV2VsZEpvaW50RGVmID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJXZWxkSm9pbnREZWYsIF9zdXBlcik7XG5cbiAgYjJXZWxkSm9pbnREZWYucHJvdG90eXBlLnR5cGUgPSBiMkpvaW50LmVfd2VsZEpvaW50O1xuXG4gIGIyV2VsZEpvaW50RGVmLnByb3RvdHlwZS5yZWZlcmVuY2VBbmdsZSA9IDAuMDtcblxuICBiMldlbGRKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JBID0gbnVsbDtcblxuICBiMldlbGRKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JCID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMldlbGRKb2ludERlZigpIHtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBiMlZlYzIoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMldlbGRKb2ludERlZi5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGJBLCBiQiwgYW5jaG9yKSB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQS5TZXRWKHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3IpKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQi5TZXRWKHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNob3IpKTtcbiAgICB0aGlzLnJlZmVyZW5jZUFuZ2xlID0gdGhpcy5ib2R5Qi5HZXRBbmdsZSgpIC0gdGhpcy5ib2R5QS5HZXRBbmdsZSgpO1xuICB9O1xuXG4gIHJldHVybiBiMldlbGRKb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyV2VsZEpvaW50RGVmLmpzLm1hcFxuIiwiXG4vKlxuICovXG4ndXNlIHN0cmljdCc7XG52YXIgQm94MkQ7XG5cbm1vZHVsZS5leHBvcnRzID0gQm94MkQgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIEJveDJEKCkge31cblxuICBCb3gyRC5wYXJzZVVJbnQgPSBmdW5jdGlvbih2KSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKHBhcnNlSW50KHYpKTtcbiAgfTtcblxuICBCb3gyRC5WZWN0b3IgPSBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICB2YXIgaSwgdG1wO1xuICAgIGlmIChsZW5ndGggPT0gbnVsbCkge1xuICAgICAgbGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdG1wID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgIHRtcFtpXSA9IDA7XG4gICAgICArK2k7XG4gICAgfVxuICAgIHJldHVybiB0bXA7XG4gIH07XG5cbiAgQm94MkQuZXF1YWxzID0gZnVuY3Rpb24obzEsIG8yKSB7XG4gICAgdmFyIF9yZWY7XG4gICAgaWYgKG8xID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICgobzIgaW5zdGFuY2VvZiBGdW5jdGlvbikgJiYgKG8xIGluc3RhbmNlb2YgbzIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCgoX3JlZiA9IG8xLmNvbnN0cnVjdG9yLl9faW1wbGVtZW50cykgIT0gbnVsbCA/IF9yZWZbbzIubmFtZV0gOiB2b2lkIDApKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIEJveDJELmdlbmVyYXRlQ2FsbGJhY2sgPSBmdW5jdGlvbihjb250ZXh0LCBjYikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGNiLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gQm94MkQ7XG5cbn0pKCk7XG5cbkJveDJELkNvbW1vbiA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gQ29tbW9uKCkge31cblxuICByZXR1cm4gQ29tbW9uO1xuXG59KSgpO1xuXG5Cb3gyRC5Db21tb24uTWF0aCA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gTWF0aCgpIHt9XG5cbiAgcmV0dXJuIE1hdGg7XG5cbn0pKCk7XG5cbnJlcXVpcmUoJy4vY29tbW9uL21hdGgvYjJWZWMyJyk7XG5cbnJlcXVpcmUoJy4vY29tbW9uL21hdGgvYjJWZWMzJyk7XG5cbnJlcXVpcmUoJy4vY29tbW9uL21hdGgvYjJNYXQyMicpO1xuXG5yZXF1aXJlKCcuL2NvbW1vbi9tYXRoL2IyTWF0MzMnKTtcblxucmVxdWlyZSgnLi9jb21tb24vbWF0aC9iMlN3ZWVwJyk7XG5cbnJlcXVpcmUoJy4vY29tbW9uL21hdGgvYjJUcmFuc2Zvcm0nKTtcblxucmVxdWlyZSgnLi9jb21tb24vbWF0aC9iMk1hdGgnKTtcblxucmVxdWlyZSgnLi9jb21tb24vYjJDb2xvcicpO1xuXG5yZXF1aXJlKCcuL2NvbW1vbi9iMlNldHRpbmdzJyk7XG5cbkJveDJELkNvbGxpc2lvbiA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gQ29sbGlzaW9uKCkge31cblxuICByZXR1cm4gQ29sbGlzaW9uO1xuXG59KSgpO1xuXG5Cb3gyRC5Db2xsaXNpb24uU2hhcGVzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBTaGFwZXMoKSB7fVxuXG4gIHJldHVybiBTaGFwZXM7XG5cbn0pKCk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL3NoYXBlcy9iMlNoYXBlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL3NoYXBlcy9iMkNpcmNsZVNoYXBlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL3NoYXBlcy9iMlBvbHlnb25TaGFwZScpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9zaGFwZXMvYjJFZGdlQ2hhaW5EZWYnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vc2hhcGVzL2IyRWRnZVNoYXBlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL3NoYXBlcy9iMk1hc3NEYXRhJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL0ZlYXR1cmVzJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyQ29udGFjdElEJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL0NsaXBWZXJ0ZXgnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJBQUJCJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyU2ltcGxleENhY2hlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyQm91bmQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJCb3VuZFZhbHVlcycpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMk1hbmlmb2xkUG9pbnQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJNYW5pZm9sZCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMkNvbGxpc2lvbicpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMkNvbnRhY3RQb2ludCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMlNpbXBsZXhWZXJ0ZXgnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJTaW1wbGV4Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRGlzdGFuY2UnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJEaXN0YW5jZUlucHV0Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRGlzdGFuY2VPdXRwdXQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJEaXN0YW5jZVByb3h5Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRHluYW1pY1RyZWVOb2RlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRHluYW1pY1RyZWUnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJEeW5hbWljVHJlZVBhaXInKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJQb2ludCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMlJheUNhc3RJbnB1dCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMlJheUNhc3RPdXRwdXQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJTZWdtZW50Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyU2VwYXJhdGlvbkZ1bmN0aW9uJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyVGltZU9mSW1wYWN0Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyVE9JSW5wdXQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJXb3JsZE1hbmlmb2xkJyk7XG5cbkJveDJELkR5bmFtaWNzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBEeW5hbWljcygpIHt9XG5cbiAgcmV0dXJuIER5bmFtaWNzO1xuXG59KSgpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyRmlsdGVyRGF0YScpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyVGltZVN0ZXAnKTtcblxuQm94MkQuRHluYW1pY3MuQ29udGFjdHMgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIENvbnRhY3RzKCkge31cblxuICByZXR1cm4gQ29udGFjdHM7XG5cbn0pKCk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJDb250YWN0UmVnaXN0ZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RSZXN1bHQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RFZGdlJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJDb250YWN0Q29uc3RyYWludFBvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJDb250YWN0Q29uc3RyYWludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ2lyY2xlQ29udGFjdCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdFNvbHZlcicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyRWRnZUFuZENpcmNsZUNvbnRhY3QnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMk51bGxDb250YWN0Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJQb2x5QW5kQ2lyY2xlQ29udGFjdCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9seUFuZEVkZ2VDb250YWN0Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJQb2x5Z29uQ29udGFjdCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdEZhY3RvcnknKTtcblxuQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIENvbnRyb2xsZXJzKCkge31cblxuICByZXR1cm4gQ29udHJvbGxlcnM7XG5cbn0pKCk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udHJvbGxlcnMvYjJDb250cm9sbGVyRWRnZScpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29udHJvbGxlcicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQnVveWFuY3lDb250cm9sbGVyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udHJvbGxlcnMvYjJDb25zdGFudEFjY2VsQ29udHJvbGxlcicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250cm9sbGVycy9iMkdyYXZpdHlDb250cm9sbGVyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udHJvbGxlcnMvYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlcicpO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIEpvaW50cygpIHt9XG5cbiAgcmV0dXJuIEpvaW50cztcblxufSkoKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJKb2ludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkpvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IySm9pbnRFZGdlJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IySmFjb2JpYW4nKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJEaXN0YW5jZUpvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyRGlzdGFuY2VKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkZyaWN0aW9uSm9pbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJGcmljdGlvbkpvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyR2VhckpvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyR2VhckpvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyTGluZUpvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyTGluZUpvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyTW91c2VKb2ludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMk1vdXNlSm9pbnREZWYnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJQcmlzbWF0aWNKb2ludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMlByaXNtYXRpY0pvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyUHVsbGV5Sm9pbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJQdWxsZXlKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMlJldm9sdXRlSm9pbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJSZXZvbHV0ZUpvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyV2VsZEpvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyV2VsZEpvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJDb250YWN0TGlzdGVuZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMkNvbnRhY3RGaWx0ZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMkZpeHR1cmUnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMkNvbnRhY3RNYW5hZ2VyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJCb2R5Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJEZWJ1Z0RyYXcnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMkJvZHlEZWYnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMkNvbnRhY3RGaWx0ZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMkNvbnRhY3RJbXB1bHNlJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJGaXh0dXJlRGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJJc2xhbmQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMldvcmxkJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJEZXN0cnVjdGlvbkxpc3RlbmVyJyk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl19
