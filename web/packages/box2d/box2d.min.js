!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Box2D=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b,c,d;b=a("../index"),d=b.Common.Math.b2Vec2,c=b.Collision.b2ContactID,b.Collision.ClipVertex=function(){function a(){this.v=new d,this.id=new c}return a.prototype.v=null,a.prototype.id=null,a.prototype.Set=function(a){this.v.SetV(a.v),this.id.Set(a.id)},a}()},{"../index":103}],2:[function(a){var b;b=a("../index"),b.Collision.Features=function(){function a(){}return Object.defineProperties(a.prototype,{referenceEdge:{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge},set:function(a){void 0===a&&(a=0),this._referenceEdge=a,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}},incidentEdge:{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge},set:function(a){void 0===a&&(a=0),this._incidentEdge=a,this._m_id._key=4294902015&this._m_id._key|this._incidentEdge<<8&65280}},incidentVertex:{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex},set:function(a){void 0===a&&(a=0),this._incidentVertex=a,this._m_id._key=4278255615&this._m_id._key|this._incidentVertex<<16&16711680}},flip:{enumerable:!1,configurable:!0,get:function(){return this._flip},set:function(a){void 0===a&&(a=0),this._flip=a,this._m_id._key=16777215&this._m_id._key|this._flip<<24&4278190080}}}),a}()},{"../index":103}],3:[function(a){var b,c;b=a("../index"),c=b.Common.Math.b2Vec2,b.Collision.b2AABB=function(){function a(){this.lowerBound=new c,this.upperBound=new c}return a.prototype.lowerBound=null,a.prototype.upperBound=null,a.prototype.IsValid=function(){var a,b,c;return a=this.upperBound.x-this.lowerBound.x,b=this.upperBound.y-this.lowerBound.y,c=a>=0&&b>=0,c=c&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},a.prototype.GetCenter=function(){return new c((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},a.prototype.GetExtents=function(){return new c((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},a.prototype.Contains=function(a){var b;return b=!0,b=b&&this.lowerBound.x<=a.lowerBound.x,b=b&&this.lowerBound.y<=a.lowerBound.y,b=b&&a.upperBound.x<=this.upperBound.x,b=b&&a.upperBound.y<=this.upperBound.y},a.prototype.RayCast=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(p=-Number.MAX_VALUE,o=Number.MAX_VALUE,i=b.p1.x,j=b.p1.y,e=b.p2.x-b.p1.x,f=b.p2.y-b.p1.y,c=Math.abs(e),d=Math.abs(f),h=a.normal,g=0,l=0,m=0,n=0,k=0,c<Number.MIN_VALUE){if(i<this.lowerBound.x||this.upperBound.x<i)return!1}else if(g=1/e,l=(this.lowerBound.x-i)*g,m=(this.upperBound.x-i)*g,k=-1,l>m&&(n=l,l=m,m=n,k=1),l>p&&(h.x=k,h.y=0,p=l),o=Math.min(o,m),p>o)return!1;if(d<Number.MIN_VALUE){if(j<this.lowerBound.y||this.upperBound.y<j)return!1}else if(g=1/f,l=(this.lowerBound.y-j)*g,m=(this.upperBound.y-j)*g,k=-1,l>m&&(n=l,l=m,m=n,k=1),l>p&&(h.y=k,h.x=0,p=l),o=Math.min(o,m),p>o)return!1;return a.fraction=p,!0},a.prototype.TestOverlap=function(a){var b,c,d,e;return b=a.lowerBound.x-this.upperBound.x,c=a.lowerBound.y-this.upperBound.y,d=this.lowerBound.x-a.upperBound.x,e=this.lowerBound.y-a.upperBound.y,b>0||c>0?!1:d>0||e>0?!1:!0},a.Combine=function(b,c){var d;return d=new a,d.Combine(b,c),d},a.prototype.Combine=function(a,b){this.lowerBound.x=Math.min(a.lowerBound.x,b.lowerBound.x),this.lowerBound.y=Math.min(a.lowerBound.y,b.lowerBound.y),this.upperBound.x=Math.max(a.upperBound.x,b.upperBound.x),this.upperBound.y=Math.max(a.upperBound.y,b.upperBound.y)},a}()},{"../index":103}],4:[function(a){var b;b=a("../index"),b.Collision.b2Bound=function(){function a(){}return a.prototype.value=0,a.prototype.proxy=null,a.prototype.stabbingCount=0,a.prototype.IsLower=function(){return 0===(1&this.value)},a.prototype.IsUpper=function(){return 1===(1&this.value)},a.prototype.Swap=function(a){var b,c,d;d=this.value,b=this.proxy,c=this.stabbingCount,this.value=a.value,this.proxy=a.proxy,this.stabbingCount=a.stabbingCount,a.value=d,a.proxy=b,a.stabbingCount=c},a}()},{"../index":103}],5:[function(a){var b,c;b=a("../index"),c=b.Vector,b.Collision.b2BoundValues=function(){function a(){this.lowerValues=new c,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new c,this.upperValues[0]=0,this.upperValues[1]=0}return a.prototype.lowerValues=null,a.prototype.upperValues=null,a}()},{"../index":103}],6:[function(a){var b,c,d,e,f,g;b=a("../index"),d=b.Vector,g=b.Common.Math.b2Vec2,f=b.Common.b2Settings,c=b.Collision.ClipVertex,e=b.Collision.b2Manifold,b.Collision.b2Collision=function(){function a(){}return a.b2_nullFeature=255,a.s_edgeAO=new d(1),a.s_edgeBO=new d(1),a.s_localTangent=new g,a.s_localNormal=new g,a.s_planePoint=new g,a.s_normal=new g,a.s_tangent=new g,a.s_tangent2=new g,a.s_v11=new g,a.s_v12=new g,a.b2CollidePolyTempVec=new g,a.ClipSegmentToLine=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;return void 0===d&&(d=0),e=void 0,j=0,e=b[0],l=e.v,e=b[1],m=e.v,g=c.x*l.x+c.y*l.y-d,h=c.x*m.x+c.y*m.y-d,0>=g&&a[j++].Set(b[0]),0>=h&&a[j++].Set(b[1]),0>g*h&&(i=g/(g-h),e=a[j],k=e.v,k.x=l.x+i*(m.x-l.x),k.y=l.y+i*(m.y-l.y),e=a[j],f=void 0,g>0?(f=b[0],e.id=f.id):(f=b[1],e.id=f.id),++j),j},a.EdgeSeparation=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(void 0===c&&(c=0),f=parseInt(a.m_vertexCount),x=a.m_vertices,p=a.m_normals,g=parseInt(d.m_vertexCount),y=d.m_vertices,r=void 0,s=void 0,r=b.R,s=p[c],l=r.col1.x*s.x+r.col2.x*s.y,m=r.col1.y*s.x+r.col2.y*s.y,r=e.R,n=r.col1.x*l+r.col1.y*m,o=r.col2.x*l+r.col2.y*m,j=0,k=Number.MAX_VALUE,i=0;g>i;)s=y[i],h=s.x*n+s.y*o,k>h&&(k=h,j=i),++i;return s=x[c],r=b.R,t=b.position.x+(r.col1.x*s.x+r.col2.x*s.y),u=b.position.y+(r.col1.y*s.x+r.col2.y*s.y),s=y[j],r=e.R,v=e.position.x+(r.col1.x*s.x+r.col2.x*s.y),w=e.position.y+(r.col1.y*s.x+r.col2.y*s.y),v-=t,w-=u,q=v*l+w*m},a.FindMaxSeparation=function(b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;for(i=parseInt(c.m_vertexCount),t=c.m_normals,z=void 0,y=void 0,y=f.R,z=e.m_centroid,l=f.position.x+(y.col1.x*z.x+y.col2.x*z.y),m=f.position.y+(y.col1.y*z.x+y.col2.y*z.y),y=d.R,z=c.m_centroid,l-=d.position.x+(y.col1.x*z.x+y.col2.x*z.y),m-=d.position.y+(y.col1.y*z.x+y.col2.y*z.y),j=l*d.R.col1.x+m*d.R.col1.y,k=l*d.R.col2.x+m*d.R.col2.y,o=0,r=-Number.MAX_VALUE,p=0;i>p;)z=t[p],n=z.x*j+z.y*k,n>r&&(r=n,o=p),++p;if(v=a.EdgeSeparation(c,d,o,e,f),u=parseInt(o-1>=0?o-1:i-1),x=a.EdgeSeparation(c,d,u,e,f),s=parseInt(i>o+1?o+1:0),w=a.EdgeSeparation(c,d,s,e,f),g=0,h=0,q=0,x>v&&x>w)q=-1,g=u,h=x;else{if(!(w>v))return b[0]=o,v;q=1,g=s,h=w}for(;;){if(o=-1===q?g-1>=0?g-1:i-1:i>g+1?g+1:0,v=a.EdgeSeparation(c,d,o,e,f),!(v>h))break;g=o,h=v}return b[0]=g,h},a.FindIncidentEdge=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(void 0===d&&(d=0),g=parseInt(b.m_vertexCount),q=b.m_normals,h=parseInt(e.m_vertexCount),w=e.m_vertices,r=e.m_normals,t=void 0,u=void 0,t=c.R,u=q[d],o=t.col1.x*u.x+t.col2.x*u.y,p=t.col1.y*u.x+t.col2.y*u.y,t=f.R,v=t.col1.x*o+t.col1.y*p,p=t.col2.x*o+t.col2.y*p,o=v,m=0,n=Number.MAX_VALUE,j=0;h>j;)u=r[j],i=o*u.x+p*u.y,n>i&&(n=i,m=j),++j;s=void 0,k=parseInt(m),l=parseInt(h>k+1?k+1:0),s=a[0],u=w[k],t=f.R,s.v.x=f.position.x+(t.col1.x*u.x+t.col2.x*u.y),s.v.y=f.position.y+(t.col1.y*u.x+t.col2.y*u.y),s.id.features.referenceEdge=d,s.id.features.incidentEdge=k,s.id.features.incidentVertex=0,s=a[1],u=w[l],t=f.R,s.v.x=f.position.x+(t.col1.x*u.x+t.col2.x*u.y),s.v.y=f.position.y+(t.col1.y*u.x+t.col2.y*u.y),s.id.features.referenceEdge=d,s.id.features.incidentEdge=l,s.id.features.incidentVertex=1},a.MakeClipPointVector=function(){var a;return a=new Array(2),a[0]=new c,a[1]=new c,a},a.CollidePolygons=function(b,c,d,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;if(m=void 0,b.m_pointCount=0,Q=c.m_radius+g.m_radius,o=0,a.s_edgeAO[0]=o,H=a.FindMaxSeparation(a.s_edgeAO,c,d,g,h),o=a.s_edgeAO[0],!(H>Q||(p=0,a.s_edgeBO[0]=p,I=a.FindMaxSeparation(a.s_edgeBO,g,h,c,d),p=a.s_edgeBO[0],I>Q||(E=void 0,F=void 0,U=void 0,V=void 0,n=0,q=0,v=.98,u=.001,L=void 0,I>v*H+u?(E=g,F=c,U=h,V=d,n=p,b.m_type=e.e_faceB,q=1):(E=c,F=g,U=d,V=h,n=o,b.m_type=e.e_faceA,q=0),t=a.s_incidentEdge,a.FindIncidentEdge(t,E,U,n,F,V),k=parseInt(E.m_vertexCount),T=E.m_vertices,y=T[n],z=void 0,z=k>n+1?T[parseInt(n+1)]:T[0],x=a.s_localTangent,x.Set(z.x-y.x,z.y-y.y),x.Normalize(),w=a.s_localNormal,w.x=x.y,w.y=-x.x,C=a.s_planePoint,C.Set(.5*(y.x+z.x),.5*(y.y+z.y)),O=a.s_tangent,L=U.R,O.x=L.col1.x*x.x+L.col2.x*x.y,O.y=L.col1.y*x.x+L.col2.y*x.y,P=a.s_tangent2,P.x=-O.x,P.y=-O.y,A=a.s_normal,A.x=O.y,A.y=-O.x,R=a.s_v11,S=a.s_v12,R.x=U.position.x+(L.col1.x*y.x+L.col2.x*y.y),R.y=U.position.y+(L.col1.y*y.x+L.col2.y*y.y),S.x=U.position.x+(L.col1.x*z.x+L.col2.x*z.y),S.y=U.position.y+(L.col1.y*z.x+L.col2.y*z.y),r=A.x*R.x+A.y*R.y,J=-O.x*R.x-O.y*R.y+Q,K=O.x*S.x+O.y*S.y+Q,i=a.s_clipPoints1,j=a.s_clipPoints2,B=0,B=a.ClipSegmentToLine(i,t,P,J),2>B||(B=a.ClipSegmentToLine(j,i,O,K),2>B))))){for(b.m_localPlaneNormal.SetV(w),b.m_localPoint.SetV(C),D=0,s=0;s<f.b2_maxManifoldPoints;)m=j[s],G=A.x*m.v.x+A.y*m.v.y-r,Q>=G&&(l=b.m_points[D],L=V.R,M=m.v.x-V.position.x,N=m.v.y-V.position.y,l.m_localPoint.x=M*L.col1.x+N*L.col1.y,l.m_localPoint.y=M*L.col2.x+N*L.col2.y,l.m_id.Set(m.id),l.m_id.features.flip=q,++D),++s;b.m_pointCount=D}},a.CollideCircles=function(a,b,c,d,f){var g,h,i,j,k,l,m,n,o,p;a.m_pointCount=0,o=void 0,p=void 0,o=c.R,p=b.m_p,j=c.position.x+(o.col1.x*p.x+o.col2.x*p.y),k=c.position.y+(o.col1.y*p.x+o.col2.y*p.y),o=f.R,p=d.m_p,l=f.position.x+(o.col1.x*p.x+o.col2.x*p.y),m=f.position.y+(o.col1.y*p.x+o.col2.y*p.y),g=l-j,h=m-k,i=g*g+h*h,n=b.m_radius+d.m_radius,i>n*n||(a.m_type=e.e_circles,a.m_localPoint.SetV(b.m_p),a.m_localPlaneNormal.SetZero(),a.m_pointCount=1,a.m_points[0].m_localPoint.SetV(d.m_p),a.m_points[0].m_id.key=0)},a.CollidePolygonAndCircle=function(a,b,c,d,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;for(a.m_pointCount=0,y=void 0,k=0,l=0,s=0,t=0,z=void 0,x=void 0,x=f.R,z=d.m_p,i=f.position.x+(x.col1.x*z.x+x.col2.x*z.y),j=f.position.y+(x.col1.y*z.x+x.col2.y*z.y),k=i-c.position.x,l=j-c.position.y,x=c.R,g=k*x.col1.x+l*x.col1.y,h=k*x.col2.x+l*x.col2.y,m=0,q=0,w=-Number.MAX_VALUE,u=b.m_radius+d.m_radius,G=parseInt(b.m_vertexCount),H=b.m_vertices,r=b.m_normals,p=0;G>p;){if(z=H[p],k=g-z.x,l=h-z.y,z=r[p],v=z.x*k+z.y*l,v>u)return;v>w&&(w=v,q=p),++p}if(E=parseInt(q),F=parseInt(G>E+1?E+1:0),C=H[E],D=H[F],w<Number.MIN_VALUE)return a.m_pointCount=1,a.m_type=e.e_faceA,a.m_localPlaneNormal.SetV(r[q]),a.m_localPoint.x=.5*(C.x+D.x),a.m_localPoint.y=.5*(C.y+D.y),a.m_points[0].m_localPoint.SetV(d.m_p),void(a.m_points[0].m_id.key=0);if(A=(g-C.x)*(D.x-C.x)+(h-C.y)*(D.y-C.y),B=(g-D.x)*(C.x-D.x)+(h-D.y)*(C.y-D.y),0>=A){if((g-C.x)*(g-C.x)+(h-C.y)*(h-C.y)>u*u)return;a.m_pointCount=1,a.m_type=e.e_faceA,a.m_localPlaneNormal.x=g-C.x,a.m_localPlaneNormal.y=h-C.y,a.m_localPlaneNormal.Normalize(),a.m_localPoint.SetV(C),a.m_points[0].m_localPoint.SetV(d.m_p),a.m_points[0].m_id.key=0}else if(0>=B){if((g-D.x)*(g-D.x)+(h-D.y)*(h-D.y)>u*u)return;a.m_pointCount=1,a.m_type=e.e_faceA,a.m_localPlaneNormal.x=g-D.x,a.m_localPlaneNormal.y=h-D.y,a.m_localPlaneNormal.Normalize(),a.m_localPoint.SetV(D),a.m_points[0].m_localPoint.SetV(d.m_p),a.m_points[0].m_id.key=0}else{if(n=.5*(C.x+D.x),o=.5*(C.y+D.y),w=(g-n)*r[E].x+(h-o)*r[E].y,w>u)return;a.m_pointCount=1,a.m_type=e.e_faceA,a.m_localPlaneNormal.x=r[E].x,a.m_localPlaneNormal.y=r[E].y,a.m_localPlaneNormal.Normalize(),a.m_localPoint.Set(n,o),a.m_points[0].m_localPoint.SetV(d.m_p),a.m_points[0].m_id.key=0}},a.TestOverlap=function(a,b){var c,d,e,f,g,h;return g=b.lowerBound,h=a.upperBound,c=g.x-h.x,d=g.y-h.y,g=a.lowerBound,h=b.upperBound,e=g.x-h.x,f=g.y-h.y,c>0||d>0?!1:e>0||f>0?!1:!0},a.s_incidentEdge=a.MakeClipPointVector(),a.s_clipPoints1=a.MakeClipPointVector(),a.s_clipPoints2=a.MakeClipPointVector(),a}()},{"../index":103}],7:[function(a){var b,c;b=a("../index"),c=b.Collision.Features,b.Collision.b2ContactID=function(){function a(){this.features=new c,this.features._m_id=this}return a.prototype.key=null,a.prototype.features=null,a.prototype.Set=function(a){this.key=a._key},a.prototype.Copy=function(){var b;return b=new a,b.key=this.key,b},Object.defineProperties(a.prototype,{key:{enumerable:!1,configurable:!0,get:function(){return this._key},set:function(a){void 0===a&&(a=0),this._key=a,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(4278190080&this._key)>>24&255}}}),a}()},{"../index":103}],8:[function(a){var b,c,d;b=a("../index"),d=b.Common.Math.b2Vec2,c=b.Collision.b2ContactID,b.Collision.b2ContactPoint=function(){function a(){this.position=new d,this.velocity=new d,this.normal=new d,this.id=new c}return a.prototype.position=null,a.prototype.velocity=null,a.prototype.normal=null,a.prototype.id=null,a}()},{"../index":103}],9:[function(a){var b,c,d,e,f;b=a("../index"),c=b.Vector,d=b.Common.Math.b2Math,f=b.Collision.b2Simplex,e=b.Common.b2Settings,b.Collision.b2Distance=function(){function a(){}return a.Distance=function(b,c,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;for(q=f.proxyA,r=f.proxyB,y=f.transformA,z=f.transformB,x=a.s_simplex,x.ReadCache(c,q,y,r,z),B=x.m_vertices,n=20,u=a.s_saveA,v=a.s_saveB,w=0,g=x.GetClosestPoint(),i=g.LengthSquared(),j=i,l=0,p=void 0,m=0;n>m;){for(w=x.m_count,l=0;w>l;)u[l]=B[l].indexA,v[l]=B[l].indexB,l++;switch(x.m_count){case 1:l=l;break;case 2:x.Solve2();break;case 3:x.Solve3();break;default:e.b2Assert(!1)}if(3===x.m_count)break;if(p=x.GetClosestPoint(),j=p.LengthSquared(),i=j,h=x.GetSearchDirection(),h.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;for(A=B[x.m_count],A.indexA=q.GetSupport(d.MulTMV(y.R,h.GetNegative())),A.wA=d.MulX(y,q.GetVertex(A.indexA)),A.indexB=r.GetSupport(d.MulTMV(z.R,h)),A.wB=d.MulX(z,r.GetVertex(A.indexB)),A.w=d.SubtractVV(A.wB,A.wA),++m,++a.b2_gjkIters,k=!1,l=0;w>l;){if(A.indexA===u[l]&&A.indexB===v[l]){k=!0;break}l++}if(k)break;++x.m_count}a.b2_gjkMaxIters=d.Max(a.b2_gjkMaxIters,m),x.GetWitnessPoints(b.pointA,b.pointB),b.distance=d.SubtractVV(b.pointA,b.pointB).Length(),b.iterations=m,x.WriteCache(c),f.useRadii&&(s=q.m_radius,t=r.m_radius,b.distance>s+t&&b.distance>Number.MIN_VALUE?(b.distance-=s+t,o=d.SubtractVV(b.pointB,b.pointA),o.Normalize(),b.pointA.x+=s*o.x,b.pointA.y+=s*o.y,b.pointB.x-=t*o.x,b.pointB.y-=t*o.y):(p=new b2Vec2,p.x=.5*(b.pointA.x+b.pointB.x),p.y=.5*(b.pointA.y+b.pointB.y),b.pointA.x=b.pointB.x=p.x,b.pointA.y=b.pointB.y=p.y,b.distance=0))},a.s_simplex=new f,a.s_saveA=new c(3),a.s_saveB=new c(3),a}()},{"../index":103}],10:[function(a){var b;b=a("../index"),b.Collision.b2DistanceInput=function(){function a(){}return a}()},{"../index":103}],11:[function(a){var b,c;b=a("../index"),c=b.Common.Math.b2Vec2,b.Collision.b2DistanceOutput=function(){function a(){this.pointA=new c,this.pointB=new c}return a.prototype.pointA=null,a.prototype.pointB=null,a}()},{"../index":103}],12:[function(a){var b,c,d,e,f;b=a("../index"),e=b.Common.b2Settings,f=b.Collision.Shapes.b2Shape,c=b.Collision.Shapes.b2CircleShape,d=b.Collision.Shapes.b2PolygonShape,b.Collision.b2DistanceProxy=function(){function a(){}return a.prototype.m_vertices=null,a.prototype.m_count=0,a.prototype.m_radius=0,a.prototype.Set=function(a){var b,g;switch(a.GetType()){case f.e_circleShape:b=a instanceof c?a:null,this.m_vertices=new Array(1,!0),this.m_vertices[0]=b.m_p,this.m_count=1,this.m_radius=b.m_radius;break;case f.e_polygonShape:g=a instanceof d?a:null,this.m_vertices=g.m_vertices,this.m_count=g.m_vertexCount,this.m_radius=g.m_radius;break;default:e.b2Assert(!1)}},a.prototype.GetSupport=function(a){var b,c,d,e;for(b=0,c=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,d=1;d<this.m_count;)e=this.m_vertices[d].x*a.x+this.m_vertices[d].y*a.y,e>c&&(b=d,c=e),++d;return b},a.prototype.GetSupportVertex=function(a){var b,c,d,e;for(b=0,c=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,d=1;d<this.m_count;)e=this.m_vertices[d].x*a.x+this.m_vertices[d].y*a.y,e>c&&(b=d,c=e),++d;return this.m_vertices[b]},a.prototype.GetVertexCount=function(){return this.m_count},a.prototype.GetVertex=function(a){return void 0===a&&(a=0),e.b2Assert(a>=0&&a<this.m_count),this.m_vertices[a]},a}()},{"../index":103}],13:[function(a){var b,c,d,e,f,g;b=a("../index"),g=b.Common.b2Settings,e=b.Common.Math.b2Math,c=b.Collision.b2AABB,f=b.Collision.b2RayCastInput,d=b.Collision.b2DynamicTreeNode,b.Collision.b2DynamicTree=function(){function a(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0}return a.prototype.CreateProxy=function(a,b){var c,d,e;return e=this.AllocateNode(),c=g.b2_aabbExtension,d=g.b2_aabbExtension,e.aabb.lowerBound.x=a.lowerBound.x-c,e.aabb.lowerBound.y=a.lowerBound.y-d,e.aabb.upperBound.x=a.upperBound.x+c,e.aabb.upperBound.y=a.upperBound.y+d,e.userData=b,this.InsertLeaf(e),e},a.prototype.DestroyProxy=function(a){this.RemoveLeaf(a),this.FreeNode(a)},a.prototype.MoveProxy=function(a,b,c){var d,e;return g.b2Assert(a.IsLeaf()),a.aabb.Contains(b)?!1:(this.RemoveLeaf(a),d=g.b2_aabbExtension+g.b2_aabbMultiplier*(c.x>0?c.x:-c.x),e=g.b2_aabbExtension+g.b2_aabbMultiplier*(c.y>0?c.y:-c.y),a.aabb.lowerBound.x=b.lowerBound.x-d,a.aabb.lowerBound.y=b.lowerBound.y-e,a.aabb.upperBound.x=b.upperBound.x+d,a.aabb.upperBound.y=b.upperBound.y+e,this.InsertLeaf(a),!0)},a.prototype.Rebalance=function(a){var b,c,d;if(void 0===a&&(a=0),null!=this.m_root)for(c=0;a>c;){for(d=this.m_root,b=0;d.IsLeaf()===!1;)d=this.m_path>>b&1?d.child2:d.child1,b=b+1&31;++this.m_path,this.RemoveLeaf(d),this.InsertLeaf(d),c++}},a.prototype.GetFatAABB=function(a){return a.aabb},a.prototype.GetUserData=function(a){return a.userData},a.prototype.Query=function(a,b){var c,d,e,f;if(null!=this.m_root)for(f=new Array,c=0,f[c++]=this.m_root;c>0;)if(d=f[--c],d.aabb.TestOverlap(b))if(d.IsLeaf()){if(e=a(d),!e)return}else f[c++]=d.child1,f[c++]=d.child2},a.prototype.RayCast=function(a,b){var d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(null!=this.m_root)for(l=b.p1,m=b.p2,n=e.SubtractVV(l,m),n.Normalize(),u=e.CrossFV(1,n),d=e.AbsV(u),j=b.maxFraction,o=new c,s=0,t=0,s=l.x+j*(m.x-l.x),t=l.y+j*(m.y-l.y),o.lowerBound.x=Math.min(l.x,s),o.lowerBound.y=Math.min(l.y,t),o.upperBound.x=Math.max(l.x,s),o.upperBound.y=Math.max(l.y,t),q=new Array,h=0,q[h++]=this.m_root;h>0;)if(k=q[--h],k.aabb.TestOverlap(o)!==!1&&(g=k.aabb.GetCenter(),i=k.aabb.GetExtents(),p=Math.abs(u.x*(l.x-g.x)+u.y*(l.y-g.y))-d.x*i.x-d.y*i.y,!(p>0)))if(k.IsLeaf()){if(r=new f,r.p1=b.p1,r.p2=b.p2,r.maxFraction=b.maxFraction,j=a(r,k),0===j)return;j>0&&(s=l.x+j*(m.x-l.x),t=l.y+j*(m.y-l.y),o.lowerBound.x=Math.min(l.x,s),o.lowerBound.y=Math.min(l.y,t),o.upperBound.x=Math.max(l.x,s),o.upperBound.y=Math.max(l.y,t))}else q[h++]=k.child1,q[h++]=k.child2},a.prototype.AllocateNode=function(){var a;return this.m_freeList?(a=this.m_freeList,this.m_freeList=a.parent,a.parent=null,a.child1=null,a.child2=null,a):new d},a.prototype.FreeNode=function(a){a.parent=this.m_freeList,this.m_freeList=a},a.prototype.InsertLeaf=function(a){var b,c,d,e,f,g,h,i;if(++this.m_insertionCount,null==this.m_root)return this.m_root=a,void(this.m_root.parent=null);if(b=a.aabb.GetCenter(),i=this.m_root,i.IsLeaf()===!1)for(;;)if(c=i.child1,d=i.child2,g=Math.abs((c.aabb.lowerBound.x+c.aabb.upperBound.x)/2-b.x)+Math.abs((c.aabb.lowerBound.y+c.aabb.upperBound.y)/2-b.y),h=Math.abs((d.aabb.lowerBound.x+d.aabb.upperBound.x)/2-b.x)+Math.abs((d.aabb.lowerBound.y+d.aabb.upperBound.y)/2-b.y),i=h>g?c:d,i.IsLeaf()!==!1)break;if(e=i.parent,f=this.AllocateNode(),f.parent=e,f.userData=null,f.aabb.Combine(a.aabb,i.aabb),e)for(i.parent.child1===i?e.child1=f:e.child2=f,f.child1=i,f.child2=a,i.parent=f,a.parent=f;;){if(e.aabb.Contains(f.aabb))break;if(e.aabb.Combine(e.child1.aabb,e.child2.aabb),f=e,e=e.parent,!e)break}else f.child1=i,f.child2=a,i.parent=f,a.parent=f,this.m_root=f},a.prototype.RemoveLeaf=function(a){var b,d,e,f;if(a===this.m_root)return void(this.m_root=null);if(d=a.parent,b=d.parent,f=void 0,f=d.child1===a?d.child2:d.child1,b)for(b.child1===d?b.child1=f:b.child2=f,f.parent=b,this.FreeNode(d);b&&(e=b.aabb,b.aabb=c.Combine(b.child1.aabb,b.child2.aabb),!e.Contains(b.aabb));)b=b.parent;else this.m_root=f,f.parent=null,this.FreeNode(d)},a}()},{"../index":103}],14:[function(a){var b,c,d;b=a("../index"),c=b.Collision.b2DynamicTree,d=b.Collision.b2DynamicTreePair,b.Collision.b2DynamicTreeBroadPhase=function(){function a(){this.m_tree=new c,this.m_moveBuffer=new Array,this.m_pairBuffer=new Array}return a.prototype.m_tree=null,a.prototype.m_moveBuffer=null,a.prototype.m_pairBuffer=null,a.prototype.m_pairCount=0,a.m_proxyCount=0,a.prototype.CreateProxy=function(a,b){var c;return c=this.m_tree.CreateProxy(a,b),++this.m_proxyCount,this.BufferMove(c),c},a.prototype.DestroyProxy=function(a){this.UnBufferMove(a),--this.m_proxyCount,this.m_tree.DestroyProxy(a)},a.prototype.MoveProxy=function(a,b,c){var d;d=this.m_tree.MoveProxy(a,b,c),d&&this.BufferMove(a)},a.prototype.TestOverlap=function(a,b){var c,d;return c=this.m_tree.GetFatAABB(a),d=this.m_tree.GetFatAABB(b),c.TestOverlap(d)},a.prototype.GetUserData=function(a){return this.m_tree.GetUserData(a)},a.prototype.GetFatAABB=function(a){return this.m_tree.GetFatAABB(a)},a.prototype.GetProxyCount=function(){return this.m_proxyCount},a.prototype.UpdatePairs=function(a){var b,c,e,f,g,h,i,j;for(this.m_pairCount=0,e=0,h=void 0,e=0;e<this.m_moveBuffer.length;)b=function(a){return function(b){var c;return b===h?!0:(a.m_pairCount===a.m_pairBuffer.length&&(a.m_pairBuffer[a.m_pairCount]=new d),c=a.m_pairBuffer[a.m_pairCount],c.proxyA=h>b?b:h,c.proxyB=b>=h?b:h,++a.m_pairCount,!0)}}(this),h=this.m_moveBuffer[e],c=this.m_tree.GetFatAABB(h),this.m_tree.Query(b,c),++e;for(this.m_moveBuffer.length=0,e=0;e<this.m_pairCount;)for(g=this.m_pairBuffer[e],i=this.m_tree.GetUserData(g.proxyA),j=this.m_tree.GetUserData(g.proxyB),a(i,j),++e;e<this.m_pairCount&&(f=this.m_pairBuffer[e],f.proxyA===g.proxyA&&f.proxyB===g.proxyB);)++e},a.prototype.Query=function(a,b){this.m_tree.Query(a,b)},a.prototype.RayCast=function(a,b){this.m_tree.RayCast(a,b)},a.prototype.Validate=function(){},a.prototype.Rebalance=function(a){void 0===a&&(a=0),this.m_tree.Rebalance(a)},a.prototype.BufferMove=function(a){this.m_moveBuffer[this.m_moveBuffer.length]=a},a.prototype.UnBufferMove=function(a){var b;b=parseInt(this.m_moveBuffer.indexOf(a)),this.m_moveBuffer.splice(b,1)},a.prototype.ComparePairs=function(){return 0},a.__implements={IBroadPhase:!0},a}()},{"../index":103}],15:[function(a){var b,c;b=a("../index"),c=b.Collision.b2AABB,b.Collision.b2DynamicTreeNode=function(){function a(){this.aabb=new c}return a.prototype.aabb=null,a.prototype.child1=null,a.prototype.IsLeaf=function(){return null==this.child1},a}()},{"../index":103}],16:[function(a){var b;b=a("../index"),b.Collision.b2DynamicTreePair=function(){function a(){}return a}()},{"../index":103}],17:[function(a){var b,c,d,e;b=a("../index"),d=b.Common.b2Settings,e=b.Common.Math.b2Vec2,c=b.Collision.b2ManifoldPoint,b.Collision.b2Manifold=function(){function a(){var a;for(this.m_pointCount=0,this.m_points=new Array(d.b2_maxManifoldPoints),a=0;a<d.b2_maxManifoldPoints;)this.m_points[a]=new c,a++;this.m_localPlaneNormal=new e,this.m_localPoint=new e}return a.e_circles=1,a.e_faceA=2,a.e_faceB=4,a.prototype.m_type=0,a.prototype.m_pointCount=0,a.prototype.m_points=null,a.prototype.m_localPlaneNormal=null,a.prototype.m_localPoint=null,a.prototype.Reset=function(){var a;for(a=0;a<d.b2_maxManifoldPoints;)(this.m_points[a]instanceof c?this.m_points[a]:null).Reset(),a++;this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},a.prototype.Set=function(a){var b;for(this.m_pointCount=a.m_pointCount,b=0;b<d.b2_maxManifoldPoints;)(this.m_points[b]instanceof c?this.m_points[b]:null).Set(a.m_points[b]),b++;this.m_localPlaneNormal.SetV(a.m_localPlaneNormal),this.m_localPoint.SetV(a.m_localPoint),this.m_type=a.m_type},a.prototype.Copy=function(){var b;return b=new a,b.Set(this),b},a}()},{"../index":103}],18:[function(a){var b,c,d;b=a("../index"),d=b.Common.Math.b2Vec2,c=b.Collision.b2ContactID,b.Collision.b2ManifoldPoint=function(){function a(){this.m_localPoint=new d,this.m_id=new c,this.Reset()}return a.prototype.m_localPoint=null,a.prototype.m_id=null,a.prototype.m_localPoint=null,a.prototype.m_normalImpulse=0,a.prototype.m_tangentImpulse=0,a.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},a.prototype.Set=function(a){this.m_localPoint.SetV(a.m_localPoint),this.m_normalImpulse=a.m_normalImpulse,this.m_tangentImpulse=a.m_tangentImpulse,this.m_id.Set(a.m_id)},a}()},{"../index":103}],19:[function(a){var b,c;b=a("../index"),c=b.Common.Math.b2Vec2,b.Collision.b2Point=function(){function a(){this.p=new c}return a.prototype.p=null,a.prototype.Support=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=0),this.p},a.prototype.GetFirstVertex=function(){return this.p},a}()},{"../index":103}],20:[function(a){var b,c;b=a("../index"),c=b.Common.Math.b2Vec2,b.Collision.b2RayCastInput=function(){function a(a,b,d){this.p1=new c,this.p2=new c,void 0===a&&(a=null),void 0===b&&(b=null),void 0===d&&(d=1),a&&this.p1.SetV(a),b&&this.p2.SetV(b),this.maxFraction=d}return a.prototype.p1=null,a.prototype.p2=null,a.prototype.maxFraction=1,a}()},{"../index":103}],21:[function(a){var b,c;b=a("../index"),c=b.Common.Math.b2Vec2,b.Collision.b2RayCastOutput=function(){function a(){this.normal=new c}return a.prototype.normal=null,a}()},{"../index":103}],22:[function(a){var b,c;b=a("../index"),c=b.Common.Math.b2Vec2,b.Collision.b2Segment=function(){function a(){this.p1=new c,this.p2=new c}return a.prototype.p1=null,a.prototype.p2=null,a.prototype.TestSegment=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r;return void 0===d&&(d=0),r=c.p1,p=c.p2.x-r.x,q=c.p2.y-r.y,h=this.p2.x-this.p1.x,i=this.p2.y-this.p1.y,n=i,o=-h,k=100*Number.MIN_VALUE,j=-(p*n+q*o),j>k&&(f=r.x-this.p1.x,g=r.y-this.p1.y,e=f*n+g*o,e>=0&&d*j>=e&&(l=-p*g+q*f,l>=-k*j&&j*(1+k)>=l))?(e/=j,m=Math.sqrt(n*n+o*o),n/=m,o/=m,a[0]=e,b.Set(n,o),!0):!1},a.prototype.Extend=function(a){this.ExtendForward(a),this.ExtendBackward(a)},a.prototype.ExtendForward=function(a){var b,c,d;b=this.p2.x-this.p1.x,c=this.p2.y-this.p1.y,d=Math.min(b>0?(a.upperBound.x-this.p1.x)/b:0>b?(a.lowerBound.x-this.p1.x)/b:Number.POSITIVE_INFINITY,c>0?(a.upperBound.y-this.p1.y)/c:0>c?(a.lowerBound.y-this.p1.y)/c:Number.POSITIVE_INFINITY),this.p2.x=this.p1.x+b*d,this.p2.y=this.p1.y+c*d},a.prototype.ExtendBackward=function(a){var b,c,d;b=-this.p2.x+this.p1.x,c=-this.p2.y+this.p1.y,d=Math.min(b>0?(a.upperBound.x-this.p2.x)/b:0>b?(a.lowerBound.x-this.p2.x)/b:Number.POSITIVE_INFINITY,c>0?(a.upperBound.y-this.p2.y)/c:0>c?(a.lowerBound.y-this.p2.y)/c:Number.POSITIVE_INFINITY),this.p1.x=this.p2.x+b*d,this.p1.y=this.p2.y+c*d},a}()},{"../index":103}],23:[function(a){var b,c,d,e;b=a("../index"),d=b.Common.b2Settings,c=b.Common.Math.b2Math,e=b.Common.Math.b2Vec2,b.Collision.b2SeparationFunction=function(){function a(){this.m_localPoint=new e,this.m_axis=new e}return a.prototype.m_localPoint=null,a.prototype.m_axis=null,a.prototype.m_proxyA=null,a.prototype.m_proxyB=null,a.prototype.Initialize=function(b,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;this.m_proxyA=f,this.m_proxyB=h,m=parseInt(b.count),d.b2Assert(m>0&&3>m),s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,C=0,D=0,E=0,F=0,y=0,z=0,K=void 0,L=void 0,H=0,I=0,1===m?(this.m_type=a.e_points,s=this.m_proxyA.GetVertex(b.indexA[0]),v=this.m_proxyB.GetVertex(b.indexB[0]),L=s,K=g.R,C=g.position.x+(K.col1.x*L.x+K.col2.x*L.y),D=g.position.y+(K.col1.y*L.x+K.col2.y*L.y),L=v,K=i.R,E=i.position.x+(K.col1.x*L.x+K.col2.x*L.y),F=i.position.y+(K.col1.y*L.x+K.col2.y*L.y),this.m_axis.x=E-C,this.m_axis.y=F-D,this.m_axis.Normalize()):b.indexB[0]===b.indexB[1]?(this.m_type=a.e_faceA,t=this.m_proxyA.GetVertex(b.indexA[0]),u=this.m_proxyA.GetVertex(b.indexA[1]),v=this.m_proxyB.GetVertex(b.indexB[0]),this.m_localPoint.x=.5*(t.x+u.x),this.m_localPoint.y=.5*(t.y+u.y),this.m_axis=c.CrossVF(c.SubtractVV(u,t),1),this.m_axis.Normalize(),L=this.m_axis,K=g.R,y=K.col1.x*L.x+K.col2.x*L.y,z=K.col1.y*L.x+K.col2.y*L.y,L=this.m_localPoint,K=g.R,C=g.position.x+(K.col1.x*L.x+K.col2.x*L.y),D=g.position.y+(K.col1.y*L.x+K.col2.y*L.y),L=v,K=i.R,E=i.position.x+(K.col1.x*L.x+K.col2.x*L.y),F=i.position.y+(K.col1.y*L.x+K.col2.y*L.y),H=(E-C)*y+(F-D)*z,0>H&&this.m_axis.NegativeSelf()):b.indexA[0]===b.indexA[0]?(this.m_type=a.e_faceB,w=this.m_proxyB.GetVertex(b.indexB[0]),x=this.m_proxyB.GetVertex(b.indexB[1]),s=this.m_proxyA.GetVertex(b.indexA[0]),this.m_localPoint.x=.5*(w.x+x.x),this.m_localPoint.y=.5*(w.y+x.y),this.m_axis=c.CrossVF(c.SubtractVV(x,w),1),this.m_axis.Normalize(),L=this.m_axis,K=i.R,y=K.col1.x*L.x+K.col2.x*L.y,z=K.col1.y*L.x+K.col2.y*L.y,L=this.m_localPoint,K=i.R,E=i.position.x+(K.col1.x*L.x+K.col2.x*L.y),F=i.position.y+(K.col1.y*L.x+K.col2.y*L.y),L=s,K=g.R,C=g.position.x+(K.col1.x*L.x+K.col2.x*L.y),D=g.position.y+(K.col1.y*L.x+K.col2.y*L.y),H=(C-E)*y+(D-F)*z,0>H&&this.m_axis.NegativeSelf()):(t=this.m_proxyA.GetVertex(b.indexA[0]),u=this.m_proxyA.GetVertex(b.indexA[1]),w=this.m_proxyB.GetVertex(b.indexB[0]),x=this.m_proxyB.GetVertex(b.indexB[1]),A=c.MulX(g,s),n=c.MulMV(g.R,c.SubtractVV(u,t)),B=c.MulX(i,v),o=c.MulMV(i.R,c.SubtractVV(x,w)),j=n.x*n.x+n.y*n.y,q=o.x*o.x+o.y*o.y,G=c.SubtractVV(o,n),l=n.x*G.x+n.y*G.y,r=o.x*G.x+o.y*G.y,k=n.x*o.x+n.y*o.y,p=j*q-k*k,H=0,0!==p&&(H=c.Clamp((k*r-l*q)/p,0,1)),J=(k*H+r)/q,0>J&&(J=0,H=c.Clamp((k-l)/j,0,1)),s=new e,s.x=t.x+H*(u.x-t.x),s.y=t.y+H*(u.y-t.y),v=new e,v.x=w.x+H*(x.x-w.x),v.y=w.y+H*(x.y-w.y),0===H||1===H?(this.m_type=a.e_faceB,this.m_axis=c.CrossVF(c.SubtractVV(x,w),1),this.m_axis.Normalize(),this.m_localPoint=v,L=this.m_axis,K=i.R,y=K.col1.x*L.x+K.col2.x*L.y,z=K.col1.y*L.x+K.col2.y*L.y,L=this.m_localPoint,K=i.R,E=i.position.x+(K.col1.x*L.x+K.col2.x*L.y),F=i.position.y+(K.col1.y*L.x+K.col2.y*L.y),L=s,K=g.R,C=g.position.x+(K.col1.x*L.x+K.col2.x*L.y),D=g.position.y+(K.col1.y*L.x+K.col2.y*L.y),I=(C-E)*y+(D-F)*z,0>H&&this.m_axis.NegativeSelf()):(this.m_type=a.e_faceA,this.m_axis=c.CrossVF(c.SubtractVV(u,t),1),this.m_localPoint=s,L=this.m_axis,K=g.R,y=K.col1.x*L.x+K.col2.x*L.y,z=K.col1.y*L.x+K.col2.y*L.y,L=this.m_localPoint,K=g.R,C=g.position.x+(K.col1.x*L.x+K.col2.x*L.y),D=g.position.y+(K.col1.y*L.x+K.col2.y*L.y),L=v,K=i.R,E=i.position.x+(K.col1.x*L.x+K.col2.x*L.y),F=i.position.y+(K.col1.y*L.x+K.col2.y*L.y),I=(E-C)*y+(F-D)*z,0>H&&this.m_axis.NegativeSelf()))},a.prototype.Evaluate=function(b,e){var f,g,h,i,j,k,l,m;switch(f=void 0,g=void 0,h=void 0,i=void 0,k=void 0,l=void 0,m=0,j=void 0,this.m_type){case a.e_points:return f=c.MulTMV(b.R,this.m_axis),g=c.MulTMV(e.R,this.m_axis.GetNegative()),h=this.m_proxyA.GetSupportVertex(f),i=this.m_proxyB.GetSupportVertex(g),k=c.MulX(b,h),l=c.MulX(e,i),m=(l.x-k.x)*this.m_axis.x+(l.y-k.y)*this.m_axis.y;case a.e_faceA:return j=c.MulMV(b.R,this.m_axis),k=c.MulX(b,this.m_localPoint),g=c.MulTMV(e.R,j.GetNegative()),i=this.m_proxyB.GetSupportVertex(g),l=c.MulX(e,i),m=(l.x-k.x)*j.x+(l.y-k.y)*j.y;case a.e_faceB:return j=c.MulMV(e.R,this.m_axis),l=c.MulX(e,this.m_localPoint),f=c.MulTMV(b.R,j.GetNegative()),h=this.m_proxyA.GetSupportVertex(f),k=c.MulX(b,h),m=(k.x-l.x)*j.x+(k.y-l.y)*j.y;default:return d.b2Assert(!1),0}},a.e_points=1,a.e_faceA=2,a.e_faceB=4,a}()
},{"../index":103}],24:[function(a){var b,c,d,e,f;b=a("../index"),d=b.Common.b2Settings,c=b.Common.Math.b2Math,f=b.Common.Math.b2Vec2,e=b.Collision.b2SimplexVertex,b.Collision.b2Simplex=function(){function a(){this.m_v1=new e,this.m_v2=new e,this.m_v3=new e,this.m_vertices=new Array(3),this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}return a.prototype.m_v1=null,a.prototype.m_v2=null,a.prototype.m_v3=null,a.prototype.m_vertices=null,a.prototype.m_count=0,a.prototype.ReadCache=function(a,b,e,f,g){var h,i,j,k,l,m,n;for(d.b2Assert(0<=a.count&&a.count<=3),m=void 0,n=void 0,this.m_count=a.count,l=this.m_vertices,h=0;h<this.m_count;)k=l[h],k.indexA=a.indexA[h],k.indexB=a.indexB[h],m=b.GetVertex(k.indexA),n=f.GetVertex(k.indexB),k.wA=c.MulX(e,m),k.wB=c.MulX(g,n),k.w=c.SubtractVV(k.wB,k.wA),k.a=0,h++;this.m_count>1&&(i=a.metric,j=this.GetMetric(),(.5*i>j||j>2*i||j<Number.MIN_VALUE)&&(this.m_count=0)),0===this.m_count&&(k=l[0],k.indexA=0,k.indexB=0,m=b.GetVertex(0),n=f.GetVertex(0),k.wA=c.MulX(e,m),k.wB=c.MulX(g,n),k.w=c.SubtractVV(k.wB,k.wA),this.m_count=1)},a.prototype.WriteCache=function(a){var c,d;for(a.metric=this.GetMetric(),a.count=b.parseUInt(this.m_count),d=this.m_vertices,c=0;c<this.m_count;)a.indexA[c]=b.parseUInt(d[c].indexA),a.indexB[c]=b.parseUInt(d[c].indexB),c++},a.prototype.GetSearchDirection=function(){var a,b;switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:return a=c.SubtractVV(this.m_v2.w,this.m_v1.w),b=c.CrossVV(a,this.m_v1.w.GetNegative()),b>0?c.CrossFV(1,a):c.CrossVF(a,1);default:return d.b2Assert(!1),new f}},a.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return d.b2Assert(!1),new f;case 1:return this.m_v1.w;case 2:return new f(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return d.b2Assert(!1),new f}},a.prototype.GetWitnessPoints=function(a,b){switch(this.m_count){case 0:return d.b2Assert(!1);case 1:return a.SetV(this.m_v1.wA),b.SetV(this.m_v1.wB);case 2:return a.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,a.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,b.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,b.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;case 3:return b.x=a.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,b.y=a.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;default:return d.b2Assert(!1)}},a.prototype.GetMetric=function(){switch(this.m_count){case 0:return d.b2Assert(!1),0;case 1:return 0;case 2:return c.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return c.CrossVV(c.SubtractVV(this.m_v2.w,this.m_v1.w),c.SubtractVV(this.m_v3.w,this.m_v1.w));default:return d.b2Assert(!1),0}},a.prototype.Solve2=function(){var a,b,d,e,f,g;return f=this.m_v1.w,g=this.m_v2.w,d=c.SubtractVV(g,f),b=-(f.x*d.x+f.y*d.y),0>=b?(this.m_v1.a=1,void(this.m_count=1)):(a=g.x*d.x+g.y*d.y,0>=a?(this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2)):(e=1/(a+b),this.m_v1.a=a*e,this.m_v2.a=b*e,void(this.m_count=2)))},a.prototype.Solve3=function(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return s=this.m_v1.w,v=this.m_v2.w,y=this.m_v3.w,k=c.SubtractVV(v,s),t=c.Dot(s,k),w=c.Dot(v,k),e=w,f=-t,l=c.SubtractVV(y,s),u=c.Dot(s,l),z=c.Dot(y,l),g=z,h=-u,m=c.SubtractVV(y,v),x=c.Dot(v,m),A=c.Dot(y,m),i=A,j=-x,r=c.CrossVV(k,l),a=r*c.CrossVV(v,y),b=r*c.CrossVV(y,s),d=r*c.CrossVV(s,v),0>=f&&0>=h?(this.m_v1.a=1,void(this.m_count=1)):e>0&&f>0&&0>=d?(n=1/(e+f),this.m_v1.a=e*n,this.m_v2.a=f*n,void(this.m_count=2)):g>0&&h>0&&0>=b?(p=1/(g+h),this.m_v1.a=g*p,this.m_v3.a=h*p,this.m_count=2,void this.m_v2.Set(this.m_v3)):0>=e&&0>=j?(this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2)):0>=g&&0>=i?(this.m_v3.a=1,this.m_count=1,void this.m_v1.Set(this.m_v3)):i>0&&j>0&&0>=a?(q=1/(i+j),this.m_v2.a=i*q,this.m_v3.a=j*q,this.m_count=2,void this.m_v1.Set(this.m_v3)):(o=1/(a+b+d),this.m_v1.a=a*o,this.m_v2.a=b*o,this.m_v3.a=d*o,void(this.m_count=3))},a}()},{"../index":103}],25:[function(a){var b,c;b=a("../index"),c=b.Vector,b.Collision.b2SimplexCache=function(){function a(){this.indexA=new c(3),this.indexB=new c(3)}return a.prototype.indexA=null,a.prototype.indexB=null,a}()},{"../index":103}],26:[function(a){var b;b=a("../index"),b.Collision.b2SimplexVertex=function(){function a(){}return a.prototype.Set=function(a){this.wA.SetV(a.wA),this.wB.SetV(a.wB),this.w.SetV(a.w),this.a=a.a,this.indexA=a.indexA,this.indexB=a.indexB},a}()},{"../index":103}],27:[function(a){var b,c,d;b=a("../index"),d=b.Common.Math.b2Sweep,c=b.Collision.b2DistanceProxy,b.Collision.b2TOIInput=function(){function a(){this.proxyA=new c,this.proxyB=new c,this.sweepA=new d,this.sweepB=new d}return a.prototype.proxyA=null,a.prototype.proxyB=null,a.prototype.sweepA=null,a.prototype.sweepB=null,a}()},{"../index":103}],28:[function(a){var b,c,d,e,f,g,h,i,j;b=a("../index"),h=b.Common.b2Settings,f=b.Common.Math.b2Math,j=b.Common.Math.b2Transform,c=b.Collision.b2Distance,i=b.Collision.b2SimplexCache,g=b.Collision.b2SeparationFunction,e=b.Collision.b2DistanceOutput,d=b.Collision.b2DistanceInput,b.Collision.b2TimeOfImpact=function(){function a(){}return a.b2_toiCalls=0,a.b2_toiIters=0,a.b2_toiMaxIters=0,a.b2_toiRootIters=0,a.b2_toiMaxRootIters=0,a.s_cache=new i,a.s_distanceInput=new d,a.s_xfA=new j,a.s_xfB=new j,a.s_fcn=new g,a.s_distanceOutput=new e,a.TimeOfImpact=function(b){var d,e,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;for(++a.b2_toiCalls,m=b.proxyA,n=b.proxyB,r=b.sweepA,s=b.sweepB,h.b2Assert(r.t0===s.t0),h.b2Assert(1-r.t0>Number.MIN_VALUE),o=m.m_radius+n.m_radius,u=b.tolerance,d=0,k=1e3,j=0,t=0,a.s_cache.count=0,a.s_distanceInput.useRadii=!1;;){if(r.GetTransform(a.s_xfA,d),s.GetTransform(a.s_xfB,d),a.s_distanceInput.proxyA=m,a.s_distanceInput.proxyB=n,a.s_distanceInput.transformA=a.s_xfA,a.s_distanceInput.transformB=a.s_xfB,c.Distance(a.s_distanceOutput,a.s_cache,a.s_distanceInput),a.s_distanceOutput.distance<=0){d=1;break}if(a.s_fcn.Initialize(a.s_cache,m,a.s_xfA,n,a.s_xfB),q=a.s_fcn.Evaluate(a.s_xfA,a.s_xfB),0>=q){d=1;break}if(0===j&&(t=q>o?f.Max(o-u,.75*o):f.Max(q-u,.02*o)),.5*u>q-t){if(0===j){d=1;break}break}if(l=d,w=d,x=1,g=q,r.GetTransform(a.s_xfA,x),s.GetTransform(a.s_xfB,x),i=a.s_fcn.Evaluate(a.s_xfA,a.s_xfB),i>=t){d=1;break}for(p=0;;){if(v=0,v=1&p?w+(t-g)*(x-w)/(i-g):.5*(w+x),r.GetTransform(a.s_xfA,v),s.GetTransform(a.s_xfB,v),e=a.s_fcn.Evaluate(a.s_xfA,a.s_xfB),f.Abs(e-t)<.025*u){l=v;break}if(e>t?(w=v,g=e):(x=v,i=e),++p,++a.b2_toiRootIters,50===p)break}if(a.b2_toiMaxRootIters=f.Max(a.b2_toiMaxRootIters,p),l<(1+100*Number.MIN_VALUE)*d)break;if(d=l,j++,++a.b2_toiIters,j===k)break}return a.b2_toiMaxIters=f.Max(a.b2_toiMaxIters,j),d},a}()},{"../index":103}],29:[function(a){var b,c,d,e;b=a("../index"),d=b.Common.b2Settings,e=b.Common.Math.b2Vec2,c=b.Collision.b2Manifold,b.Collision.b2WorldManifold=function(){function a(){var a;for(this.m_normal=new e,this.m_points=new Array(d.b2_maxManifoldPoints),a=0;a<d.b2_maxManifoldPoints;)this.m_points[a]=new e,a++}return a.prototype.m_normal=null,a.prototype.m_points=null,a.prototype.Initialize=function(a,b,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;if(void 0===d&&(d=0),void 0===f&&(f=0),0!==a.m_pointCount)switch(q=0,A=void 0,z=void 0,r=0,s=0,t=0,u=0,k=0,l=0,a.m_type){case c.e_circles:return z=b.R,A=a.m_localPoint,v=b.position.x+z.col1.x*A.x+z.col2.x*A.y,w=b.position.y+z.col1.y*A.x+z.col2.y*A.y,z=e.R,A=a.m_points[0].m_localPoint,x=e.position.x+z.col1.x*A.x+z.col2.x*A.y,y=e.position.y+z.col1.y*A.x+z.col2.y*A.y,o=x-v,p=y-w,n=o*o+p*p,n>Number.MIN_VALUE*Number.MIN_VALUE?(m=Math.sqrt(n),this.m_normal.x=o/m,this.m_normal.y=p/m):(this.m_normal.x=1,this.m_normal.y=0),g=v+d*this.m_normal.x,h=w+d*this.m_normal.y,i=x-f*this.m_normal.x,j=y-f*this.m_normal.y,this.m_points[0].x=.5*(g+i),this.m_points[0].y=.5*(h+j);case c.e_faceA:for(z=b.R,A=a.m_localPlaneNormal,r=z.col1.x*A.x+z.col2.x*A.y,s=z.col1.y*A.x+z.col2.y*A.y,z=b.R,A=a.m_localPoint,t=b.position.x+z.col1.x*A.x+z.col2.x*A.y,u=b.position.y+z.col1.y*A.x+z.col2.y*A.y,this.m_normal.x=r,this.m_normal.y=s,q=0,B=[];q<a.m_pointCount;)z=e.R,A=a.m_points[q].m_localPoint,k=e.position.x+z.col1.x*A.x+z.col2.x*A.y,l=e.position.y+z.col1.y*A.x+z.col2.y*A.y,this.m_points[q].x=k+.5*(d-(k-t)*r-(l-u)*s-f)*r,this.m_points[q].y=l+.5*(d-(k-t)*r-(l-u)*s-f)*s,B.push(q++);return B;case c.e_faceB:for(z=e.R,A=a.m_localPlaneNormal,r=z.col1.x*A.x+z.col2.x*A.y,s=z.col1.y*A.x+z.col2.y*A.y,z=e.R,A=a.m_localPoint,t=e.position.x+z.col1.x*A.x+z.col2.x*A.y,u=e.position.y+z.col1.y*A.x+z.col2.y*A.y,this.m_normal.x=-r,this.m_normal.y=-s,q=0,C=[];q<a.m_pointCount;)z=b.R,A=a.m_points[q].m_localPoint,k=b.position.x+z.col1.x*A.x+z.col2.x*A.y,l=b.position.y+z.col1.y*A.x+z.col2.y*A.y,this.m_points[q].x=k+.5*(f-(k-t)*r-(l-u)*s-d)*r,this.m_points[q].y=l+.5*(f-(k-t)*r-(l-u)*s-d)*s,C.push(q++);return C}},a}()},{"../index":103}],30:[function(a){var b,c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),d=b.Common.b2Settings,c=b.Common.Math.b2Math,f=b.Common.Math.b2Vec2,e=b.Collision.Shapes.b2Shape,b.Collision.Shapes.b2CircleShape=function(a){function g(a){void 0===a&&(a=0),g.__super__.constructor.call(this,a),this.m_p=new f,this.m_type=e.e_circleShape,this.m_radius=a}return h(g,a),g.prototype.m_type=e.e_circleShape,g.prototype.m_p=null,g.prototype.Copy=function(){var a;return a=new g,a.Set(this),a},g.prototype.Set=function(a){var c;g.__super__.Set.call(this,a),b.equals(a,g)&&(c=a instanceof g?a:null,this.m_p.SetV(c.m_p))},g.prototype.TestPoint=function(a,b){var c,d,e;return e=a.R,c=a.position.x+(e.col1.x*this.m_p.x+e.col2.x*this.m_p.y),d=a.position.y+(e.col1.y*this.m_p.x+e.col2.y*this.m_p.y),c=b.x-c,d=b.y-d,c*c+d*d<=this.m_radius*this.m_radius},g.prototype.RayCast=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;return o=c.R,g=c.position.x+(o.col1.x*this.m_p.x+o.col2.x*this.m_p.y),h=c.position.y+(o.col1.y*this.m_p.x+o.col2.y*this.m_p.y),l=b.p1.x-g,m=b.p1.y-h,e=l*l+m*m-this.m_radius*this.m_radius,i=b.p2.x-b.p1.x,j=b.p2.y-b.p1.y,f=l*i+m*j,k=i*i+j*j,n=f*f-k*e,0>n||k<Number.MIN_VALUE?!1:(d=-(f+Math.sqrt(n)),d>=0&&d<=b.maxFraction*k?(d/=k,a.fraction=d,a.normal.x=l+d*i,a.normal.y=m+d*j,a.normal.Normalize(),!0):!1)},g.prototype.ComputeAABB=function(a,b){var c,d,e;e=b.R,c=b.position.x+(e.col1.x*this.m_p.x+e.col2.x*this.m_p.y),d=b.position.y+(e.col1.y*this.m_p.x+e.col2.y*this.m_p.y),a.lowerBound.Set(c-this.m_radius,d-this.m_radius),a.upperBound.Set(c+this.m_radius,d+this.m_radius)},g.prototype.ComputeMass=function(a,b){void 0===b&&(b=0),a.mass=b*d.b2_pi*this.m_radius*this.m_radius,a.center.SetV(this.m_p),a.I=a.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},g.prototype.ComputeSubmergedArea=function(a,b,d,e){var f,g,h,i,j,k;return void 0===b&&(b=0),j=c.MulX(d,this.m_p),h=-(c.Dot(a,j)-b),h<-this.m_radius+Number.MIN_VALUE?0:h>this.m_radius?(e.SetV(j),Math.PI*this.m_radius*this.m_radius):(k=this.m_radius*this.m_radius,i=h*h,f=k*(Math.asin(h/this.m_radius)+Math.PI/2)+h*Math.sqrt(k-i),g=-2/3*Math.pow(k-i,1.5)/f,e.x=j.x+a.x*g,e.y=j.y+a.y*g,f)},g.prototype.GetLocalPosition=function(){return this.m_p},g.prototype.SetLocalPosition=function(a){this.m_p.SetV(a)},g.prototype.GetRadius=function(){return this.m_radius},g.prototype.SetRadius=function(a){void 0===a&&(a=0),this.m_radius=a},g}(e)},{"../../index":103}],31:[function(a){var b;b=a("../../index"),b.Collision.Shapes.b2EdgeChainDef=function(){function a(){this.vertices=[]}return a.prototype.vertexCount=0,a.prototype.isALoop=!0,a.prototype.vertices=null,a}()},{"../../index":103}],32:[function(a){var b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Collision.Shapes.b2Shape,b.Collision.Shapes.b2EdgeShape=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.s_supportVec=new b2Vec2,this.m_v1=new b2Vec2,this.m_v2=new b2Vec2,this.m_coreV1=new b2Vec2,this.m_coreV2=new b2Vec2,this.m_normal=new b2Vec2,this.m_direction=new b2Vec2,this.m_cornerDir1=new b2Vec2,this.m_cornerDir2=new b2Vec2,this.m_type=c.e_edgeShape,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=v1,this.m_v2=v2,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-b2Settings.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-b2Settings.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-b2Settings.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-b2Settings.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)}return e(b,a),b.prototype.TestPoint=function(){return!1},b.prototype.RayCast=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;return o=void 0,m=b.p2.x-b.p1.x,n=b.p2.y-b.p1.y,o=c.R,p=c.position.x+(o.col1.x*this.m_v1.x+o.col2.x*this.m_v1.y),q=c.position.y+(o.col1.y*this.m_v1.x+o.col2.y*this.m_v1.y),k=c.position.y+(o.col1.y*this.m_v2.x+o.col2.y*this.m_v2.y)-q,l=-(c.position.x+(o.col1.x*this.m_v2.x+o.col2.x*this.m_v2.y)-p),h=100*Number.MIN_VALUE,g=-(m*k+n*l),g>h&&(e=b.p1.x-p,f=b.p1.y-q,d=e*k+f*l,d>=0&&d<=b.maxFraction*g&&(i=-m*f+n*e,i>=-h*g&&g*(1+h)>=i))?(d/=g,a.fraction=d,j=Math.sqrt(k*k+l*l),a.normal.x=k/j,a.normal.y=l/j,!0):!1},b.prototype.ComputeAABB=function(a,b){var c,d,e,f,g;c=b.R,d=b.position.x+(c.col1.x*this.m_v1.x+c.col2.x*this.m_v1.y),e=b.position.y+(c.col1.y*this.m_v1.x+c.col2.y*this.m_v1.y),f=b.position.x+(c.col1.x*this.m_v2.x+c.col2.x*this.m_v2.y),g=b.position.y+(c.col1.y*this.m_v2.x+c.col2.y*this.m_v2.y),f>d?(a.lowerBound.x=d,a.upperBound.x=f):(a.lowerBound.x=f,a.upperBound.x=d),g>e?(a.lowerBound.y=e,a.upperBound.y=g):(a.lowerBound.y=g,a.upperBound.y=e)},b.prototype.ComputeMass=function(a,b){void 0===b&&(b=0),a.mass=0,a.center.SetV(this.m_v1),a.I=0},b.prototype.ComputeSubmergedArea=function(a,b,c,d){var e,f,g,h,i;if(void 0===b&&(b=0),g=new b2Vec2(a.x*b,a.y*b),h=b2Math.MulX(c,this.m_v1),i=b2Math.MulX(c,this.m_v2),e=b2Math.Dot(a,h)-b,f=b2Math.Dot(a,i)-b,e>0){if(f>0)return 0;h.x=-f/(e-f)*h.x+e/(e-f)*i.x,h.y=-f/(e-f)*h.y+e/(e-f)*i.y}else f>0&&(i.x=-f/(e-f)*h.x+e/(e-f)*i.x,i.y=-f/(e-f)*h.y+e/(e-f)*i.y);return d.x=(g.x+h.x+i.x)/3,d.y=(g.y+h.y+i.y)/3,.5*((h.x-g.x)*(i.y-g.y)-(h.y-g.y)*(i.x-g.x))},b.prototype.GetLength=function(){return this.m_length},b.prototype.GetVertex1=function(){return this.m_v1},b.prototype.GetVertex2=function(){return this.m_v2},b.prototype.GetCoreVertex1=function(){return this.m_coreV1},b.prototype.GetCoreVertex2=function(){return this.m_coreV2},b.prototype.GetNormalVector=function(){return this.m_normal},b.prototype.GetDirectionVector=function(){return this.m_direction},b.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},b.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},b.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},b.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},b.prototype.GetFirstVertex=function(a){var b;return b=a.R,new b2Vec2(a.position.x+(b.col1.x*this.m_coreV1.x+b.col2.x*this.m_coreV1.y),a.position.y+(b.col1.y*this.m_coreV1.x+b.col2.y*this.m_coreV1.y))},b.prototype.GetNextEdge=function(){return this.m_nextEdge},b.prototype.GetPrevEdge=function(){return this.m_prevEdge},b.prototype.Support=function(a,b,c){var d,e,f,g,h;return void 0===b&&(b=0),void 0===c&&(c=0),d=a.R,e=a.position.x+(d.col1.x*this.m_coreV1.x+d.col2.x*this.m_coreV1.y),f=a.position.y+(d.col1.y*this.m_coreV1.x+d.col2.y*this.m_coreV1.y),g=a.position.x+(d.col1.x*this.m_coreV2.x+d.col2.x*this.m_coreV2.y),h=a.position.y+(d.col1.y*this.m_coreV2.x+d.col2.y*this.m_coreV2.y),e*b+f*c>g*b+h*c?(this.s_supportVec.x=e,this.s_supportVec.y=f):(this.s_supportVec.x=g,this.s_supportVec.y=h),this.s_supportVec},b.prototype.SetPrevEdge=function(a,b,c,d){this.m_prevEdge=a,this.m_coreV1=b,this.m_cornerDir1=c,this.m_cornerConvex1=d},b.prototype.SetNextEdge=function(a,b,c,d){this.m_nextEdge=a,this.m_coreV2=b,this.m_cornerDir2=c,this.m_cornerConvex2=d},b}(c)},{"../../index":103}],33:[function(a){var b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Collision.Shapes.b2Shape,d=b.Common.Math.b2Vec2,b.Collision.Shapes.b2MassData=function(a){function b(){this.center=new d(0,0)}return f(b,a),b.prototype.mass=0,b.prototype.center=null,b.prototype.I=0,b}(c)},{"../../index":103}],34:[function(a){var b,c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Vector,f=b.Common.b2Settings,e=b.Common.Math.b2Math,d=b.Common.Math.b2Mat22,i=b.Common.Math.b2Vec2,h=b.Common.Math.b2Transform,g=b.Collision.Shapes.b2Shape,b.Collision.Shapes.b2PolygonShape=function(a){function j(){this.m_centroid=new i,this.m_vertices=new Array,this.m_normals=new Array}return k(j,a),j.s_mat=new d,j.prototype.m_type=g.e_polygonShape,j.prototype.m_centroid=null,j.prototype.m_vertices=null,j.prototype.m_normals=null,j.prototype.m_vertexCount=0,j.prototype.Copy=function(){var a;return a=new j,a.Set(this),a},j.prototype.Set=function(a){var c,d;if(j.__super__.Set.call(this,a),b.equals(a,j))for(d=a instanceof j?a:null,this.m_centroid.SetV(d.m_centroid),this.m_vertexCount=d.m_vertexCount,this.Reserve(this.m_vertexCount),c=0;c<this.m_vertexCount;)this.m_vertices[c].SetV(d.m_vertices[c]),this.m_normals[c].SetV(d.m_normals[c]),c++},j.prototype.SetAsArray=function(a,b){var c,d,e;for(void 0===b&&(b=0),e=new Array,c=0,d=void 0,c=0;c<a.length;)d=a[c],e.push(d),++c;this.SetAsVector(e,b)},j.AsArray=function(a,b){var c;return void 0===b&&(b=0),c=new j,c.SetAsArray(a,b),c},j.prototype.SetAsVector=function(a,b){var c,d,g,h;for(void 0===b&&(b=0),0===b&&(b=a.length),f.b2Assert(b>=2),this.m_vertexCount=b,this.Reserve(b),d=0,d=0;d<this.m_vertexCount;)this.m_vertices[d].SetV(a[d]),d++;for(d=0;d<this.m_vertexCount;)g=parseInt(d),h=parseInt(d+1<this.m_vertexCount?d+1:0),c=e.SubtractVV(this.m_vertices[h],this.m_vertices[g]),f.b2Assert(c.LengthSquared()>Number.MIN_VALUE),this.m_normals[d].SetV(e.CrossVF(c,1)),this.m_normals[d].Normalize(),++d;this.m_centroid=j.ComputeCentroid(this.m_vertices,this.m_vertexCount)},j.AsVector=function(a,b){var c;return void 0===b&&(b=0),c=new j,c.SetAsVector(a,b),c},j.prototype.SetAsBox=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-a,-b),this.m_vertices[1].Set(a,-b),this.m_vertices[2].Set(a,b),this.m_vertices[3].Set(-a,b),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},j.AsBox=function(a,b){var c;return void 0===a&&(a=0),void 0===b&&(b=0),c=new j,c.SetAsBox(a,b),c},j.prototype.SetAsOrientedBox=function(a,b,c,d){var f,g;for(void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=null),void 0===d&&(d=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-a,-b),this.m_vertices[1].Set(a,-b),this.m_vertices[2].Set(a,b),this.m_vertices[3].Set(-a,b),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=c,g=new h,g.position=c,g.R.Set(d),f=0;f<this.m_vertexCount;)this.m_vertices[f]=e.MulX(g,this.m_vertices[f]),this.m_normals[f]=e.MulMV(g.R,this.m_normals[f]),++f},j.AsOrientedBox=function(a,b,c,d){var e;return void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=null),void 0===d&&(d=0),e=new j,e.SetAsOrientedBox(a,b,c,d),e},j.prototype.SetAsEdge=function(a,b){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(a),this.m_vertices[1].SetV(b),this.m_centroid.x=.5*(a.x+b.x),this.m_centroid.y=.5*(a.y+b.y),this.m_normals[0]=e.CrossVF(e.SubtractVV(b,a),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},j.AsEdge=function(a,b){var c;return c=new j,c.SetAsEdge(a,b),c},j.prototype.TestPoint=function(a,b){var c,d,e,f,g,h,i,j;for(h=void 0,g=a.R,i=b.x-a.position.x,j=b.y-a.position.y,e=i*g.col1.x+j*g.col1.y,f=i*g.col2.x+j*g.col2.y,d=0;d<this.m_vertexCount;){if(h=this.m_vertices[d],i=e-h.x,j=f-h.y,h=this.m_normals[d],c=h.x*i+h.y*j,c>0)return!1;++d}return!0},j.prototype.RayCast=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(i=0,s=b.maxFraction,q=0,r=0,o=void 0,p=void 0,q=b.p1.x-c.position.x,r=b.p1.y-c.position.y,o=c.R,k=q*o.col1.x+r*o.col1.y,l=q*o.col2.x+r*o.col2.y,q=b.p2.x-c.position.x,r=b.p2.y-c.position.y,o=c.R,m=q*o.col1.x+r*o.col1.y,n=q*o.col2.x+r*o.col2.y,d=m-k,e=n-l,h=parseInt(-1),g=0;g<this.m_vertexCount;){if(p=this.m_vertices[g],q=p.x-k,r=p.y-l,p=this.m_normals[g],j=p.x*q+p.y*r,f=p.x*d+p.y*e,0===f){if(0>j)return!1}else 0>f&&i*f>j?(i=j/f,h=g):f>0&&s*f>j&&(s=j/f);if(s<i-Number.MIN_VALUE)return!1;++g}return h>=0?(a.fraction=i,o=c.R,p=this.m_normals[h],a.normal.x=o.col1.x*p.x+o.col2.x*p.y,a.normal.y=o.col1.y*p.x+o.col2.y*p.y,!0):!1},j.prototype.ComputeAABB=function(a,b){var c,d,e,f,g,h,i,j,k;for(f=b.R,g=this.m_vertices[0],d=b.position.x+(f.col1.x*g.x+f.col2.x*g.y),e=b.position.y+(f.col1.y*g.x+f.col2.y*g.y),h=d,i=e,c=1;c<this.m_vertexCount;)g=this.m_vertices[c],j=b.position.x+(f.col1.x*g.x+f.col2.x*g.y),k=b.position.y+(f.col1.y*g.x+f.col2.y*g.y),d=j>d?d:j,e=k>e?e:k,h=h>j?h:j,i=i>k?i:k,++c;a.lowerBound.x=d-this.m_radius,a.lowerBound.y=e-this.m_radius,a.upperBound.x=h+this.m_radius,a.upperBound.y=i+this.m_radius},j.prototype.ComputeMass=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(void 0===b&&(b=0),2===this.m_vertexCount)return a.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),a.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),a.mass=0,void(a.I=0);for(f=0,g=0,e=0,d=0,t=0,u=0,s=1/3,p=0;p<this.m_vertexCount;)v=this.m_vertices[p],w=p+1<this.m_vertexCount?this.m_vertices[parseInt(p+1)]:this.m_vertices[0],h=v.x-t,i=v.y-u,j=w.x-t,k=w.y-u,c=h*k-i*j,z=.5*c,e+=z,f+=z*s*(t+v.x+w.x),g+=z*s*(u+v.y+w.y),x=t,y=u,l=h,n=i,m=j,o=k,q=s*(.25*(l*l+m*l+m*m)+(x*l+x*m))+.5*x*x,r=s*(.25*(n*n+o*n+o*o)+(y*n+y*o))+.5*y*y,d+=c*(q+r),++p;a.mass=b*e,f*=1/e,g*=1/e,a.center.Set(f,g),a.I=b*d},j.prototype.ComputeSubmergedArea=function(a,b,d,f){var g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;for(void 0===b&&(b=0),t=e.MulTMV(d.R,a),u=b-e.Dot(a,d.position),j=new c,k=0,m=parseInt(-1),v=parseInt(-1),r=!1,l=0,l=0;l<this.m_vertexCount;)j[l]=e.Dot(t,this.m_vertices[l])-u,q=j[l]<-Number.MIN_VALUE,l>0&&(q?r||(m=l-1,k++):r&&(v=l-1,k++)),r=q,++l;switch(k){case 0:return r?(s=new b2MassData,this.ComputeMass(s,1),f.SetV(e.MulX(d,s.center)),s.mass):0;case 1:-1===m?m=this.m_vertexCount-1:v=this.m_vertexCount-1}for(n=parseInt((m+1)%this.m_vertexCount),w=parseInt((v+1)%this.m_vertexCount),o=(0-j[m])/(j[n]-j[m]),x=(0-j[v])/(j[w]-j[v]),p=new i(this.m_vertices[m].x*(1-o)+this.m_vertices[n].x*o,this.m_vertices[m].y*(1-o)+this.m_vertices[n].y*o),y=new i(this.m_vertices[v].x*(1-x)+this.m_vertices[w].x*x,this.m_vertices[v].y*(1-x)+this.m_vertices[w].y*x),g=0,h=new i,z=this.m_vertices[n],A=void 0,l=n;l!==w;)l=(l+1)%this.m_vertexCount,A=l===w?y:this.m_vertices[l],B=.5*((z.x-p.x)*(A.y-p.y)-(z.y-p.y)*(A.x-p.x)),g+=B,h.x+=B*(p.x+z.x+A.x)/3,h.y+=B*(p.y+z.y+A.y)/3,z=A;return h.Multiply(1/g),f.SetV(e.MulX(d,h)),g},j.prototype.GetVertexCount=function(){return this.m_vertexCount},j.prototype.GetVertices=function(){return this.m_vertices},j.prototype.GetNormals=function(){return this.m_normals},j.prototype.GetSupport=function(a){var b,c,d,e;for(b=0,c=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,d=1;d<this.m_vertexCount;)e=this.m_vertices[d].x*a.x+this.m_vertices[d].y*a.y,e>c&&(b=d,c=e),++d;return b},j.prototype.GetSupportVertex=function(a){var b,c,d,e;for(b=0,c=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,d=1;d<this.m_vertexCount;)e=this.m_vertices[d].x*a.x+this.m_vertices[d].y*a.y,e>c&&(b=d,c=e),++d;return this.m_vertices[b]},j.prototype.Validate=function(){return!1},j.prototype.Reserve=function(a){var b;for(void 0===a&&(a=0),b=parseInt(this.m_vertices.length);a>b;)this.m_vertices[b]=new i,this.m_normals[b]=new i,b++},j.ComputeCentroid=function(a,b){var c,d,e,f,g,h,j,k,l,m,n,o,p,q;for(void 0===b&&(b=0),e=new i,d=0,m=0,n=0,l=1/3,k=0;b>k;)o=a[k],p=b>k+1?a[parseInt(k+1)]:a[0],f=o.x-m,g=o.y-n,h=p.x-m,j=p.y-n,c=f*j-g*h,q=.5*c,d+=q,e.x+=q*l*(m+o.x+p.x),e.y+=q*l*(n+o.y+p.y),++k;return e.x*=1/d,e.y*=1/d,e},j.ComputeOBB=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(void 0===c&&(c=0),i=0,o=new Array(c+1),i=0;c>i;)o[i]=b[i],++i;for(o[c]=o[0],n=Number.MAX_VALUE,i=1;c>=i;){for(r=o[parseInt(i-1)],v=o[i].x-r.x,w=o[i].y-r.y,k=Math.sqrt(v*v+w*w),v/=k,w/=k,x=-w,y=v,l=Number.MAX_VALUE,m=Number.MAX_VALUE,t=-Number.MAX_VALUE,u=-Number.MAX_VALUE,j=0;c>j;)g=o[j].x-r.x,h=o[j].y-r.y,p=v*g+w*h,q=x*g+y*h,l>p&&(l=p),m>q&&(m=q),p>t&&(t=p),q>u&&(u=q),++j;d=(t-l)*(u-m),.95*n>d&&(n=d,a.R.col1.x=v,a.R.col1.y=w,a.R.col2.x=x,a.R.col2.y=y,e=.5*(l+t),f=.5*(m+u),s=a.R,a.center.x=r.x+(s.col1.x*e+s.col2.x*f),a.center.y=r.y+(s.col1.y*e+s.col2.y*f),a.extents.x=.5*(t-l),a.extents.y=.5*(u-m)),++i}},j}(g)},{"../../index":103}],35:[function(a){var b,c,d,e,f,g,h;b=a("../../index"),g=b.Common.b2Settings,h=b.Collision.b2SimplexCache,c=b.Collision.b2Distance,e=b.Collision.b2DistanceOutput,d=b.Collision.b2DistanceInput,f=b.Collision.b2DistanceProxy,b.Collision.Shapes.b2Shape=function(){function a(){}return a.e_unknownShape=parseInt(-1),a.e_circleShape=0,a.e_polygonShape=1,a.e_edgeShape=2,a.e_shapeTypeCount=3,a.e_hitCollide=1,a.e_missCollide=0,a.e_startsInsideCollide=parseInt(-1),a.prototype.m_type=a.e_unknownShape,a.prototype.m_radius=g.b2_linearSlop,a.prototype.Copy=function(){return null},a.prototype.Set=function(a){this.m_radius=a.m_radius},a.prototype.GetType=function(){return this.m_type},a.prototype.TestPoint=function(){return!1},a.prototype.RayCast=function(){return!1},a.prototype.ComputeAABB=function(){},a.prototype.ComputeMass=function(a,b){void 0===b&&(b=0)},a.prototype.ComputeSubmergedArea=function(a,b){return void 0===b&&(b=0),0},a.TestOverlap=function(a,b,g,i){var j,k,l;return j=new d,j.proxyA=new f,j.proxyA.Set(a),j.proxyB=new f,j.proxyB.Set(g),j.transformA=b,j.transformB=i,j.useRadii=!0,l=new h,l.count=0,k=new e,c.Distance(k,l,j),k.distance<10*Number.MIN_VALUE},a}()},{"../../index":103}],36:[function(a){var b,c,d;b=a("../index"),c=b.Common.Math.b2Math,d=function(a){return Math.abs(parseInt(a))},b.Common.b2Color=function(){function a(a,b,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===e&&(e=0),this._r=d(255*c.Clamp(a,0,1)),this._g=d(255*c.Clamp(b,0,1)),this._b=d(255*c.Clamp(e,0,1))}return a.prototype._r=0,a.prototype._g=0,a.prototype._b=0,a.prototype.Set=function(a,b,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===e&&(e=0),this._r=d(255*c.Clamp(a,0,1)),this._g=d(255*c.Clamp(b,0,1)),this._b=d(255*c.Clamp(e,0,1))},Object.defineProperties(a.prototype,{r:{enumerable:!1,configurable:!0,get:function(){return this._r},set:function(a){return null==a&&(a=0),this._r=d(255*c.Clamp(a,0,1))}},g:{enumerable:!1,configurable:!0,get:function(){return this._g},set:function(a){return null==a&&(a=0),this._g=d(255*c.Clamp(a,0,1))}},b:{enumerable:!1,configurable:!0,get:function(){return this._b},set:function(a){return null==a&&(a=0),this._b=d(255*c.Clamp(a,0,1))}},color:{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}}),a}()},{"../index":103}],37:[function(a){var b;b=a("../index"),b.Common.b2Settings=function(){function a(){}return a.VERSION="2.1alpha",a.USHRT_MAX=65535,a.b2_pi=Math.PI,a.b2_maxManifoldPoints=2,a.b2_aabbExtension=.1,a.b2_aabbMultiplier=2,a.b2_polygonRadius=2*a.b2_linearSlop,a.b2_linearSlop=.005,a.b2_angularSlop=2/180*a.b2_pi,a.b2_toiSlop=8*a.b2_linearSlop,a.b2_maxTOIContactsPerIsland=32,a.b2_maxTOIJointsPerIsland=32,a.b2_velocityThreshold=1,a.b2_maxLinearCorrection=.2,a.b2_maxAngularCorrection=8/180*a.b2_pi,a.b2_maxTranslation=2,a.b2_maxTranslationSquared=a.b2_maxTranslation*a.b2_maxTranslation,a.b2_maxRotation=.5*a.b2_pi,a.b2_maxRotationSquared=a.b2_maxRotation*a.b2_maxRotation,a.b2_contactBaumgarte=.2,a.b2_timeToSleep=.5,a.b2_linearSleepTolerance=.01,a.b2_angularSleepTolerance=2/180*a.b2_pi,a.b2MixFriction=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=0),Math.sqrt(a*b)},a.b2MixRestitution=function(a,b){var c;return void 0===a&&(a=0),void 0===b&&(b=0),null!=(c=a>b)?c:{restitution1:b}},a.b2Assert=function(a){if(!a)throw"Assertion Failed"},a}()},{"../index":103}],38:[function(a){var b,c;b=a("../../index"),c=b.Common.Math.b2Vec2,b.Common.Math.b2Mat22=function(){function a(){this.col1=new c,this.col2=new c,this.SetIdentity()}return a.prototype.col1=null,a.prototype.col2=null,a.FromAngle=function(b){var c;return null==b&&(b=0),c=new a,c.Set(b),c},a.FromVV=function(b,c){var d;return d=new a,d.SetVV(b,c),d},a.prototype.Set=function(a){var b,c;null==a&&(a=0),b=Math.cos(a),c=Math.sin(a),this.col1.x=b,this.col2.x=-c,this.col1.y=c,this.col2.y=b},a.prototype.SetVV=function(a,b){this.col1.SetV(a),this.col2.SetV(b)},a.prototype.Copy=function(){var b;return b=new a,b.SetM(this),b},a.prototype.SetM=function(a){this.col1.SetV(a.col1),this.col2.SetV(a.col2)},a.prototype.AddM=function(a){this.col1.x+=a.col1.x,this.col1.y+=a.col1.y,this.col2.x+=a.col2.x,this.col2.y+=a.col2.y},a.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},a.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},a.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},a.prototype.GetInverse=function(a){var b,c,d,e,f;return b=this.col1.x,c=this.col2.x,d=this.col1.y,e=this.col2.y,f=b*e-c*d,0!==f&&(f=1/f),a.col1.x=f*e,a.col2.x=-f*c,a.col1.y=-f*d,a.col2.y=f*b,a},a.prototype.Solve=function(a,b,c){var d,e,f,g,h;return null==b&&(b=0),null==c&&(c=0),d=this.col1.x,e=this.col2.x,f=this.col1.y,g=this.col2.y,h=d*g-e*f,0!==h&&(h=1/h),a.x=h*(g*b-e*c),a.y=h*(d*c-f*b),a},a.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},a}()},{"../../index":103}],39:[function(a){var b,c;b=a("../../index"),c=b.Common.Math.b2Vec2,b.Common.Math.b2Mat33=function(){function a(a,b,c){void 0===a&&(a=null),void 0===b&&(b=null),void 0===c&&(c=null),this.col1=new b2Vec3,this.col2=new b2Vec3,this.col3=new b2Vec3,a||b||c?(this.col1.SetV(a),this.col2.SetV(b),this.col3.SetV(c)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())}return a.prototype.col1=null,a.prototype.col2=null,a.prototype.col3=null,a.prototype.SetVVV=function(a,b,c){this.col1.SetV(a),this.col2.SetV(b),this.col3.SetV(c)},a.prototype.Copy=function(){new a(this.col1,this.col2,this.col3)},a.prototype.SetM=function(a){this.col1.SetV(a.col1),this.col2.SetV(a.col2),this.col3.SetV(a.col3)},a.prototype.AddM=function(a){this.col1.x+=a.col1.x,this.col1.y+=a.col1.y,this.col1.z+=a.col1.z,this.col2.x+=a.col2.x,this.col2.y+=a.col2.y,this.col2.z+=a.col2.z,this.col3.x+=a.col3.x,this.col3.y+=a.col3.y,this.col3.z+=a.col3.z},a.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},a.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},a.prototype.Solve22=function(a,b,c){var d,e,f,g,h;return void 0===b&&(b=0),void 0===c&&(c=0),d=this.col1.x,e=this.col2.x,f=this.col1.y,g=this.col2.y,h=d*g-e*f,0!==h&&(h=1/h),a.x=h*(g*b-e*c),a.y=h*(d*c-f*b),a},a.prototype.Solve33=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;return void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),e=this.col1.x,h=this.col1.y,k=this.col1.z,f=this.col2.x,i=this.col2.y,l=this.col2.z,g=this.col3.x,j=this.col3.y,m=this.col3.z,n=e*(i*m-l*j)+h*(l*g-f*m)+k*(f*j-i*g),0!==n&&(n=1/n),a.x=n*(b*(i*m-l*j)+c*(l*g-f*m)+d*(f*j-i*g)),a.y=n*(e*(c*m-d*j)+h*(d*g-b*m)+k*(b*j-c*g)),a.z=n*(e*(i*d-l*c)+h*(l*b-f*d)+k*(f*c-i*b)),a
},a}()},{"../../index":103}],40:[function(a){var b,c,d,e,f;b=a("../../index"),c=b.Common.Math.b2Mat22,d=b.Common.Math.b2Math,e=b.Common.Math.b2Transform,f=b.Common.Math.b2Vec2,b.Common.Math.b2Math=function(){function a(){}return a.IsValid=function(a){return void 0===a&&(a=0),isFinite(a)},a.Dot=function(a,b){return a.x*b.x+a.y*b.y},a.CrossVV=function(a,b){return a.x*b.y-a.y*b.x},a.CrossVF=function(a,b){var c;return void 0===b&&(b=0),c=new f(b*a.y,-b*a.x)},a.CrossFV=function(a,b){var c;return void 0===a&&(a=0),c=new f(-a*b.y,a*b.x)},a.MulMV=function(a,b){var c;return c=new f(a.col1.x*b.x+a.col2.x*b.y,a.col1.y*b.x+a.col2.y*b.y)},a.MulTMV=function(b,c){var d;return d=new f(a.Dot(c,b.col1),a.Dot(c,b.col2))},a.MulX=function(b,c){var d;return d=a.MulMV(b.R,c),d.x+=b.position.x,d.y+=b.position.y,d},a.MulXT=function(b,c){var d,e;return d=a.SubtractVV(c,b.position),e=d.x*b.R.col1.x+d.y*b.R.col1.y,d.y=d.x*b.R.col2.x+d.y*b.R.col2.y,d.x=e,d},a.AddVV=function(a,b){var c;return c=new f(a.x+b.x,a.y+b.y)},a.SubtractVV=function(a,b){var c;return c=new f(a.x-b.x,a.y-b.y)},a.Distance=function(a,b){var c,d;return c=a.x-b.x,d=a.y-b.y,Math.sqrt(c*c+d*d)},a.DistanceSquared=function(a,b){var c,d;return c=a.x-b.x,d=a.y-b.y,c*c+d*d},a.MulFV=function(a,b){var c;return void 0===a&&(a=0),c=new f(a*b.x,a*b.y)},a.AddMM=function(b,d){var e;return e=c.FromVV(a.AddVV(b.col1,d.col1),a.AddVV(b.col2,d.col2))},a.MulMM=function(b,d){var e;return e=c.FromVV(a.MulMV(b,d.col1),a.MulMV(b,d.col2))},a.MulTMM=function(b,d){var e,g,h;return g=new f(a.Dot(b.col1,d.col1),a.Dot(b.col2,d.col1)),h=new f(a.Dot(b.col1,d.col2),a.Dot(b.col2,d.col2)),e=c.FromVV(g,h)},a.Abs=function(a){return void 0===a&&(a=0),a>0?a:-a},a.AbsV=function(b){var c;return c=new f(a.Abs(b.x),a.Abs(b.y))},a.AbsM=function(b){var d;return d=c.FromVV(a.AbsV(b.col1),a.AbsV(b.col2))},a.Min=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=0),b>a?a:b},a.MinV=function(b,c){var d;return d=new f(a.Min(b.x,c.x),a.Min(b.y,c.y))},a.Max=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=0),a>b?a:b},a.MaxV=function(b,c){var d;return d=new f(a.Max(b.x,c.x),a.Max(b.y,c.y))},a.Clamp=function(a,b,c){return void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),b>a?b:a>c?c:a},a.ClampV=function(b,c,d){return a.MaxV(c,a.MinV(b,d))},a.Swap=function(a,b){var c;c=a[0],a[0]=b[0],b[0]=c},a.Random=function(){return 2*Math.random()-1},a.RandomRange=function(a,b){var c;return void 0===a&&(a=0),void 0===b&&(b=0),c=Math.random(),c=(b-a)*c+a},a.NextPowerOfTwo=function(a){return void 0===a&&(a=0),a|=a>>1&2147483647,a|=a>>2&1073741823,a|=a>>4&268435455,a|=a>>8&16777215,a|=a>>16&65535,a+1},a.IsPowerOfTwo=function(a){var b;return void 0===a&&(a=0),b=a>0&&0===(a&a-1)},a.b2Vec2_zero=new f(0,0),a.b2Mat22_identity=c.FromVV(new f(1,0),new f(0,1)),a.b2Transform_identity=new e(a.b2Vec2_zero,a.b2Mat22_identity),a}()},{"../../index":103}],41:[function(a){var b,c;b=a("../../index"),c=b.Common.Math.b2Vec2,b.Common.Math.b2Sweep=function(){function a(){this.localCenter=new c,this.c0=new c,this.c=new c}return a.prototype.localCenter=null,a.prototype.c0=null,a.prototype.c=null,a.prototype.a0=null,a.prototype.a=null,a.prototype.t0=null,a.prototype.Set=function(a){this.localCenter.SetV(a.localCenter),this.c0.SetV(a.c0),this.c.SetV(a.c),this.a0=a.a0,this.a=a.a,this.t0=a.t0},a.prototype.Copy=function(){var b;return b=new a,b.localCenter.SetV(this.localCenter),b.c0.SetV(this.c0),b.c.SetV(this.c),b.a0=this.a0,b.a=this.a,b.t0=this.t0,b},a.prototype.GetTransform=function(a,b){var c,d;void 0===b&&(b=0),a.position.x=(1-b)*this.c0.x+b*this.c.x,a.position.y=(1-b)*this.c0.y+b*this.c.y,c=(1-b)*this.a0+b*this.a,a.R.Set(c),d=a.R,a.position.x-=d.col1.x*this.localCenter.x+d.col2.x*this.localCenter.y,a.position.y-=d.col1.y*this.localCenter.x+d.col2.y*this.localCenter.y},a.prototype.Advance=function(a){var b;void 0===a&&(a=0),this.t0<a&&1-this.t0>Number.MIN_VALUE&&(b=(a-this.t0)/(1-this.t0),this.c0.x=(1-b)*this.c0.x+b*this.c.x,this.c0.y=(1-b)*this.c0.y+b*this.c.y,this.a0=(1-b)*this.a0+b*this.a,this.t0=a)},a}()},{"../../index":103}],42:[function(a){var b,c,d;b=a("../../index"),c=b.Common.Math.b2Mat22,d=b.Common.Math.b2Vec2,b.Common.Math.b2Transform=function(){function a(a,b){this.position=new d,this.R=new c,void 0===a&&(a=null),void 0===b&&(b=null),a&&(this.position.SetV(a),this.R.SetM(b))}return a.prototype.position=null,a.prototype.R=null,a.prototype.Initialize=function(a,b){this.position.SetV(a),this.R.SetM(b)},a.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},a.prototype.Set=function(a){this.position.SetV(a.position),this.R.SetM(a.R)},a.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},a}()},{"../../index":103}],43:[function(a){var b,c;b=a("../../index"),c=b.Common.Math.b2Math,b.Common.Math.b2Vec2=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b}return a.prototype.x=0,a.prototype.y=0,a.prototype.SetZero=function(){this.x=0,this.y=0},a.prototype.Set=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b},a.prototype.SetV=function(a){this.x=a.x,this.y=a.y},a.prototype.GetNegative=function(){return new a(-this.x,-this.y)},a.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},a.Make=function(b,c){return void 0===b&&(b=0),void 0===c&&(c=0),new a(b,c)},a.prototype.Copy=function(){return new a(this.x,this.y)},a.prototype.Add=function(a){this.x+=a.x,this.y+=a.y},a.prototype.Subtract=function(a){this.x-=a.x,this.y-=a.y},a.prototype.Multiply=function(a){void 0===a&&(a=0),this.x*=a,this.y*=a},a.prototype.MulM=function(a){var b;b=this.x,this.x=a.col1.x*b+a.col2.x*this.y,this.y=a.col1.y*b+a.col2.y*this.y},a.prototype.MulTM=function(a){var b;b=c.Dot(this,a.col1),this.y=c.Dot(this,a.col2),this.x=b},a.prototype.CrossVF=function(a){var b;void 0===a&&(a=0),b=this.x,this.x=a*this.y,this.y=-a*b},a.prototype.CrossFV=function(a){var b;void 0===a&&(a=0),b=this.x,this.x=-a*this.y,this.y=a*b},a.prototype.MinV=function(a){this.x=this.x<a.x?this.x:a.x,this.y=this.y<a.y?this.y:a.y},a.prototype.MaxV=function(a){this.x=this.x>a.x?this.x:a.x,this.y=this.y>a.y?this.y:a.y},a.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},a.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},a.prototype.Normalize=function(){var a,b;return b=Math.sqrt(this.x*this.x+this.y*this.y),b<Number.MIN_VALUE?0:(a=1/b,this.x*=a,this.y*=a,b)},a.prototype.IsValid=function(){return c.IsValid(this.x)&&c.IsValid(this.y)},a}()},{"../../index":103}],44:[function(a){var b;b=a("../../index"),b.Common.Math.b2Vec3=function(){function a(a,b,c){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),this.x=a,this.y=b,this.z=c}return a.prototype.x=0,a.prototype.y=0,a.prototype.z=0,a.prototype.SetZero=function(){this.x=this.y=this.z=0},a.prototype.Set=function(a,b,c){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),this.x=a,this.y=b,this.z=c},a.prototype.SetV=function(a){this.x=a.x,this.y=a.y,this.z=a.z},a.prototype.GetNegative=function(){return new a(-this.x,-this.y,-this.z)},a.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},a.prototype.Copy=function(){return new a(this.x,this.y,this.z)},a.prototype.Add=function(a){this.x+=a.x,this.y+=a.y,this.z+=a.z},a.prototype.Subtract=function(a){this.x-=a.x,this.y-=a.y,this.z-=a.z},a.prototype.Multiply=function(a){void 0===a&&(a=0),this.x*=a,this.y*=a,this.z*=a},a}()},{"../../index":103}],45:[function(a){var b,c,d,e,f,g,h,i,j;b=a("../index"),f=b.Common.Math.b2Math,h=b.Common.Math.b2Sweep,i=b.Common.Math.b2Transform,j=b.Common.Math.b2Vec2,g=b.Common.b2Settings,d=b.Dynamics.b2Fixture,e=b.Dynamics.b2FixtureDef,c=b.Dynamics.b2BodyDef,b.Dynamics.b2Body=function(){function a(b,c){var d,e;this.m_xf=new i,this.m_sweep=new h,this.m_linearVelocity=new j,this.m_force=new j,this.m_flags=0,b.bullet&&(this.m_flags|=a.e_bulletFlag),b.fixedRotation&&(this.m_flags|=a.e_fixedRotationFlag),b.allowSleep&&(this.m_flags|=a.e_allowSleepFlag),b.awake&&(this.m_flags|=a.e_awakeFlag),b.active&&(this.m_flags|=a.e_activeFlag),this.m_world=c,this.m_xf.position.SetV(b.position),this.m_xf.R.Set(b.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=b.angle,d=this.m_xf.R,e=this.m_sweep.localCenter,this.m_sweep.c.x=d.col1.x*e.x+d.col2.x*e.y,this.m_sweep.c.y=d.col1.y*e.x+d.col2.y*e.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(b.linearVelocity),this.m_angularVelocity=b.angularVelocity,this.m_linearDamping=b.linearDamping,this.m_angularDamping=b.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=b.type,this.m_type===a.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=b.inertiaScale,this.m_userData=b.userData,this.m_fixtureList=null,this.m_fixtureCount=0}return a.s_xf1=new i,a.e_islandFlag=1,a.e_awakeFlag=2,a.e_allowSleepFlag=4,a.e_bulletFlag=8,a.e_fixedRotationFlag=16,a.e_activeFlag=32,a.b2_staticBody=0,a.b2_kinematicBody=1,a.b2_dynamicBody=2,a.prototype.m_xf=null,a.prototype.m_sweep=null,a.prototype.m_linearVelocity=null,a.prototype.m_force=null,a.prototype.m_flags=0,a.prototype.m_world=null,a.prototype.m_jointList=null,a.prototype.m_controllerList=null,a.prototype.m_contactList=null,a.prototype.m_controllerCount=null,a.prototype.m_prev=null,a.prototype.m_next=null,a.prototype.m_linearVelocity=null,a.prototype.m_angularVelocity=null,a.prototype.m_linearDamping=null,a.prototype.m_angularDamping=null,a.prototype.m_force=null,a.prototype.m_torque=0,a.prototype.m_sleepTime=0,a.prototype.m_type=0,a.prototype.m_mass=0,a.prototype.m_invMass=0,a.prototype.m_I=0,a.prototype.m_invI=0,a.prototype.m_inertiaScale=0,a.prototype.m_userData=null,a.prototype.m_fixtureList=null,a.prototype.m_fixtureCount=0,a.prototype.ConnectEdges=function(a,b,c){var d,e,h,i,j;return void 0===c&&(c=0),d=Math.atan2(b.GetDirectionVector().y,b.GetDirectionVector().x),i=Math.tan(.5*(d-c)),h=f.MulFV(i,b.GetDirectionVector()),h=f.SubtractVV(h,b.GetNormalVector()),h=f.MulFV(g.b2_toiSlop,h),h=f.AddVV(h,b.GetVertex1()),j=f.AddVV(a.GetDirectionVector(),b.GetDirectionVector()),j.Normalize(),e=f.Dot(a.GetDirectionVector(),b.GetNormalVector())>0,a.SetNextEdge(b,h,j,e),b.SetPrevEdge(a,h,j,e),d},a.prototype.CreateFixture=function(b){var c,e;return this.m_world.IsLocked()===!0?null:(e=new d,e.Create(this,this.m_xf,b),this.m_flags&a.e_activeFlag&&(c=this.m_world.m_contactManager.m_broadPhase,e.CreateProxy(c,this.m_xf)),e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=1,e)},a.prototype.CreateFixture2=function(a,b){var c;return void 0===b&&(b=0),c=new e,c.shape=a,c.density=b,this.CreateFixture(c)},a.prototype.DestroyFixture=function(b){var c,d,e,f,g,h,i,j;if(this.m_world.IsLocked()!==!0){for(i=this.m_fixtureList,j=null,h=!1;null!=i;){if(i===b){j?j.m_next=b.m_next:this.m_fixtureList=b.m_next,h=!0;break}j=i,i=i.m_next}for(e=this.m_contactList;e;)d=e.contact,e=e.next,f=d.GetFixtureA(),g=d.GetFixtureB(),(b===f||b===g)&&this.m_world.m_contactManager.Destroy(d);this.m_flags&a.e_activeFlag&&(c=this.m_world.m_contactManager.m_broadPhase,b.DestroyProxy(c)),b.Destroy(),b.m_body=null,b.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},a.prototype.SetPositionAndAngle=function(a,b){var c,d,e,f;if(void 0===b&&(b=0),d=void 0,this.m_world.IsLocked()!==!0){for(this.m_xf.R.Set(b),this.m_xf.position.SetV(a),e=this.m_xf.R,f=this.m_sweep.localCenter,this.m_sweep.c.x=e.col1.x*f.x+e.col2.x*f.y,this.m_sweep.c.y=e.col1.y*f.x+e.col2.y*f.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=b,c=this.m_world.m_contactManager.m_broadPhase,d=this.m_fixtureList;d;)d.Synchronize(c,this.m_xf,this.m_xf),d=d.m_next;this.m_world.m_contactManager.FindNewContacts()}},a.prototype.SetTransform=function(a){this.SetPositionAndAngle(a.position,a.GetAngle())},a.prototype.GetTransform=function(){return this.m_xf},a.prototype.GetPosition=function(){return this.m_xf.position},a.prototype.SetPosition=function(a){this.SetPositionAndAngle(a,this.GetAngle())},a.prototype.GetAngle=function(){return this.m_sweep.a},a.prototype.SetAngle=function(a){void 0===a&&(a=0),this.SetPositionAndAngle(this.GetPosition(),a)},a.prototype.GetWorldCenter=function(){return this.m_sweep.c},a.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},a.prototype.SetLinearVelocity=function(b){this.m_type!==a.b2_staticBody&&this.m_linearVelocity.SetV(b)},a.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},a.prototype.SetAngularVelocity=function(b){void 0===b&&(b=0),this.m_type!==a.b2_staticBody&&(this.m_angularVelocity=b)},a.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},a.prototype.GetDefinition=function(){var b;return b=new c,b.type=this.GetType(),b.allowSleep=(this.m_flags&a.e_allowSleepFlag)===a.e_allowSleepFlag,b.angle=this.GetAngle(),b.angularDamping=this.m_angularDamping,b.angularVelocity=this.m_angularVelocity,b.fixedRotation=(this.m_flags&a.e_fixedRotationFlag)===a.e_fixedRotationFlag,b.bullet=(this.m_flags&a.e_bulletFlag)===a.e_bulletFlag,b.awake=(this.m_flags&a.e_awakeFlag)===a.e_awakeFlag,b.linearDamping=this.m_linearDamping,b.linearVelocity.SetV(this.GetLinearVelocity()),b.position=this.GetPosition(),b.userData=this.GetUserData(),b},a.prototype.ApplyForce=function(b,c){this.m_type===a.b2_dynamicBody&&(this.IsAwake()===!1&&this.SetAwake(!0),this.m_force.x+=b.x,this.m_force.y+=b.y,this.m_torque+=(c.x-this.m_sweep.c.x)*b.y-(c.y-this.m_sweep.c.y)*b.x)},a.prototype.ApplyTorque=function(b){void 0===b&&(b=0),this.m_type===a.b2_dynamicBody&&(this.IsAwake()===!1&&this.SetAwake(!0),this.m_torque+=b)},a.prototype.ApplyImpulse=function(b,c){this.m_type===a.b2_dynamicBody&&(this.IsAwake()===!1&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*b.x,this.m_linearVelocity.y+=this.m_invMass*b.y,this.m_angularVelocity+=this.m_invI*((c.x-this.m_sweep.c.x)*b.y-(c.y-this.m_sweep.c.y)*b.x))},a.prototype.Split=function(a){var b,c,d,e,g,h,i,j,k,l,m,n;for(j=this.GetLinearVelocity().Copy(),b=this.GetAngularVelocity(),e=this.GetWorldCenter(),c=this,d=this.m_world.CreateBody(this.GetDefinition()),l=void 0,i=c.m_fixtureList;i;)a(i)?(k=i.m_next,l?l.m_next=k:c.m_fixtureList=k,c.m_fixtureCount--,i.m_next=d.m_fixtureList,d.m_fixtureList=i,d.m_fixtureCount++,i.m_body=d,i=k):(l=i,i=i.m_next);return c.ResetMassData(),d.ResetMassData(),g=c.GetWorldCenter(),h=d.GetWorldCenter(),m=f.AddVV(j,f.CrossFV(b,f.SubtractVV(g,e))),n=f.AddVV(j,f.CrossFV(b,f.SubtractVV(h,e))),c.SetLinearVelocity(m),d.SetLinearVelocity(n),c.SetAngularVelocity(b),d.SetAngularVelocity(b),c.SynchronizeFixtures(),d.SynchronizeFixtures(),d},a.prototype.Merge=function(a){var b,c,d,e,f,g,h,i,j,k;for(h=void 0,h=a.m_fixtureList;h;)i=h.m_next,a.m_fixtureCount--,h.m_next=this.m_fixtureList,this.m_fixtureList=h,this.m_fixtureCount++,h.m_body=e,h=i;d.m_fixtureCount=0,d=this,e=a,f=d.GetWorldCenter(),g=e.GetWorldCenter(),j=d.GetLinearVelocity().Copy(),k=e.GetLinearVelocity().Copy(),c=d.GetAngularVelocity(),b=e.GetAngularVelocity(),d.ResetMassData(),this.SynchronizeFixtures()},a.prototype.GetMass=function(){return this.m_mass},a.prototype.GetInertia=function(){return this.m_I},a.prototype.GetMassData=function(a){a.mass=this.m_mass,a.I=this.m_I,a.center.SetV(this.m_sweep.localCenter)},a.prototype.SetMassData=function(b){var c;g.b2Assert(this.m_world.IsLocked()===!1),this.m_world.IsLocked()!==!0&&this.m_type===a.b2_dynamicBody&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=b.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,b.I>0&&0===(this.m_flags&a.e_fixedRotationFlag)&&(this.m_I=b.I-this.m_mass*(b.center.x*b.center.x+b.center.y*b.center.y),this.m_invI=1/this.m_I),c=this.m_sweep.c.Copy(),this.m_sweep.localCenter.SetV(b.center),this.m_sweep.c0.SetV(f.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-c.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-c.x))},a.prototype.ResetMassData=function(){var b,c,d,e;if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type!==a.b2_staticBody&&this.m_type!==a.b2_kinematicBody){for(b=j.Make(0,0),c=this.m_fixtureList;c;)0!==c.m_density&&(d=c.GetMassData(),this.m_mass+=d.mass,b.x+=d.center.x*d.mass,b.y+=d.center.y*d.mass,this.m_I+=d.I,c=c.m_next);this.m_mass>0?(this.m_invMass=1/this.m_mass,b.x*=this.m_invMass,b.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0===(this.m_flags&a.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(b.x*b.x+b.y*b.y),this.m_I*=this.m_inertiaScale,g.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0),e=this.m_sweep.c.Copy(),this.m_sweep.localCenter.SetV(b),this.m_sweep.c0.SetV(f.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-e.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-e.x)}},a.prototype.GetWorldPoint=function(a){var b,c;return b=this.m_xf.R,c=new j(b.col1.x*a.x+b.col2.x*a.y,b.col1.y*a.x+b.col2.y*a.y),c.x+=this.m_xf.position.x,c.y+=this.m_xf.position.y,c},a.prototype.GetWorldVector=function(a){return f.MulMV(this.m_xf.R,a)},a.prototype.GetLocalPoint=function(a){return f.MulXT(this.m_xf,a)},a.prototype.GetLocalVector=function(a){return f.MulTMV(this.m_xf.R,a)},a.prototype.GetLinearVelocityFromWorldPoint=function(a){return new j(this.m_linearVelocity.x-this.m_angularVelocity*(a.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(a.x-this.m_sweep.c.x))},a.prototype.GetLinearVelocityFromLocalPoint=function(a){var b,c;return b=this.m_xf.R,c=new j(b.col1.x*a.x+b.col2.x*a.y,b.col1.y*a.x+b.col2.y*a.y),c.x+=this.m_xf.position.x,c.y+=this.m_xf.position.y,new j(this.m_linearVelocity.x-this.m_angularVelocity*(c.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(c.x-this.m_sweep.c.x))},a.prototype.GetLinearDamping=function(){return this.m_linearDamping},a.prototype.SetLinearDamping=function(a){void 0===a&&(a=0),this.m_linearDamping=a},a.prototype.GetAngularDamping=function(){return this.m_angularDamping},a.prototype.SetAngularDamping=function(a){void 0===a&&(a=0),this.m_angularDamping=a},a.prototype.SetType=function(b){var c;if(void 0===b&&(b=0),this.m_type!==b)for(this.m_type=b,this.ResetMassData(),this.m_type===a.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0,c=this.m_contactList;c;)c.contact.FlagForFiltering(),c=c.next},a.prototype.GetType=function(){return this.m_type},a.prototype.SetBullet=function(b){b?this.m_flags|=a.e_bulletFlag:this.m_flags&=~a.e_bulletFlag},a.prototype.IsBullet=function(){return(this.m_flags&a.e_bulletFlag)===a.e_bulletFlag},a.prototype.SetSleepingAllowed=function(b){b?this.m_flags|=a.e_allowSleepFlag:(this.m_flags&=~a.e_allowSleepFlag,this.SetAwake(!0))},a.prototype.SetAwake=function(b){b?(this.m_flags|=a.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~a.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},a.prototype.IsAwake=function(){return(this.m_flags&a.e_awakeFlag)===a.e_awakeFlag},a.prototype.SetFixedRotation=function(b){b?this.m_flags|=a.e_fixedRotationFlag:this.m_flags&=~a.e_fixedRotationFlag,this.ResetMassData()},a.prototype.IsFixedRotation=function(){return(this.m_flags&a.e_fixedRotationFlag)===a.e_fixedRotationFlag},a.prototype.SetActive=function(b){var c,d,e,f;if(b!==this.IsActive())if(c=void 0,f=void 0,b)for(this.m_flags|=a.e_activeFlag,c=this.m_world.m_contactManager.m_broadPhase,f=this.m_fixtureList;f;)f.CreateProxy(c,this.m_xf),f=f.m_next;else{for(this.m_flags&=~a.e_activeFlag,c=this.m_world.m_contactManager.m_broadPhase,f=this.m_fixtureList;f;)f.DestroyProxy(c),f=f.m_next;for(d=this.m_contactList;d;)e=d,d=d.next,this.m_world.m_contactManager.Destroy(e.contact);this.m_contactList=null}},a.prototype.IsActive=function(){return(this.m_flags&a.e_activeFlag)===a.e_activeFlag},a.prototype.IsSleepingAllowed=function(){return(this.m_flags&a.e_allowSleepFlag)===a.e_allowSleepFlag},a.prototype.GetFixtureList=function(){return this.m_fixtureList},a.prototype.GetJointList=function(){return this.m_jointList},a.prototype.GetControllerList=function(){return this.m_controllerList},a.prototype.GetContactList=function(){return this.m_contactList},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetUserData=function(){return this.m_userData},a.prototype.SetUserData=function(a){this.m_userData=a},a.prototype.GetWorld=function(){return this.m_world},a.prototype.SynchronizeFixtures=function(){var b,c,d,e,f;for(f=a.s_xf1,f.R.Set(this.m_sweep.a0),d=f.R,e=this.m_sweep.localCenter,f.position.x=this.m_sweep.c0.x-(d.col1.x*e.x+d.col2.x*e.y),f.position.y=this.m_sweep.c0.y-(d.col1.y*e.x+d.col2.y*e.y),c=void 0,b=this.m_world.m_contactManager.m_broadPhase,c=this.m_fixtureList;c;)c.Synchronize(b,f,this.m_xf),c=c.m_next},a.prototype.SynchronizeTransform=function(){var a,b;this.m_xf.R.Set(this.m_sweep.a),a=this.m_xf.R,b=this.m_sweep.localCenter,this.m_xf.position.x=this.m_sweep.c.x-(a.col1.x*b.x+a.col2.x*b.y),this.m_xf.position.y=this.m_sweep.c.y-(a.col1.y*b.x+a.col2.y*b.y)},a.prototype.ShouldCollide=function(b){var c;if(this.m_type!==a.b2_dynamicBody&&b.m_type!==a.b2_dynamicBody)return!1;for(c=this.m_jointList;c;){if(c.other===b&&c.joint.m_collideConnected===!1)return!1;c=c.next}return!0},a.prototype.Advance=function(a){void 0===a&&(a=0),this.m_sweep.Advance(a),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},a}()},{"../index":103}],46:[function(a){var b,c,d;b=a("../index"),d=b.Common.Math.b2Vec2,c=b.Dynamics.b2Body,b.Dynamics.b2BodyDef=function(){function a(){this.position=new d,this.position.Set(0,0),this.linearVelocity=new d,this.linearVelocity.Set(0,0)}return a.prototype.position=null,a.prototype.linearVelocity=null,a.prototype.userData=null,a.prototype.angle=0,a.prototype.linearVelocity=null,a.prototype.angularVelocity=0,a.prototype.linearDamping=0,a.prototype.angularDamping=0,a.prototype.allowSleep=!0,a.prototype.awake=!0,a.prototype.fixedRotation=!1,a.prototype.bullet=!1,a.prototype.type=c.b2_staticBody,a.prototype.active=!0,a.prototype.inertiaScale=1,a}()},{"../index":103}],47:[function(a){var b;b=a("../index"),b.Dynamics.b2ContactFilter=function(){function a(){}return a.prototype.ShouldCollide=function(a,b){var c,d,e;return d=a.GetFilterData(),e=b.GetFilterData(),d.groupIndex===e.groupIndex&&0!==d.groupIndex?d.groupIndex>0:c=0!==(d.maskBits&e.categoryBits)&&0!==(d.categoryBits&e.maskBits)},a.prototype.RayCollide=function(a,b){return a?this.ShouldCollide(a instanceof b2Fixture?a:null,b):!0},a.b2_defaultFilter=new a,a}()},{"../index":103}],48:[function(a){var b,c,d;b=a("../index"),c=b.Vector,d=b.Common.b2Settings,b.Dynamics.b2ContactImpulse=function(){function a(){}return a.prototype.normalImpulses=null,a.prototype.tangentImpulses=null,a.b2ContactImpulse=function(){this.normalImpulses=new c(d.b2_maxManifoldPoints),this.tangentImpulses=new c(d.b2_maxManifoldPoints)},a}()},{"../index":103}],49:[function(a){var b;b=a("../index"),b.Dynamics.b2ContactListener=function(){function a(){}return a.prototype.BeginContact=function(){},a.prototype.EndContact=function(){},a.prototype.PreSolve=function(){},a.prototype.PostSolve=function(){},a.b2_defaultListener=new a,a}()},{"../index":103}],50:[function(a){var b,c,d,e,f,g,h;b=a("../index"),h=b.Dynamics.b2Fixture,d=b.Dynamics.b2ContactFilter,e=b.Dynamics.b2ContactListener,c=b.Dynamics.Contacts.b2ContactFactory,f=b.Collision.b2ContactPoint,g=b.Collision.b2DynamicTreeBroadPhase,b.Dynamics.b2ContactManager=function(){function a(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=d.b2_defaultFilter,this.m_contactListener=e.b2_defaultListener,this.m_contactFactory=new c(this.m_allocator),this.m_broadPhase=new g}return a.prototype.m_world=null,a.prototype.m_contactCount=null,a.prototype.m_contactFilter=null,a.prototype.m_contactListener=null,a.prototype.m_contactFactory=null,a.prototype.m_broadPhase=null,a.prototype.AddPair=function(a,b){var c,d,e,f,g,i,j,k;if(j=a instanceof h?a:null,k=b instanceof h?b:null,c=j.GetBody(),d=k.GetBody(),c!==d){for(f=d.GetContactList();f;){if(f.other===c){if(g=f.contact.GetFixtureA(),i=f.contact.GetFixtureB(),g===j&&i===k)return;if(g===k&&i===j)return}f=f.next}d.ShouldCollide(c)!==!1&&this.m_contactFilter.ShouldCollide(j,k)!==!1&&(e=this.m_contactFactory.Create(j,k),j=e.GetFixtureA(),k=e.GetFixtureB(),c=j.m_body,d=k.m_body,e.m_prev=null,e.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=e),this.m_world.m_contactList=e,e.m_nodeA.contact=e,e.m_nodeA.other=d,e.m_nodeA.prev=null,e.m_nodeA.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=e.m_nodeA),c.m_contactList=e.m_nodeA,e.m_nodeB.contact=e,e.m_nodeB.other=c,e.m_nodeB.prev=null,e.m_nodeB.next=d.m_contactList,null!=d.m_contactList&&(d.m_contactList.prev=e.m_nodeB),d.m_contactList=e.m_nodeB,++this.m_world.m_contactCount)}},a.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(b.generateCallback(this,this.AddPair))},a.prototype.Destroy=function(a){var b,c,d,e;d=a.GetFixtureA(),e=a.GetFixtureB(),b=d.GetBody(),c=e.GetBody(),a.IsTouching()&&this.m_contactListener.EndContact(a),a.m_prev&&(a.m_prev.m_next=a.m_next),a.m_next&&(a.m_next.m_prev=a.m_prev),a===this.m_world.m_contactList&&(this.m_world.m_contactList=a.m_next),a.m_nodeA.prev&&(a.m_nodeA.prev.next=a.m_nodeA.next),a.m_nodeA.next&&(a.m_nodeA.next.prev=a.m_nodeA.prev),a.m_nodeA===b.m_contactList&&(b.m_contactList=a.m_nodeA.next),a.m_nodeB.prev&&(a.m_nodeB.prev.next=a.m_nodeB.next),a.m_nodeB.next&&(a.m_nodeB.next.prev=a.m_nodeB.prev),a.m_nodeB===c.m_contactList&&(c.m_contactList=a.m_nodeB.next),this.m_contactFactory.Destroy(a),--this.m_contactCount},a.prototype.Collide=function(){var a,b,c,d,e,f,g,h,i;for(c=this.m_world.m_contactList;c;)if(e=c.GetFixtureA(),f=c.GetFixtureB(),a=e.GetBody(),b=f.GetBody(),a.IsAwake()!==!1||b.IsAwake()!==!1){if(64&c.m_flags){if(b.ShouldCollide(a)===!1){d=c,c=d.GetNext(),this.Destroy(d);continue}if(this.m_contactFilter.ShouldCollide(e,f)===!1){d=c,c=d.GetNext(),this.Destroy(d);continue}c.m_flags&=64}h=e.m_proxy,i=f.m_proxy,g=this.m_broadPhase.TestOverlap(h,i),g!==!1?(c.Update(this.m_contactListener),c=c.GetNext()):(d=c,c=d.GetNext(),this.Destroy(d))}else c=c.GetNext()},a.s_evalCP=new f,a}()},{"../index":103}],51:[function(a){var b;b=a("../index"),b.Dynamics.b2DebugDraw=function(){function a(){this.m_sprite={graphics:{clear:function(a){return function(){a.m_ctx.clearRect(0,0,a.m_ctx.canvas.width,a.m_ctx.canvas.height)}}(this)}}}return a.e_shapeBit=1,a.e_jointBit=2,a.e_aabbBit=4,a.e_pairBit=8,a.e_centerOfMassBit=16,a.e_controllerBit=32,a.prototype.m_drawScale=1,a.prototype.m_lineThickness=1,a.prototype.m_alpha=1,a.prototype.m_fillAlpha=1,a.prototype.m_xformScale=1,a.prototype.m_drawFlags=0,a.prototype.m_ctx=null,a.prototype._color=function(a,b){return"rgba("+((16711680&a)>>16)+","+((65280&a)>>8)+","+(255&a)+","+b+")"},a.prototype.SetFlags=function(a){void 0===a&&(a=0),this.m_drawFlags=a},a.prototype.GetFlags=function(){return this.m_drawFlags},a.prototype.AppendFlags=function(a){void 0===a&&(a=0),this.m_drawFlags|=a},a.prototype.ClearFlags=function(a){void 0===a&&(a=0),this.m_drawFlags&=~a},a.prototype.SetSprite=function(a){this.m_ctx=a},a.prototype.GetSprite=function(){return this.m_ctx},a.prototype.SetDrawScale=function(a){void 0===a&&(a=0),this.m_drawScale=a},a.prototype.GetDrawScale=function(){return this.m_drawScale},a.prototype.SetLineThickness=function(a){void 0===a&&(a=0),this.m_lineThickness=a,this.m_ctx.strokeWidth=a},a.prototype.GetLineThickness=function(){return this.m_lineThickness},a.prototype.SetAlpha=function(a){void 0===a&&(a=0),this.m_alpha=a},a.prototype.GetAlpha=function(){return this.m_alpha},a.prototype.SetFillAlpha=function(a){void 0===a&&(a=0),this.m_fillAlpha=a},a.prototype.GetFillAlpha=function(){return this.m_fillAlpha},a.prototype.SetXFormScale=function(a){void 0===a&&(a=0),this.m_xformScale=a},a.prototype.GetXFormScale=function(){return this.m_xformScale},a.prototype.DrawPolygon=function(a,b,c){var d,e,f;if(b){for(f=this.m_ctx,d=this.m_drawScale,f.beginPath(),f.strokeStyle=this._color(c.color,this.m_alpha),f.moveTo(a[0].x*d,a[0].y*d),e=1;b>e;)f.lineTo(a[e].x*d,a[e].y*d),e++;f.lineTo(a[0].x*d,a[0].y*d),f.closePath(),f.stroke()}},a.prototype.DrawSolidPolygon=function(a,b,c){var d,e,f;if(b){for(f=this.m_ctx,d=this.m_drawScale,f.beginPath(),f.strokeStyle=this._color(c.color,this.m_alpha),f.fillStyle=this._color(c.color,this.m_fillAlpha),f.moveTo(a[0].x*d,a[0].y*d),e=1;b>e;)f.lineTo(a[e].x*d,a[e].y*d),e++;f.lineTo(a[0].x*d,a[0].y*d),f.closePath(),f.fill(),f.stroke()}},a.prototype.DrawCircle=function(a,b,c){var d,e;b&&(e=this.m_ctx,d=this.m_drawScale,e.beginPath(),e.strokeStyle=this._color(c.color,this.m_alpha),e.arc(a.x*d,a.y*d,b*d,0,2*Math.PI,!0),e.closePath(),e.stroke())},a.prototype.DrawSolidCircle=function(a,b,c,d){var e,f,g,h;b&&(h=this.m_ctx,g=this.m_drawScale,e=a.x*g,f=a.y*g,h.moveTo(0,0),h.beginPath(),h.strokeStyle=this._color(d.color,this.m_alpha),h.fillStyle=this._color(d.color,this.m_fillAlpha),h.arc(e,f,b*g,0,2*Math.PI,!0),h.moveTo(e,f),h.lineTo((a.x+c.x*b)*g,(a.y+c.y*b)*g),h.closePath(),h.fill(),h.stroke())},a.prototype.DrawSegment=function(a,b,c){var d,e;e=this.m_ctx,d=this.m_drawScale,e.strokeStyle=this._color(c.color,this.m_alpha),e.beginPath(),e.moveTo(a.x*d,a.y*d),e.lineTo(b.x*d,b.y*d),e.closePath(),e.stroke()},a.prototype.DrawTransform=function(a){var b,c;c=this.m_ctx,b=this.m_drawScale,c.beginPath(),c.strokeStyle=this._color(16711680,this.m_alpha),c.moveTo(a.position.x*b,a.position.y*b),c.lineTo((a.position.x+this.m_xformScale*a.R.col1.x)*b,(a.position.y+this.m_xformScale*a.R.col1.y)*b),c.strokeStyle=this._color(65280,this.m_alpha),c.moveTo(a.position.x*b,a.position.y*b),c.lineTo((a.position.x+this.m_xformScale*a.R.col2.x)*b,(a.position.y+this.m_xformScale*a.R.col2.y)*b),c.closePath(),c.stroke()},a}()},{"../index":103}],52:[function(a){var b;b=a("../index"),b.Dynamics.b2DestructionListener=function(){function a(){}return a.prototype.SayGoodbyeJoint=function(){},a.prototype.SayGoodbyeFixture=function(){},a}()},{"../index":103}],53:[function(a){var b;b=a("../index"),b.Dynamics.b2FilterData=function(){function a(){}return a.prototype.categoryBits=1,a.prototype.maskBits=65535,a.prototype.groupIndex=0,a.prototype.Copy=function(){var b;return b=new a,b.categoryBits=this.categoryBits,b.maskBits=this.maskBits,b.groupIndex=this.groupIndex,b},a}()},{"../index":103}],54:[function(a){var b,c,d,e,f,g;b=a("../index"),f=b.Common.Math.b2Math,g=b.Common.Math.b2Vec2,d=b.Dynamics.b2FilterData,c=b.Collision.b2AABB,e=b.Collision.Shapes.b2MassData,b.Dynamics.b2Fixture=function(){function a(){this.m_filter=new d,this.m_aabb=new c}return a.prototype.m_filter=null,a.prototype.m_shape=null,a.prototype.m_isSensor=!1,a.prototype.m_body=null,a.prototype.m_next=null,a.prototype.m_userData=null,a.prototype.m_density=0,a.prototype.m_friction=0,a.prototype.m_restitution=0,a.prototype.m_aabb=null,a.prototype.m_proxy=null,a.prototype.GetType=function(){return this.m_shape.GetType()},a.prototype.GetShape=function(){return this.m_shape},a.prototype.SetSensor=function(a){var b,c,d,e;if(this.m_isSensor!==a&&(this.m_isSensor=a,null!=this.m_body))for(c=this.m_body.GetContactList();c;)b=c.contact,d=b.GetFixtureA(),e=b.GetFixtureB(),(d===this||e===this)&&b.SetSensor(d.IsSensor()||e.IsSensor()),c=c.next
},a.prototype.IsSensor=function(){return this.m_isSensor},a.prototype.SetFilterData=function(a){var b,c,d,e;if(this.m_filter=a.Copy(),!this.m_body)for(c=this.m_body.GetContactList();c;)b=c.contact,d=b.GetFixtureA(),e=b.GetFixtureB(),(d===this||e===this)&&b.FlagForFiltering(),c=c.next},a.prototype.GetFilterData=function(){return this.m_filter.Copy()},a.prototype.GetBody=function(){return this.m_body},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetUserData=function(){return this.m_userData},a.prototype.SetUserData=function(a){return this.m_userData=a},a.prototype.TestPoint=function(a){return this.m_shape.TestPoint(this.m_body.GetTransform(),a)},a.prototype.RayCast=function(a,b){return this.m_shape.RayCast(a,b,this.m_body.GetTransform())},a.prototype.GetMassData=function(a){return void 0===a&&(a=null),null==a&&(a=new e),this.m_shape.ComputeMass(a,this.m_density),a},a.prototype.SetDensity=function(a){void 0===a&&(a=0),this.m_density=a},a.prototype.GetDensity=function(){return this.m_density},a.prototype.GetFriction=function(){return this.m_friction},a.prototype.SetFriction=function(a){void 0===a&&(a=0),this.m_friction=a},a.prototype.GetRestitution=function(){return this.m_restitution},a.prototype.SetRestitution=function(a){void 0===a&&(a=0),this.m_restitution=a},a.prototype.GetAABB=function(){return this.m_aabb},a.prototype.Create=function(a,b,c){this.m_userData=c.userData,this.m_friction=c.friction,this.m_restitution=c.restitution,this.m_body=a,this.m_next=null,this.m_filter=c.filter.Copy(),this.m_isSensor=c.isSensor,this.m_shape=c.shape.Copy(),this.m_density=c.density},a.prototype.Destroy=function(){this.m_shape=null},a.prototype.CreateProxy=function(a,b){this.m_shape.ComputeAABB(this.m_aabb,b),this.m_proxy=a.CreateProxy(this.m_aabb,this)},a.prototype.DestroyProxy=function(a){null!=this.m_proxy&&(a.DestroyProxy(this.m_proxy),this.m_proxy=null)},a.prototype.Synchronize=function(a,b,d){var e,g,h;this.m_proxy&&(e=new c,g=new c,this.m_shape.ComputeAABB(e,b),this.m_shape.ComputeAABB(g,d),this.m_aabb.Combine(e,g),h=f.SubtractVV(d.position,b.position),a.MoveProxy(this.m_proxy,this.m_aabb,h))},a}()},{"../index":103}],55:[function(a){var b,c;b=a("../index"),c=b.Dynamics.b2FilterData,b.Dynamics.b2FixtureDef=function(){function a(){this.filter=new c,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0}return a.prototype.shape=null,a.prototype.userData=null,a.prototype.friction=.2,a.prototype.restitution=0,a.prototype.density=0,a.prototype.isSensor=!1,a.prototype.filter=null,a}()},{"../index":103}],56:[function(a){var b,c,d,e,f;b=a("../index"),f=b.Common.b2Settings,e=b.Common.Math.b2Math,d=b.Dynamics.b2ContactImpulse,c=b.Dynamics.b2Body,b.Dynamics.b2Island=function(){function a(){this.m_bodies=new Array,this.m_contacts=new Array,this.m_joints=new Array}return a.prototype.m_bodies=null,a.prototype.m_contacts=null,a.prototype.m_joints=null,a.prototype.m_bodyCapacity=0,a.prototype.m_contactCapacity=0,a.prototype.m_jointCapacity=0,a.prototype.m_bodyCount=0,a.prototype.m_contactCount=0,a.prototype.m_jointCount=0,a.prototype.m_allocator=null,a.prototype.m_listener=null,a.prototype.m_contactSolver=null,a.prototype.Initialize=function(a,b,c,d,e,f){var g;for(void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),g=0,this.m_bodyCapacity=a,this.m_contactCapacity=b,this.m_jointCapacity=c,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=d,this.m_listener=e,this.m_contactSolver=f,g=this.m_bodies.length;a>g;)this.m_bodies[g]=null,g++;for(g=this.m_contacts.length;b>g;)this.m_contacts[g]=null,g++;for(g=this.m_joints.length;c>g;)this.m_joints[g]=null,g++},a.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},a.prototype.Solve=function(a,b,d){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(k=0,l=0,h=void 0,m=void 0,k=0;k<this.m_bodyCount;)h=this.m_bodies[k],h.GetType()===c.b2_dynamicBody&&(h.m_linearVelocity.x+=a.dt*(b.x+h.m_invMass*h.m_force.x),h.m_linearVelocity.y+=a.dt*(b.y+h.m_invMass*h.m_force.y),h.m_angularVelocity+=a.dt*h.m_invI*h.m_torque,h.m_linearVelocity.Multiply(e.Clamp(1-a.dt*h.m_linearDamping,0,1)),h.m_angularVelocity*=e.Clamp(1-a.dt*h.m_angularDamping,0,1),++k);for(this.m_contactSolver.Initialize(a,this.m_contacts,this.m_contactCount,this.m_allocator),i=this.m_contactSolver,i.InitVelocityConstraints(a),k=0;k<this.m_jointCount;)m=this.m_joints[k],m.InitVelocityConstraints(a),++k;for(k=0;k<a.velocityIterations;){for(l=0;l<this.m_jointCount;)m=this.m_joints[l],m.SolveVelocityConstraints(a),++l;i.SolveVelocityConstraints(),++k}for(k=0;k<this.m_jointCount;)m=this.m_joints[k],m.FinalizeVelocityConstraints(),++k;for(i.FinalizeVelocityConstraints(),k=0;k<this.m_bodyCount;)h=this.m_bodies[k],h.GetType()!==c.b2_staticBody&&(s=a.dt*h.m_linearVelocity.x,t=a.dt*h.m_linearVelocity.y,s*s+t*t>f.b2_maxTranslationSquared&&(h.m_linearVelocity.Normalize(),h.m_linearVelocity.x*=f.b2_maxTranslation*a.inv_dt,h.m_linearVelocity.y*=f.b2_maxTranslation*a.inv_dt),r=a.dt*h.m_angularVelocity,r*r>f.b2_maxRotationSquared&&(h.m_angularVelocity=h.m_angularVelocity<0?-f.b2_maxRotation*a.inv_dt:f.b2_maxRotation*a.inv_dt),h.m_sweep.c0.SetV(h.m_sweep.c),h.m_sweep.a0=h.m_sweep.a,h.m_sweep.c.x+=a.dt*h.m_linearVelocity.x,h.m_sweep.c.y+=a.dt*h.m_linearVelocity.y,h.m_sweep.a+=a.dt*h.m_angularVelocity,h.SynchronizeTransform(),++k);for(k=0;k<a.positionIterations;){for(j=i.SolvePositionConstraints(f.b2_contactBaumgarte),o=!0,l=0;l<this.m_jointCount;)m=this.m_joints[l],n=m.SolvePositionConstraints(f.b2_contactBaumgarte),o=o&&n,++l;if(j&&o)break;++k}if(this.Report(i.m_constraints),d){for(q=Number.MAX_VALUE,p=f.b2_linearSleepTolerance*f.b2_linearSleepTolerance,g=f.b2_angularSleepTolerance*f.b2_angularSleepTolerance,k=0;k<this.m_bodyCount;)h=this.m_bodies[k],h.GetType()!==c.b2_staticBody&&(0===(h.m_flags&c.e_allowSleepFlag)&&(h.m_sleepTime=0,q=0),0===(h.m_flags&c.e_allowSleepFlag)||h.m_angularVelocity*h.m_angularVelocity>g||e.Dot(h.m_linearVelocity,h.m_linearVelocity)>p?(h.m_sleepTime=0,q=0):(h.m_sleepTime+=a.dt,q=e.Min(q,h.m_sleepTime)),++k);if(q>=f.b2_timeToSleep)for(k=0;k<this.m_bodyCount;)h=this.m_bodies[k],h.SetAwake(!1),++k}},a.prototype.SolveTOI=function(a){var b,d,e,g,h,i,j,k,l,m,n;for(g=0,h=0,this.m_contactSolver.Initialize(a,this.m_contacts,this.m_contactCount,this.m_allocator),d=this.m_contactSolver,g=0;g<this.m_jointCount;)this.m_joints[g].InitVelocityConstraints(a),++g;for(g=0;g<a.velocityIterations;){for(d.SolveVelocityConstraints(),h=0;h<this.m_jointCount;)this.m_joints[h].SolveVelocityConstraints(a),++h;++g}for(g=0;g<this.m_bodyCount;)b=this.m_bodies[g],b.GetType()!==c.b2_staticBody&&(m=a.dt*b.m_linearVelocity.x,n=a.dt*b.m_linearVelocity.y,m*m+n*n>f.b2_maxTranslationSquared&&(b.m_linearVelocity.Normalize(),b.m_linearVelocity.x*=f.b2_maxTranslation*a.inv_dt,b.m_linearVelocity.y*=f.b2_maxTranslation*a.inv_dt),l=a.dt*b.m_angularVelocity,l*l>f.b2_maxRotationSquared&&(b.m_angularVelocity=b.m_angularVelocity<0?-f.b2_maxRotation*a.inv_dt:f.b2_maxRotation*a.inv_dt),b.m_sweep.c0.SetV(b.m_sweep.c),b.m_sweep.a0=b.m_sweep.a,b.m_sweep.c.x+=a.dt*b.m_linearVelocity.x,b.m_sweep.c.y+=a.dt*b.m_linearVelocity.y,b.m_sweep.a+=a.dt*b.m_angularVelocity,b.SynchronizeTransform(),++g);for(k=.75,g=0;g<a.positionIterations;){for(e=d.SolvePositionConstraints(k),j=!0,h=0;h<this.m_jointCount;)i=this.m_joints[h].SolvePositionConstraints(f.b2_contactBaumgarte),j=j&&i,++h;if(e&&j)break;++g}this.Report(d.m_constraints)},a.prototype.Report=function(b){var c,d,e,f;if(null!=this.m_listener)for(e=0;e<this.m_contactCount;){for(c=this.m_contacts[e],d=b[e],f=0;f<d.pointCount;)a.s_impulse.normalImpulses[f]=d.points[f].normalImpulse,a.s_impulse.tangentImpulses[f]=d.points[f].tangentImpulse,++f;this.m_listener.PostSolve(c,a.s_impulse),++e}},a.prototype.AddBody=function(a){a.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=a},a.prototype.AddContact=function(a){this.m_contacts[this.m_contactCount++]=a},a.prototype.AddJoint=function(a){this.m_joints[this.m_jointCount++]=a},a.s_impulse=new d,a}()},{"../index":103}],57:[function(a){var b;b=a("../index"),b.Dynamics.b2TimeStep=function(){function a(){}return a.prototype.dt=0,a.prototype.inv_dt=0,a.prototype.positionIterations=0,a.prototype.velocityIterations=0,a.prototype.warmStarting=0,a.prototype.Set=function(a){this.dt=a.dt,this.inv_dt=a.inv_dt,this.positionIterations=a.positionIterations,this.velocityIterations=a.velocityIterations,this.warmStarting=a.warmStarting},a}()},{"../index":103}],58:[function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;b=a("../index"),c=b.Collision.b2AABB,f=b.Common.b2Color,r=b.Common.b2Settings,n=b.Common.Math.b2Math,t=b.Common.Math.b2Sweep,w=b.Common.Math.b2Vec2,v=b.Common.Math.b2Transform,d=b.Dynamics.b2Body,e=b.Dynamics.b2BodyDef,m=b.Dynamics.Joints.b2Joint,g=b.Dynamics.b2Contact,h=b.Dynamics.b2ContactManager,i=b.Dynamics.Contacts.b2ContactSolver,l=b.Dynamics.b2Island,u=b.Dynamics.b2TimeStep,j=b.Dynamics.b2DebugDraw,p=b.Collision.b2RayCastInput,q=b.Collision.b2RayCastOutput,s=b.Collision.Shapes.b2Shape,o=b.Collision.Shapes.b2PolygonShape,k=b.Collision.Shapes.b2EdgeShape,b.Dynamics.b2World=function(){function a(b,c){var d;this.s_stack=new Array,this.m_contactManager=new h,this.m_contactSolver=new i,this.m_island=new l,a.m_warmStarting=!0,a.m_continuousPhysics=!0,this.m_allowSleep=c,this.m_gravity=b,this.m_contactManager.m_world=this,d=new e,this.m_groundBody=this.CreateBody(d)}var b,g,x,y,z,A,B,C,D,E,F,G,H,I,J,K;return I=1,E=2,H=4,J=8,K=16,F=32,G=64,B=1,x=2,g=4,y=8,A=16,b=32,D=0,C=1,z=2,a.s_timestep2=new u,a.s_xf=new v,a.s_backupA=new t,a.s_backupB=new t,a.s_timestep=new u,a.s_queue=new Array,a.s_jointColor=new f(.5,.8,.8),a.e_newFixture=1,a.e_locked=2,a.prototype.s_stack=null,a.prototype.m_contactManager=null,a.prototype.m_contactSolver=null,a.prototype.m_island=null,a.prototype.m_destructionListener=null,a.prototype.m_debugDraw=null,a.prototype.m_bodyList=null,a.prototype.m_contactList=null,a.prototype.m_jointList=null,a.prototype.m_controllerList=null,a.prototype.m_bodyCount=0,a.prototype.m_contactCount=0,a.prototype.m_jointCount=0,a.prototype.m_controllerCount=0,a.prototype.m_allowSleep=null,a.prototype.m_gravity=null,a.prototype.m_inv_dt0=0,a.prototype.m_groundBody=null,a.prototype.SetDestructionListener=function(a){this.m_destructionListener=a},a.prototype.SetContactFilter=function(a){this.m_contactManager.m_contactFilter=a},a.prototype.SetContactListener=function(a){this.m_contactManager.m_contactListener=a},a.prototype.SetDebugDraw=function(a){this.m_debugDraw=a},a.prototype.SetBroadPhase=function(a){var b,c,d;for(d=this.m_contactManager.m_broadPhase,this.m_contactManager.m_broadPhase=a,b=this.m_bodyList;b;){for(c=b.m_fixtureList;c;)c.m_proxy=a.CreateProxy(d.GetFatAABB(c.m_proxy),c),c=c.m_next;b=b.m_next}},a.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},a.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},a.prototype.CreateBody=function(a){var b;return this.IsLocked()===!0?null:(b=new d(a,this),b.m_prev=null,b.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=b),this.m_bodyList=b,++this.m_bodyCount,b)},a.prototype.DestroyBody=function(a){var b,c,d,e,f,g,h,i;if(this.IsLocked()!==!0){for(h=a.m_jointList;h;)i=h,h=h.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint);for(d=a.m_controllerList;d;)e=d,d=d.nextController,e.controller.RemoveBody(a);for(b=a.m_contactList;b;)c=b,b=b.next,this.m_contactManager.Destroy(c.contact);for(a.m_contactList=null,f=a.m_fixtureList;f;)g=f,f=f.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(g),g.DestroyProxy(this.m_contactManager.m_broadPhase),g.Destroy();a.m_fixtureList=null,a.m_fixtureCount=0,a.m_prev&&(a.m_prev.m_next=a.m_next),a.m_next&&(a.m_next.m_prev=a.m_prev),a===this.m_bodyList&&(this.m_bodyList=a.m_next),--this.m_bodyCount}},a.prototype.CreateJoint=function(a){var b,c,d,e;if(e=m.Create(a,null),e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB,b=a.bodyA,c=a.bodyB,a.collideConnected===!1)for(d=c.GetContactList();d;)d.other===b&&d.contact.FlagForFiltering(),d=d.next;return e},a.prototype.DestroyJoint=function(a){var b,c,d,e;if(d=a.m_collideConnected,a.m_prev&&(a.m_prev.m_next=a.m_next),a.m_next&&(a.m_next.m_prev=a.m_prev),a===this.m_jointList&&(this.m_jointList=a.m_next),b=a.m_bodyA,c=a.m_bodyB,b.SetAwake(!0),c.SetAwake(!0),a.m_edgeA.prev&&(a.m_edgeA.prev.next=a.m_edgeA.next),a.m_edgeA.next&&(a.m_edgeA.next.prev=a.m_edgeA.prev),a.m_edgeA===b.m_jointList&&(b.m_jointList=a.m_edgeA.next),a.m_edgeA.prev=null,a.m_edgeA.next=null,a.m_edgeB.prev&&(a.m_edgeB.prev.next=a.m_edgeB.next),a.m_edgeB.next&&(a.m_edgeB.next.prev=a.m_edgeB.prev),a.m_edgeB===c.m_jointList&&(c.m_jointList=a.m_edgeB.next),a.m_edgeB.prev=null,a.m_edgeB.next=null,m.Destroy(a,null),--this.m_jointCount,d===!1)for(e=c.GetContactList();e;)e.other===b&&e.contact.FlagForFiltering(),e=e.next},a.prototype.AddController=function(a){return a.m_next=this.m_controllerList,a.m_prev=null,this.m_controllerList=a,a.m_world=this,this.m_controllerCount++,a},a.prototype.RemoveController=function(a){a.m_prev&&(a.m_prev.m_next=a.m_next),a.m_next&&(a.m_next.m_prev=a.m_prev),this.m_controllerList===a&&(this.m_controllerList=a.m_next),this.m_controllerCount--},a.prototype.CreateController=function(a){if(a.m_world!==this)throw new Error("Controller can only be a member of one world");return a.m_next=this.m_controllerList,a.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=a),this.m_controllerList=a,++this.m_controllerCount,a.m_world=this,a},a.prototype.DestroyController=function(a){a.Clear(),a.m_next&&(a.m_next.m_prev=a.m_prev),a.m_prev&&(a.m_prev.m_next=a.m_next),a===this.m_controllerList&&(this.m_controllerList=a.m_next),--this.m_controllerCount},a.prototype.SetWarmStarting=function(b){a.m_warmStarting=b},a.prototype.SetContinuousPhysics=function(b){a.m_continuousPhysics=b},a.prototype.GetBodyCount=function(){return this.m_bodyCount},a.prototype.GetJointCount=function(){return this.m_jointCount},a.prototype.GetContactCount=function(){return this.m_contactCount},a.prototype.SetGravity=function(a){this.m_gravity=a},a.prototype.GetGravity=function(){return this.m_gravity},a.prototype.GetGroundBody=function(){return this.m_groundBody},a.prototype.Step=function(b,c,d){var e;void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.m_flags&a.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~a.e_newFixture),this.m_flags|=a.e_locked,e=a.s_timestep2,e.dt=b,e.velocityIterations=c,e.positionIterations=d,e.inv_dt=b>0?1/b:0,e.dtRatio=this.m_inv_dt0*b,e.warmStarting=a.m_warmStarting,this.m_contactManager.Collide(),e.dt>0&&this.Solve(e),a.m_continuousPhysics&&e.dt>0&&this.SolveTOI(e),e.dt>0&&(this.m_inv_dt0=e.inv_dt),this.m_flags&=~a.e_locked},a.prototype.ClearForces=function(){var a;for(a=this.m_bodyList;a;)a.m_force.SetZero(),a.m_torque=0,a=a.m_next},a.prototype.DrawDebugData=function(){var b,d,e,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,x,y,z,A;if(null!=this.m_debugDraw){if(this.m_debugDraw.m_sprite.graphics.clear(),r=this.m_debugDraw.GetFlags(),s=0,d=void 0,o=void 0,v=void 0,u=void 0,h=void 0,t=new w,y=new w,z=new w,A=void 0,e=new c,g=new c,x=[new w,new w,new w,new w],m=new f(0,0,0),r&j.e_shapeBit)for(d=this.m_bodyList;d;){for(A=d.m_xf,o=d.GetFixtureList();o;)v=o.GetShape(),d.IsActive()===!1?(m.Set(.5,.5,.3),this.DrawShape(v,A,m)):d.GetType()===D?(m.Set(.5,.9,.5),this.DrawShape(v,A,m)):d.GetType()===C?(m.Set(.5,.5,.9),this.DrawShape(v,A,m)):d.IsAwake()===!1?(m.Set(.6,.6,.6),this.DrawShape(v,A,m)):(m.Set(.9,.7,.7),this.DrawShape(v,A,m)),o=o.m_next;d=d.m_next}if(r&j.e_jointBit)for(u=this.m_jointList;u;)this.DrawJoint(u),u=u.m_next;if(r&j.e_controllerBit)for(i=this.m_controllerList;i;)i.Draw(this.m_debugDraw),i=i.m_next;if(r&j.e_pairBit)for(m.Set(.3,.9,.9),n=this.m_contactManager.m_contactList;n;)p=n.GetFixtureA(),q=n.GetFixtureB(),k=p.GetAABB().GetCenter(),l=q.GetAABB().GetCenter(),this.m_debugDraw.DrawSegment(k,l,m),n=n.GetNext();if(r&j.e_aabbBit)for(h=this.m_contactManager.m_broadPhase,x=[new w,new w,new w,new w],d=this.m_bodyList;d;)if(d.IsActive()!==!1){for(o=d.GetFixtureList();o;)b=h.GetFatAABB(o.m_proxy),x[0].Set(b.lowerBound.x,b.lowerBound.y),x[1].Set(b.upperBound.x,b.lowerBound.y),x[2].Set(b.upperBound.x,b.upperBound.y),x[3].Set(b.lowerBound.x,b.upperBound.y),this.m_debugDraw.DrawPolygon(x,4,m),o=o.GetNext();d=d.GetNext()}if(r&j.e_centerOfMassBit)for(d=this.m_bodyList;d;)A=a.s_xf,A.R=d.m_xf.R,A.position=d.GetWorldCenter(),this.m_debugDraw.DrawTransform(A),d=d.m_next}},a.prototype.QueryAABB=function(a,b){var c,d,e;c=function(b){return a(d.GetUserData(b))},e=this,d=e.m_contactManager.m_broadPhase,d.Query(c,b)},a.prototype.QueryShape=function(a,b,d){var e,f,g,h;e=function(c){var e;return e=g.GetUserData(c)instanceof b2Fixture?g.GetUserData(c):null,s.TestOverlap(b,d,e.GetShape(),e.GetBody().GetTransform())?a(e):!0},h=this,void 0===d&&(d=null),null==d&&(d=new v,d.SetIdentity()),g=h.m_contactManager.m_broadPhase,f=new c,b.ComputeAABB(f,d),g.Query(e,f)},a.prototype.QueryPoint=function(a,b){var d,e,f,g;d=function(c){var d;return d=f.GetUserData(c)instanceof b2Fixture?f.GetUserData(c):null,d.TestPoint(b)?a(d):!0},g=this,f=g.m_contactManager.m_broadPhase,e=new c,e.lowerBound.Set(b.x-r.b2_linearSlop,b.y-r.b2_linearSlop),e.upperBound.Set(b.x+r.b2_linearSlop,b.y+r.b2_linearSlop),f.Query(d,e)},a.prototype.RayCast=function(a,b,c){var d,e,f,g,h;d=function(d,f){var h,i,j,k,l;return l=e.GetUserData(f),h=l instanceof b2Fixture?l:null,j=h.RayCast(g,d),j?(i=g.fraction,k=new w((1-i)*b.x+i*c.x,(1-i)*b.y+i*c.y),a(h,k,g.normal,i)):d.maxFraction},h=this,e=h.m_contactManager.m_broadPhase,g=new q,f=new p(b,c),e.RayCast(d,f)},a.prototype.RayCastOne=function(a,b){var c,d,e;return c=function(a,b,c,d){var e;return void 0===d&&(d=0),e=a,d},e=this,d=void 0,e.RayCast(c,a,b),d},a.prototype.RayCastAll=function(a,b){var c,d,e;return c=function(a,b,c,e){return void 0===e&&(e=0),d[d.length]=a,1},e=this,d=new Array,e.RayCast(c,a,b),d},a.prototype.GetBodyList=function(){return this.m_bodyList},a.prototype.GetJointList=function(){return this.m_jointList},a.prototype.GetContactList=function(){return this.m_contactList},a.prototype.IsLocked=function(){return(this.m_flags&a.e_locked)>0},a.prototype.Solve=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;for(b=void 0,e=this.m_controllerList;e;)e.Step(a),e=e.m_next;for(g=this.m_island,g.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),b=this.m_bodyList;b;)b.m_flags&=~B,b=b.m_next;for(c=this.m_contactList;c;)c.m_flags&=~H,c=c.m_next;for(h=this.m_jointList;h;)h.m_islandFlag=!1,h=h.m_next;for(n=parseInt(this.m_bodyCount),l=this.s_stack,k=this.m_bodyList;k;)if(k.m_flags&B)k=k.m_next;else if(k.IsAwake()!==!1&&k.IsActive()!==!1)if(k.GetType()!==D){for(g.Clear(),m=0,l[m++]=k,k.m_flags|=B;m>0;)if(b=l[--m],g.AddBody(b),b.IsAwake()===!1&&b.SetAwake(!0),b.GetType()!==D){for(j=void 0,d=b.m_contactList;d;)d.contact.m_flags&H?d=d.next:d.contact.IsSensor()!==!0&&d.contact.IsEnabled()!==!1&&d.contact.IsTouching()!==!1?(g.AddContact(d.contact),d.contact.m_flags|=H,j=d.other,j.m_flags&B?d=d.next:(l[m++]=j,j.m_flags|=B,d=d.next)):d=d.next;for(i=b.m_jointList;i;)i.joint.m_islandFlag!==!0?(j=i.other,j.IsActive()!==!1?(g.AddJoint(i.joint),i.joint.m_islandFlag=!0,j.m_flags&B?i=i.next:(l[m++]=j,j.m_flags|=B,i=i.next)):i=i.next):i=i.next}for(g.Solve(a,this.m_gravity,this.m_allowSleep),f=0;f<g.m_bodyCount;)b=g.m_bodies[f],b.GetType()===D&&(b.m_flags&=~B),++f;k=k.m_next}else k=k.m_next;else k=k.m_next;for(f=0;f<l.length&&l[f];)l[f]=null,++f;for(b=this.m_bodyList;b;)b.IsAwake()!==!1&&b.IsActive()!==!1&&b.GetType()!==D?(b.SynchronizeFixtures(),b=b.m_next):b=b.m_next;this.m_contactManager.FindNewContacts()},a.prototype.SolveTOI=function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y;for(c=void 0,i=void 0,j=void 0,e=void 0,f=void 0,h=void 0,m=void 0,l=this.m_island,l.Initialize(this.m_bodyCount,r.b2_maxTOIContactsPerIsland,r.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver),s=a.s_queue,c=this.m_bodyList;c;)c.m_flags&=~B,c.m_sweep.t0=0,c=c.m_next;for(g=void 0,g=this.m_contactList;g;)g.m_flags&=~(J|H),g=g.m_next;for(m=this.m_jointList;m;)m.m_islandFlag=!1,m=m.m_next;for(;;){for(o=null,p=1,g=this.m_contactList;g;)if(g.IsSensor()!==!0&&g.IsEnabled()!==!1&&g.IsContinuous()!==!1){if(y=1,g.m_flags&J)y=g.m_toi;else{if(i=g.m_fixtureA,j=g.m_fixtureB,e=i.m_body,f=j.m_body,!(e.GetType()===d.b2_dynamicBody&&e.IsAwake()!==!1||f.GetType()===d.b2_dynamicBody&&f.IsAwake()!==!1))continue;x=e.m_sweep.t0,e.m_sweep.t0<f.m_sweep.t0?(x=f.m_sweep.t0,e.m_sweep.Advance(x)):f.m_sweep.t0<e.m_sweep.t0&&(x=e.m_sweep.t0,f.m_sweep.Advance(x)),y=g.ComputeTOI(e.m_sweep,f.m_sweep),r.b2Assert(y>=0&&1>=y),y>0&&1>y&&(y=(1-y)*x+y,y>1&&(y=1)),g.m_toi=y,g.m_flags|=J}Number.MIN_VALUE<y&&p>y&&(o=g,p=y),g=g.m_next}if(null==o||1-100*Number.MIN_VALUE<p)break;if(i=o.m_fixtureA,j=o.m_fixtureB,e=i.m_body,f=j.m_body,a.s_backupA.Set(e.m_sweep),a.s_backupB.Set(f.m_sweep),e.Advance(p),f.Advance(p),o.Update(this.m_contactManager.m_contactListener),o.m_flags&=~J,o.IsSensor()!==!0&&o.IsEnabled()!==!1){if(o.IsTouching()!==!1){for(v=e,v.GetType()!==d.b2_dynamicBody&&(v=f),l.Clear(),u=0,t=0,s[u+t++]=v,v.m_flags|=B;t>0;)if(c=s[u++],--t,l.AddBody(c),c.IsAwake()===!1&&c.SetAwake(!0),c.GetType()===d.b2_dynamicBody){for(h=c.m_contactList;h&&l.m_contactCount!==l.m_contactCapacity;)h.contact.m_flags&H||h.contact.IsSensor()!==!0&&h.contact.IsEnabled()!==!1&&h.contact.IsTouching()!==!1&&(l.AddContact(h.contact),h.contact.m_flags|=H,q=h.other,q.m_flags&B||(q.GetType()!==D&&(q.Advance(p),q.SetAwake(!0)),s[u+t]=q,++t,q.m_flags|=B,h=h.next));for(n=c.m_jointList;n;)l.m_jointCount!==l.m_jointCapacity&&n.joint.m_islandFlag!==!0&&(q=n.other,q.IsActive()!==!1&&(l.AddJoint(n.joint),n.joint.m_islandFlag=!0,q.m_flags&B||(q.GetType()!==D&&(q.Advance(p),q.SetAwake(!0)),s[u+t]=q,++t,q.m_flags|=B,n=n.next)))}for(w=a.s_timestep,w.warmStarting=!1,w.dt=(1-p)*b.dt,w.inv_dt=1/w.dt,w.dtRatio=0,w.velocityIterations=b.velocityIterations,w.positionIterations=b.positionIterations,l.SolveTOI(w),k=0,k=0;k<l.m_bodyCount;)if(c=l.m_bodies[k],c.m_flags&=~B,c.IsAwake()!==!1&&c.GetType()===d.b2_dynamicBody){for(c.SynchronizeFixtures(),h=c.m_contactList;h;)h.contact.m_flags&=~J,h=h.next;++k}for(k=0;k<l.m_contactCount;)g=l.m_contacts[k],g.m_flags&=~(J|H),++k;for(k=0;k<l.m_jointCount;)m=l.m_joints[k],m.m_islandFlag=!1,++k;this.m_contactManager.FindNewContacts()}}else e.m_sweep.Set(a.s_backupA),f.m_sweep.Set(a.s_backupB),e.SynchronizeTransform(),f.SynchronizeTransform()}},a.prototype.DrawJoint=function(b){var c,d,e,f,g,h,i,j,k,l,n,o;switch(c=b.GetBodyA(),d=b.GetBodyB(),n=c.m_xf,o=d.m_xf,k=n.position,l=o.position,f=b.GetAnchorA(),g=b.GetAnchorB(),e=a.s_jointColor,b.m_type){case m.e_distanceJoint:this.m_debugDraw.DrawSegment(f,g,e);break;case m.e_pulleyJoint:h=b instanceof b2PulleyJoint?b:null,i=h.GetGroundAnchorA(),j=h.GetGroundAnchorB(),this.m_debugDraw.DrawSegment(i,f,e),this.m_debugDraw.DrawSegment(j,g,e),this.m_debugDraw.DrawSegment(i,j,e);break;case m.e_mouseJoint:this.m_debugDraw.DrawSegment(f,g,e);break;default:c!==this.m_groundBody&&this.m_debugDraw.DrawSegment(k,f,e),this.m_debugDraw.DrawSegment(f,g,e),d!==this.m_groundBody&&this.m_debugDraw.DrawSegment(l,g,e)}},a.prototype.DrawShape=function(a,b,c){var d,e,f,g,h,i,j,l,m,p;switch(a.m_type){case s.e_circleShape:return f=a instanceof b2CircleShape?a:null,e=n.MulX(b,f.m_p),l=f.m_radius,d=b.R.col1,this.m_debugDraw.DrawSolidCircle(e,l,d,c);case s.e_polygonShape:for(h=0,j=a instanceof o?a:null,m=parseInt(j.GetVertexCount()),i=j.GetVertices(),p=new Array(m),h=0;m>h;)p[h]=n.MulX(b,i[h]),++h;return this.m_debugDraw.DrawSolidPolygon(p,m,c);case s.e_edgeShape:return g=a instanceof k?a:null,this.m_debugDraw.DrawSegment(n.MulX(b,g.GetVertex1()),n.MulX(b,g.GetVertex2()),c)}},a}()},{"../index":103}],59:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),e=b.Dynamics.Contacts.b2Contact,d=b.Collision.b2Collision,c=b.Collision.Shapes.b2CircleShape,b.Dynamics.Contacts.b2CircleContact=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.Create=function(){return new b},b.Destroy=function(){},b.prototype.Reset=function(a,c){b.__super__.Reset.call(this,a,c)},b.prototype.Evaluate=function(){var a,b;a=this.m_fixtureA.GetBody(),b=this.m_fixtureB.GetBody(),d.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof c?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof c?this.m_fixtureB.GetShape():null,b.m_xf)},b}(e)},{"../../index":103}],60:[function(a){var b,c,d,e,f,g;b=a("../../index"),e=b.Common.b2Settings,c=b.Dynamics.Contacts.b2ContactEdge,d=b.Collision.b2Manifold,g=b.Collision.b2TimeOfImpact,f=b.Collision.b2TOIInput,b.Dynamics.Contacts.b2Contact=function(){function a(){this.m_nodeA=new c,this.m_nodeB=new c,this.m_manifold=new d,this.m_oldManifold=new d}return a.e_sensorFlag=1,a.e_continuousFlag=2,a.e_islandFlag=4,a.e_toiFlag=8,a.e_touchingFlag=16,a.e_enabledFlag=32,a.e_filterFlag=64,a.s_input=new f,a.prototype.m_nodeA=null,a.prototype.m_nodeB=null,a.prototype.m_manifold=null,a.prototype.m_oldManifold=null,a.prototype.m_fixtureA=null,a.prototype.m_fixtureB=null,a.prototype.m_touching=!1,a.prototype.GetManifold=function(){return this.m_manifold},a.prototype.GetWorldManifold=function(a){var b,c,d,e;b=this.m_fixtureA.GetBody(),c=this.m_fixtureB.GetBody(),d=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape(),a.Initialize(this.m_manifold,b.GetTransform(),d.m_radius,c.GetTransform(),e.m_radius)},a.prototype.IsTouching=function(){return(this.m_flags&a.e_touchingFlag)===a.e_touchingFlag},a.prototype.IsContinuous=function(){return(this.m_flags&a.e_continuousFlag)===a.e_continuousFlag},a.prototype.SetSensor=function(b){b?this.m_flags|=a.e_sensorFlag:this.m_flags&=~a.e_sensorFlag},a.prototype.IsSensor=function(){return(this.m_flags&a.e_sensorFlag)===a.e_sensorFlag},a.prototype.SetEnabled=function(b){b?this.m_flags|=a.e_enabledFlag:this.m_flags&=~a.e_enabledFlag},a.prototype.IsEnabled=function(){return(this.m_flags&a.e_enabledFlag)===a.e_enabledFlag},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetFixtureA=function(){return this.m_fixtureA},a.prototype.GetFixtureB=function(){return this.m_fixtureB},a.prototype.FlagForFiltering=function(){this.m_flags|=a.e_filterFlag},a.prototype.Reset=function(c,d){var e,f;return void 0===c&&(c=null),void 0===d&&(d=null),this.m_flags=a.e_enabledFlag,c&&d?((c.IsSensor()||d.IsSensor())&&(this.m_flags|=a.e_sensorFlag),e=c.GetBody(),f=d.GetBody(),(e.GetType()!==b.Dynamics.b2Body.b2_dynamicBody||e.IsBullet()||f.GetType()!==b.Dynamics.b2Body.b2_dynamicBody||f.IsBullet())&&(this.m_flags|=a.e_continuousFlag),this.m_fixtureA=c,this.m_fixtureB=d,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,void(this.m_nodeB.other=null)):(this.m_fixtureA=null,void(this.m_fixtureB=null))},a.prototype.Update=function(c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(n=this.m_oldManifold,this.m_oldManifold=this.m_manifold,this.m_manifold=n,this.m_flags|=a.e_enabledFlag,o=!1,p=(this.m_flags&a.e_touchingFlag)===a.e_touchingFlag,e=this.m_fixtureA.m_body,f=this.m_fixtureB.m_body,d=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb),this.m_flags&a.e_sensorFlag)d&&(l=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape(),q=e.GetTransform(),r=f.GetTransform(),o=b2Shape.TestOverlap(l,q,m,r)),this.m_manifold.m_pointCount=0;else{if(e.GetType()!==b.Dynamics.b2Body.b2_dynamicBody||e.IsBullet()||f.GetType()!==b.Dynamics.b2Body.b2_dynamicBody||f.IsBullet()?this.m_flags|=a.e_continuousFlag:this.m_flags&=~a.e_continuousFlag,d)for(this.Evaluate(),o=this.m_manifold.m_pointCount>0,g=0;g<this.m_manifold.m_pointCount;){for(k=this.m_manifold.m_points[g],k.m_normalImpulse=0,k.m_tangentImpulse=0,h=k.m_id,i=0;i<this.m_oldManifold.m_pointCount;){if(j=this.m_oldManifold.m_points[i],j.m_id.key===h.key){k.m_normalImpulse=j.m_normalImpulse,k.m_tangentImpulse=j.m_tangentImpulse;break}++i}++g}else this.m_manifold.m_pointCount=0;o!==p&&(e.SetAwake(!0),f.SetAwake(!0))}o?this.m_flags|=a.e_touchingFlag:this.m_flags&=~a.e_touchingFlag,p===!1&&o===!0&&c.BeginContact(this),p===!0&&o===!1&&c.EndContact(this),0===(this.m_flags&a.e_sensorFlag)&&c.PreSolve(this,this.m_oldManifold)},a.prototype.Evaluate=function(){},a.prototype.ComputeTOI=function(b,c){return a.s_input.proxyA.Set(this.m_fixtureA.GetShape()),a.s_input.proxyB.Set(this.m_fixtureB.GetShape()),a.s_input.sweepA=b,a.s_input.sweepB=c,a.s_input.tolerance=e.b2_linearSlop,g.TimeOfImpact(a.s_input)},a}()},{"../../index":103}],61:[function(a){var b,c,d,e,f;b=a("../../index"),e=b.Common.b2Settings,c=b.Dynamics.Contacts.b2ContactConstraintPoint,f=b.Common.Math.b2Vec2,d=b.Common.Math.b2Mat22,b.Dynamics.Contacts.b2ContactConstraint=function(){function a(){var a;for(this.localPlaneNormal=new f,this.localPoint=new f,this.normal=new f,this.normalMass=new d,this.K=new d,this.points=new Array(e.b2_maxManifoldPoints),a=0;a<e.b2_maxManifoldPoints;)this.points[a]=new c,a++}return a.prototype.localPlaneNormal=null,a.prototype.localPoint=null,a.prototype.normal=null,a.prototype.normalMass=null,a.prototype.K=null,a.prototype.points=null,a}()},{"../../index":103}],62:[function(a){var b,c;b=a("../../index"),c=b.Common.Math.b2Vec2,b.Dynamics.Contacts.b2ContactConstraintPoint=function(){function a(){this.localPoint=new c,this.rA=new c,this.rB=new c}return a.prototype.localPoint=null,a.prototype.rA=null,a.prototype.rB=null,a}()},{"../../index":103}],63:[function(a){var b;b=a("../../index"),b.Dynamics.Contacts.b2ContactEdge=function(){function a(){}return a}()},{"../../index":103}],64:[function(a){var b,c,d,e,f,g,h,i;b=a("../../index"),i=b.Collision.Shapes.b2Shape,d=b.Dynamics.Contacts.b2ContactRegister,c=b.Dynamics.Contacts.b2CircleContact,f=b.Dynamics.Contacts.b2PolyAndCircleContact,h=b.Dynamics.Contacts.b2PolygonContact,e=b.Dynamics.Contacts.b2EdgeAndCircleContact,g=b.Dynamics.Contacts.b2PolyAndEdgeContact,b.Dynamics.Contacts.b2ContactFactory=function(){function a(a){this.m_allocator=a,this.InitializeRegisters()}return a.prototype.m_allocator=null,a.prototype.m_registers=null,a.prototype.AddType=function(a,b,c,d){void 0===c&&(c=0),void 0===d&&(d=0),this.m_registers[c][d].createFcn=a,this.m_registers[c][d].destroyFcn=b,this.m_registers[c][d].primary=!0,c!==d&&(this.m_registers[d][c].createFcn=a,this.m_registers[d][c].destroyFcn=b,this.m_registers[d][c].primary=!1)},a.prototype.InitializeRegisters=function(){var a,b;for(this.m_registers=new Array(i.e_shapeTypeCount),a=0;a<i.e_shapeTypeCount;){for(this.m_registers[a]=new Array(i.e_shapeTypeCount),b=0;b<i.e_shapeTypeCount;)this.m_registers[a][b]=new d,b++;a++}this.AddType(c.Create,c.Destroy,i.e_circleShape,i.e_circleShape),this.AddType(f.Create,f.Destroy,i.e_polygonShape,i.e_circleShape),this.AddType(h.Create,h.Destroy,i.e_polygonShape,i.e_polygonShape),this.AddType(e.Create,e.Destroy,i.e_edgeShape,i.e_circleShape),this.AddType(g.Create,g.Destroy,i.e_polygonShape,i.e_edgeShape)
},a.prototype.Create=function(a,b){var c,d,e,f,g;return f=parseInt(a.GetType()),g=parseInt(b.GetType()),e=this.m_registers[f][g],c=void 0,e.pool?(c=e.pool,e.pool=c.m_next,e.poolCount--,c.Reset(a,b),c):(d=e.createFcn,null!=d?e.primary?(c=d(this.m_allocator),c.Reset(a,b),c):(c=d(this.m_allocator),c.Reset(b,a),c):null)},a.prototype.Destroy=function(a){var b,c,d,e;a.m_manifold.m_pointCount>0&&(a.m_fixtureA.m_body.SetAwake(!0),a.m_fixtureB.m_body.SetAwake(!0)),d=parseInt(a.m_fixtureA.GetType()),e=parseInt(a.m_fixtureB.GetType()),c=this.m_registers[d][e],c.poolCount++,a.m_next=c.pool,c.pool=a,(b=c.destroyFcn)(a,this.m_allocator)},a}()},{"../../index":103}],65:[function(a){var b;b=a("../../index"),b.Dynamics.Contacts.b2ContactRegister=function(){function a(){}return a}()},{"../../index":103}],66:[function(a){var b,c,d;b=a("../../index"),c=b.Collision.b2ContactID,d=b.Common.Math.b2Vec2,b.Dynamics.Contacts.b2ContactResult=function(){function a(){this.position=new d,this.normal=new d,this.id=new c}return a.prototype.position=null,a.prototype.normal=null,a.prototype.id=null,a}()},{"../../index":103}],67:[function(a){var b,c,d,e,f,g,h;b=a("../../index"),d=b.Common.Math.b2Math,f=b.Common.b2Settings,g=b.Dynamics.b2TimeStep,c=b.Dynamics.Contacts.b2ContactConstraint,h=b.Collision.b2WorldManifold,e=b.Dynamics.Contacts.b2PositionSolverManifold,b.Dynamics.Contacts.b2ContactSolver=function(){function a(){this.m_step=new g,this.m_constraints=new Array}return a.s_worldManifold=new h,a.s_psm=new e,a.prototype.m_step=null,a.prototype.m_constraints=null,a.prototype.m_allocator=null,a.prototype.m_constraintCount=0,a.prototype.Initialize=function(b,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb;for(void 0===e&&(e=0),n=void 0,this.m_step.Set(b),this.m_allocator=g,s=0,$=void 0,Z=void 0,this.m_constraintCount=e;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new c;for(s=0;e>s;){for(n=d[s],p=n.m_fixtureA,q=n.m_fixtureB,X=p.m_shape,Y=q.m_shape,M=X.m_radius,N=Y.m_radius,h=p.m_body,i=q.m_body,F=n.GetManifold(),r=f.b2MixFriction(p.GetFriction(),q.GetFriction()),O=f.b2MixRestitution(p.GetRestitution(),q.GetRestitution()),db=h.m_linearVelocity.x,eb=h.m_linearVelocity.y,fb=i.m_linearVelocity.x,gb=i.m_linearVelocity.y,ib=h.m_angularVelocity,jb=i.m_angularVelocity,f.b2Assert(F.m_pointCount>0),a.s_worldManifold.Initialize(F,h.m_xf,M,i.m_xf,N),G=a.s_worldManifold.m_normal.x,H=a.s_worldManifold.m_normal.y,j=this.m_constraints[s],j.bodyA=h,j.bodyB=i,j.manifold=F,j.normal.x=G,j.normal.y=H,j.pointCount=F.m_pointCount,j.friction=r,j.restitution=O,j.localPlaneNormal.x=F.m_localPlaneNormal.x,j.localPlaneNormal.y=F.m_localPlaneNormal.y,j.localPoint.x=F.m_localPoint.x,j.localPoint.y=F.m_localPoint.y,j.radius=M+N,j.type=F.m_type,x=0;x<j.pointCount;)o=F.m_points[x],k=j.points[x],k.normalImpulse=o.m_normalImpulse,k.tangentImpulse=o.m_tangentImpulse,k.localPoint.SetV(o.m_localPoint),I=k.rA.x=a.s_worldManifold.m_points[x].x-h.m_sweep.c.x,J=k.rA.y=a.s_worldManifold.m_points[x].y-h.m_sweep.c.y,K=k.rB.x=a.s_worldManifold.m_points[x].x-i.m_sweep.c.x,L=k.rB.y=a.s_worldManifold.m_points[x].y-i.m_sweep.c.y,T=I*H-J*G,U=K*H-L*G,T*=T,U*=U,C=h.m_invMass+i.m_invMass+h.m_invI*T+i.m_invI*U,k.normalMass=1/C,B=h.m_mass*h.m_invMass+i.m_mass*i.m_invMass,B+=h.m_mass*h.m_invI*T+i.m_mass*i.m_invI*U,k.equalizedMass=1/B,bb=H,cb=-G,V=I*cb-J*bb,W=K*cb-L*bb,V*=V,W*=W,D=h.m_invMass+i.m_invMass+h.m_invI*V+i.m_invI*W,k.tangentMass=1/D,k.velocityBias=0,_=fb+-jb*L-db- -ib*J,ab=gb+jb*K-eb-ib*I,hb=j.normal.x*_+j.normal.y*ab,hb<-f.b2_velocityThreshold&&(k.velocityBias+=-j.restitution*hb),++x;2===j.pointCount&&(l=j.points[0],m=j.points[1],v=h.m_invMass,t=h.m_invI,w=i.m_invMass,u=i.m_invI,P=l.rA.x*H-l.rA.y*G,Q=l.rB.x*H-l.rB.y*G,R=m.rA.x*H-m.rA.y*G,S=m.rB.x*H-m.rB.y*G,y=v+w+t*P*P+u*Q*Q,A=v+w+t*R*R+u*S*S,z=v+w+t*P*R+u*Q*S,E=100,E*(y*A-z*z)>y*y?(j.K.col1.Set(y,z),j.K.col2.Set(z,A),j.K.GetInverse(j.normalMass)):j.pointCount=1),++s}},a.prototype.InitVelocityConstraints=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(s=void 0,t=void 0,r=void 0,i=0;i<this.m_constraintCount;){if(f=this.m_constraints[i],d=f.bodyA,e=f.bodyB,l=d.m_invMass,j=d.m_invI,m=e.m_invMass,k=e.m_invI,o=f.normal.x,p=f.normal.y,v=p,w=-o,u=0,n=0,q=0,a.warmStarting)for(q=f.pointCount,n=0;q>n;)g=f.points[n],g.normalImpulse*=a.dtRatio,g.tangentImpulse*=a.dtRatio,b=g.normalImpulse*o+g.tangentImpulse*v,c=g.normalImpulse*p+g.tangentImpulse*w,d.m_angularVelocity-=j*(g.rA.x*c-g.rA.y*b),d.m_linearVelocity.x-=l*b,d.m_linearVelocity.y-=l*c,e.m_angularVelocity+=k*(g.rB.x*c-g.rB.y*b),e.m_linearVelocity.x+=m*b,e.m_linearVelocity.y+=m*c,++n;else for(q=f.pointCount,n=0;q>n;)h=f.points[n],h.normalImpulse=0,h.tangentImpulse=0,++n;++i}},a.prototype.SolveVelocityConstraints=function(){var a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db;for(F=0,o=void 0,M=0,N=0,O=0,P=0,x=0,y=0,Y=0,_=0,H=0,I=0,J=0,f=0,g=0,r=0,s=0,a=0,b=0,c=0,e=0,R=void 0,S=void 0,A=0;A<this.m_constraintCount;){for(n=this.m_constraints[A],l=n.bodyA,m=n.bodyB,ab=l.m_angularVelocity,bb=m.m_angularVelocity,W=l.m_linearVelocity,X=m.m_linearVelocity,D=l.m_invMass,B=l.m_invI,E=m.m_invMass,C=m.m_invI,K=n.normal.x,L=n.normal.y,U=L,V=-K,z=n.friction,T=0,F=0;F<n.pointCount;)o=n.points[F],x=X.x-bb*o.rB.y-W.x+ab*o.rA.y,y=X.y+bb*o.rB.x-W.y-ab*o.rA.x,_=x*U+y*V,H=o.tangentMass*-_,I=z*o.normalImpulse,J=d.Clamp(o.tangentImpulse+H,-I,I),H=J-o.tangentImpulse,f=H*U,g=H*V,W.x-=D*f,W.y-=D*g,ab-=B*(o.rA.x*g-o.rA.y*f),X.x+=E*f,X.y+=E*g,bb+=C*(o.rB.x*g-o.rB.y*f),o.tangentImpulse=J,F++;if(Q=parseInt(n.pointCount),1===n.pointCount)o=n.points[0],x=X.x+-bb*o.rB.y-W.x- -ab*o.rA.y,y=X.y+bb*o.rB.x-W.y-ab*o.rA.x,Y=x*K+y*L,H=-o.normalMass*(Y-o.velocityBias),J=o.normalImpulse+H,J=J>0?J:0,H=J-o.normalImpulse,f=H*K,g=H*L,W.x-=D*f,W.y-=D*g,ab-=B*(o.rA.x*g-o.rA.y*f),X.x+=E*f,X.y+=E*g,bb+=C*(o.rB.x*g-o.rB.y*f),o.normalImpulse=J;else for(p=n.points[0],q=n.points[1],h=p.normalImpulse,i=q.normalImpulse,t=X.x-bb*p.rB.y-W.x+ab*p.rA.y,u=X.y+bb*p.rB.x-W.y-ab*p.rA.x,v=X.x-bb*q.rB.y-W.x+ab*q.rA.y,w=X.y+bb*q.rB.x-W.y-ab*q.rA.x,Z=t*K+u*L,$=v*K+w*L,j=Z-p.velocityBias,k=$-q.velocityBias,R=n.K,j-=R.col1.x*h+R.col2.x*i,k-=R.col1.y*h+R.col2.y*i,G=.001;;){if(R=n.normalMass,cb=-(R.col1.x*j+R.col2.x*k),db=-(R.col1.y*j+R.col2.y*k),cb>=0&&db>=0){r=cb-h,s=db-i,a=r*K,b=r*L,c=s*K,e=s*L,W.x-=D*(a+c),W.y-=D*(b+e),ab-=B*(p.rA.x*b-p.rA.y*a+q.rA.x*e-q.rA.y*c),X.x+=E*(a+c),X.y+=E*(b+e),bb+=C*(p.rB.x*b-p.rB.y*a+q.rB.x*e-q.rB.y*c),p.normalImpulse=cb,q.normalImpulse=db;break}if(cb=-p.normalMass*j,db=0,Z=0,$=n.K.col1.y*cb+k,cb>=0&&$>=0){r=cb-h,s=db-i,a=r*K,b=r*L,c=s*K,e=s*L,W.x-=D*(a+c),W.y-=D*(b+e),ab-=B*(p.rA.x*b-p.rA.y*a+q.rA.x*e-q.rA.y*c),X.x+=E*(a+c),X.y+=E*(b+e),bb+=C*(p.rB.x*b-p.rB.y*a+q.rB.x*e-q.rB.y*c),p.normalImpulse=cb,q.normalImpulse=db;break}if(cb=0,db=-q.normalMass*k,Z=n.K.col2.x*db+j,$=0,db>=0&&Z>=0){r=cb-h,s=db-i,a=r*K,b=r*L,c=s*K,e=s*L,W.x-=D*(a+c),W.y-=D*(b+e),ab-=B*(p.rA.x*b-p.rA.y*a+q.rA.x*e-q.rA.y*c),X.x+=E*(a+c),X.y+=E*(b+e),bb+=C*(p.rB.x*b-p.rB.y*a+q.rB.x*e-q.rB.y*c),p.normalImpulse=cb,q.normalImpulse=db;break}if(cb=0,db=0,Z=j,$=k,Z>=0&&$>=0){r=cb-h,s=db-i,a=r*K,b=r*L,c=s*K,e=s*L,W.x-=D*(a+c),W.y-=D*(b+e),ab-=B*(p.rA.x*b-p.rA.y*a+q.rA.x*e-q.rA.y*c),X.x+=E*(a+c),X.y+=E*(b+e),bb+=C*(p.rB.x*b-p.rB.y*a+q.rB.x*e-q.rB.y*c),p.normalImpulse=cb,q.normalImpulse=db;break}break}l.m_angularVelocity=ab,m.m_angularVelocity=bb,++A}},a.prototype.FinalizeVelocityConstraints=function(){var a,b,c,d,e,f;for(b=0;b<this.m_constraintCount;){for(a=this.m_constraints[b],d=a.manifold,c=0;c<a.pointCount;)e=d.m_points[c],f=a.points[c],e.m_normalImpulse=f.normalImpulse,e.m_tangentImpulse=f.tangentImpulse,++c;++b}},a.prototype.SolvePositionConstraints=function(b){var c,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;for(void 0===b&&(b=0),s=0,l=0;l<this.m_constraintCount;){for(j=this.m_constraints[l],h=j.bodyA,i=j.bodyB,p=h.m_mass*h.m_invMass,n=h.m_mass*h.m_invI,q=i.m_mass*i.m_invMass,o=i.m_mass*i.m_invI,a.s_psm.Initialize(j),t=a.s_psm.m_normal,r=0;r<j.pointCount;)k=j.points[r],u=a.s_psm.m_points[r],z=a.s_psm.m_separations[r],v=u.x-h.m_sweep.c.x,w=u.y-h.m_sweep.c.y,x=u.x-i.m_sweep.c.x,y=u.y-i.m_sweep.c.y,s=z>s?s:z,c=d.Clamp(b*(z+f.b2_linearSlop),-f.b2_maxLinearCorrection,0),m=-k.equalizedMass*c,e=m*t.x,g=m*t.y,h.m_sweep.c.x-=p*e,h.m_sweep.c.y-=p*g,h.m_sweep.a-=n*(v*g-w*e),h.SynchronizeTransform(),i.m_sweep.c.x+=q*e,i.m_sweep.c.y+=q*g,i.m_sweep.a+=o*(x*g-y*e),i.SynchronizeTransform(),r++;l++}return s>-1.5*f.b2_linearSlop},a}()},{"../../index":103}],68:[function(a){var b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Contacts.b2Contact,b.Dynamics.Contacts.b2EdgeAndCircleContact=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var c;return e(b,a),b.prototype.m_fixtureA=null,b.prototype.m_fixtureB=null,b.prototype.m_manifold=null,b.Create=function(){return new b},b.Destroy=function(){},b.prototype.Reset=function(a,c){b.__super__.Reset.call(this,a,c)},b.prototype.Evaluate=function(){var a,b;a=this.m_fixtureA.GetBody(),b=this.m_fixtureB.GetBody(),this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2EdgeShape?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof b2CircleShape?this.m_fixtureB.GetShape():null,b.m_xf)},c=function(){},b}(c)},{"../../index":103}],69:[function(a){var b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Contacts.b2Contact,b.Dynamics.Contacts.b2NullContact=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.Evaluate=function(){},b}(c)},{"../../index":103}],70:[function(a){var b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Contacts.b2Contact,b.Dynamics.Contacts.b2PolyAndCircleContact=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var c;return e(b,a),b.Create=function(){return new b},b.Destroy=function(){},b.prototype.Reset=function(a,c){b.__super__.Reset.call(this,a,c),b2Settings.b2Assert(a.GetType()===b2Shape.e_polygonShape),b2Settings.b2Assert(c.GetType()===b2Shape.e_circleShape)},c=function(){var a,b;a=this.m_fixtureA.m_body,b=this.m_fixtureB.m_body,b2Collision.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2PolygonShape?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof b2CircleShape?this.m_fixtureB.GetShape():null,b.m_xf)},b}(c)},{"../../index":103}],71:[function(a){var b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Contacts.b2Contact,b.Dynamics.Contacts.b2PolyAndEdgeContact=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.Create=function(){return new b},b.Destroy=function(){},b.prototype.Reset=function(a,c){b.__super__.Reset.call(this,a,c),b2Settings.b2Assert(a.GetType()===b2Shape.e_polygonShape),b2Settings.b2Assert(c.GetType()===b2Shape.e_edgeShape)},b.prototype.Evaluate=function(){var a,b;a=this.m_fixtureA.GetBody(),b=this.m_fixtureB.GetBody(),this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2PolygonShape?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof b2EdgeShape?this.m_fixtureB.GetShape():null,b.m_xf)},b}(c)},{"../../index":103}],72:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),d=b.Dynamics.Contacts.b2Contact,c=b.Collision.b2Collision,e=b.Collision.Shapes.b2PolygonShape,b.Dynamics.Contacts.b2PolygonContact=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.Create=function(){return new b},b.Destroy=function(){},b.prototype.Reset=function(a,c){b.__super__.Reset.call(this,a,c)},b.prototype.Evaluate=function(){var a,b;a=this.m_fixtureA.GetBody(),b=this.m_fixtureB.GetBody(),c.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof e?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof e?this.m_fixtureB.GetShape():null,b.m_xf)},b}(d)},{"../../index":103}],73:[function(a){var b,c,d,e;b=a("../../index"),c=b.Vector,e=b.Common.Math.b2Vec2,d=b.Common.b2Settings,b.Dynamics.Contacts.b2PositionSolverManifold=function(){function a(){var a;for(this.m_normal=new e,this.m_separations=new c(d.b2_maxManifoldPoints),this.m_points=new Array(d.b2_maxManifoldPoints),a=0;a<d.b2_maxManifoldPoints;)this.m_points[a]=new e,a++}return a.prototype.m_normal=null,a.prototype.m_separations=null,a.prototype.m_points=null,a.prototype.Initialize=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r;switch(d.b2Assert(a.pointCount>0),i=0,b=0,c=0,p=void 0,q=void 0,j=0,k=0,a.type){case b2Manifold.e_circles:return p=a.bodyA.m_xf.R,q=a.localPoint,l=a.bodyA.m_xf.position.x+(p.col1.x*q.x+p.col2.x*q.y),m=a.bodyA.m_xf.position.y+(p.col1.y*q.x+p.col2.y*q.y),p=a.bodyB.m_xf.R,q=a.points[0].localPoint,n=a.bodyB.m_xf.position.x+(p.col1.x*q.x+p.col2.x*q.y),o=a.bodyB.m_xf.position.y+(p.col1.y*q.x+p.col2.y*q.y),g=n-l,h=o-m,f=g*g+h*h,f>Number.MIN_VALUE*Number.MIN_VALUE?(e=Math.sqrt(f),this.m_normal.x=g/e,this.m_normal.y=h/e):(this.m_normal.x=1,this.m_normal.y=0),this.m_points[0].x=.5*(l+n),this.m_points[0].y=.5*(m+o),this.m_separations[0]=g*this.m_normal.x+h*this.m_normal.y-a.radius;case b2Manifold.e_faceA:for(p=a.bodyA.m_xf.R,q=a.localPlaneNormal,this.m_normal.x=p.col1.x*q.x+p.col2.x*q.y,this.m_normal.y=p.col1.y*q.x+p.col2.y*q.y,p=a.bodyA.m_xf.R,q=a.localPoint,j=a.bodyA.m_xf.position.x+(p.col1.x*q.x+p.col2.x*q.y),k=a.bodyA.m_xf.position.y+(p.col1.y*q.x+p.col2.y*q.y),p=a.bodyB.m_xf.R,i=0,r=[];i<a.pointCount;)q=a.points[i].localPoint,b=a.bodyB.m_xf.position.x+(p.col1.x*q.x+p.col2.x*q.y),c=a.bodyB.m_xf.position.y+(p.col1.y*q.x+p.col2.y*q.y),this.m_separations[i]=(b-j)*this.m_normal.x+(c-k)*this.m_normal.y-a.radius,this.m_points[i].x=b,this.m_points[i].y=c,r.push(++i);return r;case b2Manifold.e_faceB:for(p=a.bodyB.m_xf.R,q=a.localPlaneNormal,this.m_normal.x=p.col1.x*q.x+p.col2.x*q.y,this.m_normal.y=p.col1.y*q.x+p.col2.y*q.y,p=a.bodyB.m_xf.R,q=a.localPoint,j=a.bodyB.m_xf.position.x+(p.col1.x*q.x+p.col2.x*q.y),k=a.bodyB.m_xf.position.y+(p.col1.y*q.x+p.col2.y*q.y),p=a.bodyA.m_xf.R,i=0;i<a.pointCount;)q=a.points[i].localPoint,b=a.bodyA.m_xf.position.x+(p.col1.x*q.x+p.col2.x*q.y),c=a.bodyA.m_xf.position.y+(p.col1.y*q.x+p.col2.y*q.y),this.m_separations[i]=(b-j)*this.m_normal.x+(c-k)*this.m_normal.y-a.radius,this.m_points[i].Set(b,c),++i;return this.m_normal.x*=-1,this.m_normal.y*=-1}},a.circlePointA=new e,a.circlePointB=new e,a}()},{"../../index":103}],74:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Common.b2Color,d=b.Dynamics.Controllers.b2Controller,e=b.Common.Math.b2Vec2,b.Dynamics.Controllers.b2BuoyancyController=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.normal=new e(0,-1),this.velocity=new e(0,0)}return g(b,a),b.prototype.normal=null,b.prototype.offset=0,b.prototype.density=0,b.prototype.velocity=null,b.prototype.linearDrag=2,b.prototype.angularDrag=1,b.prototype.useDensity=!1,b.prototype.useWorldGravity=!0,b.prototype.gravity=null,b.prototype.Step=function(){var a,b,c,d,f,g,h,i,j,k,l,m;if(this.m_bodyList)for(this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy()),h=this.m_bodyList;h;)if(c=h.body,c.IsAwake()!==!1){for(b=new e,j=new e,a=0,i=0,g=c.GetFixtureList();g;)l=new e,k=g.GetShape().ComputeSubmergedArea(this.normal,this.offset,c.GetTransform(),l),a+=k,b.x+=k*l.x,b.y+=k*l.y,m=0,m=(this.useDensity,1),i+=k*m,j.x+=k*l.x*m,j.y+=k*l.y*m,g=g.GetNext();b.x/=a,b.y/=a,j.x/=i,j.y/=i,a<Number.MIN_VALUE||(d=this.gravity.GetNegative(),d.Multiply(this.density*a),c.ApplyForce(d,j),f=c.GetLinearVelocityFromWorldPoint(b),f.Subtract(this.velocity),f.Multiply(-this.linearDrag*a),c.ApplyForce(f,b),c.ApplyTorque(-c.GetInertia()/c.GetMass()*a*c.GetAngularVelocity()*this.angularDrag),h=h.nextBody)}},b.prototype.Draw=function(a){var b,d,f,g;g=1e3,d=new e,f=new e,d.x=this.normal.x*this.offset+this.normal.y*g,d.y=this.normal.y*this.offset-this.normal.x*g,f.x=this.normal.x*this.offset-this.normal.y*g,f.y=this.normal.y*this.offset+this.normal.x*g,b=new c(0,0,1),a.DrawSegment(d,f,b)},b}(d)},{"../../index":103}],75:[function(a){var b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Controllers.b2Controller,d=b.Common.Math.b2Vec2,b.Dynamics.Controllers.b2ConstantAccelController=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.A=new d(0,0)}return f(b,a),b.prototype.A=null,b.prototype.Step=function(a){var b,c,e;for(e=new d(this.A.x*a.dt,this.A.y*a.dt),c=this.m_bodyList;c;)b=c.body,b.IsAwake()&&(b.SetLinearVelocity(new d(b.GetLinearVelocity().x+e.x,b.GetLinearVelocity().y+e.y)),c=c.nextBody)},b}(c)},{"../../index":103}],76:[function(a){var b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Controllers.b2Controller,d=b.Common.Math.b2Vec2,b.Dynamics.Controllers.b2ConstantForceController=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.F=new d(0,0)}return f(b,a),b.prototype.F=null,b.prototype.Step=function(){var a,b;for(b=this.m_bodyList;b;)a=b.body,a.IsAwake()&&(a.ApplyForce(this.F,a.GetWorldCenter()),b=b.nextBody)},b}(c)},{"../../index":103}],77:[function(a){var b,c;b=a("../../index"),c=b.Dynamics.Controllers.b2ControllerEdge,b.Dynamics.Controllers.b2Controller=function(){function a(){}return a.prototype.m_bodyList=null,a.prototype.m_bodyCount=0,a.prototype.m_next=null,a.prototype.m_world=null,a.prototype.Step=function(){},a.prototype.Draw=function(){},a.prototype.AddBody=function(a){var b;b=new c,b.controller=this,b.body=a,b.nextBody=this.m_bodyList,b.prevBody=null,this.m_bodyList=b,b.nextBody&&(b.nextBody.prevBody=b),this.m_bodyCount++,b.nextController=a.m_controllerList,b.prevController=null,a.m_controllerList=b,b.nextController&&(b.nextController.prevController=b),a.m_controllerCount++},a.prototype.RemoveBody=function(a){var b;for(b=a.m_controllerList;b&&b.controller!==this;)b=b.nextController;b.prevBody&&(b.prevBody.nextBody=b.nextBody),b.nextBody&&(b.nextBody.prevBody=b.prevBody),b.nextController&&(b.nextController.prevController=b.prevController),b.prevController&&(b.prevController.nextController=b.nextController),this.m_bodyList===b&&(this.m_bodyList=b.nextBody),a.m_controllerList===b&&(a.m_controllerList=b.nextController),a.m_controllerCount--,this.m_bodyCount--},a.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetWorld=function(){return this.m_world},a.prototype.GetBodyList=function(){return this.m_bodyList},a}()},{"../../index":103}],78:[function(a){var b;b=a("../../index"),b.Dynamics.Controllers.b2ControllerEdge=function(){function a(){}return a}()},{"../../index":103}],79:[function(a){var b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Controllers.b2Controller,d=b.Common.Math.b2Vec2,b.Dynamics.Controllers.b2GravityController=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.G=1,this.invSqr=!0}return f(b,a),b.prototype.G=1,b.prototype.invSqr=!0,b.prototype.Step=function(){var a,b,c,e,f,g,h,i,j,k,l;if(g=null,a=null,j=null,i=0,h=null,b=null,k=null,c=0,e=0,l=0,f=null,this.invSqr)for(g=this.m_bodyList;g;){for(a=g.body,j=a.GetWorldCenter(),i=a.GetMass(),h=this.m_bodyList;h!==g;)b=h.body,k=b.GetWorldCenter(),c=k.x-j.x,e=k.y-j.y,l=c*c+e*e,l<Number.MIN_VALUE||(f=new d(c,e),f.Multiply(this.G/l/Math.sqrt(l)*i*b.GetMass()),a.IsAwake()&&a.ApplyForce(f,j),f.Multiply(-1),b.IsAwake()&&b.ApplyForce(f,k),h=h.nextBody);g=g.nextBody}else for(g=this.m_bodyList;g;){for(a=g.body,j=a.GetWorldCenter(),i=a.GetMass(),h=this.m_bodyList;h!==g;)b=h.body,k=b.GetWorldCenter(),c=k.x-j.x,e=k.y-j.y,l=c*c+e*e,l<Number.MIN_VALUE||(f=new d(c,e),f.Multiply(this.G/l*i*b.GetMass()),a.IsAwake()&&a.ApplyForce(f,j),f.Multiply(-1),b.IsAwake()&&b.ApplyForce(f,k),h=h.nextBody);g=g.nextBody}},b}(c)},{"../../index":103}],80:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Controllers.b2Controller,e=b.Common.Math.b2Vec2,d=b.Common.Math.b2Mat22,b.Dynamics.Controllers.b2TensorDampingController=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.T=new d,this.maxTimestep=0}return g(b,a),b.prototype.T=null,b.prototype.maxTimestep=0,b.prototype.SetAxisAligned=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.T.col1.x=-a,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-b,this.maxTimestep=a>0||b>0?1/Math.max(a,b):0},b.prototype.Step=function(a){var b,c,d,f;if(f=a.dt,!(f<=Number.MIN_VALUE))for(f>this.maxTimestep&&this.maxTimestep>0&&(f=this.maxTimestep),d=this.m_bodyList;d;)b=d.body,b.IsAwake()&&(c=b.GetWorldVector(b2Math.MulMV(this.T,b.GetLocalVector(b.GetLinearVelocity()))),b.SetLinearVelocity(new e(b.GetLinearVelocity().x+c.x*f,b.GetLinearVelocity().y+c.y*f)),d=d.nextBody)},b}(c)},{"../../index":103}],81:[function(a){var b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,d=b.Common.Math.b2Vec2,b.Dynamics.Joints.b2DistanceJoint=function(a){function b(a){b.__super__.constructor.call(this,a),this.m_localAnchor1=new d,this.m_localAnchor2=new d,this.m_u=new d,this.m_localAnchor1.SetV(a.localAnchorA),this.m_localAnchor2.SetV(a.localAnchorB),this.m_length=a.length,this.m_frequencyHz=a.frequencyHz,this.m_dampingRatio=a.dampingRatio}return f(b,a),b.prototype.m_u=null,b.prototype.m_length=0,b.prototype.m_frequencyHz=0,b.prototype.m_dampingRatio=0,b.prototype.m_impulse=0,b.prototype.m_gamma=0,b.prototype.m_bias=0,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new d(a*this.m_impulse*this.m_u.x,a*this.m_impulse*this.m_u.y)},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),0},b.prototype.GetLength=function(){return this.m_length},b.prototype.SetLength=function(a){void 0===a&&(a=0),this.m_length=a},b.prototype.GetFrequency=function(){return this.m_frequencyHz},b.prototype.SetFrequency=function(a){void 0===a&&(a=0),this.m_frequencyHz=a},b.prototype.GetDampingRatio=function(){return this.m_dampingRatio},b.prototype.SetDampingRatio=function(a){void 0===a&&(a=0),this.m_dampingRatio=a},b.prototype.InitVelocityConstraints=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;r=void 0,s=0,e=this.m_bodyA,f=this.m_bodyB,r=e.m_xf.R,n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=r.col1.x*n+r.col2.x*o,o=r.col1.y*n+r.col2.y*o,n=s,r=f.m_xf.R,p=this.m_localAnchor2.x-f.m_sweep.localCenter.x,q=this.m_localAnchor2.y-f.m_sweep.localCenter.y,s=r.col1.x*p+r.col2.x*q,q=r.col1.y*p+r.col2.y*q,p=s,this.m_u.x=f.m_sweep.c.x+p-e.m_sweep.c.x-n,this.m_u.y=f.m_sweep.c.y+q-e.m_sweep.c.y-o,l=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y),l>b2Settings.b2_linearSlop?this.m_u.Multiply(1/l):this.m_u.SetZero(),g=n*this.m_u.y-o*this.m_u.x,h=p*this.m_u.y-q*this.m_u.x,j=e.m_invMass+e.m_invI*g*g+f.m_invMass+f.m_invI*h*h,this.m_mass=0!==j?1/j:0,this.m_frequencyHz>0&&(b=l-this.m_length,m=2*Math.PI*this.m_frequencyHz,i=2*this.m_mass*this.m_dampingRatio*m,k=this.m_mass*m*m,this.m_gamma=a.dt*(i+a.dt*k),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=b*a.dt*k*this.m_gamma,this.m_mass=j+this.m_gamma,this.m_mass=0!==this.m_mass?1/this.m_mass:0),a.warmStarting?(this.m_impulse*=a.dtRatio,c=this.m_impulse*this.m_u.x,d=this.m_impulse*this.m_u.y,e.m_linearVelocity.x-=e.m_invMass*c,e.m_linearVelocity.y-=e.m_invMass*d,e.m_angularVelocity-=e.m_invI*(n*d-o*c),f.m_linearVelocity.x+=f.m_invMass*c,f.m_linearVelocity.y+=f.m_invMass*d,f.m_angularVelocity+=f.m_invI*(p*d-q*c)):this.m_impulse=0},b.prototype.SolveVelocityConstraints=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;k=void 0,d=this.m_bodyA,e=this.m_bodyB,k=d.m_xf.R,g=this.m_localAnchor1.x-d.m_sweep.localCenter.x,h=this.m_localAnchor1.y-d.m_sweep.localCenter.y,l=k.col1.x*g+k.col2.x*h,h=k.col1.y*g+k.col2.y*h,g=l,k=e.m_xf.R,i=this.m_localAnchor2.x-e.m_sweep.localCenter.x,j=this.m_localAnchor2.y-e.m_sweep.localCenter.y,l=k.col1.x*i+k.col2.x*j,j=k.col1.y*i+k.col2.y*j,i=l,m=d.m_linearVelocity.x+-d.m_angularVelocity*h,n=d.m_linearVelocity.y+d.m_angularVelocity*g,o=e.m_linearVelocity.x+-e.m_angularVelocity*j,p=e.m_linearVelocity.y+e.m_angularVelocity*i,a=this.m_u.x*(o-m)+this.m_u.y*(p-n),f=-this.m_mass*(a+this.m_bias+this.m_gamma*this.m_impulse),this.m_impulse+=f,b=f*this.m_u.x,c=f*this.m_u.y,d.m_linearVelocity.x-=d.m_invMass*b,d.m_linearVelocity.y-=d.m_invMass*c,d.m_angularVelocity-=d.m_invI*(g*c-h*b),e.m_linearVelocity.x+=e.m_invMass*b,e.m_linearVelocity.y+=e.m_invMass*c,e.m_angularVelocity+=e.m_invI*(i*c-j*b)},b.prototype.SolvePositionConstraints=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return void 0===a&&(a=0),o=void 0,this.m_frequencyHz>0?!0:(e=this.m_bodyA,f=this.m_bodyB,o=e.m_xf.R,k=this.m_localAnchor1.x-e.m_sweep.localCenter.x,l=this.m_localAnchor1.y-e.m_sweep.localCenter.y,p=o.col1.x*k+o.col2.x*l,l=o.col1.y*k+o.col2.y*l,k=p,o=f.m_xf.R,m=this.m_localAnchor2.x-f.m_sweep.localCenter.x,n=this.m_localAnchor2.y-f.m_sweep.localCenter.y,p=o.col1.x*m+o.col2.x*n,n=o.col1.y*m+o.col2.y*n,m=p,g=f.m_sweep.c.x+m-e.m_sweep.c.x-k,h=f.m_sweep.c.y+n-e.m_sweep.c.y-l,j=Math.sqrt(g*g+h*h),g/=j,h/=j,b=j-this.m_length,b=b2Math.Clamp(b,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection),i=-this.m_mass*b,this.m_u.Set(g,h),c=i*this.m_u.x,d=i*this.m_u.y,e.m_sweep.c.x-=e.m_invMass*c,e.m_sweep.c.y-=e.m_invMass*d,e.m_sweep.a-=e.m_invI*(k*d-l*c),f.m_sweep.c.x+=f.m_invMass*c,f.m_sweep.c.y+=f.m_invMass*d,f.m_sweep.a+=f.m_invI*(m*d-n*c),e.SynchronizeTransform(),f.SynchronizeTransform(),b2Math.Abs(b)<b2Settings.b2_linearSlop)},b}(c)},{"../../index":103}],82:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2DistanceJointDef=function(a){function b(){this.localAnchorA=new e,this.type=c.e_distanceJoint}return g(b,a),b.prototype.type=0,b.prototype.localAnchorA=null,b.prototype.localAnchorB=null,b.prototype.userData=null,b.prototype.bodyA=null,b.prototype.bodyB=null,b.prototype.length=1,b.prototype.frequencyHz=0,b.prototype.dampingRatio=0,b.prototype.Initialize=function(a,b,c,d){var e,f;this.bodyA=a,this.bodyB=b,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(d)),e=d.x-c.x,f=d.y-c.y,this.length=Math.sqrt(e*e+f*f),this.frequencyHz=0,this.dampingRatio=0},b}(d)},{"../../index":103}],83:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Common.Math.b2Mat22,b.Dynamics.Joints.b2FrictionJoint=function(a){function b(a){b.__super__.constructor.call(this,a),this.m_localAnchorA=new e,this.m_localAnchorB=new e,this.m_linearMass=new d,this.m_linearImpulse=new e,this.m_localAnchorA.SetV(a.localAnchorA),this.m_localAnchorB.SetV(a.localAnchorB),this.m_linearMass.SetZero(),this.m_linearImpulse.SetZero(),this.m_maxForce=a.maxForce,this.m_maxTorque=a.maxTorque}return g(b,a),b.prototype.m_linearMass=null,b.prototype.m_linearImpulse=null,b.prototype.m_angularMass=0,b.prototype.m_angularImpulse=0,b.prototype.m_maxForce=0,b.prototype.m_maxTorque=0,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new e(a*this.m_linearImpulse.x,a*this.m_linearImpulse.y)},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),a*this.m_angularImpulse},b.prototype.SetMaxForce=function(a){void 0===a&&(a=0),this.m_maxForce=a},b.prototype.GetMaxForce=function(){return this.m_maxForce},b.prototype.SetMaxTorque=function(a){void 0===a&&(a=0),this.m_maxTorque=a},b.prototype.GetMaxTorque=function(){return this.m_maxTorque},b.prototype.InitVelocityConstraints=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p;o=void 0,p=0,e=this.m_bodyA,f=this.m_bodyB,o=e.m_xf.R,k=this.m_localAnchorA.x-e.m_sweep.localCenter.x,l=this.m_localAnchorA.y-e.m_sweep.localCenter.y,p=o.col1.x*k+o.col2.x*l,l=o.col1.y*k+o.col2.y*l,k=p,o=f.m_xf.R,m=this.m_localAnchorB.x-f.m_sweep.localCenter.x,n=this.m_localAnchorB.y-f.m_sweep.localCenter.y,p=o.col1.x*m+o.col2.x*n,n=o.col1.y*m+o.col2.y*n,m=p,i=e.m_invMass,j=f.m_invMass,g=e.m_invI,h=f.m_invI,b=new d,b.col1.x=i+j,b.col2.x=0,b.col1.y=0,b.col2.y=i+j,b.col1.x+=g*l*l,b.col2.x+=-g*k*l,b.col1.y+=-g*k*l,b.col2.y+=g*k*k,b.col1.x+=h*n*n,b.col2.x+=-h*m*n,b.col1.y+=-h*m*n,b.col2.y+=h*m*m,b.GetInverse(this.m_linearMass),this.m_angularMass=g+h,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),a.warmStarting?(this.m_linearImpulse.x*=a.dtRatio,this.m_linearImpulse.y*=a.dtRatio,this.m_angularImpulse*=a.dtRatio,c=this.m_linearImpulse,e.m_linearVelocity.x-=i*c.x,e.m_linearVelocity.y-=i*c.y,e.m_angularVelocity-=g*(k*c.y-l*c.x+this.m_angularImpulse),f.m_linearVelocity.x+=j*c.x,f.m_linearVelocity.y+=j*c.y,f.m_angularVelocity+=h*(m*c.y-n*c.x+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0)},b.prototype.SolveVelocityConstraints=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;u=void 0,v=0,f=this.m_bodyA,g=this.m_bodyB,w=f.m_linearVelocity,y=f.m_angularVelocity,x=g.m_linearVelocity,z=g.m_angularVelocity,l=f.m_invMass,m=g.m_invMass,h=f.m_invI,i=g.m_invI,u=f.m_xf.R,q=this.m_localAnchorA.x-f.m_sweep.localCenter.x,r=this.m_localAnchorA.y-f.m_sweep.localCenter.y,v=u.col1.x*q+u.col2.x*r,r=u.col1.y*q+u.col2.y*r,q=v,u=g.m_xf.R,s=this.m_localAnchorB.x-g.m_sweep.localCenter.x,t=this.m_localAnchorB.y-g.m_sweep.localCenter.y,v=u.col1.x*s+u.col2.x*t,t=u.col1.y*s+u.col2.y*t,s=v,n=0,b=z-y,j=-this.m_angularMass*b,o=this.m_angularImpulse,n=a.dt*this.m_maxTorque,this.m_angularImpulse=b2Math.Clamp(this.m_angularImpulse+j,-n,n),j=this.m_angularImpulse-o,y-=h*j,z+=i*j,c=x.x-z*t-w.x+y*r,d=x.y+z*s-w.y-y*q,k=b2Math.MulMV(this.m_linearMass,new e(-c,-d)),p=this.m_linearImpulse.Copy(),this.m_linearImpulse.Add(k),n=a.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>n*n&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(n)),k=b2Math.SubtractVV(this.m_linearImpulse,p),w.x-=l*k.x,w.y-=l*k.y,y-=h*(q*k.y-r*k.x),x.x+=m*k.x,x.y+=m*k.y,z+=i*(s*k.y-t*k.x),f.m_angularVelocity=y,g.m_angularVelocity=z
},b.prototype.SolvePositionConstraints=function(a){return void 0===a&&(a=0),!0},b}(c)},{"../../index":103}],84:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2FrictionJointDef=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.type=c.e_frictionJoint,b.prototype.localAnchorA=null,b.prototype.localAnchorB=null,b.prototype.maxForce=0,b.prototype.maxTorque=0,b}(d)},{"../../index":103}],85:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),d=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,c=b.Dynamics.Joints.b2Jacobian,b.Dynamics.Joints.b2GearJoint=function(a){function b(a){var f,g,h,i;b.__super__.constructor.call(this,a),this.m_groundAnchor1=new e,this.m_groundAnchor2=new e,this.m_localAnchor1=new e,this.m_localAnchor2=new e,this.m_J=new c,h=parseInt(a.joint1.m_type),i=parseInt(a.joint2.m_type),f=0,g=0,this.m_ground1=a.joint1.GetBodyA(),this.m_bodyA=a.joint1.GetBodyB(),h===d.e_revoluteJoint?(this.m_revolute1=a.joint1 instanceof b2RevoluteJoint?a.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),f=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=a.joint1 instanceof b2PrismaticJoint?a.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),f=this.m_prismatic1.GetJointTranslation()),this.m_ground2=a.joint2.GetBodyA(),this.m_bodyB=a.joint2.GetBodyB(),i===d.e_revoluteJoint?(this.m_revolute2=a.joint2 instanceof b2RevoluteJoint?a.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),g=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=a.joint2 instanceof b2PrismaticJoint?a.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),g=this.m_prismatic2.GetJointTranslation()),this.m_ratio=a.ratio,this.m_constant=f+this.m_ratio*g}return g(b,a),b.prototype.m_groundAnchor1=null,b.prototype.m_groundAnchor2=null,b.prototype.m_J=null,b.prototype.m_revolute1=null,b.prototype.m_prismatic1=null,b.prototype.m_revolute2=null,b.prototype.m_prismatic2=null,b.prototype.m_ground1=null,b.prototype.m_ground2=null,b.prototype.m_ratio=0,b.prototype.m_constant=0,b.prototype.m_impulse=0,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new e(a*this.m_impulse*this.m_J.linearB.x,a*this.m_impulse*this.m_J.linearB.y)},b.prototype.GetReactionTorque=function(a){var b,c,d,e,f,g;return void 0===a&&(a=0),f=this.m_bodyB.m_xf.R,d=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,e=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,g=f.col1.x*d+f.col2.x*e,e=f.col1.y*d+f.col2.y*e,d=g,b=this.m_impulse*this.m_J.linearB.x,c=this.m_impulse*this.m_J.linearB.y,a*(this.m_impulse*this.m_J.angularB-d*c+e*b)},b.prototype.GetRatio=function(){return this.m_ratio},b.prototype.SetRatio=function(a){void 0===a&&(a=0),this.m_ratio=a},b.prototype.InitVelocityConstraints=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;f=this.m_ground1,g=this.m_ground2,c=this.m_bodyA,d=this.m_bodyB,m=0,n=0,h=0,i=0,j=void 0,k=void 0,e=0,l=0,b=0,this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,b+=c.m_invI):(j=f.m_xf.R,k=this.m_prismatic1.m_localXAxis1,m=j.col1.x*k.x+j.col2.x*k.y,n=j.col1.y*k.x+j.col2.y*k.y,j=c.m_xf.R,h=this.m_localAnchor1.x-c.m_sweep.localCenter.x,i=this.m_localAnchor1.y-c.m_sweep.localCenter.y,l=j.col1.x*h+j.col2.x*i,i=j.col1.y*h+j.col2.y*i,h=l,e=h*n-i*m,this.m_J.linearA.Set(-m,-n),this.m_J.angularA=-e,b+=c.m_invMass+c.m_invI*e*e),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,b+=this.m_ratio*this.m_ratio*d.m_invI):(j=g.m_xf.R,k=this.m_prismatic2.m_localXAxis1,m=j.col1.x*k.x+j.col2.x*k.y,n=j.col1.y*k.x+j.col2.y*k.y,j=d.m_xf.R,h=this.m_localAnchor2.x-d.m_sweep.localCenter.x,i=this.m_localAnchor2.y-d.m_sweep.localCenter.y,l=j.col1.x*h+j.col2.x*i,i=j.col1.y*h+j.col2.y*i,h=l,e=h*n-i*m,this.m_J.linearB.Set(-this.m_ratio*m,-this.m_ratio*n),this.m_J.angularB=-this.m_ratio*e,b+=this.m_ratio*this.m_ratio*(d.m_invMass+d.m_invI*e*e)),this.m_mass=b>0?1/b:0,a.warmStarting?(c.m_linearVelocity.x+=c.m_invMass*this.m_impulse*this.m_J.linearA.x,c.m_linearVelocity.y+=c.m_invMass*this.m_impulse*this.m_J.linearA.y,c.m_angularVelocity+=c.m_invI*this.m_impulse*this.m_J.angularA,d.m_linearVelocity.x+=d.m_invMass*this.m_impulse*this.m_J.linearB.x,d.m_linearVelocity.y+=d.m_invMass*this.m_impulse*this.m_J.linearB.y,d.m_angularVelocity+=d.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},b.prototype.SolveVelocityConstraints=function(){var a,b,c,d;b=this.m_bodyA,c=this.m_bodyB,a=this.m_J.Compute(b.m_linearVelocity,b.m_angularVelocity,c.m_linearVelocity,c.m_angularVelocity),d=-this.m_mass*a,this.m_impulse+=d,b.m_linearVelocity.x+=b.m_invMass*d*this.m_J.linearA.x,b.m_linearVelocity.y+=b.m_invMass*d*this.m_J.linearA.y,b.m_angularVelocity+=b.m_invI*d*this.m_J.angularA,c.m_linearVelocity.x+=c.m_invMass*d*this.m_J.linearB.x,c.m_linearVelocity.y+=c.m_invMass*d*this.m_J.linearB.y,c.m_angularVelocity+=c.m_invI*d*this.m_J.angularB},b.prototype.SolvePositionConstraints=function(a){var b,c,d,e,f,g,h;return void 0===a&&(a=0),h=0,c=this.m_bodyA,d=this.m_bodyB,e=0,f=0,e=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),f=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation(),b=this.m_constant-(e+this.m_ratio*f),g=-this.m_mass*b,c.m_sweep.c.x+=c.m_invMass*g*this.m_J.linearA.x,c.m_sweep.c.y+=c.m_invMass*g*this.m_J.linearA.y,c.m_sweep.a+=c.m_invI*g*this.m_J.angularA,d.m_sweep.c.x+=d.m_invMass*g*this.m_J.linearB.x,d.m_sweep.c.y+=d.m_invMass*g*this.m_J.linearB.y,d.m_sweep.a+=d.m_invI*g*this.m_J.angularB,c.SynchronizeTransform(),d.SynchronizeTransform(),h<b2Settings.b2_linearSlop},b}(d)},{"../../index":103}],86:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2GearJointDef=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.type=c.e_gearJoint,b.prototype.joint1=null,b.prototype.joint2=null,b.prototype.ratio=1,b}(d)},{"../../index":103}],87:[function(a){var b,c;b=a("../../index"),c=b.Common.Math.b2Vec2,b.Dynamics.Joints.b2Jacobian=function(){function a(){this.linearA=new c,this.linearB=new c}return a.prototype.linearA=null,a.prototype.linearB=null,a.prototype.angularA=null,a.prototype.angularB=null,a.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},a.prototype.Set=function(a,b,c,d){void 0===b&&(b=0),void 0===d&&(d=0),this.linearA.SetV(a),this.angularA=b,this.linearB.SetV(c),this.angularB=d},a.prototype.Compute=function(a,b,c,d){return void 0===b&&(b=0),void 0===d&&(d=0),this.linearA.x*a.x+this.linearA.y*a.y+this.angularA*b+(this.linearB.x*c.x+this.linearB.y*c.y)+this.angularB*d},a}()},{"../../index":103}],88:[function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;b=a("../../index"),t=b.Common.Math.b2Vec2,i=b.Dynamics.Joints.b2JointEdge,c=b.Dynamics.Joints.b2DistanceJoint,l=b.Dynamics.Joints.b2MouseJoint,n=b.Dynamics.Joints.b2PrismaticJoint,r=b.Dynamics.Joints.b2RevoluteJoint,p=b.Dynamics.Joints.b2PulleyJoint,g=b.Dynamics.Joints.b2GearJoint,j=b.Dynamics.Joints.b2LineJoint,u=b.Dynamics.Joints.b2WeldJoint,e=b.Dynamics.Joints.b2FrictionJoint,d=b.Dynamics.Joints.b2DistanceJointDef,m=b.Dynamics.Joints.b2MouseJointDef,o=b.Dynamics.Joints.b2PrismaticJointDef,s=b.Dynamics.Joints.b2RevoluteJointDef,q=b.Dynamics.Joints.b2PulleyJointDef,h=b.Dynamics.Joints.b2GearJointDef,k=b.Dynamics.Joints.b2LineJointDef,v=b.Dynamics.Joints.b2WeldJointDef,f=b.Dynamics.Joints.b2FrictionJointDef,b.Dynamics.Joints.b2Joint=function(){function a(a){this.m_edgeA=new i,this.m_edgeB=new i,this.m_localCenterA=new t,this.m_localCenterB=new t,b2Settings.b2Assert(a.bodyA!==a.bodyB),this.m_type=a.type,this.m_prev=null,this.m_next=null,this.m_bodyA=a.bodyA,this.m_bodyB=a.bodyB,this.m_collideConnected=a.collideConnected,this.m_islandFlag=!1,this.m_userData=a.userData}return a.e_unknownJoint=0,a.e_revoluteJoint=1,a.e_prismaticJoint=2,a.e_distanceJoint=3,a.e_pulleyJoint=4,a.e_mouseJoint=5,a.e_gearJoint=6,a.e_lineJoint=7,a.e_weldJoint=8,a.e_frictionJoint=9,a.e_inactiveLimit=0,a.e_atLowerLimit=1,a.e_atUpperLimit=2,a.e_equalLimits=3,a.prototype.m_type=a.e_unknownJoint,a.prototype.m_edgeA=null,a.prototype.m_edgeB=null,a.prototype.m_localAnchor1=null,a.prototype.m_localAnchor2=null,a.prototype.m_localCenterA=null,a.prototype.m_localCenterB=null,a.prototype.m_prev=null,a.prototype.m_next=null,a.prototype.m_bodyA=null,a.prototype.m_bodyB=null,a.prototype.m_collideConnected=null,a.prototype.m_islandFlag=null,a.prototype.m_userData=null,a.prototype.GetType=function(){return this.m_type},a.prototype.GetAnchorA=function(){return null},a.prototype.GetAnchorB=function(){return null},a.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),null},a.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),0},a.prototype.GetBodyA=function(){return this.m_bodyA},a.prototype.GetBodyB=function(){return this.m_bodyB},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetUserData=function(){return this.m_userData},a.prototype.SetUserData=function(a){this.m_userData=a},a.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},a.Create=function(b){var i;switch(i=null,b.type){case a.e_distanceJoint:i=new c(b instanceof d?b:null);break;case a.e_mouseJoint:i=new l(b instanceof m?b:null);break;case a.e_prismaticJoint:i=new n(b instanceof o?b:null);break;case a.e_revoluteJoint:i=new r(b instanceof s?b:null);break;case a.e_pulleyJoint:i=new p(b instanceof q?b:null);break;case a.e_gearJoint:i=new g(b instanceof h?b:null);break;case a.e_lineJoint:i=new j(b instanceof k?b:null);break;case a.e_weldJoint:i=new u(b instanceof v?b:null);break;case a.e_frictionJoint:i=new e(b instanceof f?b:null)}return i},a.Destroy=function(){},a.prototype.InitVelocityConstraints=function(){},a.prototype.SolveVelocityConstraints=function(){},a.prototype.FinalizeVelocityConstraints=function(){},a.prototype.SolvePositionConstraints=function(a){return void 0===a&&(a=0),!1},a}()},{"../../index":103}],89:[function(a){var b,c;b=a("../../index"),c=b.Dynamics.Joints.b2Joint,b.Dynamics.Joints.b2JointDef=function(){function a(){}return a.prototype.type=c.e_unknownJoint,a.prototype.userData=null,a.prototype.bodyA=null,a.prototype.bodyB=null,a.prototype.collideConnected=null,a}()},{"../../index":103}],90:[function(a){var b;b=a("../../index"),b.Dynamics.Joints.b2JointEdge=function(){function a(){}return a}()},{"../../index":103}],91:[function(a){var b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,d=b.Common.Math.b2Vec2,b.Dynamics.Joints.b2LineJoint=function(a){function b(a){b.__super__.constructor.call(this,a),this.m_localAnchor1=new d,this.m_localAnchor2=new d,this.m_localXAxis1=new d,this.m_localYAxis1=new d,this.m_axis=new d,this.m_perp=new d,this.m_K=new b2Mat22,this.m_impulse=new d,this.m_localAnchor1.SetV(a.localAnchorA),this.m_localAnchor2.SetV(a.localAnchorB),this.m_localXAxis1.SetV(a.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_lowerTranslation=a.lowerTranslation,this.m_upperTranslation=a.upperTranslation,this.m_maxMotorForce=a.maxMotorForce,this.m_motorSpeed=a.motorSpeed,this.m_enableLimit=a.enableLimit,this.m_enableMotor=a.enableMotor,this.m_axis.SetZero(),this.m_perp.SetZero()}return f(b,a),b.prototype.m_localXAxis1=null,b.prototype.m_localYAxis1=null,b.prototype.m_axis=null,b.prototype.m_perp=null,b.prototype.m_K=null,b.prototype.m_impulse=null,b.prototype.m_motorMass=0,b.prototype.m_motorImpulse=0,b.prototype.m_lowerTranslation=0,b.prototype.m_upperTranslation=0,b.prototype.m_maxMotorForce=0,b.prototype.m_motorSpeed=0,b.prototype.m_enableLimit=!1,b.prototype.m_enableMotor=!1,b.prototype.m_limitState=c.e_inactiveLimit,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new d(a*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),a*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),a*this.m_impulse.y},b.prototype.GetJointTranslation=function(){var a,b,c,d,e,f,g,h,i;return b=this.m_bodyA,c=this.m_bodyB,h=void 0,f=b.GetWorldPoint(this.m_localAnchor1),g=c.GetWorldPoint(this.m_localAnchor2),d=g.x-f.x,e=g.y-f.y,a=b.GetWorldVector(this.m_localXAxis1),i=a.x*d+a.y*e},b.prototype.GetJointSpeed=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return b=this.m_bodyA,c=this.m_bodyB,o=void 0,o=b.m_xf.R,j=this.m_localAnchor1.x-b.m_sweep.localCenter.x,k=this.m_localAnchor1.y-b.m_sweep.localCenter.y,p=o.col1.x*j+o.col2.x*k,k=o.col1.y*j+o.col2.y*k,j=p,o=c.m_xf.R,l=this.m_localAnchor2.x-c.m_sweep.localCenter.x,m=this.m_localAnchor2.y-c.m_sweep.localCenter.y,p=o.col1.x*l+o.col2.x*m,m=o.col1.y*l+o.col2.y*m,l=p,f=b.m_sweep.c.x+j,g=b.m_sweep.c.y+k,h=c.m_sweep.c.x+l,i=c.m_sweep.c.y+m,d=h-f,e=i-g,a=b.GetWorldVector(this.m_localXAxis1),q=b.m_linearVelocity,r=c.m_linearVelocity,s=b.m_angularVelocity,t=c.m_angularVelocity,n=d*-s*a.y+e*s*a.x+(a.x*(r.x+-t*m-q.x- -s*k)+a.y*(r.y+t*l-q.y-s*j))},b.prototype.IsLimitEnabled=function(){return this.m_enableLimit},b.prototype.EnableLimit=function(a){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=a},b.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},b.prototype.GetUpperLimit=function(){return this.m_upperTranslation},b.prototype.SetLimits=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=a,this.m_upperTranslation=b},b.prototype.IsMotorEnabled=function(){return this.m_enableMotor},b.prototype.EnableMotor=function(a){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=a},b.prototype.SetMotorSpeed=function(a){void 0===a&&(a=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=a},b.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b.prototype.SetMaxMotorForce=function(a){void 0===a&&(a=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=a},b.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},b.prototype.GetMotorForce=function(){return this.m_motorImpulse},b.prototype.InitVelocityConstraints=function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;g=this.m_bodyA,h=this.m_bodyB,t=void 0,u=0,this.m_localCenterA.SetV(g.GetLocalCenter()),this.m_localCenterB.SetV(h.GetLocalCenter()),v=g.GetTransform(),w=h.GetTransform(),t=g.m_xf.R,p=this.m_localAnchor1.x-this.m_localCenterA.x,q=this.m_localAnchor1.y-this.m_localCenterA.y,u=t.col1.x*p+t.col2.x*q,q=t.col1.y*p+t.col2.y*q,p=u,t=h.m_xf.R,r=this.m_localAnchor2.x-this.m_localCenterB.x,s=this.m_localAnchor2.y-this.m_localCenterB.y,u=t.col1.x*r+t.col2.x*s,s=t.col1.y*r+t.col2.y*s,r=u,i=h.m_sweep.c.x+r-g.m_sweep.c.x-p,j=h.m_sweep.c.y+s-g.m_sweep.c.y-q,this.m_invMassA=g.m_invMass,this.m_invMassB=h.m_invMass,this.m_invIA=g.m_invI,this.m_invIB=h.m_invI,this.m_axis.SetV(b2Math.MulMV(v.R,this.m_localXAxis1)),this.m_a1=(i+p)*this.m_axis.y-(j+q)*this.m_axis.x,this.m_a2=r*this.m_axis.y-s*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(b2Math.MulMV(v.R,this.m_localYAxis1)),this.m_s1=(i+p)*this.m_perp.y-(j+q)*this.m_perp.x,this.m_s2=r*this.m_perp.y-s*this.m_perp.x,n=this.m_invMassA,o=this.m_invMassB,k=this.m_invIA,l=this.m_invIB,this.m_K.col1.x=n+o+k*this.m_s1*this.m_s1+l*this.m_s2*this.m_s2,this.m_K.col1.y=k*this.m_s1*this.m_a1+l*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=n+o+k*this.m_a1*this.m_a1+l*this.m_a2*this.m_a2,this.m_enableLimit?(m=this.m_axis.x*i+this.m_axis.y*j,b2Math.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b2Settings.b2_linearSlop?this.m_limitState=c.e_equalLimits:m<=this.m_lowerTranslation?this.m_limitState!==c.e_atLowerLimit&&(this.m_limitState=c.e_atLowerLimit,this.m_impulse.y=0):m>=this.m_upperTranslation?this.m_limitState!==c.e_atUpperLimit&&(this.m_limitState=c.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=c.e_inactiveLimit,this.m_impulse.y=0)):this.m_limitState=c.e_inactiveLimit,this.m_enableMotor===!1&&(this.m_motorImpulse=0),a.warmStarting?(this.m_impulse.x*=a.dtRatio,this.m_impulse.y*=a.dtRatio,this.m_motorImpulse*=a.dtRatio,e=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,f=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,b=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,d=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2,g.m_linearVelocity.x-=this.m_invMassA*e,g.m_linearVelocity.y-=this.m_invMassA*f,g.m_angularVelocity-=this.m_invIA*b,h.m_linearVelocity.x+=this.m_invMassB*e,h.m_linearVelocity.y+=this.m_invMassB*f,h.m_angularVelocity+=this.m_invIB*d):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},b.prototype.SolveVelocityConstraints=function(a){var b,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;l=this.m_bodyA,m=this.m_bodyB,u=l.m_linearVelocity,w=l.m_angularVelocity,v=m.m_linearVelocity,x=m.m_angularVelocity,i=0,j=0,g=0,h=0,this.m_enableMotor&&this.m_limitState!==c.e_equalLimits&&(b=this.m_axis.x*(v.x-u.x)+this.m_axis.y*(v.y-u.y)+this.m_a2*x-this.m_a1*w,r=this.m_motorMass*(this.m_motorSpeed-b),t=this.m_motorImpulse,s=a.dt*this.m_maxMotorForce,this.m_motorImpulse=b2Math.Clamp(this.m_motorImpulse+r,-s,s),r=this.m_motorImpulse-t,i=r*this.m_axis.x,j=r*this.m_axis.y,g=r*this.m_a1,h=r*this.m_a2,u.x-=this.m_invMassA*i,u.y-=this.m_invMassA*j,w-=this.m_invIA*g,v.x+=this.m_invMassB*i,v.y+=this.m_invMassB*j,x+=this.m_invIB*h),e=this.m_perp.x*(v.x-u.x)+this.m_perp.y*(v.y-u.y)+this.m_s2*x-this.m_s1*w,this.m_enableLimit&&this.m_limitState!==c.e_inactiveLimit?(f=this.m_axis.x*(v.x-u.x)+this.m_axis.y*(v.y-u.y)+this.m_a2*x-this.m_a1*w,p=this.m_impulse.Copy(),n=this.m_K.Solve(new d,-e,-f),this.m_impulse.Add(n),this.m_limitState===c.e_atLowerLimit?this.m_impulse.y=b2Math.Max(this.m_impulse.y,0):this.m_limitState===c.e_atUpperLimit&&(this.m_impulse.y=b2Math.Min(this.m_impulse.y,0)),k=-e-(this.m_impulse.y-p.y)*this.m_K.col2.x,q=0,q=0!==this.m_K.col1.x?k/this.m_K.col1.x+p.x:p.x,this.m_impulse.x=q,n.x=this.m_impulse.x-p.x,n.y=this.m_impulse.y-p.y,i=n.x*this.m_perp.x+n.y*this.m_axis.x,j=n.x*this.m_perp.y+n.y*this.m_axis.y,g=n.x*this.m_s1+n.y*this.m_a1,h=n.x*this.m_s2+n.y*this.m_a2,u.x-=this.m_invMassA*i,u.y-=this.m_invMassA*j,w-=this.m_invIA*g,v.x+=this.m_invMassB*i,v.y+=this.m_invMassB*j,x+=this.m_invIB*h):(o=0,o=0!==this.m_K.col1.x?-e/this.m_K.col1.x:0,this.m_impulse.x+=o,i=o*this.m_perp.x,j=o*this.m_perp.y,g=o*this.m_s1,h=o*this.m_s2,u.x-=this.m_invMassA*i,u.y-=this.m_invMassA*j,w-=this.m_invIA*g,v.x+=this.m_invMassB*i,v.y+=this.m_invMassB*j,x+=this.m_invIB*h),l.m_linearVelocity.SetV(u),l.m_angularVelocity=w,m.m_linearVelocity.SetV(v),m.m_angularVelocity=x},b.prototype.SolvePositionConstraints=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;return void 0===a&&(a=0),z=0,D=0,o=this.m_bodyA,p=this.m_bodyB,q=o.m_sweep.c,k=o.m_sweep.a,r=p.m_sweep.c,l=p.m_sweep.a,I=void 0,J=0,B=0,C=0,u=0,v=0,A=0,n=0,m=!1,c=0,i=b2Mat22.FromAngle(k),j=b2Mat22.FromAngle(l),I=i,E=this.m_localAnchor1.x-this.m_localCenterA.x,F=this.m_localAnchor1.y-this.m_localCenterA.y,J=I.col1.x*E+I.col2.x*F,F=I.col1.y*E+I.col2.y*F,E=J,I=j,G=this.m_localAnchor2.x-this.m_localCenterB.x,H=this.m_localAnchor2.y-this.m_localCenterB.y,J=I.col1.x*G+I.col2.x*H,H=I.col1.y*G+I.col2.y*H,G=J,s=r.x+G-q.x-E,t=r.y+H-q.y-F,this.m_enableLimit&&(this.m_axis=b2Math.MulMV(i,this.m_localXAxis1),this.m_a1=(s+E)*this.m_axis.y-(t+F)*this.m_axis.x,this.m_a2=G*this.m_axis.y-H*this.m_axis.x,K=this.m_axis.x*s+this.m_axis.y*t,b2Math.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b2Settings.b2_linearSlop?(c=b2Math.Clamp(K,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection),A=b2Math.Abs(K),m=!0):K<=this.m_lowerTranslation?(c=b2Math.Clamp(K-this.m_lowerTranslation+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),A=this.m_lowerTranslation-K,m=!0):K>=this.m_upperTranslation&&(c=b2Math.Clamp(K-this.m_upperTranslation+b2Settings.b2_linearSlop,0,b2Settings.b2_maxLinearCorrection),A=K-this.m_upperTranslation,m=!0)),this.m_perp=b2Math.MulMV(i,this.m_localYAxis1),this.m_s1=(s+E)*this.m_perp.y-(t+F)*this.m_perp.x,this.m_s2=G*this.m_perp.y-H*this.m_perp.x,w=new d,b=this.m_perp.x*s+this.m_perp.y*t,A=b2Math.Max(A,b2Math.Abs(b)),n=0,m?(B=this.m_invMassA,C=this.m_invMassB,u=this.m_invIA,v=this.m_invIB,this.m_K.col1.x=B+C+u*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2,this.m_K.col1.y=u*this.m_s1*this.m_a1+v*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=B+C+u*this.m_a1*this.m_a1+v*this.m_a2*this.m_a2,this.m_K.Solve(w,-b,-c)):(B=this.m_invMassA,C=this.m_invMassB,u=this.m_invIA,v=this.m_invIB,y=B+C+u*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2,x=0,x=0!==y?-b/y:0,w.x=x,w.y=0),g=w.x*this.m_perp.x+w.y*this.m_axis.x,h=w.x*this.m_perp.y+w.y*this.m_axis.y,e=w.x*this.m_s1+w.y*this.m_a1,f=w.x*this.m_s2+w.y*this.m_a2,q.x-=this.m_invMassA*g,q.y-=this.m_invMassA*h,k-=this.m_invIA*e,r.x+=this.m_invMassB*g,r.y+=this.m_invMassB*h,l+=this.m_invIB*f,o.m_sweep.a=k,p.m_sweep.a=l,o.SynchronizeTransform(),p.SynchronizeTransform(),A<=b2Settings.b2_linearSlop&&n<=b2Settings.b2_angularSlop},b}(c)},{"../../index":103}],92:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2LineJointDef=function(a){function b(){this.localAnchorA=new e,this.localAnchorB=new e,this.localAxisA=new e,this.localAxisA.Set(1,0)}return g(b,a),b.prototype.type=c.e_lineJoint,b.prototype.localAnchorA=null,b.prototype.localAnchorB=null,b.prototype.localAxisA=null,b.prototype.enableLimit=!1,b.prototype.lowerTranslation=0,b.prototype.upperTranslation=0,b.prototype.enableMotor=!1,b.prototype.maxMotorForce=0,b.prototype.motorSpeed=0,b.prototype.Initialize=function(a,b,c,d){this.bodyA=a,this.bodyB=b,this.localAnchorA=this.bodyA.GetLocalPoint(c),this.localAnchorB=this.bodyB.GetLocalPoint(c),this.localAxisA=this.bodyA.GetLocalVector(d)},b}(d)},{"../../index":103}],93:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Common.Math.b2Mat22,b.Dynamics.Joints.b2MouseJoint=function(a){function b(a){var c,f,g;b.__super__.constructor.call(this,a),this.K=new d,this.K1=new d,this.K2=new d,this.m_localAnchor=new e,this.m_target=new e,this.m_impulse=new e,this.m_mass=new d,this.m_C=new e,this.m_target.SetV(a.target),f=this.m_target.x-this.m_bodyB.m_xf.position.x,g=this.m_target.y-this.m_bodyB.m_xf.position.y,c=this.m_bodyB.m_xf.R,this.m_localAnchor.x=f*c.col1.x+g*c.col1.y,this.m_localAnchor.y=f*c.col2.x+g*c.col2.y,this.m_maxForce=a.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=a.frequencyHz,this.m_dampingRatio=a.dampingRatio}return g(b,a),b.prototype.K=null,b.prototype.K1=null,b.prototype.K2=null,b.prototype.m_localAnchor=null,b.prototype.m_target=null,b.prototype.m_impulse=null,b.prototype.m_mass=null,b.prototype.m_C=null,b.prototype.m_frequencyHz=0,b.prototype.m_dampingRatio=0,b.prototype.m_beta=0,b.prototype.m_gamma=0,b.prototype.GetAnchorA=function(){return this.m_target},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new e(a*this.m_impulse.x,a*this.m_impulse.y)},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),0},b.prototype.GetTarget=function(){return this.m_target},b.prototype.SetTarget=function(a){this.m_bodyB.IsAwake()===!1&&this.m_bodyB.SetAwake(!0),this.m_target=a},b.prototype.GetMaxForce=function(){return this.m_maxForce},b.prototype.SetMaxForce=function(a){void 0===a&&(a=0),this.m_maxForce=a},b.prototype.GetFrequency=function(){return this.m_frequencyHz},b.prototype.SetFrequency=function(a){void 0===a&&(a=0),this.m_frequencyHz=a},b.prototype.GetDampingRatio=function(){return this.m_dampingRatio},b.prototype.SetDampingRatio=function(a){void 0===a&&(a=0),this.m_dampingRatio=a},b.prototype.InitVelocityConstraints=function(a){var b,c,d,e,f,g,h,i,j,k,l;b=this.m_bodyB,g=b.GetMass(),h=2*Math.PI*this.m_frequencyHz,c=2*g*this.m_dampingRatio*h,f=g*h*h,this.m_gamma=a.dt*(c+a.dt*f),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_beta=a.dt*f*this.m_gamma,k=void 0,k=b.m_xf.R,i=this.m_localAnchor.x-b.m_sweep.localCenter.x,j=this.m_localAnchor.y-b.m_sweep.localCenter.y,l=k.col1.x*i+k.col2.x*j,j=k.col1.y*i+k.col2.y*j,i=l,e=b.m_invMass,d=b.m_invI,this.K1.col1.x=e,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=e,this.K2.col1.x=d*j*j,this.K2.col2.x=-d*i*j,this.K2.col1.y=-d*i*j,this.K2.col2.y=d*i*i,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=b.m_sweep.c.x+i-this.m_target.x,this.m_C.y=b.m_sweep.c.y+j-this.m_target.y,b.m_angularVelocity*=.98,this.m_impulse.x*=a.dtRatio,this.m_impulse.y*=a.dtRatio,b.m_linearVelocity.x+=e*this.m_impulse.x,b.m_linearVelocity.y+=e*this.m_impulse.y,b.m_angularVelocity+=d*(i*this.m_impulse.y-j*this.m_impulse.x)},b.prototype.SolveVelocityConstraints=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;d=this.m_bodyB,l=void 0,m=0,n=0,l=d.m_xf.R,j=this.m_localAnchor.x-d.m_sweep.localCenter.x,k=this.m_localAnchor.y-d.m_sweep.localCenter.y,m=l.col1.x*j+l.col2.x*k,k=l.col1.y*j+l.col2.y*k,j=m,b=d.m_linearVelocity.x+-d.m_angularVelocity*k,c=d.m_linearVelocity.y+d.m_angularVelocity*j,l=this.m_mass,m=b+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,n=c+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y,e=-(l.col1.x*m+l.col2.x*n),f=-(l.col1.y*m+l.col2.y*n),h=this.m_impulse.x,i=this.m_impulse.y,this.m_impulse.x+=e,this.m_impulse.y+=f,g=a.dt*this.m_maxForce,this.m_impulse.LengthSquared()>g*g&&this.m_impulse.Multiply(g/this.m_impulse.Length()),e=this.m_impulse.x-h,f=this.m_impulse.y-i,d.m_linearVelocity.x+=d.m_invMass*e,d.m_linearVelocity.y+=d.m_invMass*f,d.m_angularVelocity+=d.m_invI*(j*f-k*e)},b.prototype.SolvePositionConstraints=function(a){return void 0===a&&(a=0),!0},b}(c)},{"../../index":103}],94:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2MouseJointDef=function(a){function b(){this.target=new e}return g(b,a),b.prototype.type=c.e_mouseJoint,b.prototype.target=null,b.prototype.maxForce=0,b.prototype.frequencyHz=5,b.prototype.dampingRatio=.7,b}(d)},{"../../index":103}],95:[function(a){var b,c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,f=b.Common.Math.b2Vec2,d=b.Common.Math.b2Mat22,g=b.Common.Math.b2Vec3,e=b.Common.Math.b2Math,b.Dynamics.Joints.b2PrismaticJoint=function(a){function b(a){b.__super__.constructor.apply(this,arguments),this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_localXAxis1=new f,this.m_localYAxis1=new f,this.m_axis=new f,this.m_perp=new f,this.m_K=new b2Mat33,this.m_impulse=new g,this.m_localAnchor1.SetV(a.localAnchorA),this.m_localAnchor2.SetV(a.localAnchorB),this.m_localXAxis1.SetV(a.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=a.referenceAngle,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=a.lowerTranslation,this.m_upperTranslation=a.upperTranslation,this.m_maxMotorForce=a.maxMotorForce,this.m_motorSpeed=a.motorSpeed,this.m_enableLimit=a.enableLimit,this.m_enableMotor=a.enableMotor,this.m_limitState=c.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()}return i(b,a),b.prototype.m_localXAxis1=null,b.prototype.m_localYAxis1=null,b.prototype.m_axis=null,b.prototype.m_perp=null,b.prototype.m_K=null,b.prototype.m_refAngle=null,b.prototype.m_impulse=null,b.prototype.m_motorMass=0,b.prototype.m_motorImpulse=0,b.prototype.m_lowerTranslation=0,b.prototype.m_upperTranslation=0,b.prototype.m_maxMotorForce=0,b.prototype.m_motorSpeed=0,b.prototype.m_enableLimit=!1,b.prototype.m_enableMotor=!1,b.prototype.m_limitState=c.e_inactiveLimit,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new f(a*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),a*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),a*this.m_impulse.y},b.prototype.GetJointTranslation=function(){var a,b,c,d,e,f,g,h,i;return b=this.m_bodyA,c=this.m_bodyB,h=void 0,f=b.GetWorldPoint(this.m_localAnchor1),g=c.GetWorldPoint(this.m_localAnchor2),d=g.x-f.x,e=g.y-f.y,a=b.GetWorldVector(this.m_localXAxis1),i=a.x*d+a.y*e},b.prototype.GetJointSpeed=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return b=this.m_bodyA,c=this.m_bodyB,o=void 0,o=b.m_xf.R,j=this.m_localAnchor1.x-b.m_sweep.localCenter.x,k=this.m_localAnchor1.y-b.m_sweep.localCenter.y,p=o.col1.x*j+o.col2.x*k,k=o.col1.y*j+o.col2.y*k,j=p,o=c.m_xf.R,l=this.m_localAnchor2.x-c.m_sweep.localCenter.x,m=this.m_localAnchor2.y-c.m_sweep.localCenter.y,p=o.col1.x*l+o.col2.x*m,m=o.col1.y*l+o.col2.y*m,l=p,f=b.m_sweep.c.x+j,g=b.m_sweep.c.y+k,h=c.m_sweep.c.x+l,i=c.m_sweep.c.y+m,d=h-f,e=i-g,a=b.GetWorldVector(this.m_localXAxis1),q=b.m_linearVelocity,r=c.m_linearVelocity,s=b.m_angularVelocity,t=c.m_angularVelocity,n=d*-s*a.y+e*s*a.x+(a.x*(r.x+-t*m-q.x- -s*k)+a.y*(r.y+t*l-q.y-s*j))},b.prototype.IsLimitEnabled=function(){return this.m_enableLimit},b.prototype.EnableLimit=function(a){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=a
},b.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},b.prototype.GetUpperLimit=function(){return this.m_upperTranslation},b.prototype.SetLimits=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=a,this.m_upperTranslation=b},b.prototype.IsMotorEnabled=function(){return this.m_enableMotor},b.prototype.EnableMotor=function(a){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=a},b.prototype.SetMotorSpeed=function(a){void 0===a&&(a=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=a},b.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b.prototype.SetMaxMotorForce=function(a){void 0===a&&(a=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=a},b.prototype.GetMotorForce=function(){return this.m_motorImpulse},b.prototype.InitVelocityConstraints=function(a){var b,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;h=this.m_bodyA,i=this.m_bodyB,u=void 0,v=0,this.m_localCenterA.SetV(h.GetLocalCenter()),this.m_localCenterB.SetV(i.GetLocalCenter()),w=h.GetTransform(),x=i.GetTransform(),u=h.m_xf.R,q=this.m_localAnchor1.x-this.m_localCenterA.x,r=this.m_localAnchor1.y-this.m_localCenterA.y,v=u.col1.x*q+u.col2.x*r,r=u.col1.y*q+u.col2.y*r,q=v,u=i.m_xf.R,s=this.m_localAnchor2.x-this.m_localCenterB.x,t=this.m_localAnchor2.y-this.m_localCenterB.y,v=u.col1.x*s+u.col2.x*t,t=u.col1.y*s+u.col2.y*t,s=v,j=i.m_sweep.c.x+s-h.m_sweep.c.x-q,k=i.m_sweep.c.y+t-h.m_sweep.c.y-r,this.m_invMassA=h.m_invMass,this.m_invMassB=i.m_invMass,this.m_invIA=h.m_invI,this.m_invIB=i.m_invI,this.m_axis.SetV(e.MulMV(w.R,this.m_localXAxis1)),this.m_a1=(j+q)*this.m_axis.y-(k+r)*this.m_axis.x,this.m_a2=s*this.m_axis.y-t*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(e.MulMV(w.R,this.m_localYAxis1)),this.m_s1=(j+q)*this.m_perp.y-(k+r)*this.m_perp.x,this.m_s2=s*this.m_perp.y-t*this.m_perp.x,o=this.m_invMassA,p=this.m_invMassB,l=this.m_invIA,m=this.m_invIB,this.m_K.col1.x=o+p+l*this.m_s1*this.m_s1+m*this.m_s2*this.m_s2,this.m_K.col1.y=l*this.m_s1+m*this.m_s2,this.m_K.col1.z=l*this.m_s1*this.m_a1+m*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=l+m,this.m_K.col2.z=l*this.m_a1+m*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=o+p+l*this.m_a1*this.m_a1+m*this.m_a2*this.m_a2,this.m_enableLimit?(n=this.m_axis.x*j+this.m_axis.y*k,e.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b2Settings.b2_linearSlop?this.m_limitState=c.e_equalLimits:n<=this.m_lowerTranslation?this.m_limitState!==c.e_atLowerLimit&&(this.m_limitState=c.e_atLowerLimit,this.m_impulse.z=0):n>=this.m_upperTranslation?this.m_limitState!==c.e_atUpperLimit&&(this.m_limitState=c.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=c.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=c.e_inactiveLimit,this.m_enableMotor===!1&&(this.m_motorImpulse=0),a.warmStarting?(this.m_impulse.x*=a.dtRatio,this.m_impulse.y*=a.dtRatio,this.m_motorImpulse*=a.dtRatio,f=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,g=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,b=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,d=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,h.m_linearVelocity.x-=this.m_invMassA*f,h.m_linearVelocity.y-=this.m_invMassA*g,h.m_angularVelocity-=this.m_invIA*b,i.m_linearVelocity.x+=this.m_invMassB*f,i.m_linearVelocity.y+=this.m_invMassB*g,i.m_angularVelocity+=this.m_invIB*d):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},b.prototype.SolveVelocityConstraints=function(a){var b,d,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;n=this.m_bodyA,o=this.m_bodyB,y=n.m_linearVelocity,A=n.m_angularVelocity,z=o.m_linearVelocity,B=o.m_angularVelocity,l=0,m=0,j=0,k=0,this.m_enableMotor&&this.m_limitState!==c.e_equalLimits&&(b=this.m_axis.x*(z.x-y.x)+this.m_axis.y*(z.y-y.y)+this.m_a2*B-this.m_a1*A,v=this.m_motorMass*(this.m_motorSpeed-b),x=this.m_motorImpulse,w=a.dt*this.m_maxMotorForce,this.m_motorImpulse=e.Clamp(this.m_motorImpulse+v,-w,w),v=this.m_motorImpulse-x,l=v*this.m_axis.x,m=v*this.m_axis.y,j=v*this.m_a1,k=v*this.m_a2,y.x-=this.m_invMassA*l,y.y-=this.m_invMassA*m,A-=this.m_invIA*j,z.x+=this.m_invMassB*l,z.y+=this.m_invMassB*m,B+=this.m_invIB*k),d=this.m_perp.x*(z.x-y.x)+this.m_perp.y*(z.y-y.y)+this.m_s2*B-this.m_s1*A,h=B-A,this.m_enableLimit&&this.m_limitState!==c.e_inactiveLimit?(i=this.m_axis.x*(z.x-y.x)+this.m_axis.y*(z.y-y.y)+this.m_a2*B-this.m_a1*A,t=this.m_impulse.Copy(),r=this.m_K.Solve33(new g,-d,-h,-i),this.m_impulse.Add(r),this.m_limitState===c.e_atLowerLimit?this.m_impulse.z=e.Max(this.m_impulse.z,0):this.m_limitState===c.e_atUpperLimit&&(this.m_impulse.z=e.Min(this.m_impulse.z,0)),p=-d-(this.m_impulse.z-t.z)*this.m_K.col3.x,q=-h-(this.m_impulse.z-t.z)*this.m_K.col3.y,u=this.m_K.Solve22(new f,p,q),u.x+=t.x,u.y+=t.y,this.m_impulse.x=u.x,this.m_impulse.y=u.y,r.x=this.m_impulse.x-t.x,r.y=this.m_impulse.y-t.y,r.z=this.m_impulse.z-t.z,l=r.x*this.m_perp.x+r.z*this.m_axis.x,m=r.x*this.m_perp.y+r.z*this.m_axis.y,j=r.x*this.m_s1+r.y+r.z*this.m_a1,k=r.x*this.m_s2+r.y+r.z*this.m_a2,y.x-=this.m_invMassA*l,y.y-=this.m_invMassA*m,A-=this.m_invIA*j,z.x+=this.m_invMassB*l,z.y+=this.m_invMassB*m,B+=this.m_invIB*k):(s=this.m_K.Solve22(new f,-d,-h),this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,l=s.x*this.m_perp.x,m=s.x*this.m_perp.y,j=s.x*this.m_s1+s.y,k=s.x*this.m_s2+s.y,y.x-=this.m_invMassA*l,y.y-=this.m_invMassA*m,A-=this.m_invIA*j,z.x+=this.m_invMassB*l,z.y+=this.m_invMassB*m,B+=this.m_invIB*k),n.m_linearVelocity.SetV(y),n.m_angularVelocity=A,o.m_linearVelocity.SetV(z),o.m_angularVelocity=B},b.prototype.SolvePositionConstraints=function(a){var b,c,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q;return void 0===a&&(a=0),F=0,J=0,s=this.m_bodyA,t=this.m_bodyB,u=s.m_sweep.c,o=s.m_sweep.a,v=t.m_sweep.c,p=t.m_sweep.a,O=void 0,P=0,H=0,I=0,y=0,z=0,G=0,r=0,q=!1,h=0,m=d.FromAngle(o),n=d.FromAngle(p),O=m,K=this.m_localAnchor1.x-this.m_localCenterA.x,L=this.m_localAnchor1.y-this.m_localCenterA.y,P=O.col1.x*K+O.col2.x*L,L=O.col1.y*K+O.col2.y*L,K=P,O=n,M=this.m_localAnchor2.x-this.m_localCenterB.x,N=this.m_localAnchor2.y-this.m_localCenterB.y,P=O.col1.x*M+O.col2.x*N,N=O.col1.y*M+O.col2.y*N,M=P,w=v.x+M-u.x-K,x=v.y+N-u.y-L,this.m_enableLimit&&(this.m_axis=e.MulMV(m,this.m_localXAxis1),this.m_a1=(w+K)*this.m_axis.y-(x+L)*this.m_axis.x,this.m_a2=M*this.m_axis.y-N*this.m_axis.x,Q=this.m_axis.x*w+this.m_axis.y*x,e.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b2Settings.b2_linearSlop?(h=e.Clamp(Q,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection),G=e.Abs(Q),q=!0):Q<=this.m_lowerTranslation?(h=e.Clamp(Q-this.m_lowerTranslation+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),G=this.m_lowerTranslation-Q,q=!0):Q>=this.m_upperTranslation&&(h=e.Clamp(Q-this.m_upperTranslation+b2Settings.b2_linearSlop,0,b2Settings.b2_maxLinearCorrection),G=Q-this.m_upperTranslation,q=!0)),this.m_perp=e.MulMV(m,this.m_localYAxis1),this.m_s1=(w+K)*this.m_perp.y-(x+L)*this.m_perp.x,this.m_s2=M*this.m_perp.y-N*this.m_perp.x,A=new g,b=this.m_perp.x*w+this.m_perp.y*x,c=p-o-this.m_refAngle,G=e.Max(G,e.Abs(b)),r=e.Abs(c),q?(H=this.m_invMassA,I=this.m_invMassB,y=this.m_invIA,z=this.m_invIB,this.m_K.col1.x=H+I+y*this.m_s1*this.m_s1+z*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+z*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+z*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+z,this.m_K.col2.z=y*this.m_a1+z*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=H+I+y*this.m_a1*this.m_a1+z*this.m_a2*this.m_a2,this.m_K.Solve33(A,-b,-c,-h)):(H=this.m_invMassA,I=this.m_invMassB,y=this.m_invIA,z=this.m_invIB,C=H+I+y*this.m_s1*this.m_s1+z*this.m_s2*this.m_s2,D=y*this.m_s1+z*this.m_s2,E=y+z,this.m_K.col1.Set(C,D,0),this.m_K.col2.Set(D,E,0),B=this.m_K.Solve22(new f,-b,-c),A.x=B.x,A.y=B.y,A.z=0),k=A.x*this.m_perp.x+A.z*this.m_axis.x,l=A.x*this.m_perp.y+A.z*this.m_axis.y,i=A.x*this.m_s1+A.y+A.z*this.m_a1,j=A.x*this.m_s2+A.y+A.z*this.m_a2,u.x-=this.m_invMassA*k,u.y-=this.m_invMassA*l,o-=this.m_invIA*i,v.x+=this.m_invMassB*k,v.y+=this.m_invMassB*l,p+=this.m_invIB*j,s.m_sweep.a=o,t.m_sweep.a=p,s.SynchronizeTransform(),t.SynchronizeTransform(),G<=b2Settings.b2_linearSlop&&r<=b2Settings.b2_angularSlop},b}(c)},{"../../index":103}],96:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2PrismaticJointDef=function(a){function b(){this.localAnchorA=new e,this.localAnchorB=new e,this.localAxisA=new e,this.type=c.e_prismaticJoint,this.localAxisA.Set(1,0)}return g(b,a),b.prototype.type=c.e_prismaticJoint,b.prototype.localAnchorA=null,b.prototype.localAnchorB=null,b.prototype.localAxisA=null,b.prototype.referenceAngle=0,b.prototype.enableLimit=!1,b.prototype.lowerTranslation=0,b.prototype.upperTranslation=0,b.prototype.enableMotor=!1,b.prototype.maxMotorForce=0,b.prototype.motorSpeed=0,b.prototype.Initialize=function(a,b,c,d){this.bodyA=a,this.bodyB=b,this.localAnchorA=this.bodyA.GetLocalPoint(c),this.localAnchorB=this.bodyB.GetLocalPoint(c),this.localAxisA=this.bodyA.GetLocalVector(d),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},b}(d)},{"../../index":103}],97:[function(a){var b,c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,f=b.Common.Math.b2Vec2,d=b.Common.Math.b2Mat22,g=b.Common.Math.b2Vec3,e=b.Common.Math.b2Math,b.Dynamics.Joints.b2PulleyJoint=function(a){function b(a){b.__super__.constructor.call(this,a),this.m_groundAnchor1=new f,this.m_groundAnchor2=new f,this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_u1=new f,this.m_u2=new f,this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=a.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=a.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=a.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=a.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(a.localAnchorA),this.m_localAnchor2.SetV(a.localAnchorB),this.m_ratio=a.ratio,this.m_constant=a.lengthA+this.m_ratio*a.lengthB,this.m_maxLength1=e.Min(a.maxLengthA,this.m_constant-this.m_ratio*b.b2_minPulleyLength),this.m_maxLength2=e.Min(a.maxLengthB,(this.m_constant-b.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0}return i(b,a),b.b2_minPulleyLength=2,b.prototype.m_localXAxis1=null,b.prototype.m_localYAxis1=null,b.prototype.m_u1=null,b.prototype.m_u2=null,b.prototype.m_ground=null,b.prototype.m_ratio=0,b.prototype.m_constant=0,b.prototype.m_maxLength1=0,b.prototype.m_maxLength2=0,b.prototype.m_impulse=0,b.prototype.m_limitImpulse1=0,b.prototype.m_limitImpulse2=0,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new f(a*this.m_impulse*this.m_u2.x,a*this.m_impulse*this.m_u2.y)},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),0},b.prototype.GetGroundAnchorA=function(){var a;return a=this.m_ground.m_xf.position.Copy(),a.Add(this.m_groundAnchor1),a},b.prototype.GetGroundAnchorB=function(){var a;return a=this.m_ground.m_xf.position.Copy(),a.Add(this.m_groundAnchor2),a},b.prototype.GetLength1=function(){var a,b,c,d,e;return c=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),d=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,e=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,a=c.x-d,b=c.y-e,Math.sqrt(a*a+b*b)},b.prototype.GetLength2=function(){var a,b,c,d,e;return c=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),d=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,e=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,a=c.x-d,b=c.y-e,Math.sqrt(a*a+b*b)},b.prototype.GetRatio=function(){return this.m_ratio},b.prototype.InitVelocityConstraints=function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;h=this.m_bodyA,i=this.m_bodyB,z=void 0,z=h.m_xf.R,r=this.m_localAnchor1.x-h.m_sweep.localCenter.x,s=this.m_localAnchor1.y-h.m_sweep.localCenter.y,A=z.col1.x*r+z.col2.x*s,s=z.col1.y*r+z.col2.y*s,r=A,z=i.m_xf.R,t=this.m_localAnchor2.x-i.m_sweep.localCenter.x,u=this.m_localAnchor2.y-i.m_sweep.localCenter.y,A=z.col1.x*t+z.col2.x*u,u=z.col1.y*t+z.col2.y*u,t=A,n=h.m_sweep.c.x+r,o=h.m_sweep.c.y+s,p=i.m_sweep.c.x+t,q=i.m_sweep.c.y+u,v=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,w=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,x=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,y=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,this.m_u1.Set(n-v,o-w),this.m_u2.Set(p-x,q-y),l=this.m_u1.Length(),m=this.m_u2.Length(),l>b2Settings.b2_linearSlop?this.m_u1.Multiply(1/l):this.m_u1.SetZero(),m>b2Settings.b2_linearSlop?this.m_u2.Multiply(1/m):this.m_u2.SetZero(),b=this.m_constant-l-this.m_ratio*m,b>0?(this.m_state=c.e_inactiveLimit,this.m_impulse=0):this.m_state=c.e_atUpperLimit,l<this.m_maxLength1?(this.m_limitState1=c.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=c.e_atUpperLimit,m<this.m_maxLength2?(this.m_limitState2=c.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=c.e_atUpperLimit,j=r*this.m_u1.y-s*this.m_u1.x,k=t*this.m_u2.y-u*this.m_u2.x,this.m_limitMass1=h.m_invMass+h.m_invI*j*j,this.m_limitMass2=i.m_invMass+i.m_invI*k*k,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,a.warmStarting?(this.m_impulse*=a.dtRatio,this.m_limitImpulse1*=a.dtRatio,this.m_limitImpulse2*=a.dtRatio,d=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,e=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,f=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,g=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y,h.m_linearVelocity.x+=h.m_invMass*d,h.m_linearVelocity.y+=h.m_invMass*e,h.m_angularVelocity+=h.m_invI*(r*e-s*d),i.m_linearVelocity.x+=i.m_invMass*f,i.m_linearVelocity.y+=i.m_invMass*g,i.m_angularVelocity+=i.m_invI*(t*g-u*f)):(this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0)},b.prototype.SolveVelocityConstraints=function(){var a,b,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;h=this.m_bodyA,i=this.m_bodyB,p=void 0,p=h.m_xf.R,l=this.m_localAnchor1.x-h.m_sweep.localCenter.x,m=this.m_localAnchor1.y-h.m_sweep.localCenter.y,q=p.col1.x*l+p.col2.x*m,m=p.col1.y*l+p.col2.y*m,l=q,p=i.m_xf.R,n=this.m_localAnchor2.x-i.m_sweep.localCenter.x,o=this.m_localAnchor2.y-i.m_sweep.localCenter.y,q=p.col1.x*n+p.col2.x*o,o=p.col1.y*n+p.col2.y*o,n=q,r=0,s=0,t=0,u=0,b=0,d=0,f=0,g=0,a=0,j=0,k=0,this.m_state===c.e_atUpperLimit&&(r=h.m_linearVelocity.x+-h.m_angularVelocity*m,s=h.m_linearVelocity.y+h.m_angularVelocity*l,t=i.m_linearVelocity.x+-i.m_angularVelocity*o,u=i.m_linearVelocity.y+i.m_angularVelocity*n,a=-(this.m_u1.x*r+this.m_u1.y*s)-this.m_ratio*(this.m_u2.x*t+this.m_u2.y*u),j=this.m_pulleyMass*-a,k=this.m_impulse,this.m_impulse=e.Max(0,this.m_impulse+j),j=this.m_impulse-k,b=-j*this.m_u1.x,d=-j*this.m_u1.y,f=-this.m_ratio*j*this.m_u2.x,g=-this.m_ratio*j*this.m_u2.y,h.m_linearVelocity.x+=h.m_invMass*b,h.m_linearVelocity.y+=h.m_invMass*d,h.m_angularVelocity+=h.m_invI*(l*d-m*b),i.m_linearVelocity.x+=i.m_invMass*f,i.m_linearVelocity.y+=i.m_invMass*g,i.m_angularVelocity+=i.m_invI*(n*g-o*f)),this.m_limitState1===c.e_atUpperLimit&&(r=h.m_linearVelocity.x+-h.m_angularVelocity*m,s=h.m_linearVelocity.y+h.m_angularVelocity*l,a=-(this.m_u1.x*r+this.m_u1.y*s),j=-this.m_limitMass1*a,k=this.m_limitImpulse1,this.m_limitImpulse1=e.Max(0,this.m_limitImpulse1+j),j=this.m_limitImpulse1-k,b=-j*this.m_u1.x,d=-j*this.m_u1.y,h.m_linearVelocity.x+=h.m_invMass*b,h.m_linearVelocity.y+=h.m_invMass*d,h.m_angularVelocity+=h.m_invI*(l*d-m*b)),this.m_limitState2===c.e_atUpperLimit&&(t=i.m_linearVelocity.x+-i.m_angularVelocity*o,u=i.m_linearVelocity.y+i.m_angularVelocity*n,a=-(this.m_u2.x*t+this.m_u2.y*u),j=-this.m_limitMass2*a,k=this.m_limitImpulse2,this.m_limitImpulse2=e.Max(0,this.m_limitImpulse2+j),j=this.m_limitImpulse2-k,f=-j*this.m_u2.x,g=-j*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*f,i.m_linearVelocity.y+=i.m_invMass*g,i.m_angularVelocity+=i.m_invI*(n*g-o*f))},b.prototype.SolvePositionConstraints=function(a){var b,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return void 0===a&&(a=0),d=this.m_bodyA,f=this.m_bodyB,y=void 0,u=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,v=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,w=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,x=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,q=0,r=0,s=0,t=0,m=0,n=0,o=0,p=0,h=0,i=0,b=0,g=0,k=0,l=0,z=0,j=0,this.m_state===c.e_atUpperLimit&&(y=d.m_xf.R,q=this.m_localAnchor1.x-d.m_sweep.localCenter.x,r=this.m_localAnchor1.y-d.m_sweep.localCenter.y,z=y.col1.x*q+y.col2.x*r,r=y.col1.y*q+y.col2.y*r,q=z,y=f.m_xf.R,s=this.m_localAnchor2.x-f.m_sweep.localCenter.x,t=this.m_localAnchor2.y-f.m_sweep.localCenter.y,z=y.col1.x*s+y.col2.x*t,t=y.col1.y*s+y.col2.y*t,s=z,m=d.m_sweep.c.x+q,n=d.m_sweep.c.y+r,o=f.m_sweep.c.x+s,p=f.m_sweep.c.y+t,this.m_u1.Set(m-u,n-v),this.m_u2.Set(o-w,p-x),h=this.m_u1.Length(),i=this.m_u2.Length(),h>b2Settings.b2_linearSlop?this.m_u1.Multiply(1/h):this.m_u1.SetZero(),i>b2Settings.b2_linearSlop?this.m_u2.Multiply(1/i):this.m_u2.SetZero(),b=this.m_constant-h-this.m_ratio*i,j=e.Max(j,-b),b=e.Clamp(b+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),g=-this.m_pulleyMass*b,m=-g*this.m_u1.x,n=-g*this.m_u1.y,o=-this.m_ratio*g*this.m_u2.x,p=-this.m_ratio*g*this.m_u2.y,d.m_sweep.c.x+=d.m_invMass*m,d.m_sweep.c.y+=d.m_invMass*n,d.m_sweep.a+=d.m_invI*(q*n-r*m),f.m_sweep.c.x+=f.m_invMass*o,f.m_sweep.c.y+=f.m_invMass*p,f.m_sweep.a+=f.m_invI*(s*p-t*o),d.SynchronizeTransform(),f.SynchronizeTransform()),this.m_limitState1===c.e_atUpperLimit&&(y=d.m_xf.R,q=this.m_localAnchor1.x-d.m_sweep.localCenter.x,r=this.m_localAnchor1.y-d.m_sweep.localCenter.y,z=y.col1.x*q+y.col2.x*r,r=y.col1.y*q+y.col2.y*r,q=z,m=d.m_sweep.c.x+q,n=d.m_sweep.c.y+r,this.m_u1.Set(m-u,n-v),h=this.m_u1.Length(),h>b2Settings.b2_linearSlop?(this.m_u1.x*=1/h,this.m_u1.y*=1/h):this.m_u1.SetZero(),b=this.m_maxLength1-h,j=e.Max(j,-b),b=e.Clamp(b+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),g=-this.m_limitMass1*b,m=-g*this.m_u1.x,n=-g*this.m_u1.y,d.m_sweep.c.x+=d.m_invMass*m,d.m_sweep.c.y+=d.m_invMass*n,d.m_sweep.a+=d.m_invI*(q*n-r*m),d.SynchronizeTransform()),this.m_limitState2===c.e_atUpperLimit&&(y=f.m_xf.R,s=this.m_localAnchor2.x-f.m_sweep.localCenter.x,t=this.m_localAnchor2.y-f.m_sweep.localCenter.y,z=y.col1.x*s+y.col2.x*t,t=y.col1.y*s+y.col2.y*t,s=z,o=f.m_sweep.c.x+s,p=f.m_sweep.c.y+t,this.m_u2.Set(o-w,p-x),i=this.m_u2.Length(),i>b2Settings.b2_linearSlop?(this.m_u2.x*=1/i,this.m_u2.y*=1/i):this.m_u2.SetZero(),b=this.m_maxLength2-i,j=e.Max(j,-b),b=e.Clamp(b+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0),g=-this.m_limitMass2*b,o=-g*this.m_u2.x,p=-g*this.m_u2.y,f.m_sweep.c.x+=f.m_invMass*o,f.m_sweep.c.y+=f.m_invMass*p,f.m_sweep.a+=f.m_invI*(s*p-t*o),f.SynchronizeTransform()),j<b2Settings.b2_linearSlop},b}(c)},{"../../index":103}],98:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2PulleyJointDef=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.groundAnchorA=new e,this.groundAnchorB=new e,this.localAnchorA=new e,this.localAnchorB=new e,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0)}return g(b,a),b.prototype.type=c.e_pulleyJoint,b.prototype.groundAnchorA=null,b.prototype.groundAnchorB=null,b.prototype.localAnchorA=null,b.prototype.localAnchorB=null,b.prototype.lengthA=0,b.prototype.maxLengthA=0,b.prototype.lengthB=0,b.prototype.maxLengthB=0,b.prototype.ratio=1,b.prototype.collideConnected=!0,b.prototype.Initialize=function(a,b,c,d,e,f,g){var h,i,j,k,l;void 0===g&&(g=0),this.bodyA=a,this.bodyB=b,this.groundAnchorA.SetV(c),this.groundAnchorB.SetV(d),this.localAnchorA=this.bodyA.GetLocalPoint(e),this.localAnchorB=this.bodyB.GetLocalPoint(f),i=e.x-c.x,j=e.y-c.y,this.lengthA=Math.sqrt(i*i+j*j),k=f.x-d.x,l=f.y-d.y,this.lengthB=Math.sqrt(k*k+l*l),this.ratio=g,h=this.lengthA+this.ratio*this.lengthB,this.maxLengthA=h-this.ratio*b2PulleyJoint.b2_minPulleyLength,this.maxLengthB=(h-b2PulleyJoint.b2_minPulleyLength)/this.ratio},b}(d)},{"../../index":103}],99:[function(a){var b,c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,f=b.Common.Math.b2Vec2,d=b.Common.Math.b2Mat22,g=b.Common.Math.b2Vec3,e=b.Common.Math.b2Math,b.Dynamics.Joints.b2RevoluteJoint=function(a){function b(a){b.__super__.constructor.call(this,a),this.K=new d,this.K1=new d,this.K2=new d,this.K3=new d,this.impulse3=new g,this.impulse2=new f,this.reduced=new f,this.m_localAnchor1=new f,this.m_localAnchor2=new f,this.m_impulse=new g,this.m_mass=new b2Mat33,this.m_localAnchor1.SetV(a.localAnchorA),this.m_localAnchor2.SetV(a.localAnchorB),this.m_referenceAngle=a.referenceAngle,this.m_impulse.SetZero(),this.m_lowerAngle=a.lowerAngle,this.m_upperAngle=a.upperAngle,this.m_maxMotorTorque=a.maxMotorTorque,this.m_motorSpeed=a.motorSpeed,this.m_enableLimit=a.enableLimit,this.m_enableMotor=a.enableMotor}return i(b,a),b.tImpulse=new f,b.prototype.K=null,b.prototype.K1=null,b.prototype.K2=null,b.prototype.K3=null,b.prototype.impulse2=null,b.prototype.impulse3=null,b.prototype.reduced=null,b.prototype.m_impulse=null,b.prototype.m_mass=0,b.prototype.m_referenceAngle=0,b.prototype.m_motorImpulse=0,b.prototype.m_lowerAngle=0,b.prototype.m_upperAngle=0,b.prototype.m_maxMotorTorque=0,b.prototype.m_motorSpeed=0,b.prototype.m_enableLimit=0,b.prototype.m_enableMotor=!1,b.prototype.m_limitState=c.e_inactiveLimit,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new f(a*this.m_impulse.x,a*this.m_impulse.y)},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),a*this.m_impulse.z},b.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},b.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},b.prototype.IsLimitEnabled=function(){return this.m_enableLimit},b.prototype.EnableLimit=function(a){this.m_enableLimit=a},b.prototype.GetLowerLimit=function(){return this.m_lowerAngle},b.prototype.GetUpperLimit=function(){return this.m_upperAngle},b.prototype.SetLimits=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.m_lowerAngle=a,this.m_upperAngle=b},b.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},b.prototype.EnableMotor=function(a){this.m_enableMotor=a},b.prototype.SetMotorSpeed=function(a){void 0===a&&(a=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=a},b.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b.prototype.SetMaxMotorTorque=function(a){void 0===a&&(a=0),this.m_maxMotorTorque=a},b.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},b.prototype.InitVelocityConstraints=function(a){var b,d,f,g,h,i,j,k,l,m,n,o,p,q,r;f=this.m_bodyA,g=this.m_bodyB,q=void 0,r=0,q=f.m_xf.R,m=this.m_localAnchor1.x-f.m_sweep.localCenter.x,n=this.m_localAnchor1.y-f.m_sweep.localCenter.y,r=q.col1.x*m+q.col2.x*n,n=q.col1.y*m+q.col2.y*n,m=r,q=g.m_xf.R,o=this.m_localAnchor2.x-g.m_sweep.localCenter.x,p=this.m_localAnchor2.y-g.m_sweep.localCenter.y,r=q.col1.x*o+q.col2.x*p,p=q.col1.y*o+q.col2.y*p,o=r,k=f.m_invMass,l=g.m_invMass,h=f.m_invI,i=g.m_invI,this.m_mass.col1.x=k+l+n*n*h+p*p*i,this.m_mass.col2.x=-n*m*h-p*o*i,this.m_mass.col3.x=-n*h-p*i,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=k+l+m*m*h+o*o*i,this.m_mass.col3.y=m*h+o*i,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=h+i,this.m_motorMass=1/(h+i),this.m_enableMotor===!1&&(this.m_motorImpulse=0),this.m_enableLimit?(j=g.m_sweep.a-f.m_sweep.a-this.m_referenceAngle,e.Abs(this.m_upperAngle-this.m_lowerAngle)<2*b2Settings.b2_angularSlop?this.m_limitState=c.e_equalLimits:j<=this.m_lowerAngle?(this.m_limitState!==c.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=c.e_atLowerLimit):j>=this.m_upperAngle?(this.m_limitState!==c.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=c.e_atUpperLimit):(this.m_limitState=c.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=c.e_inactiveLimit,a.warmStarting?(this.m_impulse.x*=a.dtRatio,this.m_impulse.y*=a.dtRatio,this.m_motorImpulse*=a.dtRatio,b=this.m_impulse.x,d=this.m_impulse.y,f.m_linearVelocity.x-=k*b,f.m_linearVelocity.y-=k*d,f.m_angularVelocity-=h*(m*d-n*b+this.m_motorImpulse+this.m_impulse.z),g.m_linearVelocity.x+=l*b,g.m_linearVelocity.y+=l*d,g.m_angularVelocity+=i*(o*d-p*b+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},b.prototype.SolveVelocityConstraints=function(a){var b,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;j=this.m_bodyA,k=this.m_bodyB,x=void 0,y=0,r=0,t=0,u=0,v=0,w=0,z=j.m_linearVelocity,B=j.m_angularVelocity,A=k.m_linearVelocity,C=k.m_angularVelocity,o=j.m_invMass,p=k.m_invMass,l=j.m_invI,m=k.m_invI,this.m_enableMotor&&this.m_limitState!==c.e_equalLimits&&(b=C-B-this.m_motorSpeed,n=this.m_motorMass*-b,s=this.m_motorImpulse,q=a.dt*this.m_maxMotorTorque,this.m_motorImpulse=e.Clamp(this.m_motorImpulse+n,-q,q),n=this.m_motorImpulse-s,B-=l*n,C+=m*n),this.m_enableLimit&&this.m_limitState!==c.e_inactiveLimit?(x=j.m_xf.R,t=this.m_localAnchor1.x-j.m_sweep.localCenter.x,u=this.m_localAnchor1.y-j.m_sweep.localCenter.y,y=x.col1.x*t+x.col2.x*u,u=x.col1.y*t+x.col2.y*u,t=y,x=k.m_xf.R,v=this.m_localAnchor2.x-k.m_sweep.localCenter.x,w=this.m_localAnchor2.y-k.m_sweep.localCenter.y,y=x.col1.x*v+x.col2.x*w,w=x.col1.y*v+x.col2.y*w,v=y,d=A.x+-C*w-z.x- -B*u,f=A.y+C*v-z.y-B*t,g=C-B,this.m_mass.Solve33(this.impulse3,-d,-f,-g),this.m_limitState===c.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState===c.e_atLowerLimit?(r=this.m_impulse.z+this.impulse3.z,0>r&&(this.m_mass.Solve22(this.reduced,-d,-f),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)):this.m_limitState===c.e_atUpperLimit&&(r=this.m_impulse.z+this.impulse3.z,r>0&&(this.m_mass.Solve22(this.reduced,-d,-f),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)),z.x-=o*this.impulse3.x,z.y-=o*this.impulse3.y,B-=l*(t*this.impulse3.y-u*this.impulse3.x+this.impulse3.z),A.x+=p*this.impulse3.x,A.y+=p*this.impulse3.y,C+=m*(v*this.impulse3.y-w*this.impulse3.x+this.impulse3.z)):(x=j.m_xf.R,t=this.m_localAnchor1.x-j.m_sweep.localCenter.x,u=this.m_localAnchor1.y-j.m_sweep.localCenter.y,y=x.col1.x*t+x.col2.x*u,u=x.col1.y*t+x.col2.y*u,t=y,x=k.m_xf.R,v=this.m_localAnchor2.x-k.m_sweep.localCenter.x,w=this.m_localAnchor2.y-k.m_sweep.localCenter.y,y=x.col1.x*v+x.col2.x*w,w=x.col1.y*v+x.col2.y*w,v=y,h=A.x+-C*w-z.x- -B*u,i=A.y+C*v-z.y-B*t,this.m_mass.Solve22(this.impulse2,-h,-i),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,z.x-=o*this.impulse2.x,z.y-=o*this.impulse2.y,B-=l*(t*this.impulse2.y-u*this.impulse2.x),A.x+=p*this.impulse2.x,A.y+=p*this.impulse2.y,C+=m*(v*this.impulse2.y-w*this.impulse2.x)),j.m_linearVelocity.SetV(z),j.m_angularVelocity=B,k.m_linearVelocity.SetV(A),k.m_angularVelocity=C},b.prototype.SolvePositionConstraints=function(a){var d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;return void 0===a&&(a=0),y=0,d=0,E=void 0,l=this.m_bodyA,m=this.m_bodyB,k=0,z=0,F=0,n=0,o=0,this.m_enableLimit&&this.m_limitState!==c.e_inactiveLimit&&(j=m.m_sweep.a-l.m_sweep.a-this.m_referenceAngle,w=0,this.m_limitState===c.e_equalLimits?(d=e.Clamp(j-this.m_lowerAngle,-b2Settings.b2_maxAngularCorrection,b2Settings.b2_maxAngularCorrection),w=-this.m_motorMass*d,k=e.Abs(d)):this.m_limitState===c.e_atLowerLimit?(d=j-this.m_lowerAngle,k=-d,d=e.Clamp(d+b2Settings.b2_angularSlop,-b2Settings.b2_maxAngularCorrection,0),w=-this.m_motorMass*d):this.m_limitState===c.e_atUpperLimit&&(d=j-this.m_upperAngle,k=d,d=e.Clamp(d-b2Settings.b2_angularSlop,0,b2Settings.b2_maxAngularCorrection),w=-this.m_motorMass*d),l.m_sweep.a-=l.m_invI*w,m.m_sweep.a+=m.m_invI*w,l.SynchronizeTransform(),m.SynchronizeTransform()),E=l.m_xf.R,A=this.m_localAnchor1.x-l.m_sweep.localCenter.x,B=this.m_localAnchor1.y-l.m_sweep.localCenter.y,F=E.col1.x*A+E.col2.x*B,B=E.col1.y*A+E.col2.y*B,A=F,E=m.m_xf.R,C=this.m_localAnchor2.x-m.m_sweep.localCenter.x,D=this.m_localAnchor2.y-m.m_sweep.localCenter.y,F=E.col1.x*C+E.col2.x*D,D=E.col1.y*C+E.col2.y*D,C=F,h=m.m_sweep.c.x+C-l.m_sweep.c.x-A,i=m.m_sweep.c.y+D-l.m_sweep.c.y-B,g=h*h+i*i,f=Math.sqrt(g),z=f,r=l.m_invMass,s=m.m_invMass,p=l.m_invI,q=m.m_invI,u=10*b2Settings.b2_linearSlop,g>u*u&&(G=h/f,H=i/f,t=r+s,x=1/t,n=x*-h,o=x*-i,v=.5,l.m_sweep.c.x-=v*r*n,l.m_sweep.c.y-=v*r*o,m.m_sweep.c.x+=v*s*n,m.m_sweep.c.y+=v*s*o,h=m.m_sweep.c.x+C-l.m_sweep.c.x-A,i=m.m_sweep.c.y+D-l.m_sweep.c.y-B),this.K1.col1.x=r+s,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=r+s,this.K2.col1.x=p*B*B,this.K2.col2.x=-p*A*B,this.K2.col1.y=-p*A*B,this.K2.col2.y=p*A*A,this.K3.col1.x=q*D*D,this.K3.col2.x=-q*C*D,this.K3.col1.y=-q*C*D,this.K3.col2.y=q*C*C,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(b.tImpulse,-h,-i),n=b.tImpulse.x,o=b.tImpulse.y,l.m_sweep.c.x-=l.m_invMass*n,l.m_sweep.c.y-=l.m_invMass*o,l.m_sweep.a-=l.m_invI*(A*o-B*n),m.m_sweep.c.x+=m.m_invMass*n,m.m_sweep.c.y+=m.m_invMass*o,m.m_sweep.a+=m.m_invI*(C*o-D*n),l.SynchronizeTransform(),m.SynchronizeTransform(),z<=b2Settings.b2_linearSlop&&k<=b2Settings.b2_angularSlop},b}(c)},{"../../index":103}],100:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2RevoluteJointDef=function(a){function b(){this.localAnchorA=new e,this.localAnchorB=new e,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0)}return g(b,a),b.prototype.type=c.e_revoluteJoint,b.prototype.localAnchorA=null,b.prototype.localAnchorB=null,b.prototype.referenceAngle=0,b.prototype.lowerAngle=0,b.prototype.upperAngle=0,b.prototype.maxMotorTorque=0,b.prototype.motorSpeed=0,b.prototype.enableLimit=!1,b.prototype.enableMotor=!1,b.prototype.Initialize=function(a,b,c){this.bodyA=a,this.bodyB=b,this.localAnchorA=this.bodyA.GetLocalPoint(c),this.localAnchorB=this.bodyB.GetLocalPoint(c),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()
},b}(d)},{"../../index":103}],101:[function(a){var b,c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),e=b.Common.Math.b2Vec2,f=b.Common.Math.b2Vec3,d=b.Common.Math.b2Mat33,c=b.Dynamics.Joints.b2Joint,b.Dynamics.Joints.b2WeldJoint=function(a){function b(a){b.__super__.constructor.call(this,a),this.m_localAnchorA=new e,this.m_localAnchorB=new e,this.m_impulse=new f,this.m_mass=new d,this.m_localAnchorA.SetV(a.localAnchorA),this.m_localAnchorB.SetV(a.localAnchorB),this.m_referenceAngle=a.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new d}return h(b,a),b.prototype.m_impulse=null,b.prototype.m_mass=null,b.prototype.m_referenceAngle=0,b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},b.prototype.GetReactionForce=function(a){return void 0===a&&(a=0),new e(a*this.m_impulse.x,a*this.m_impulse.y)},b.prototype.GetReactionTorque=function(a){return void 0===a&&(a=0),a*this.m_impulse.z},b.prototype.InitVelocityConstraints=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;l=void 0,m=0,b=this.m_bodyA,c=this.m_bodyB,l=b.m_xf.R,h=this.m_localAnchorA.x-b.m_sweep.localCenter.x,i=this.m_localAnchorA.y-b.m_sweep.localCenter.y,m=l.col1.x*h+l.col2.x*i,i=l.col1.y*h+l.col2.y*i,h=m,l=c.m_xf.R,j=this.m_localAnchorB.x-c.m_sweep.localCenter.x,k=this.m_localAnchorB.y-c.m_sweep.localCenter.y,m=l.col1.x*j+l.col2.x*k,k=l.col1.y*j+l.col2.y*k,j=m,f=b.m_invMass,g=c.m_invMass,d=b.m_invI,e=c.m_invI,this.m_mass.col1.x=f+g+i*i*d+k*k*e,this.m_mass.col2.x=-i*h*d-k*j*e,this.m_mass.col3.x=-i*d-k*e,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=f+g+h*h*d+j*j*e,this.m_mass.col3.y=h*d+j*e,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=d+e,a.warmStarting?(this.m_impulse.x*=a.dtRatio,this.m_impulse.y*=a.dtRatio,this.m_impulse.z*=a.dtRatio,b.m_linearVelocity.x-=f*this.m_impulse.x,b.m_linearVelocity.y-=f*this.m_impulse.y,b.m_angularVelocity-=d*(h*this.m_impulse.y-i*this.m_impulse.x+this.m_impulse.z),c.m_linearVelocity.x+=g*this.m_impulse.x,c.m_linearVelocity.y+=g*this.m_impulse.y,c.m_angularVelocity+=e*(j*this.m_impulse.y-k*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},b.prototype.SolveVelocityConstraints=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;p=void 0,q=0,d=this.m_bodyA,e=this.m_bodyB,r=d.m_linearVelocity,t=d.m_angularVelocity,s=e.m_linearVelocity,u=e.m_angularVelocity,j=d.m_invMass,k=e.m_invMass,g=d.m_invI,h=e.m_invI,p=d.m_xf.R,l=this.m_localAnchorA.x-d.m_sweep.localCenter.x,m=this.m_localAnchorA.y-d.m_sweep.localCenter.y,q=p.col1.x*l+p.col2.x*m,m=p.col1.y*l+p.col2.y*m,l=q,p=e.m_xf.R,n=this.m_localAnchorB.x-e.m_sweep.localCenter.x,o=this.m_localAnchorB.y-e.m_sweep.localCenter.y,q=p.col1.x*n+p.col2.x*o,o=p.col1.y*n+p.col2.y*o,n=q,a=s.x-u*o-r.x+t*m,b=s.y+u*n-r.y-t*l,c=u-t,i=new f,this.m_mass.Solve33(i,-a,-b,-c),this.m_impulse.Add(i),r.x-=j*i.x,r.y-=j*i.y,t-=g*(l*i.y-m*i.x+i.z),s.x+=k*i.x,s.y+=k*i.y,u+=h*(n*i.y-o*i.x+i.z),d.m_angularVelocity=t,e.m_angularVelocity=u},b.prototype.SolvePositionConstraints=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return void 0===a&&(a=0),t=void 0,u=0,g=this.m_bodyA,h=this.m_bodyB,t=g.m_xf.R,p=this.m_localAnchorA.x-g.m_sweep.localCenter.x,q=this.m_localAnchorA.y-g.m_sweep.localCenter.y,u=t.col1.x*p+t.col2.x*q,q=t.col1.y*p+t.col2.y*q,p=u,t=h.m_xf.R,r=this.m_localAnchorB.x-h.m_sweep.localCenter.x,s=this.m_localAnchorB.y-h.m_sweep.localCenter.y,u=t.col1.x*r+t.col2.x*s,s=t.col1.y*r+t.col2.y*s,r=u,m=g.m_invMass,n=h.m_invMass,i=g.m_invI,j=h.m_invI,b=h.m_sweep.c.x+r-g.m_sweep.c.x-p,c=h.m_sweep.c.y+s-g.m_sweep.c.y-q,d=h.m_sweep.a-g.m_sweep.a-this.m_referenceAngle,l=10*b2Settings.b2_linearSlop,o=Math.sqrt(b*b+c*c),e=b2Math.Abs(d),o>l&&(i*=1,j*=1),this.m_mass.col1.x=m+n+q*q*i+s*s*j,this.m_mass.col2.x=-q*p*i-s*r*j,this.m_mass.col3.x=-q*i-s*j,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=m+n+p*p*i+r*r*j,this.m_mass.col3.y=p*i+r*j,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=i+j,k=new f,this.m_mass.Solve33(k,-b,-c,-d),g.m_sweep.c.x-=m*k.x,g.m_sweep.c.y-=m*k.y,g.m_sweep.a-=i*(p*k.y-q*k.x+k.z),h.m_sweep.c.x+=n*k.x,h.m_sweep.c.y+=n*k.y,h.m_sweep.a+=j*(r*k.y-s*k.x+k.z),g.SynchronizeTransform(),h.SynchronizeTransform(),o<=b2Settings.b2_linearSlop&&e<=b2Settings.b2_angularSlop},b}(c)},{"../../index":103}],102:[function(a){var b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=a("../../index"),c=b.Dynamics.Joints.b2Joint,e=b.Common.Math.b2Vec2,d=b.Dynamics.Joints.b2JointDef,b.Dynamics.Joints.b2WeldJointDef=function(a){function b(){this.localAnchorA=new e,this.localAnchorB=new e}return g(b,a),b.prototype.type=c.e_weldJoint,b.prototype.referenceAngle=0,b.prototype.localAnchorA=null,b.prototype.localAnchorB=null,b.prototype.Initialize=function(a,b,c){this.bodyA=a,this.bodyB=b,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(c)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},b}(d)},{"../../index":103}],103:[function(a,b){"use strict";var c;b.exports=c=function(){function a(){}return a.parseUInt=function(a){return Math.abs(parseInt(a))},a.Vector=function(a){var b,c;for(null==a&&(a=0),c=new Array(a),b=0;a>b;)c[b]=0,++b;return c},a.equals=function(a,b){var c;return null===a?!1:b instanceof Function&&a instanceof b?!0:(null!=(c=a.constructor.__implements)?c[b.name]:void 0)?!0:!1},a.generateCallback=function(a,b){return function(){b.apply(a,arguments)}},a}(),c.Common=function(){function a(){}return a}(),c.Common.Math=function(){function a(){}return a}(),a("./common/math/b2Vec2"),a("./common/math/b2Vec3"),a("./common/math/b2Mat22"),a("./common/math/b2Mat33"),a("./common/math/b2Sweep"),a("./common/math/b2Transform"),a("./common/math/b2Math"),a("./common/b2Color"),a("./common/b2Settings"),c.Collision=function(){function a(){}return a}(),c.Collision.Shapes=function(){function a(){}return a}(),a("./collision/shapes/b2Shape"),a("./collision/shapes/b2CircleShape"),a("./collision/shapes/b2PolygonShape"),a("./collision/shapes/b2EdgeChainDef"),a("./collision/shapes/b2EdgeShape"),a("./collision/shapes/b2MassData"),a("./collision/Features"),a("./collision/b2ContactID"),a("./collision/ClipVertex"),a("./collision/b2AABB"),a("./collision/b2SimplexCache"),a("./collision/b2Bound"),a("./collision/b2BoundValues"),a("./collision/b2ManifoldPoint"),a("./collision/b2Manifold"),a("./collision/b2Collision"),a("./collision/b2ContactPoint"),a("./collision/b2SimplexVertex"),a("./collision/b2Simplex"),a("./collision/b2Distance"),a("./collision/b2DistanceInput"),a("./collision/b2DistanceOutput"),a("./collision/b2DistanceProxy"),a("./collision/b2DynamicTreeNode"),a("./collision/b2DynamicTree"),a("./collision/b2DynamicTreePair"),a("./collision/b2DynamicTreeBroadPhase"),a("./collision/b2Point"),a("./collision/b2RayCastInput"),a("./collision/b2RayCastOutput"),a("./collision/b2Segment"),a("./collision/b2SeparationFunction"),a("./collision/b2TimeOfImpact"),a("./collision/b2TOIInput"),a("./collision/b2WorldManifold"),c.Dynamics=function(){function a(){}return a}(),a("./dynamics/b2FilterData"),a("./dynamics/b2TimeStep"),c.Dynamics.Contacts=function(){function a(){}return a}(),a("./dynamics/contacts/b2ContactRegister"),a("./dynamics/contacts/b2ContactResult"),a("./dynamics/contacts/b2ContactEdge"),a("./dynamics/contacts/b2ContactConstraintPoint"),a("./dynamics/contacts/b2ContactConstraint"),a("./dynamics/contacts/b2Contact"),a("./dynamics/contacts/b2CircleContact"),a("./dynamics/contacts/b2PositionSolverManifold"),a("./dynamics/contacts/b2ContactSolver"),a("./dynamics/contacts/b2EdgeAndCircleContact"),a("./dynamics/contacts/b2NullContact"),a("./dynamics/contacts/b2PolyAndCircleContact"),a("./dynamics/contacts/b2PolyAndEdgeContact"),a("./dynamics/contacts/b2PolygonContact"),a("./dynamics/contacts/b2ContactFactory"),c.Dynamics.Controllers=function(){function a(){}return a}(),a("./dynamics/controllers/b2ControllerEdge"),a("./dynamics/controllers/b2Controller"),a("./dynamics/controllers/b2BuoyancyController"),a("./dynamics/controllers/b2ConstantAccelController"),a("./dynamics/controllers/b2ConstantForceController"),a("./dynamics/controllers/b2GravityController"),a("./dynamics/controllers/b2TensorDampingController"),c.Dynamics.Joints=function(){function a(){}return a}(),a("./dynamics/joints/b2Joint"),a("./dynamics/joints/b2JointDef"),a("./dynamics/joints/b2JointEdge"),a("./dynamics/joints/b2Jacobian"),a("./dynamics/joints/b2DistanceJoint"),a("./dynamics/joints/b2DistanceJointDef"),a("./dynamics/joints/b2FrictionJoint"),a("./dynamics/joints/b2FrictionJointDef"),a("./dynamics/joints/b2GearJoint"),a("./dynamics/joints/b2GearJointDef"),a("./dynamics/joints/b2LineJoint"),a("./dynamics/joints/b2LineJointDef"),a("./dynamics/joints/b2MouseJoint"),a("./dynamics/joints/b2MouseJointDef"),a("./dynamics/joints/b2PrismaticJoint"),a("./dynamics/joints/b2PrismaticJointDef"),a("./dynamics/joints/b2PulleyJoint"),a("./dynamics/joints/b2PulleyJointDef"),a("./dynamics/joints/b2RevoluteJoint"),a("./dynamics/joints/b2RevoluteJointDef"),a("./dynamics/joints/b2WeldJoint"),a("./dynamics/joints/b2WeldJointDef"),a("./dynamics/b2ContactListener"),a("./dynamics/b2ContactFilter"),a("./dynamics/b2Fixture"),a("./dynamics/b2ContactManager"),a("./dynamics/b2Body"),a("./dynamics/b2DebugDraw"),a("./dynamics/b2BodyDef"),a("./dynamics/b2ContactFilter"),a("./dynamics/b2ContactImpulse"),a("./dynamics/b2FixtureDef"),a("./dynamics/b2Island"),a("./dynamics/b2World"),a("./dynamics/b2DestructionListener")},{"./collision/ClipVertex":1,"./collision/Features":2,"./collision/b2AABB":3,"./collision/b2Bound":4,"./collision/b2BoundValues":5,"./collision/b2Collision":6,"./collision/b2ContactID":7,"./collision/b2ContactPoint":8,"./collision/b2Distance":9,"./collision/b2DistanceInput":10,"./collision/b2DistanceOutput":11,"./collision/b2DistanceProxy":12,"./collision/b2DynamicTree":13,"./collision/b2DynamicTreeBroadPhase":14,"./collision/b2DynamicTreeNode":15,"./collision/b2DynamicTreePair":16,"./collision/b2Manifold":17,"./collision/b2ManifoldPoint":18,"./collision/b2Point":19,"./collision/b2RayCastInput":20,"./collision/b2RayCastOutput":21,"./collision/b2Segment":22,"./collision/b2SeparationFunction":23,"./collision/b2Simplex":24,"./collision/b2SimplexCache":25,"./collision/b2SimplexVertex":26,"./collision/b2TOIInput":27,"./collision/b2TimeOfImpact":28,"./collision/b2WorldManifold":29,"./collision/shapes/b2CircleShape":30,"./collision/shapes/b2EdgeChainDef":31,"./collision/shapes/b2EdgeShape":32,"./collision/shapes/b2MassData":33,"./collision/shapes/b2PolygonShape":34,"./collision/shapes/b2Shape":35,"./common/b2Color":36,"./common/b2Settings":37,"./common/math/b2Mat22":38,"./common/math/b2Mat33":39,"./common/math/b2Math":40,"./common/math/b2Sweep":41,"./common/math/b2Transform":42,"./common/math/b2Vec2":43,"./common/math/b2Vec3":44,"./dynamics/b2Body":45,"./dynamics/b2BodyDef":46,"./dynamics/b2ContactFilter":47,"./dynamics/b2ContactImpulse":48,"./dynamics/b2ContactListener":49,"./dynamics/b2ContactManager":50,"./dynamics/b2DebugDraw":51,"./dynamics/b2DestructionListener":52,"./dynamics/b2FilterData":53,"./dynamics/b2Fixture":54,"./dynamics/b2FixtureDef":55,"./dynamics/b2Island":56,"./dynamics/b2TimeStep":57,"./dynamics/b2World":58,"./dynamics/contacts/b2CircleContact":59,"./dynamics/contacts/b2Contact":60,"./dynamics/contacts/b2ContactConstraint":61,"./dynamics/contacts/b2ContactConstraintPoint":62,"./dynamics/contacts/b2ContactEdge":63,"./dynamics/contacts/b2ContactFactory":64,"./dynamics/contacts/b2ContactRegister":65,"./dynamics/contacts/b2ContactResult":66,"./dynamics/contacts/b2ContactSolver":67,"./dynamics/contacts/b2EdgeAndCircleContact":68,"./dynamics/contacts/b2NullContact":69,"./dynamics/contacts/b2PolyAndCircleContact":70,"./dynamics/contacts/b2PolyAndEdgeContact":71,"./dynamics/contacts/b2PolygonContact":72,"./dynamics/contacts/b2PositionSolverManifold":73,"./dynamics/controllers/b2BuoyancyController":74,"./dynamics/controllers/b2ConstantAccelController":75,"./dynamics/controllers/b2ConstantForceController":76,"./dynamics/controllers/b2Controller":77,"./dynamics/controllers/b2ControllerEdge":78,"./dynamics/controllers/b2GravityController":79,"./dynamics/controllers/b2TensorDampingController":80,"./dynamics/joints/b2DistanceJoint":81,"./dynamics/joints/b2DistanceJointDef":82,"./dynamics/joints/b2FrictionJoint":83,"./dynamics/joints/b2FrictionJointDef":84,"./dynamics/joints/b2GearJoint":85,"./dynamics/joints/b2GearJointDef":86,"./dynamics/joints/b2Jacobian":87,"./dynamics/joints/b2Joint":88,"./dynamics/joints/b2JointDef":89,"./dynamics/joints/b2JointEdge":90,"./dynamics/joints/b2LineJoint":91,"./dynamics/joints/b2LineJointDef":92,"./dynamics/joints/b2MouseJoint":93,"./dynamics/joints/b2MouseJointDef":94,"./dynamics/joints/b2PrismaticJoint":95,"./dynamics/joints/b2PrismaticJointDef":96,"./dynamics/joints/b2PulleyJoint":97,"./dynamics/joints/b2PulleyJointDef":98,"./dynamics/joints/b2RevoluteJoint":99,"./dynamics/joints/b2RevoluteJointDef":100,"./dynamics/joints/b2WeldJoint":101,"./dynamics/joints/b2WeldJointDef":102}]},{},[103])(103)});